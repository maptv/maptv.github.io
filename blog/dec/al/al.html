<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.56">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Laptev">

<title>Martin Laptev</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<link href="../../../media/deidek.svg" rel="icon" type="image/svg+xml">
<script src="../../../site_libs/quarto-html/quarto.js"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "/",
    "?",
    "h",
    "f",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="../../../styles.css">
<meta name="twitter:title" content="Martin Laptev">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../../media/deidek.svg" alt="Decagon made up of 100 triangles" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../../index.html">
    <span class="navbar-title">Martin Laptev</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">Decalendar</li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.github.com/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-linkedin"></i></a>
    <a href="mailto:maptv@engineer.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope-at"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../about/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-info-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../cv/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-earmark-person" role="img">
</i> 
 <span class="menu-text">CV/R√©sum√©</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../../blog/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-pencil" role="img">
</i> 
 <span class="menu-text">Blog</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/git/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-git" role="img">
</i> 
 <span class="menu-text">Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/vscode/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-code" role="img">
</i> 
 <span class="menu-text">VSCode</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/jupyter/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-journal-richtext" role="img">
</i> 
 <span class="menu-text">Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/quarto/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-markdown" role="img">
</i> 
 <span class="menu-text">Quarto Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/observable/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-0-circle" role="img">
</i> 
 <span class="menu-text">Observable</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/prob/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-dice-5" role="img">
</i> 
 <span class="menu-text">Probablity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../../blog/llm/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-translate" role="img">
</i> 
 <span class="menu-text">Language Models</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content column-page-right" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Decalendar</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta column-page-right">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Martin Laptev </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="9" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 8;"><span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`# Decalendar`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="13" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 12;"><span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The table below shows the current Zone 0 [Timestamp](https://en.wikipedia.org/wiki/Timestamp#:~:text=a%20sequence%20of%20characters%20or%20encoded%20information%20identifying%20when%20a%20certain%20event%20occurred) and the [Leap Cycle](https://en.wikipedia.org/wiki/Solar_cycle_%28calendar%29) Length of twelve Dec calendars (decalendars), sorted by [Epoch](https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era). Dec is a [measurement system](https://en.wikipedia.org/wiki/System_of_units_of_measurement#:~:text=a%20collection%20of%20units%20of%20measurement%20and%20rules%20relating%20them%20to%20each%20other) that [I](https://maptv.github.io) created to measure‚è≥time,üìçposition,üß≠orientation,üìêangles, andüîÑcycles in [turns](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=a%20unit%20of%20plane%20angle%20measurement%20equal%20to%202%CF%80%C2%A0radians%2C%20360%C2%A0degrees) ([</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\t</span><span class="vs">au`</span><span class="sc">}</span><span class="vs">](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=the%20Greek%20letter,to%20one%20turn)) instead of months, weeks, hours, minutes, seconds, and degrees.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb3" data-startfrom="17" data-syntax-error-position="248" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 16;"><span id="cb3-17"><a href="#cb3-17"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>md`<span class="op">|</span> <span class="bu">Calendar</span>     <span class="op">|</span> <span class="bu">Timestamp</span>     <span class="op">|</span> Leap Cycle Length                                    <span class="op">|</span> Epoch          <span class="op">|</span> Symbol <span class="op">|</span> </span>
<span id="cb3-19"><a href="#cb3-19"></a><span class="op">|</span> <span class="op">------------</span> <span class="op">|</span> <span class="op">-------------</span> <span class="op">|</span> <span class="op">----------------------------------------------------</span> <span class="op">|</span> <span class="op">--------------</span> <span class="op">|</span> <span class="op">---</span> <span class="op">|</span> </span>
<span id="cb3-20"><a href="#cb3-20"></a><span class="op">|</span> Thai         <span class="op">|</span> `$<span class="op">{</span>thaiDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>thaiEpoch<span class="op">}</span>` <span class="op">|</span> üáπüá≠  <span class="op">|</span></span>
<span id="cb3-21"><a href="#cb3-21"></a><span class="op">|</span> Nepali       <span class="op">|</span> `$<span class="op">{</span>nepaDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>nepaEpoch<span class="op">}</span>` <span class="op">|</span> üá≥üáµ  <span class="op">|</span></span>
<span id="cb3-22"><a href="#cb3-22"></a><span class="op">|</span> Gregorian    <span class="op">|</span> `$<span class="op">{</span>gregDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `<span class="dv">0</span>`            <span class="op">|</span> Ô∏é‚ôÅ   <span class="op">|</span></span>
<span id="cb3-23"><a href="#cb3-23"></a><span class="op">|</span> Ethiopian    <span class="op">|</span> `$<span class="op">{</span>ethiDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">3</span><span class="op">&amp;</span>nbsp<span class="op">;&amp;</span>nbsp<span class="op">;</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">1</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>           <span class="op">|</span> `$<span class="op">{</span>ethiEpoch<span class="op">}</span>` <span class="op">|</span> Ô∏éüá™üáπ  <span class="op">|</span></span>
<span id="cb3-24"><a href="#cb3-24"></a><span class="op">|</span> Indian       <span class="op">|</span> `$<span class="op">{</span>indiDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>indiEpoch<span class="op">}</span>` <span class="op">|</span> üáÆüá≥  <span class="op">|</span></span>
<span id="cb3-25"><a href="#cb3-25"></a><span class="op">|</span> Bengali      <span class="op">|</span> `$<span class="op">{</span>bengDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>bengEpoch<span class="op">}</span>` <span class="op">|</span> üáßüá©Ô∏é  <span class="op">|</span></span>
<span id="cb3-26"><a href="#cb3-26"></a><span class="op">|</span> Solar Hijiri <span class="op">|</span> `$<span class="op">{</span>soHiDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">25</span><span class="op">&amp;</span>nbsp<span class="op">;</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">8</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                <span class="op">|</span> `$<span class="op">{</span>sohiEpoch<span class="op">}</span>` <span class="op">|</span> ‚ò´   <span class="op">|</span> </span>
<span id="cb3-27"><a href="#cb3-27"></a><span class="op">|</span> Lunar Hijiri <span class="op">|</span> `$<span class="op">{</span>luHiDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">354</span> x <span class="dv">19</span><span class="op">&amp;</span>nbsp<span class="op">;</span> <span class="op">+</span> <span class="dv">355</span> x <span class="dv">11</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>               <span class="op">|</span> `$<span class="op">{</span>luhiEpoch<span class="op">}</span>` <span class="op">|</span> ‚ò™   <span class="op">|</span> </span>
<span id="cb3-28"><a href="#cb3-28"></a><span class="op">|</span> Minguo       <span class="op">|</span> `$<span class="op">{</span>mingDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>mingEpoch<span class="op">}</span>` <span class="op">|</span> üáπüáº  <span class="op">|</span></span>
<span id="cb3-29"><a href="#cb3-29"></a><span class="op">|</span> Japanese     <span class="op">|</span> `$<span class="op">{</span>japaDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">365</span> x <span class="dv">303</span> <span class="op">+</span> <span class="dv">366</span> x <span class="dv">97</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>                    <span class="op">|</span> `$<span class="op">{</span>japaEpoch<span class="op">}</span>` <span class="op">|</span> üáØüáµÔ∏é  <span class="op">|</span></span>
<span id="cb3-30"><a href="#cb3-30"></a><span class="op">|</span> Martian      <span class="op">|</span> `$<span class="op">{</span>marsDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">668</span> x <span class="dv">8</span><span class="op">&amp;</span>nbsp<span class="op">;&amp;</span>nbsp<span class="op">;</span> <span class="op">+</span> <span class="dv">669</span> x <span class="dv">13</span><span class="op">&lt;/</span>code<span class="op">&gt;</span>          <span class="op">|</span> `$<span class="op">{</span>marsEpochDote<span class="op">.</span><span class="fu">toFixed</span><span class="op">(</span><span class="dv">5</span><span class="op">)}</span>` <span class="op">|</span> ‚ôÇ   <span class="op">|</span> </span>
<span id="cb3-31"><a href="#cb3-31"></a><span class="op">|</span> Lunar        <span class="op">|</span> `$<span class="op">{</span>moonDeco<span class="op">}</span>` <span class="op">|</span> <span class="op">&lt;</span>code<span class="op">&gt;</span><span class="dv">28</span> <span class="op">&amp;</span>nbsp<span class="op">;</span>x <span class="dv">7</span><span class="op">&amp;</span>nbsp<span class="op">;&amp;</span>nbsp<span class="op">;</span> <span class="op">+</span> <span class="dv">29</span><span class="op">&amp;</span>nbsp<span class="op">;</span> x <span class="dv">9</span><span class="op">&lt;/</span>code<span class="op">&gt;</span> <span class="op">|</span> `$<span class="op">{</span>moonEpoch<span class="op">.</span><span class="fu">toFixed</span><span class="op">(</span><span class="dv">5</span><span class="op">)}</span>` <span class="op">|</span> ‚òæ   <span class="op">|</span> `</span>
<span id="cb3-32"><a href="#cb3-32"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 20, column 19)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb4" data-startfrom="34" data-syntax-error-position="137" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 33;"><span id="cb4-34"><a href="#cb4-34"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb4-35"><a href="#cb4-35"></a>md`The timestamp format in the table above is described in the <span class="op">[</span>Dec <span class="fu">calculations</span> <span class="op">(</span>Decalc<span class="op">)</span> notebook<span class="op">](/</span><span class="at">@dec</span><span class="op">/</span>alc<span class="op">)</span> and can be summarized as `year<span class="op">+</span>dday<span class="op">.</span><span class="fu">dday</span><span class="op">-</span>z`<span class="op">,</span> where `year` is the current year<span class="op">,</span> `dday<span class="op">.</span><span class="fu">dday</span>` is the <span class="op">[</span>decidays<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Decimal_time#Fractional_days:~:text=dividing%20the%20day%20into%2010%20decidays) since the year started, and `z` is the time zone.`</span></span>
<span id="cb4-36"><a href="#cb4-36"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 35, column 138)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="38" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 37;"><span id="cb5-38"><a href="#cb5-38" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The map below shows countries where the Gregorian calendar is not the only official calendar. Even though it emphasizes Gregorian calendar alternatives, the map demonstrates the near total dominance of the Gregorian calendar.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="42" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 41;"><span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mikima/wikipedia-grey-green-orthographic-projections-maps-gener/2?collection=@mikima/wikipedia-locator-maps</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/ae1fd7593b805eeb</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/d/87ba6f2ef516421a</span></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@bayre/svg-swatches</span></span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a>globe <span class="op">=</span> {</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> div <span class="op">=</span> d3</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">create</span>(<span class="st">"div"</span>)</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"height"</span><span class="op">,</span> width)</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"position"</span><span class="op">,</span> <span class="st">"static"</span>)<span class="op">;</span></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> div</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"svg"</span>)</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> width)</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> width)</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-top"</span><span class="op">,</span> <span class="st">"20px"</span>)</span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"margin-bottom"</span><span class="op">,</span> <span class="vs">`-</span><span class="sc">${</span>width <span class="op">/</span> <span class="dv">80</span><span class="sc">}</span><span class="vs">px`</span>)</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>    <span class="co">// .attr("viewBox", `0 0 ${width &lt; 700 ? width * 1.5 : width} ${width &lt; 700 ? width * 1.5 : width}`)</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">// .style("border", "solid 1px black");</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> p1 <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span><span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> p2 <span class="op">=</span> [<span class="dv">0</span><span class="op">,</span><span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  countries<span class="op">.</span><span class="at">features</span><span class="op">.</span><span class="fu">forEach</span>(d <span class="kw">=&gt;</span> {d<span class="op">.</span><span class="at">selected</span> <span class="op">=</span> <span class="kw">false</span>})</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>(projection)</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create the radial gradient</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> radialGradient <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"defs"</span>)</span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"radialGradient"</span>)</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> width <span class="op">*</span> <span class="fl">0.48</span>)</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> width <span class="op">*</span> <span class="fl">0.35</span>)</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> width <span class="op">*</span> <span class="fl">0.64</span>)</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"grSea"</span>)</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"gradientUnits"</span><span class="op">,</span><span class="st">"userSpaceOnUse"</span>)</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0"</span>)</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0.5"</span>)</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.006</span>)</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0.56"</span>)</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.009</span>)</span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0.64"</span>)</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.017</span>)</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0.7"</span>)</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.039</span>)</span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"0.74"</span>)</span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.055</span>)</span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>  radialGradient<span class="op">.</span><span class="fu">append</span>(<span class="st">"stop"</span>)</span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">attr</span>(<span class="st">"offset"</span><span class="op">,</span> <span class="st">"1"</span>)</span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-color"</span><span class="op">,</span> <span class="st">"#000000"</span>) </span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">style</span>(<span class="st">"stop-opacity"</span><span class="op">,</span> <span class="fl">0.142</span>)</span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a>  <span class="co">// create background cicle</span></span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span>width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#C7E7FB"</span>)</span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> luhiGreg <span class="op">=</span> [</span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Afghanistan"</span><span class="op">,</span></span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Libya"</span><span class="op">,</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Yemen"</span><span class="op">,</span></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Algeria"</span><span class="op">,</span></span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Saudi Arabia"</span><span class="op">,</span></span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Egypt"</span><span class="op">,</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Somalia"</span><span class="op">,</span></span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Iraq"</span><span class="op">,</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Jordan"</span><span class="op">,</span></span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Libya"</span><span class="op">,</span></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Mauritania"</span><span class="op">,</span></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Morocco"</span><span class="op">,</span></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Oman"</span><span class="op">,</span></span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Pakistan"</span><span class="op">,</span></span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Saudi Arabia"</span><span class="op">,</span></span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Somalia"</span><span class="op">,</span></span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Tunisia"</span><span class="op">,</span></span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>    <span class="st">"United Arab Emirates"</span><span class="op">,</span></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> colors <span class="op">=</span> d3<span class="op">.</span><span class="at">schemeCategory10</span><span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemeDark2</span>)<span class="op">;</span></span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> countriesPath <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"countries"</span>)</span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(countries<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">formal_en</span>)</span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)</span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"#656565"</span>)</span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"#C12838"</span> <span class="op">:</span> <span class="st">"#FDFBEA"</span>)</span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> luhiGreg<span class="op">.</span><span class="fu">includes</span>(d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span>) <span class="op">?</span> colors[<span class="dv">0</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Ethiopia"</span> <span class="op">?</span> colors[<span class="dv">1</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Israel"</span> <span class="op">?</span> colors[<span class="dv">2</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Iran"</span> <span class="op">?</span> colors[<span class="dv">3</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"India"</span> <span class="op">?</span> colors[<span class="dv">4</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Nepal"</span> <span class="op">?</span> colors[<span class="dv">5</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Bangladesh"</span> <span class="op">?</span> colors[<span class="dv">6</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Myanmar"</span> <span class="op">?</span> colors[<span class="dv">7</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Thailand"</span> <span class="op">?</span> colors[<span class="dv">8</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Taiwan"</span> <span class="op">?</span> colors [<span class="dv">9</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"North Korea"</span> <span class="op">?</span> colors[<span class="dv">10</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Japan"</span> <span class="op">?</span> colors[<span class="dv">11</span>] <span class="op">:</span> <span class="st">"#FDFBEA"</span>)</span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"2"</span> <span class="op">:</span> <span class="st">"1"</span>)</span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"click"</span><span class="op">,</span> <span class="kw">function</span>(d){</span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a>        <span class="co">// invert selection</span></span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a>        d<span class="op">.</span><span class="at">selected</span> <span class="op">=</span> <span class="op">!</span>d<span class="op">.</span><span class="at">selected</span><span class="op">;</span></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a>        <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(d)<span class="op">;</span></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a>        countriesPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d <span class="kw">=&gt;</span> luhiGreg<span class="op">.</span><span class="fu">includes</span>(d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span>) <span class="op">?</span> colors[<span class="dv">0</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Ethiopia"</span> <span class="op">?</span> colors[<span class="dv">1</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Israel"</span> <span class="op">?</span> colors[<span class="dv">2</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Iran"</span> <span class="op">?</span> colors[<span class="dv">3</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"India"</span> <span class="op">?</span> colors[<span class="dv">4</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Nepal"</span> <span class="op">?</span> colors[<span class="dv">5</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Bangladesh"</span> <span class="op">?</span> colors[<span class="dv">6</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Myanmar"</span> <span class="op">?</span> colors[<span class="dv">7</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Thailand"</span> <span class="op">?</span> colors[<span class="dv">8</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Taiwan"</span> <span class="op">?</span> colors [<span class="dv">9</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"North Korea"</span> <span class="op">?</span> colors[<span class="dv">10</span>] <span class="op">:</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">name_en</span> <span class="op">===</span> <span class="st">"Japan"</span> <span class="op">?</span> colors[<span class="dv">11</span>] <span class="op">:</span> <span class="st">"#FDFBEA"</span>)</span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"#C12838"</span> <span class="op">:</span> <span class="st">"#656565"</span>)</span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"2"</span> <span class="op">:</span> <span class="st">"1"</span>)</span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span>(d) {</span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a>                              <span class="cf">if</span>(d<span class="op">.</span><span class="at">selected</span>){</span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>                                 <span class="co">// bring on top</span></span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>                                 d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">raise</span>()</span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>                              }</span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>                            })</span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>        <span class="co">// show disputed zones</span></span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(showDisputed){</span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> selected <span class="op">=</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">adm0_a3</span><span class="op">;</span></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a>          disputedPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"display"</span><span class="op">,</span><span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a>          disputedPath<span class="op">.</span><span class="fu">filter</span>(e <span class="kw">=&gt;</span> e<span class="op">.</span><span class="at">properties</span>[<span class="st">'disputed-territories_Claimants_ISO'</span>]<span class="op">.</span><span class="fu">includes</span>(selected))</span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"display"</span><span class="op">,</span> d<span class="kw">=&gt;</span>{<span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(d)<span class="op">;</span> <span class="cf">return</span> <span class="kw">null</span>})</span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(showDisputed){</span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a>          <span class="kw">const</span> selected <span class="op">=</span> d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">adm0_a3</span><span class="op">;</span></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a>          disputedPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"display"</span><span class="op">,</span><span class="st">"none"</span>)<span class="op">;</span></span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>          disputedPath<span class="op">.</span><span class="fu">filter</span>(e <span class="kw">=&gt;</span> e<span class="op">.</span><span class="at">properties</span>[<span class="st">'disputed-territories_Claimants_ISO'</span>]<span class="op">.</span><span class="fu">includes</span>(selected))</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">attr</span>(<span class="st">"display"</span><span class="op">,</span> d<span class="kw">=&gt;</span>{<span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(d)<span class="op">;</span> <span class="cf">return</span> <span class="kw">null</span>})</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>        <span class="co">// set up transition</span></span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>        <span class="kw">let</span> newCentroid <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoCentroid</span>(d)<span class="op">.</span><span class="fu">map</span>(v <span class="kw">=&gt;</span> <span class="op">-</span>v)</span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>        projection<span class="op">.</span><span class="fu">rotate</span>(newCentroid)<span class="op">;</span></span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>        path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>(projection)<span class="op">;</span></span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a>        graticulePath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)<span class="op">;</span></span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a>        countriesPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)<span class="op">;</span></span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a>        disputedPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)<span class="op">;</span></span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseover"</span><span class="op">,</span> <span class="kw">function</span>() {</span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"#C12838"</span> <span class="op">:</span> <span class="st">"#656565"</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"3"</span> <span class="op">:</span> <span class="st">"2"</span>)<span class="op">.</span><span class="fu">raise</span>()<span class="op">;</span> </span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"mouseout"</span><span class="op">,</span> <span class="kw">function</span>() { </span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"#C12838"</span> <span class="op">:</span> <span class="st">"#656565"</span>)<span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">selected</span> <span class="op">?</span> <span class="st">"2"</span> <span class="op">:</span> <span class="st">"1"</span>)</span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>      })</span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>                               </span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a> <span class="kw">const</span> disputedPath <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"disputed areas"</span>)</span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)</span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"path"</span>)</span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">data</span>(disputed<span class="op">.</span><span class="at">features</span>)</span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> d<span class="kw">=&gt;</span>d<span class="op">.</span><span class="at">properties</span><span class="op">.</span><span class="at">geometry</span>)</span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)</span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"#C12838AA"</span>)</span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span><span class="fl">0.5</span>)</span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"display"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a> <span class="kw">function</span> <span class="fu">render</span>() {</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a>    <span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(<span class="st">"Render"</span>)</span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a>    path <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoPath</span>(projection)</span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a>    graticulePath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)</span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a>    countriesPath<span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)</span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a>    <span class="co">// add graticule</span></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a> <span class="kw">const</span> graticulePath <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"path"</span>)</span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">datum</span>(graticule)</span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"graticule"</span>)</span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"#656565"</span>)</span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="fl">0.8</span>)</span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="fl">0.3</span>)</span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"d"</span><span class="op">,</span> path)</span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a>          <span class="op">.</span><span class="fu">attr</span>(<span class="st">"pointer-events"</span><span class="op">,</span><span class="st">"none"</span>)</span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a>  <span class="co">// append shaded circle and outer line</span></span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span>width<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"url(#grSea)"</span>)</span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a>    <span class="co">//.attr("stroke-width",1.5)</span></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"pointer-events"</span><span class="op">,</span><span class="st">"none"</span>)</span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a>    svg</span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(<span class="fu">drag</span>(projection)</span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag.render"</span><span class="op">,</span> () <span class="kw">=&gt;</span> <span class="fu">render</span>()))</span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(() <span class="kw">=&gt;</span> <span class="fu">render</span>())</span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a>   div</span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"div"</span>)</span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"position"</span><span class="op">,</span> <span class="st">"absolute"</span>)</span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"top"</span><span class="op">,</span> <span class="st">"-20px"</span>)</span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"left"</span><span class="op">,</span> <span class="st">"0px"</span>)</span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(() <span class="kw">=&gt;</span></span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a>      <span class="fu">Swatches</span>(</span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a>        d3<span class="op">.</span><span class="fu">scaleOrdinal</span>(</span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a>          [<span class="st">"Lunar Hijiri"</span><span class="op">,</span> <span class="st">"Ethiopian"</span><span class="op">,</span> <span class="st">"Hebrew"</span><span class="op">,</span> <span class="st">"Solar Hijiri"</span><span class="op">,</span> <span class="st">"Indian"</span><span class="op">,</span> <span class="st">"Nepali"</span><span class="op">,</span> <span class="st">"Bengali"</span><span class="op">,</span> <span class="st">"Burmese"</span><span class="op">,</span> <span class="st">"Thai"</span><span class="op">,</span> <span class="st">"Minguo"</span><span class="op">,</span> <span class="st">"Juche"</span><span class="op">,</span> <span class="st">"Japanese"</span>]<span class="op">,</span></span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>          colors</span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span> </span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> div<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="261" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 260;"><span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`For more Dec maps like the one above, check out these notebooks:</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a><span class="vs">- [Decalc](/@dec/alc)</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a><span class="vs">- [Decaliper](/@dec/ali)</span></span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a><span class="vs">- [Decirc](/@dec/irc)</span></span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a><span class="vs">- [Declock](/@dec/loc)</span></span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a><span class="vs">- [Solar terminator](/@dec/solar-terminator)</span></span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a><span class="vs">- [The Sun's view of the Earth](/@dec/the-suns-view-of-the-earth)`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="271" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 270;"><span id="cb8-271"><a href="#cb8-271" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Dec measures time using year and days. A year is a turn of one [celestial body](https://en.wikipedia.org/wiki/Astronomical_object#:~:text=a%20single%2C%20tightly%20bound%2C%20contiguous%20entity) around [the point it orbits](https://en.wikipedia.org/wiki/Barycenter_%28astronomy%29#:~:text=the%20point%20about%20which%20the%20bodies%20orbit) and a day is a turn of a celestial body on [its axis](https://en.wikipedia.org/wiki/Axial_tilt#:~:text=the%20imaginary%20line%20that%20passes%20through%20both%20the%20north%20pole%20and%20south%20pole). The Earth (the blue circle labeled </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`</span><span class="sc">\r</span><span class="vs">aisebox{2pt}{üú®}`</span><span class="sc">}</span><span class="vs"> below) makes 365.24 turns on its axis in a year and Mars (red circle labeled ‚ôÇ below) turns on its axis 668.59 times per year.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="275" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 274;"><span id="cb9-275"><a href="#cb9-275" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`In the case of [tidally locked](https://en.wikipedia.org/wiki/Tidal_locking#:~:text=the%20objects%20reaches-,a%20state%20where%20there%20is%20no%20longer%20any%20net%20change%20in%20its%20rotation%20rate%20over%20the%20course%20of%20a%20complete%20orbit,-.%20In%20the%20case) moons, such as the [Earth's moon](https://en.wikipedia.org/wiki/Moon#:~:text=Earth%27s%20only%20natural%20satellite) (‚òæ), Decalendar uses [tidal days](https://oceanservice.noaa.gov/education/tutorial_tides/tides05_lunarday.html#:~:text=the%20time%20it%20takes%20for%20a%20specific%20site%20on%20the%20Earth%20to%20rotate%20from%20an%20exact%20point%20under%20the%20moon%20to%20the%20same%20point%20under%20the%20moon),   instead of [synodic](https://en.wikipedia.org/wiki/Synodic_day#:~:text=the%20period%20for%20a%20celestial%20object%20to%20rotate%20once%20in%20relation%20to%20the%20star%20it%20is%20orbiting) or [sidereal](https://en.wikipedia.org/wiki/Sidereal_time#:~:text=a%20star%20seen%20at%20one%20position%20in%20the%20sky%20will%20be%20seen%20at%20the%20same%20position%20on%20another%20night%20at%20the%20same%20time%20of%20day%20%28or%20night%29%2C%20if%20the%20day%20is%20defined%20as%20a%20sidereal%20day) days, because tidal locking causes synodic days to be infinite and sidereal days to have the same duration as a year.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="279" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 278;"><span id="cb10-279"><a href="#cb10-279" aria-hidden="true" tabindex="-1"></a>chart <span class="op">=</span> {</span>
<span id="cb10-280"><a href="#cb10-280" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">create</span>(<span class="st">"svg"</span>)</span>
<span id="cb10-281"><a href="#cb10-281" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"viewBox"</span><span class="op">,</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> system_width<span class="op">,</span> height <span class="op">/</span> <span class="fl">1.5</span>])</span>
<span id="cb10-282"><a href="#cb10-282" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> system_width <span class="op">*</span> <span class="fl">1.6</span>)     </span>
<span id="cb10-283"><a href="#cb10-283" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> height <span class="op">/</span> <span class="fl">1.4</span>)</span>
<span id="cb10-284"><a href="#cb10-284" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"SVGchart"</span>)<span class="op">;</span></span>
<span id="cb10-285"><a href="#cb10-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-286"><a href="#cb10-286" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Dark background</span></span>
<span id="cb10-287"><a href="#cb10-287" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb10-288"><a href="#cb10-288" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> <span class="st">"320%"</span>)</span>
<span id="cb10-289"><a href="#cb10-289" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> <span class="st">"120%"</span>)</span>
<span id="cb10-290"><a href="#cb10-290" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> <span class="op">-</span>width<span class="op">/</span><span class="dv">3</span> <span class="op">+</span> <span class="st">","</span> <span class="op">+</span> <span class="op">-</span>height<span class="op">/</span><span class="fl">128.02</span> <span class="op">+</span> <span class="st">")"</span>)</span>
<span id="cb10-291"><a href="#cb10-291" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> dark_background<span class="op">?</span> <span class="st">"#000"</span><span class="op">:</span><span class="st">"#FFF"</span>)<span class="op">;</span>  </span>
<span id="cb10-292"><a href="#cb10-292" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-293"><a href="#cb10-293" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Planet group</span></span>
<span id="cb10-294"><a href="#cb10-294" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> container <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-295"><a href="#cb10-295" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"orbit_container"</span>)</span>
<span id="cb10-296"><a href="#cb10-296" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> width<span class="op">/</span><span class="fl">4.4</span> <span class="op">+</span> <span class="st">","</span> <span class="op">+</span> height<span class="op">/</span><span class="fl">3.02</span> <span class="op">+</span> <span class="st">")"</span>)<span class="op">;</span></span>
<span id="cb10-297"><a href="#cb10-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-298"><a href="#cb10-298" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Draw planets and moons</span></span>
<span id="cb10-299"><a href="#cb10-299" aria-hidden="true" tabindex="-1"></a>  container<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g.planet"</span>)<span class="op">.</span><span class="fu">data</span>(system_model <span class="op">==</span> <span class="dv">1</span> <span class="op">?</span> solar_system <span class="op">:</span> tychnonic_model)<span class="op">.</span><span class="fu">enter</span>()<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-300"><a href="#cb10-300" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"planet_cluster"</span>)</span>
<span id="cb10-301"><a href="#cb10-301" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span>(d<span class="op">,</span> i) {</span>
<span id="cb10-302"><a href="#cb10-302" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb10-303"><a href="#cb10-303" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"orbit"</span>)</span>
<span id="cb10-304"><a href="#cb10-304" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> d<span class="op">.</span><span class="at">R</span>)<span class="op">;</span></span>
<span id="cb10-305"><a href="#cb10-305" aria-hidden="true" tabindex="-1"></a>      d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb10-306"><a href="#cb10-306" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> d<span class="op">.</span><span class="at">r</span>)</span>
<span id="cb10-307"><a href="#cb10-307" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span>d<span class="op">.</span><span class="at">R</span>)</span>
<span id="cb10-308"><a href="#cb10-308" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span><span class="dv">0</span>)</span>
<span id="cb10-309"><a href="#cb10-309" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> d<span class="op">.</span><span class="at">name</span>)</span>
<span id="cb10-310"><a href="#cb10-310" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"planet"</span>)<span class="op">;</span></span>
<span id="cb10-311"><a href="#cb10-311" aria-hidden="true" tabindex="-1"></a>     d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-312"><a href="#cb10-312" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> d<span class="op">.</span><span class="at">R</span> <span class="op">+</span> <span class="st">",0)"</span>)</span>
<span id="cb10-313"><a href="#cb10-313" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb10-314"><a href="#cb10-314" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> dark_background<span class="op">?</span> <span class="st">"white"</span><span class="op">:</span> <span class="st">"black"</span>)</span>
<span id="cb10-315"><a href="#cb10-315" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dx"</span><span class="op">,</span> <span class="vs">`</span><span class="sc">${</span>d<span class="op">.</span><span class="at">name</span> <span class="op">==</span> <span class="st">"Jupiter"</span> <span class="op">?</span> <span class="fl">2.46</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="op">.</span><span class="dv">65</span> <span class="op">:</span> d<span class="op">.</span><span class="at">name</span> <span class="op">==</span> <span class="st">"Earth"</span> <span class="op">?</span> <span class="op">.</span><span class="dv">87</span> <span class="op">:</span> d<span class="op">.</span><span class="at">name</span> <span class="op">==</span> <span class="st">"Saturn"</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="op">.</span><span class="dv">65</span> <span class="op">:</span> d<span class="op">.</span><span class="at">name</span> <span class="op">==</span> <span class="st">"Mars"</span> <span class="op">?</span> <span class="fl">1.5</span> <span class="op">:</span> d<span class="op">.</span><span class="at">name</span> <span class="op">==</span> <span class="st">"Sun"</span> <span class="op">?</span> <span class="op">.</span><span class="dv">5</span> <span class="op">:</span> <span class="op">.</span><span class="dv">3</span><span class="sc">}</span><span class="vs">em`</span>)</span>
<span id="cb10-316"><a href="#cb10-316" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.25em"</span>)</span>
<span id="cb10-317"><a href="#cb10-317" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">14</span>)</span>
<span id="cb10-318"><a href="#cb10-318" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-face"</span><span class="op">,</span> <span class="st">"Open Sans"</span>)</span>
<span id="cb10-319"><a href="#cb10-319" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">text</span>(d<span class="op">.</span><span class="at">symbol</span>))<span class="op">;</span></span>
<span id="cb10-320"><a href="#cb10-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-321"><a href="#cb10-321" aria-hidden="true" tabindex="-1"></a>     d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-322"><a href="#cb10-322" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> d<span class="op">.</span><span class="at">R</span> <span class="op">+</span> <span class="st">",0)"</span>)             </span>
<span id="cb10-323"><a href="#cb10-323" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"g.moon"</span>)<span class="op">.</span><span class="fu">data</span>(d<span class="op">.</span><span class="at">moons</span>)<span class="op">.</span><span class="fu">enter</span>()<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-324"><a href="#cb10-324" aria-hidden="true" tabindex="-1"></a>       <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> d<span class="op">.</span><span class="at">R</span> <span class="op">+</span> <span class="st">",0)"</span>)</span>
<span id="cb10-325"><a href="#cb10-325" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"moon_cluster"</span>)</span>
<span id="cb10-326"><a href="#cb10-326" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span>(d<span class="op">,</span> i) {</span>
<span id="cb10-327"><a href="#cb10-327" aria-hidden="true" tabindex="-1"></a>           <span class="co">// Conditions to display planets' moons. For the Earth, we always display the Moon</span></span>
<span id="cb10-328"><a href="#cb10-328" aria-hidden="true" tabindex="-1"></a>           <span class="cf">if</span>(<span class="op">!</span>system_model <span class="op">||</span>  heliocentric_options<span class="op">.</span><span class="at">display_moons</span> <span class="op">||</span> d<span class="op">.</span><span class="at">name</span><span class="op">==</span><span class="st">"Moon"</span> <span class="op">||</span> d<span class="op">.</span><span class="at">name</span><span class="op">==</span><span class="st">"Sun_path"</span>) {    </span>
<span id="cb10-329"><a href="#cb10-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-330"><a href="#cb10-330" aria-hidden="true" tabindex="-1"></a>     <span class="co">// Orbits are displayed</span></span>
<span id="cb10-331"><a href="#cb10-331" aria-hidden="true" tabindex="-1"></a>     <span class="cf">if</span>(<span class="op">!</span>(d<span class="op">.</span><span class="at">name</span><span class="op">==</span><span class="st">"Sun_path"</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>heliocentric_options<span class="op">.</span><span class="at">Sun_path</span>)){</span>
<span id="cb10-332"><a href="#cb10-332" aria-hidden="true" tabindex="-1"></a>       d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb10-333"><a href="#cb10-333" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"orbit_moon"</span>)</span>
<span id="cb10-334"><a href="#cb10-334" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> d<span class="op">.</span><span class="at">R</span>)</span>
<span id="cb10-335"><a href="#cb10-335" aria-hidden="true" tabindex="-1"></a>     }</span>
<span id="cb10-336"><a href="#cb10-336" aria-hidden="true" tabindex="-1"></a>     d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb10-337"><a href="#cb10-337" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> d<span class="op">.</span><span class="at">r</span>)</span>
<span id="cb10-338"><a href="#cb10-338" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span>d<span class="op">.</span><span class="at">R</span>)</span>
<span id="cb10-339"><a href="#cb10-339" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb10-340"><a href="#cb10-340" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> d<span class="op">.</span><span class="at">name</span>)</span>
<span id="cb10-341"><a href="#cb10-341" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"class"</span><span class="op">,</span> <span class="st">"moon"</span>)<span class="op">;</span></span>
<span id="cb10-342"><a href="#cb10-342" aria-hidden="true" tabindex="-1"></a>     d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb10-343"><a href="#cb10-343" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="st">"translate("</span> <span class="op">+</span> d<span class="op">.</span><span class="at">R</span> <span class="op">+</span> <span class="st">",0)"</span>)</span>
<span id="cb10-344"><a href="#cb10-344" aria-hidden="true" tabindex="-1"></a>         <span class="op">.</span><span class="fu">call</span>(g <span class="kw">=&gt;</span> g<span class="op">.</span><span class="fu">append</span>(<span class="st">"text"</span>)</span>
<span id="cb10-345"><a href="#cb10-345" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> dark_background<span class="op">?</span> <span class="st">"white"</span><span class="op">:</span> <span class="st">"black"</span>)</span>
<span id="cb10-346"><a href="#cb10-346" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dx"</span><span class="op">,</span> <span class="st">"0.5em"</span>)</span>
<span id="cb10-347"><a href="#cb10-347" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"dy"</span><span class="op">,</span> <span class="st">"0.5em"</span>)</span>
<span id="cb10-348"><a href="#cb10-348" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-size"</span><span class="op">,</span> <span class="dv">14</span>)</span>
<span id="cb10-349"><a href="#cb10-349" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">attr</span>(<span class="st">"font-face"</span><span class="op">,</span> <span class="st">"Open Sans"</span>)</span>
<span id="cb10-350"><a href="#cb10-350" aria-hidden="true" tabindex="-1"></a>           <span class="op">.</span><span class="fu">text</span>(d<span class="op">.</span><span class="at">symbol</span>))<span class="op">;</span></span>
<span id="cb10-351"><a href="#cb10-351" aria-hidden="true" tabindex="-1"></a>           }</span>
<span id="cb10-352"><a href="#cb10-352" aria-hidden="true" tabindex="-1"></a>         })<span class="op">;</span></span>
<span id="cb10-353"><a href="#cb10-353" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb10-354"><a href="#cb10-354" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb10-355"><a href="#cb10-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-356"><a href="#cb10-356" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb10-357"><a href="#cb10-357" aria-hidden="true" tabindex="-1"></a>  <span class="co">// throttle animation</span></span>
<span id="cb10-358"><a href="#cb10-358" aria-hidden="true" tabindex="-1"></a>  <span class="pp">setInterval</span>(<span class="kw">function</span>(){</span>
<span id="cb10-359"><a href="#cb10-359" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> delta <span class="op">=</span> (<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>() <span class="op">-</span> <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">setHours</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span><span class="op">,</span><span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb10-360"><a href="#cb10-360" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb10-361"><a href="#cb10-361" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".planet_cluster, .moon_cluster"</span>)</span>
<span id="cb10-362"><a href="#cb10-362" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="kw">function</span>(d) {</span>
<span id="cb10-363"><a href="#cb10-363" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> <span class="st">"rotate("</span> <span class="op">+</span> (d<span class="op">.</span><span class="at">phi0</span> <span class="op">+</span> (delta <span class="op">*</span> (d<span class="op">.</span><span class="at">speed</span> <span class="op">*</span> speed_factor<span class="op">/</span><span class="dv">1000</span>))) <span class="op">+</span> <span class="st">")"</span><span class="op">;</span></span>
<span id="cb10-364"><a href="#cb10-364" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb10-365"><a href="#cb10-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-366"><a href="#cb10-366" aria-hidden="true" tabindex="-1"></a>    <span class="co">// We do not rotate symbols</span></span>
<span id="cb10-367"><a href="#cb10-367" aria-hidden="true" tabindex="-1"></a>    svg<span class="op">.</span><span class="fu">selectAll</span>(<span class="st">"text"</span>)</span>
<span id="cb10-368"><a href="#cb10-368" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="kw">function</span>(d) {</span>
<span id="cb10-369"><a href="#cb10-369" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>((system_model <span class="op">==</span> <span class="dv">1</span>) <span class="op">||</span> (d<span class="op">.</span><span class="at">symbol</span> <span class="op">==</span> <span class="st">"‚äô"</span>) <span class="op">||</span> (d<span class="op">.</span><span class="at">symbol</span> <span class="op">==</span> <span class="st">"üú®"</span>) <span class="op">||</span> (d<span class="op">.</span><span class="at">symbol</span> <span class="op">==</span> <span class="st">"‚òæ"</span>)){</span>
<span id="cb10-370"><a href="#cb10-370" aria-hidden="true" tabindex="-1"></a>          <span class="cf">if</span>(d<span class="op">.</span><span class="at">symbol</span> <span class="op">==</span> <span class="st">"üú®"</span>){</span>
<span id="cb10-371"><a href="#cb10-371" aria-hidden="true" tabindex="-1"></a>            <span class="co">// Earth symbol translated above the planet</span></span>
<span id="cb10-372"><a href="#cb10-372" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span>(system_model <span class="op">==</span> <span class="dv">0</span>)</span>
<span id="cb10-373"><a href="#cb10-373" aria-hidden="true" tabindex="-1"></a>              <span class="cf">return</span> <span class="st">"translate(-16,-20)"</span><span class="op">;</span>  </span>
<span id="cb10-374"><a href="#cb10-374" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb10-375"><a href="#cb10-375" aria-hidden="true" tabindex="-1"></a>              <span class="cf">return</span> <span class="st">"rotate("</span> <span class="op">+</span> (<span class="op">-</span>d<span class="op">.</span><span class="at">phi0</span> <span class="op">+</span> (<span class="op">-</span>delta <span class="op">*</span> d<span class="op">.</span><span class="at">speed</span> <span class="op">*</span> speed_factor<span class="op">/</span><span class="dv">1000</span>)) <span class="op">+</span> <span class="st">") translate(-16,-20)"</span><span class="op">;</span> </span>
<span id="cb10-376"><a href="#cb10-376" aria-hidden="true" tabindex="-1"></a>          }</span>
<span id="cb10-377"><a href="#cb10-377" aria-hidden="true" tabindex="-1"></a>          <span class="cf">else</span> <span class="cf">if</span>((system_model <span class="op">==</span> <span class="dv">1</span>) <span class="op">&amp;&amp;</span> d<span class="op">.</span><span class="at">symbol</span> <span class="op">==</span> <span class="st">"‚òæ"</span>)</span>
<span id="cb10-378"><a href="#cb10-378" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">"rotate("</span> <span class="op">+</span> (<span class="op">-</span>angle_90 <span class="op">-</span> d<span class="op">.</span><span class="at">phi0</span> <span class="op">+</span> delta <span class="op">*</span> (Earth_speed <span class="op">-</span> d<span class="op">.</span><span class="at">speed</span>) <span class="op">*</span> (speed_factor<span class="op">/</span><span class="dv">1000</span>) )  <span class="op">+</span> <span class="st">") translate(0,-2)"</span><span class="op">;</span> </span>
<span id="cb10-379"><a href="#cb10-379" aria-hidden="true" tabindex="-1"></a>          <span class="cf">else</span></span>
<span id="cb10-380"><a href="#cb10-380" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="st">"rotate("</span> <span class="op">+</span> (<span class="op">-</span>d<span class="op">.</span><span class="at">phi0</span> <span class="op">+</span> (<span class="op">-</span>delta <span class="op">*</span> d<span class="op">.</span><span class="at">speed</span> <span class="op">*</span> speed_factor<span class="op">/</span><span class="dv">1000</span>)) <span class="op">+</span> <span class="st">")"</span><span class="op">;</span></span>
<span id="cb10-381"><a href="#cb10-381" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb10-382"><a href="#cb10-382" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb10-383"><a href="#cb10-383" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> <span class="st">"rotate("</span> <span class="op">+</span> (angle_90 <span class="op">-</span> d<span class="op">.</span><span class="at">phi0</span> <span class="op">+</span> delta <span class="op">*</span> (Earth_speed <span class="op">-</span> d<span class="op">.</span><span class="at">speed</span>) <span class="op">*</span> (speed_factor<span class="op">/</span><span class="dv">1000</span>) )  <span class="op">+</span> <span class="st">") translate(4,-3)"</span><span class="op">;</span></span>
<span id="cb10-384"><a href="#cb10-384" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb10-385"><a href="#cb10-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-386"><a href="#cb10-386" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb10-387"><a href="#cb10-387" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span>                       </span>
<span id="cb10-388"><a href="#cb10-388" aria-hidden="true" tabindex="-1"></a>                      </span>
<span id="cb10-389"><a href="#cb10-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-390"><a href="#cb10-390" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span> </span>
<span id="cb10-391"><a href="#cb10-391" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="396" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 395;"><span id="cb11-396"><a href="#cb11-396" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Day of the era`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb12" data-startfrom="400" data-syntax-error-position="450" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 399;"><span id="cb12-400"><a href="#cb12-400"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb12-401"><a href="#cb12-401"></a>md`#### Get dote from UNIX time</span>
<span id="cb12-402"><a href="#cb12-402"></a>Most Dec <span class="fu">calendar</span> <span class="op">(</span>Decalendar<span class="op">)</span> calculations require us to obtain a day of the <span class="fu">era</span> <span class="op">(</span>dote<span class="op">),</span> which is simply the number of days since a <span class="op">[</span>calendar epoch<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era). The Gregorian Decalendar era starts exactly 60 days later than the [Common Era](https://en.wikipedia.org/wiki/Common_Era).</span></span>
<span id="cb12-403"><a href="#cb12-403"></a></span>
<span id="cb12-404"><a href="#cb12-404"></a>The `unix2dote` function below <span class="dv">1</span><span class="op">)</span> translates <span class="op">[</span>UNIX time<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Unix_time#:~:text=a%20date%20and%20time%20representation%20widely%20used%20in%20computing) into a dote by converting (milli)seconds of UNIX time into days and 2) adds an offset that shifts the [UNIX epoch](https://en.wikipedia.org/wiki/Epoch_%28computing%29#:~:text=a%20fixed%20date%20and%20time%20used%20as%20a%20reference%20from%20which%20a%20computer%20measures%20system%20time) to the epoch for a given calendar. The default offset is 719468, the number of days between the UNIX epoch and the Dec Gregorian calendar epoch. `</span></span>
<span id="cb12-405"><a href="#cb12-405"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 404, column 6)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="407" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 406;"><span id="cb13-407"><a href="#cb13-407" aria-hidden="true" tabindex="-1"></a>unix <span class="op">=</span> {</span>
<span id="cb13-408"><a href="#cb13-408" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb13-409"><a href="#cb13-409" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb13-410"><a href="#cb13-410" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb13-411"><a href="#cb13-411" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="415" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 414;"><span id="cb14-415"><a href="#cb14-415" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2dote</span>(unix<span class="op">,</span> zone<span class="op">,</span> offset <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb14-416"><a href="#cb14-416" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [</span>
<span id="cb14-417"><a href="#cb14-417" aria-hidden="true" tabindex="-1"></a>    (unix <span class="op">??</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()) <span class="op">/</span> <span class="dv">86400000</span></span>
<span id="cb14-418"><a href="#cb14-418" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (zone <span class="op">=</span> zone <span class="op">??</span> (<span class="dv">10</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(</span>
<span id="cb14-419"><a href="#cb14-419" aria-hidden="true" tabindex="-1"></a>        (<span class="kw">new</span> <span class="bu">Date</span>)<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">/</span> <span class="dv">144</span>)) <span class="op">%</span> <span class="dv">10</span></span>
<span id="cb14-420"><a href="#cb14-420" aria-hidden="true" tabindex="-1"></a>      ) <span class="op">/</span> <span class="dv">10</span> <span class="op">+</span> offset<span class="op">,</span> zone]</span>
<span id="cb14-421"><a href="#cb14-421" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="425" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 424;"><span id="cb15-425"><a href="#cb15-425" aria-hidden="true" tabindex="-1"></a>current <span class="op">=</span> <span class="fu">unix2dote</span>(unix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="429" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 428;"><span id="cb16-429"><a href="#cb16-429" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb16-430"><a href="#cb16-430" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(year <span class="op">/</span> <span class="dv">400</span>))<span class="op">;</span></span>
<span id="cb16-431"><a href="#cb16-431" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="435" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 434;"><span id="cb17-435"><a href="#cb17-435" aria-hidden="true" tabindex="-1"></a>unixEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">1969</span><span class="op">,</span> <span class="dv">306</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb18" data-startfrom="439" data-syntax-error-position="33" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 438;"><span id="cb18-439"><a href="#cb18-439"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb18-440"><a href="#cb18-440"></a>md`Other than providing a dote<span class="op">,</span> `unix2dote` also returns the provided Dec time zone and can infer the time zone <span class="cf">if</span> it is not provided<span class="op">.</span> <span class="fu">The</span> time zone inference method is described in the <span class="op">[</span>Dec <span class="fu">clock</span> <span class="op">(</span>Declock<span class="op">)</span> notebook<span class="op">](/</span><span class="at">@dec</span><span class="op">/</span>lock<span class="op">).</span> <span class="fu">Time</span> zone inference is not exact<span class="op">.</span> <span class="fu">Unequivocal</span> Dec time zone determination requires knowing your longitude<span class="op">.</span> <span class="fu">To</span> obtain a Dec time zone from a given longitude<span class="op">,</span> the functions below first add <span class="dv">18</span> <span class="fu">degrees</span> <span class="op">(</span>half a turn<span class="op">)</span> to align the longitude in degrees with <span class="op">[</span>Meridian <span class="dv">0</span><span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/18th_meridian_west#:~:text=a%20line%20of%20longitude%20that%20extends%20from%20the%20North%20Pole%20across%20the%20Arctic%20Ocean%2C%20Greenland%2C%20Iceland%2C%20the%20Atlantic%20Ocean%2C%20the%20Canary%20Islands%2C%20the%20Southern%20Ocean%2C%20and%20Antarctica%20to%20the%20South%20Pole), which is the start of Zone 0, the [Prime Meridian](https://en.wikipedia.org/wiki/Prime_meridian), and the [International Date Line](https://en.wikipedia.org/wiki/International_Date_Line#:~:text=the%20line%20between%20the%20South%20and%20North%20Poles%20that%20is%20the%20boundary%20between%20one%20calendar%20day%20and%20the%20next) in Dec.`</span></span>
<span id="cb18-441"><a href="#cb18-441"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 440, column 34)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb19" data-startfrom="443" data-syntax-error-position="39" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 442;"><span id="cb19-443"><a href="#cb19-443"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb19-444"><a href="#cb19-444"></a>md`Once <span class="dv">0</span> turns is set to Meridian <span class="dv">0</span><span class="op">,</span> `long2turn` converts degrees to <span class="fu">deciturns</span> <span class="op">(</span>tenths of a turn<span class="op">).</span> <span class="fu">The</span> `long2zone` function then simply <span class="op">[</span>floors<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=gives%20as%20output%20the%20greatest%20integer%20less%20than%20or%20equal%20to%20x) the deciturns provided by `long2turn`. Alternatively, we can convert degrees to deciturns and round. This alternative conversion method is simpler but can cause confusion because it sets 0 turns to Meridian 05, the middle of Zone 0 (5 [ctr](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=in%2C%20e.g.%2C-,centiturns%20%28ctr%29,-%2C%20milliturns%20%28mtr%29%2C%20etc)). Regardless of which conversion method we use, Dec time zones always range from 0 to 9, even if the provided degree value for longitude is outside the typical range (${tex`-180¬∞ \le \lambda \le 180¬∞`}).`</span></span>
<span id="cb19-445"><a href="#cb19-445"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 444, column 40)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="447" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 446;"><span id="cb20-447"><a href="#cb20-447" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`It is possible to subtract 10 from the Dec times zones to convert them from positive to negative. Regardless of their sign, Dec time zone numbers work like [array indexes](https://en.wikipedia.org/wiki/Array_%28data_structure%29#Element_identifier_and_addressing_formulas:~:text=The%20first%20element%20of%20the%20array%20is%20indexed%20by%20subscript%20of%200). We can also use positive and negative time zone indexes as time zone offsets to obtain the time in the desired time zone. Sometimes it easier to use a negative offset than a positive offset. For example. when converting Zone 0 time to Zone 8 time, we can subtract 2, rather than add 8, to the Zone 0 time in decidays. Adding positive offsets works for both times and dates with times (datetimes), but adding a negative offset to a datetime will give us the previous date rather than the current one. In short, we have to increment a date if we add a negative index to it. `</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="451" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 450;"><span id="cb21-451"><a href="#cb21-451" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">long2turn</span>(degrees <span class="op">=</span> <span class="op">-</span><span class="dv">180</span><span class="op">,</span> e <span class="op">=</span> <span class="dv">3</span>) {</span>
<span id="cb21-452"><a href="#cb21-452" aria-hidden="true" tabindex="-1"></a>  <span class="co">// turns: e=0, deciturns: e=1, etc.</span></span>
<span id="cb21-453"><a href="#cb21-453" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> (((degrees <span class="op">%=</span> <span class="dv">360</span>) <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> degrees <span class="op">+</span> <span class="dv">360</span> <span class="op">:</span> degrees) <span class="op">+</span> <span class="dv">18</span>) <span class="op">/</span> (<span class="dv">360</span> <span class="op">/</span> <span class="dv">10</span><span class="op">**</span>e) <span class="op">%</span> <span class="dv">10</span><span class="op">**</span>e<span class="op">;</span></span>
<span id="cb21-454"><a href="#cb21-454" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="458" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 457;"><span id="cb22-458"><a href="#cb22-458" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">long2zone</span>(degrees <span class="op">=</span> <span class="op">-</span><span class="dv">180</span>) {</span>
<span id="cb22-459"><a href="#cb22-459" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">long2turn</span>(degrees<span class="op">,</span> <span class="dv">1</span>))<span class="op">;</span></span>
<span id="cb22-460"><a href="#cb22-460" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="464" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 463;"><span id="cb23-464"><a href="#cb23-464" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Degrees to milliturns from Meridian 0`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb24" data-startfrom="468" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 467;"><span id="cb24-468"><a href="#cb24-468" aria-hidden="true" tabindex="-1"></a><span class="bu">Object</span><span class="op">.</span><span class="fu">fromEntries</span>([<span class="op">-</span><span class="dv">180</span><span class="op">,</span> <span class="op">-</span><span class="dv">90</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">45</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">162</span>]<span class="op">.</span><span class="fu">map</span>(x <span class="kw">=&gt;</span> [x<span class="op">,</span> <span class="fu">long2turn</span>(x<span class="op">,</span> <span class="dv">3</span>)]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-24" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb25" data-startfrom="472" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 471;"><span id="cb25-472"><a href="#cb25-472" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Calculate Decalendar dates from UNIX time`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-25" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb26" data-startfrom="476" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 475;"><span id="cb26-476"><a href="#cb26-476" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`To obtain the components of a Dec timestamp, we first calculate the dote from UNIX time, as described above.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-26" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb27" data-startfrom="480" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 479;"><span id="cb27-480"><a href="#cb27-480" aria-hidden="true" tabindex="-1"></a>zone0dote <span class="op">=</span> unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-27" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb28" data-startfrom="484" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 483;"><span id="cb28-484"><a href="#cb28-484" aria-hidden="true" tabindex="-1"></a>zone0deco <span class="op">=</span> <span class="fu">dote2deco</span>(zone0dote)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-28" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb29" data-startfrom="488" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 487;"><span id="cb29-488"><a href="#cb29-488" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The dote allows us to calculate the the solar cycle (socy), the day of the cycle (dotc), and the year of the cycle (yotc). A socy in the Gregorian calendar is [400 years](https://en.wikipedia.org/wiki/Solar_cycle_%28calendar%29#:~:text=400%2Dyear%20cycle%20of%20the%20Gregorian%20calendar).</span></span>
<span id="cb29-489"><a href="#cb29-489" aria-hidden="true" tabindex="-1"></a><span class="vs">The socy calculations below were developed by [Howard Hinnant](https://howardhinnant.github.io), who uses the term [*era*](https://howardhinnant.github.io/date_algorithms.html#:~:text=era%20is%20a%20400%20year%20period) to refer to a solar cycle in the associated [publication](https://howardhinnant.github.io/date_algorithms.html) and [C++ library](https://howardhinnant.github.io/date/date.html).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-29" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb30" data-startfrom="493" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 492;"><span id="cb30-493"><a href="#cb30-493" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Cycle`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-30" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb31" data-startfrom="497" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 496;"><span id="cb31-497"><a href="#cb31-497" aria-hidden="true" tabindex="-1"></a>socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(zone0dote <span class="op">/</span> <span class="dv">146097</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-31" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb32" data-startfrom="501" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 500;"><span id="cb32-501"><a href="#cb32-501" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Day of the cycle`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-32" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb33" data-startfrom="505" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 504;"><span id="cb33-505"><a href="#cb33-505" aria-hidden="true" tabindex="-1"></a>dotc <span class="op">=</span> zone0dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-33" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb34" data-startfrom="509" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 508;"><span id="cb34-509"><a href="#cb34-509" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Year of the cycle`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-34" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb35" data-startfrom="513" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 512;"><span id="cb35-513"><a href="#cb35-513" aria-hidden="true" tabindex="-1"></a>yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc</span>
<span id="cb35-514"><a href="#cb35-514" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)</span>
<span id="cb35-515"><a href="#cb35-515" aria-hidden="true" tabindex="-1"></a>  <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>)</span>
<span id="cb35-516"><a href="#cb35-516" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)</span>
<span id="cb35-517"><a href="#cb35-517" aria-hidden="true" tabindex="-1"></a>) <span class="op">/</span> <span class="dv">365</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb36" data-startfrom="521" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 520;"><span id="cb36-521"><a href="#cb36-521" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`We then use the socy, dotc, and yotc to calculate a year and day of the year (doty). The doty is both the calendar date and the time of day. If we floor a doty, it is like an [array index](https://en.wikipedia.org/wiki/Array_%28data_structure%29#Element_identifier_and_addressing_formulas:~:text=When%20data%20objects%20are%20stored%20in%20an%20array%2C%20individual%20objects%20are%20selected%20by%20an%20index) that can unequivocally identify any month and day of the month (dotm) in the [Gregorian calendar](https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world) or any of the other calendar systems discussed below.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-36" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb37" data-startfrom="525" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 524;"><span id="cb37-525"><a href="#cb37-525" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Year`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-37" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb38" data-startfrom="529" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 528;"><span id="cb38-529"><a href="#cb38-529" aria-hidden="true" tabindex="-1"></a>year <span class="op">=</span> yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">400</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-38" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb39" data-startfrom="533" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 532;"><span id="cb39-533"><a href="#cb39-533" aria-hidden="true" tabindex="-1"></a>zone0datetime <span class="op">=</span> dotc <span class="op">-</span> yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb40" data-startfrom="537" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 536;"><span id="cb40-537"><a href="#cb40-537" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Day of the year`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-40" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb41" data-startfrom="541" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 540;"><span id="cb41-541"><a href="#cb41-541" aria-hidden="true" tabindex="-1"></a>zone0doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(zone0datetime)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb42" data-startfrom="545" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 544;"><span id="cb42-545"><a href="#cb42-545" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`#### Current Decalendar date`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-42" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb43" data-startfrom="549" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 548;"><span id="cb43-549"><a href="#cb43-549" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="sc">${</span>year<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>zone0doty<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-43" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb44" data-startfrom="553" data-syntax-error-position="95" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 552;"><span id="cb44-553"><a href="#cb44-553"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb44-554"><a href="#cb44-554"></a>md`If we are going to <span class="cf">do</span> a calculation more than once<span class="op">,</span> it is useful to create a function<span class="op">.</span> <span class="fu">The</span> `dote2greg` function below combines the calculation described above<span class="op">.</span>`</span>
<span id="cb44-555"><a href="#cb44-555"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 554, column 96)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb45" data-startfrom="557" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 556;"><span id="cb45-557"><a href="#cb45-557" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2greg</span>(dote <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb45-558"><a href="#cb45-558" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote <span class="op">:</span> dote <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span> dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb45-559"><a href="#cb45-559" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb45-560"><a href="#cb45-560" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">400</span><span class="op">,</span> dotc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>) <span class="op">-</span> yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)]<span class="op">;</span></span>
<span id="cb45-561"><a href="#cb45-561" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb46" data-startfrom="565" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 564;"><span id="cb46-565"><a href="#cb46-565" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-46" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb47" data-startfrom="569" data-syntax-error-position="116" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 568;"><span id="cb47-569"><a href="#cb47-569"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb47-570"><a href="#cb47-570"></a>md`#### Get timestamp from year and doty</span>
<span id="cb47-571"><a href="#cb47-571"></a>It is a good idea to put the time zone at the end of every timestamp<span class="op">.</span> <span class="fu">The</span> `doty2deco` function formats the provided year<span class="op">,</span> doty<span class="op">,</span> and time zone into a Dec timestamp<span class="op">.</span>`</span>
<span id="cb47-572"><a href="#cb47-572"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 571, column 76)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb48" data-startfrom="574" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 573;"><span id="cb48-574"><a href="#cb48-574" aria-hidden="true" tabindex="-1"></a>gregDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span>))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-48" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb49" data-startfrom="578" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 577;"><span id="cb49-578"><a href="#cb49-578" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span>))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-49" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb50" data-startfrom="582" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 581;"><span id="cb50-582"><a href="#cb50-582" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> lead <span class="op">=</span> <span class="st">"0"</span><span class="op">,</span> emoji <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> minus <span class="op">=</span> <span class="kw">false</span>) {</span>
<span id="cb50-583"><a href="#cb50-583" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">dote2deco</span>(<span class="fu">doty2dote</span>(year<span class="op">,</span> doty)<span class="op">,</span> zone<span class="op">,</span> lead<span class="op">,</span> emoji<span class="op">,</span> minus)<span class="op">;</span></span>
<span id="cb50-584"><a href="#cb50-584" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-50" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb51" data-startfrom="588" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 587;"><span id="cb51-588"><a href="#cb51-588" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2deco</span>(dote <span class="op">=</span> <span class="dv">719468</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> lead <span class="op">=</span> <span class="st">"0"</span><span class="op">,</span> emoji <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> minus <span class="op">=</span> <span class="kw">false</span>) {</span>
<span id="cb51-589"><a href="#cb51-589" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span> [year<span class="op">,</span> doty] <span class="op">=</span> <span class="fu">dote2doty</span>(dote)<span class="op">;</span></span>
<span id="cb51-590"><a href="#cb51-590" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>emoji <span class="op">?</span> <span class="st">"üóìÔ∏è"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}${</span></span>
<span id="cb51-591"><a href="#cb51-591" aria-hidden="true" tabindex="-1"></a>    (year <span class="op">+</span> minus)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> lead)<span class="sc">}${</span>minus <span class="op">?</span> <span class="st">"-"</span> <span class="op">:</span> <span class="st">"+"</span><span class="sc">}${</span></span>
<span id="cb51-592"><a href="#cb51-592" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty <span class="op">=</span> doty <span class="op">-</span> (<span class="dv">365</span> <span class="op">+</span> <span class="fu">year2leap</span>(year <span class="op">+</span> <span class="dv">1</span>)) <span class="op">*</span> <span class="bu">Number</span>(minus))</span>
<span id="cb51-593"><a href="#cb51-593" aria-hidden="true" tabindex="-1"></a>    )<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> lead)<span class="sc">}${</span>emoji <span class="op">?</span> <span class="st">"üï∞Ô∏è"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span><span class="vs">Ô∏è</span><span class="sc">${</span></span>
<span id="cb51-594"><a href="#cb51-594" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(doty <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="dv">10</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}${</span>zone <span class="op">!=</span> <span class="kw">null</span> <span class="op">?</span> (minus <span class="op">?</span> <span class="st">"+"</span> <span class="op">:</span> <span class="st">"-"</span>) <span class="op">+</span> <span class="bu">String</span>(zone) <span class="op">:</span> <span class="st">""</span><span class="sc">}</span><span class="vs">`</span></span>
<span id="cb51-595"><a href="#cb51-595" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-51" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb52" data-startfrom="599" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 598;"><span id="cb52-599"><a href="#cb52-599" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">year2leap</span>(year <span class="op">=</span> <span class="dv">1970</span>) {</span>
<span id="cb52-600"><a href="#cb52-600" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb52-601"><a href="#cb52-601" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-52" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb53" data-startfrom="605" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 604;"><span id="cb53-605"><a href="#cb53-605" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2leap</span>(year <span class="op">=</span> <span class="dv">1970</span>) {</span>
<span id="cb53-606"><a href="#cb53-606" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb53-607"><a href="#cb53-607" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-53" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb54" data-startfrom="611" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 610;"><span id="cb54-611"><a href="#cb54-611" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2doty</span>(days <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb54-612"><a href="#cb54-612" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cykl <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">146096</span>) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span> dotc <span class="op">=</span> days <span class="op">-</span> cykl <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb54-613"><a href="#cb54-613" aria-hidden="true" tabindex="-1"></a>        yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb54-614"><a href="#cb54-614" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [yotc <span class="op">+</span> cykl <span class="op">*</span> <span class="dv">400</span><span class="op">,</span> dotc <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>) <span class="op">-</span> yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)]<span class="op">;</span></span>
<span id="cb54-615"><a href="#cb54-615" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-54" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb55" data-startfrom="619" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 618;"><span id="cb55-619"><a href="#cb55-619" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Convert a Decalendar date to an ISO calendar date`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-55" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb56" data-startfrom="623" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 622;"><span id="cb56-623"><a href="#cb56-623" aria-hidden="true" tabindex="-1"></a>month_index <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> zone0doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-56" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb57" data-startfrom="627" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 626;"><span id="cb57-627"><a href="#cb57-627" aria-hidden="true" tabindex="-1"></a>month_day <span class="op">=</span> [</span>
<span id="cb57-628"><a href="#cb57-628" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(month_index <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> month_index <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> month_index <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span></span>
<span id="cb57-629"><a href="#cb57-629" aria-hidden="true" tabindex="-1"></a>  <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(zone0doty <span class="op">-</span> (<span class="dv">153</span> <span class="op">*</span> month_index <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> <span class="dv">2</span>)</span>
<span id="cb57-630"><a href="#cb57-630" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-57" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb58" data-startfrom="634" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 633;"><span id="cb58-634"><a href="#cb58-634" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="sc">${</span></span>
<span id="cb58-635"><a href="#cb58-635" aria-hidden="true" tabindex="-1"></a>  year <span class="op">+</span> (zone0doty <span class="op">&gt;</span> <span class="dv">305</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb58-636"><a href="#cb58-636" aria-hidden="true" tabindex="-1"></a>  month_day[<span class="dv">0</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span></span>
<span id="cb58-637"><a href="#cb58-637" aria-hidden="true" tabindex="-1"></a>  month_day[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)</span>
<span id="cb58-638"><a href="#cb58-638" aria-hidden="true" tabindex="-1"></a><span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-58" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb59" data-startfrom="642" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 641;"><span id="cb59-642"><a href="#cb59-642" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Convert a year and a month to a Decalendar date`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-59" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb60" data-startfrom="646" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 645;"><span id="cb60-646"><a href="#cb60-646" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="sc">${</span></span>
<span id="cb60-647"><a href="#cb60-647" aria-hidden="true" tabindex="-1"></a>  <span class="kw">new</span> <span class="bu">Date</span>()<span class="op">.</span><span class="fu">getUTCFullYear</span>() <span class="op">-</span> (month_day[<span class="dv">0</span>] <span class="op">&lt;</span> <span class="dv">3</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span></span>
<span id="cb60-648"><a href="#cb60-648" aria-hidden="true" tabindex="-1"></a>  <span class="bu">String</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> (</span>
<span id="cb60-649"><a href="#cb60-649" aria-hidden="true" tabindex="-1"></a>    month_day[<span class="dv">0</span>] <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month_day[<span class="dv">0</span>] <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month_day[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">9</span></span>
<span id="cb60-650"><a href="#cb60-650" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> month_day[<span class="dv">1</span>] <span class="op">-</span> <span class="dv">1</span>)<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-60" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb61" data-startfrom="654" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 653;"><span id="cb61-654"><a href="#cb61-654" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Solar Hijiri calendar`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-61" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb62" data-startfrom="658" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 657;"><span id="cb62-658"><a href="#cb62-658" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Dec focuses on the Gregorian calendar, because it is by far the most widely used calendar system. Other than its ubiquity, another major strength of the Gregorian calender is an intercalation system that is easy to understand and quite accurate. The Gregorian calendar leap years are always divisible by 4, and thus are always even numbers, e.g. 2000, 2004, 2008, 2012, 2016, 2020, 2024, 2028, 2032, 2036, 2040, 2044, and 2048, and are grouped into cycles of 400 years.</span></span>
<span id="cb62-659"><a href="#cb62-659" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-62" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb63" data-startfrom="663" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 662;"><span id="cb63-663"><a href="#cb63-663" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`In contrast, the Solar Hijiri calendar is [‚Äúonly in official use in Iran‚Äù](https://en.wikipedia.org/wiki/Solar_Hijri_calendar#:~:text=solar%20hijri%20calendar%20itself%20remains%20only%20in%20official%20use%20in%20iran) and its [33-year cycle](http://aramis.obspm.fr/~heydari/divers/ir-cal-eng.html#:~:text=%20the%20first%20leap%20year%20of%20the%2033%2Dyear%20cycle%20is%20quinquennial%20and%20the%20seven%20others%20quadrennial) intercalation system does not yield instantly recognizable leap years. Within any cycle, Solar Hijiri leap years will be either all even or all odd, but this pattern flips with every cycle. Similarly, 33-year cycles are hard to recognize instantly because the start and end years also flip back and forth between event and odd every cycle, 0 to 32, 33 to 65, 66 to 98, etc.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-63" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb64" data-startfrom="667" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 666;"><span id="cb64-667"><a href="#cb64-667" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`On the other hand, the Solar Hijiri calendar is much more accurate. A more accurate intercalation system means that the calendar can be used for longer before additional intercalation rules have to be created. The Solar Hijiri calendar also avoids the two major flaws of the Gregorian calendar: 1. Leap Day is not at the end of the year and 2. New Year Day is an arbitrary day that is not connected to any seasonal event like a [solstice](https://en.wikipedia.org/wiki/Solstice#:~:text=the%20time%20when%20the%20sun%20reaches%20its%20most%20northerly%20or%20southerly%20excursion%20relative%20to%20the%20celestial%20equator) or [equinox](https://en.wikipedia.org/wiki/Equinox#:~:text=a%20moment%20in%20time%20when%20the%20sun%20crosses%20the%20earth's%20equator). In the Solar Hijiri calendar, Leap Day is at [the end of the year](https://iran-times.com/persian-calendar-skips-leap-day-this-year-so-your-birthday-comes-a-day-early-the-next-12-months/#:~:text=iranians%20added%20their%20leap%20day%20three%20weeks%20later%20at%20the%20end%20of%20the%20month%20of%20esfand) (1) and New Year Day is the [Northward Equinox](https://en.wikipedia.org/wiki/March_equinox#:~:text=the%20equinox%20on%20the%20earth%20when%20the%20subsolar%20point%20appears%20to%20leave%20the%20southern%20hemisphere%20and%20cross%20the%20celestial%20equator) (2).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-64" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb65" data-startfrom="671" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 670;"><span id="cb65-671"><a href="#cb65-671" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Decalendar addresses the two major flaws of the Gregorian calendar by moving the start of the year to March 1. When Leap Day is the last day of the year, the day numbers (indexes) used by Decalendar remain constant year to year. Starting the year on March 1 also brings Decalendar in alignment with the [metereological seasons](https://en.wikipedia.org/wiki/Season#:~:text=meteorological%20seasons%20are%20reckoned%20by%20temperature%2C%20with%20summer%20being%20the%20hottest%20quarter%20of%20the%20year%20and%20winter%20the%20coldest%20quarter%20of%20the%20year). In contrast, the Solar Hijiri calendar starts its year on the Northward Equinox and is designed to match the [Northward Equinox year](https://en.wikipedia.org/wiki/Tropical_year#:~:text=between%20two%20march%20equinoxes) rather than the [mean tropical year](https://en.wikipedia.org/wiki/Tropical_year#:~:text=365.242740-,mean%20tropical%20year), and thus more closely matches the [astronomical seasons](https://en.wikipedia.org/wiki/Season#Astronomical).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-65" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb66" data-startfrom="675" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 674;"><span id="cb66-675"><a href="#cb66-675" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The Northward equinox in Year 621 was on Day 19 at Dot 90486 in Zone 0 (0621+0199.0486-0, 0621-03-20T21:43+00:00, March 20 621 CE at 9:43 PM) according to [data.giss.nasa.gov](https://data.giss.nasa.gov/modelE/ar5plots/srvernal.html). In Zone 5, the SH epoch deco is 0621+0200.0486-5.</span></span>
<span id="cb66-676"><a href="#cb66-676" aria-hidden="true" tabindex="-1"></a><span class="vs">The SH epochal dote is therefore 226835. The UNIX epochal dote is 719468.</span></span>
<span id="cb66-677"><a href="#cb66-677" aria-hidden="true" tabindex="-1"></a><span class="vs">The number of days that need to be added to UNIX time to more the epoch from Year 1969 Day 306 to Year 622 Day 20 is therefore 492633.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-66" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb67" data-startfrom="681" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 680;"><span id="cb67-681"><a href="#cb67-681" aria-hidden="true" tabindex="-1"></a>sohiEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">621</span><span class="op">,</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-67" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb68" data-startfrom="685" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 684;"><span id="cb68-685"><a href="#cb68-685" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`[The modern northward equinox year length](https://en.wikipedia.org/wiki/Tropical_year#:~:text=365.242137%20days-,365.242374%20days,-Between%20two%20June) is 365.242374. The error with the 33-year cycle is </span><span class="sc">${</span>((<span class="dv">365</span><span class="op">+</span><span class="dv">8</span><span class="op">/</span><span class="dv">33</span>)<span class="op">-</span><span class="fl">365.242374</span>)<span class="op">*</span><span class="fl">1e6</span><span class="sc">}</span><span class="vs"> microdays (millionths of a sol) per year, which is much better than the Gregorian calendar yearly error of </span><span class="sc">${</span>(<span class="fl">365.2425</span><span class="op">-</span><span class="fl">365.242374</span>)<span class="op">*</span><span class="fl">1e6</span><span class="sc">}</span><span class="vs"> microdays.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-68" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb69" data-startfrom="689" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 688;"><span id="cb69-689"><a href="#cb69-689" aria-hidden="true" tabindex="-1"></a><span class="dv">719468</span> <span class="op">-</span> <span class="dv">226835</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-69" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb70" data-startfrom="693" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 692;"><span id="cb70-693"><a href="#cb70-693" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2greg</span>(<span class="dv">226835</span><span class="op">,</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-70" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb71" data-startfrom="697" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 696;"><span id="cb71-697"><a href="#cb71-697" aria-hidden="true" tabindex="-1"></a>zone0doteSH <span class="op">=</span> unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">492633</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-71" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb72" data-startfrom="701" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 700;"><span id="cb72-701"><a href="#cb72-701" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The Solar Hijiri calendar has 33-year cycles with 8 leap years and 25 common years. The total number of days in a cycle is 33 * 365 + 8 = 12053.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-72" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb73" data-startfrom="705" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 704;"><span id="cb73-705"><a href="#cb73-705" aria-hidden="true" tabindex="-1"></a><span class="dv">33</span> <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="dv">8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-73" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb74" data-startfrom="709" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 708;"><span id="cb74-709"><a href="#cb74-709" aria-hidden="true" tabindex="-1"></a>socySH <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(zone0doteSH <span class="op">/</span> <span class="dv">12053</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-74" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb75" data-startfrom="713" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 712;"><span id="cb75-713"><a href="#cb75-713" aria-hidden="true" tabindex="-1"></a>dotcSH <span class="op">=</span> zone0doteSH <span class="op">-</span> socySH <span class="op">*</span> <span class="dv">12053</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-75" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb76" data-startfrom="717" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 716;"><span id="cb76-717"><a href="#cb76-717" aria-hidden="true" tabindex="-1"></a>yotcSH <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotcSH <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotcSH <span class="op">/</span> <span class="dv">1460</span>)) <span class="op">/</span> <span class="dv">365</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-76" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb77" data-startfrom="721" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 720;"><span id="cb77-721"><a href="#cb77-721" aria-hidden="true" tabindex="-1"></a>yearSH <span class="op">=</span> yotcSH <span class="op">+</span> socySH <span class="op">*</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-77" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb78" data-startfrom="725" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 724;"><span id="cb78-725"><a href="#cb78-725" aria-hidden="true" tabindex="-1"></a>zone0datetimeSH <span class="op">=</span> dotcSH <span class="op">-</span> yotcSH <span class="op">*</span> <span class="dv">365</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotcSH <span class="op">/</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-78" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb79" data-startfrom="729" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 728;"><span id="cb79-729"><a href="#cb79-729" aria-hidden="true" tabindex="-1"></a>zone0dotySH <span class="op">=</span> <span class="op">~~</span>zone0datetimeSH</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-79" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb80" data-startfrom="733" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 732;"><span id="cb80-733"><a href="#cb80-733" aria-hidden="true" tabindex="-1"></a>zone0timeSH <span class="op">=</span> zone0datetimeSH <span class="op">%</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-80" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb81" data-startfrom="737" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 736;"><span id="cb81-737"><a href="#cb81-737" aria-hidden="true" tabindex="-1"></a><span class="dv">719468</span> <span class="op">-</span> <span class="dv">226835</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-81" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb82" data-startfrom="741" data-syntax-error-position="298" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 740;"><span id="cb82-741"><a href="#cb82-741"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb82-742"><a href="#cb82-742"></a>md`The leap year rule below differs from <span class="op">[</span><span class="kw">this</span> Wikipedia table<span class="op">](</span>https<span class="op">:</span><span class="co">//en.wikipedia.org/wiki/Solar_Hijri_calendar#Comparison_with_Gregorian_calendar) by 18 years. I believe the table is based on [this paper](https://wwwold.astro.umk.pl/~kb/Papers/EMP/PersianC-EMP.htm). It also differs from the [`solar_hijiri.h`](https://github.com/HowardHinnant/date/blob/master/include/date/solar_hijri.h) file in Howard Hinnant's [date library](https://github.com/HowardHinnant/date#date). but I have instead implemented the leap year approach described on [this webpage](http://aramis.obspm.fr/~heydari/divers/ir-cal-eng.html), because I am convinced that it is not only far superior but also the best possible solar calendar design. I based the 22-year cycle of the Martian calendar below on the 33-year cycle of the Solar Hijiri calendar.`</span></span>
<span id="cb82-743"><a href="#cb82-743"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 742, column 299)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb83" data-startfrom="745" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 744;"><span id="cb83-745"><a href="#cb83-745" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2sohi</span>(dote <span class="op">=</span> <span class="dv">492633</span>) {</span>
<span id="cb83-746"><a href="#cb83-746" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote <span class="op">:</span> dote <span class="op">-</span> <span class="dv">12052</span>) <span class="op">/</span> <span class="dv">12053</span>)<span class="op">,</span></span>
<span id="cb83-747"><a href="#cb83-747" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">12053</span><span class="op">,</span> yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1461</span>)) <span class="op">/</span> <span class="dv">365</span>)</span>
<span id="cb83-748"><a href="#cb83-748" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">33</span><span class="op">,</span> dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">trunc</span>((yotc <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> <span class="dv">4</span>))]</span>
<span id="cb83-749"><a href="#cb83-749" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-83" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb84" data-startfrom="753" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 752;"><span id="cb84-753"><a href="#cb84-753" aria-hidden="true" tabindex="-1"></a>soHiDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2sohi</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">492633</span>)<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-84" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb85" data-startfrom="757" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 756;"><span id="cb85-757"><a href="#cb85-757" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2sohi</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">492633</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-85" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb86" data-startfrom="761" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 760;"><span id="cb86-761"><a href="#cb86-761" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`- Solar Hijiri New Year Example:</span></span>
<span id="cb86-762"><a href="#cb86-762" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Gregorian Decalendar:</span></span>
<span id="cb86-763"><a href="#cb86-763" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 2024</span></span>
<span id="cb86-764"><a href="#cb86-764" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 019</span></span>
<span id="cb86-765"><a href="#cb86-765" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 739270</span></span>
<span id="cb86-766"><a href="#cb86-766" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Solar Hijiri Decalendar:</span></span>
<span id="cb86-767"><a href="#cb86-767" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 1403</span></span>
<span id="cb86-768"><a href="#cb86-768" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 0</span></span>
<span id="cb86-769"><a href="#cb86-769" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 512435`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-86" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb87" data-startfrom="773" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 772;"><span id="cb87-773"><a href="#cb87-773" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2dote</span>(<span class="dv">2024</span><span class="op">,</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-87" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb88" data-startfrom="777" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 776;"><span id="cb88-777"><a href="#cb88-777" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2sohi</span>(<span class="dv">512435</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-88" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb89" data-startfrom="781" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 780;"><span id="cb89-781"><a href="#cb89-781" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2sohi</span>(<span class="dv">492633</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-89" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb90" data-startfrom="785" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 784;"><span id="cb90-785"><a href="#cb90-785" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2greg</span>(<span class="dv">512435</span> <span class="op">+</span> <span class="dv">226835</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-90" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb91" data-startfrom="789" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 788;"><span id="cb91-789"><a href="#cb91-789" aria-hidden="true" tabindex="-1"></a><span class="dv">719468</span> <span class="op">-</span> <span class="dv">492633</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-91" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb92" data-startfrom="793" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 792;"><span id="cb92-793"><a href="#cb92-793" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Lunar Hijiri calendar</span></span>
<span id="cb92-794"><a href="#cb92-794" aria-hidden="true" tabindex="-1"></a><span class="vs">The main difference between the Lunar Hijiri and other Decalendars is its year length, 354 or 355 days, which comes from following the Moon instead of the Sun. The Lunar and Solar Hijiri calendars should have the same epoch, but there is a difference of 485 days in the values needed to make the output match expectations. The difference between the UNIX epoch and the Solar Hijiri calendar epoch is 719468 - 226835 = 492633, while the difference between the UNIX epoch and the Lunar Hijiri epoch is 719468 - 227320 = 492148. The Lunar Hijiri calendar cycle is 30 years long and consists of 19 common years and 11 leap years.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-92" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb93" data-startfrom="798" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 797;"><span id="cb93-798"><a href="#cb93-798" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2luhi</span>(dote <span class="op">=</span> <span class="dv">492148</span>) {</span>
<span id="cb93-799"><a href="#cb93-799" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote <span class="op">:</span> dote <span class="op">-</span> <span class="dv">10630</span>) <span class="op">/</span> <span class="dv">10631</span>)<span class="op">,</span></span>
<span id="cb93-800"><a href="#cb93-800" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">10631</span><span class="op">,</span> yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">30</span> <span class="op">*</span> dotc <span class="op">+</span> <span class="dv">10646</span>) <span class="op">/</span> <span class="dv">10631</span>) <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb93-801"><a href="#cb93-801" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">30</span> <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">354</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">11</span> <span class="op">*</span> (yotc <span class="op">+</span> <span class="dv">1</span>) <span class="op">+</span> <span class="dv">3</span>) <span class="op">/</span> <span class="dv">30</span>))]</span>
<span id="cb93-802"><a href="#cb93-802" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-93" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb94" data-startfrom="806" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 805;"><span id="cb94-806"><a href="#cb94-806" aria-hidden="true" tabindex="-1"></a>luHiDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2luhi</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">492148</span>)<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-94" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb95" data-startfrom="810" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 809;"><span id="cb95-810"><a href="#cb95-810" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2luhi</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">492148</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-95" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb96" data-startfrom="814" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 813;"><span id="cb96-814"><a href="#cb96-814" aria-hidden="true" tabindex="-1"></a>luhiEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">622</span><span class="op">,</span> <span class="dv">140</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-96" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb97" data-startfrom="818" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 817;"><span id="cb97-818"><a href="#cb97-818" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2doty</span>(<span class="dv">227320</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-97" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb98" data-startfrom="822" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 821;"><span id="cb98-822"><a href="#cb98-822" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`- Lunar Hijiri New Year Example:</span></span>
<span id="cb98-823"><a href="#cb98-823" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Gregorian Decalendar:</span></span>
<span id="cb98-824"><a href="#cb98-824" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 2023</span></span>
<span id="cb98-825"><a href="#cb98-825" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 140</span></span>
<span id="cb98-826"><a href="#cb98-826" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 739025</span></span>
<span id="cb98-827"><a href="#cb98-827" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Lunar Hijiri Decalendar:</span></span>
<span id="cb98-828"><a href="#cb98-828" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 1445</span></span>
<span id="cb98-829"><a href="#cb98-829" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 0</span></span>
<span id="cb98-830"><a href="#cb98-830" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 511705`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-98" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb99" data-startfrom="834" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 833;"><span id="cb99-834"><a href="#cb99-834" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2dote</span>(<span class="dv">2023</span><span class="op">,</span> <span class="dv">140</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-99" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb100" data-startfrom="838" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 837;"><span id="cb100-838"><a href="#cb100-838" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2dote</span>(<span class="dv">2023</span><span class="op">,</span> <span class="dv">140</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-100" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb101" data-startfrom="842" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 841;"><span id="cb101-842"><a href="#cb101-842" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2luhi</span>(<span class="dv">511705</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-101" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb102" data-startfrom="846" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 845;"><span id="cb102-846"><a href="#cb102-846" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2luhi</span>(<span class="dv">739025</span> <span class="op">-</span> <span class="dv">227320</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-102" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb103" data-startfrom="850" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 849;"><span id="cb103-850"><a href="#cb103-850" aria-hidden="true" tabindex="-1"></a><span class="dv">739025</span> <span class="op">-</span> <span class="dv">227320</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-103" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb104" data-startfrom="854" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 853;"><span id="cb104-854"><a href="#cb104-854" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2greg</span>(<span class="dv">511705</span> <span class="op">+</span> <span class="dv">227320</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-104" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb105" data-startfrom="858" data-syntax-error-position="308" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 857;"><span id="cb105-858"><a href="#cb105-858"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb105-859"><a href="#cb105-859"></a>md`## Calendars <span class="kw">synchronized</span> to the Gregorian calendar</span>
<span id="cb105-860"><a href="#cb105-860"></a>The Bengali<span class="op">,</span> Indian National<span class="op">,</span> Japanese<span class="op">,</span> Nepali<span class="op">,</span> North Korean<span class="op">,</span> <span class="fu">Taiwanese</span> <span class="op">(</span>Minguo<span class="op">),</span> and Thai decalendars only differ from the Gregorian decalendar in their epochs<span class="op">.</span> <span class="fu">The</span> dates of all of these calendars can be obtained by entering the correct offset to the `unix2dote` function<span class="op">.</span> <span class="fu">These</span> other decalendars will not have the same Leap Day and New Year Day as the main Decalendar and thus the conversion of their day of the year numbers to Gregorian calendar dates will differ between common and leap years<span class="op">.</span> <span class="fu">In</span> every decalendar<span class="op">,</span> Leap Day is always followed by New Year Day and all days begin at midnight<span class="op">.</span>`</span>
<span id="cb105-861"><a href="#cb105-861"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 860, column 254)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb106" data-startfrom="863" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 862;"><span id="cb106-863"><a href="#cb106-863" aria-hidden="true" tabindex="-1"></a>bengEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">593</span><span class="op">,</span> <span class="dv">44</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-106" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb107" data-startfrom="867" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 866;"><span id="cb107-867"><a href="#cb107-867" aria-hidden="true" tabindex="-1"></a>bengDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> bengEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-107" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb108" data-startfrom="871" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 870;"><span id="cb108-871"><a href="#cb108-871" aria-hidden="true" tabindex="-1"></a>indiEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">78</span><span class="op">,</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-108" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb109" data-startfrom="875" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 874;"><span id="cb109-875"><a href="#cb109-875" aria-hidden="true" tabindex="-1"></a>indiDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> indiEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-109" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb110" data-startfrom="879" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 878;"><span id="cb110-879"><a href="#cb110-879" aria-hidden="true" tabindex="-1"></a>thaiEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="op">-</span><span class="dv">543</span><span class="op">,</span> <span class="dv">19</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-110" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb111" data-startfrom="883" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 882;"><span id="cb111-883"><a href="#cb111-883" aria-hidden="true" tabindex="-1"></a>thaiDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> thaiEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-111" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb112" data-startfrom="887" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 886;"><span id="cb112-887"><a href="#cb112-887" aria-hidden="true" tabindex="-1"></a>mingEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">1910</span><span class="op">,</span> <span class="dv">306</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-112" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb113" data-startfrom="891" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 890;"><span id="cb113-891"><a href="#cb113-891" aria-hidden="true" tabindex="-1"></a>mingDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> mingEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-113" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb114" data-startfrom="895" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 894;"><span id="cb114-895"><a href="#cb114-895" aria-hidden="true" tabindex="-1"></a>nepaEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="op">-</span><span class="dv">57</span><span class="op">,</span> <span class="dv">44</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-114" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb115" data-startfrom="899" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 898;"><span id="cb115-899"><a href="#cb115-899" aria-hidden="true" tabindex="-1"></a>nepaDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> nepaEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-115" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb116" data-startfrom="903" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 902;"><span id="cb116-903"><a href="#cb116-903" aria-hidden="true" tabindex="-1"></a>japaEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">2018</span><span class="op">,</span> <span class="dv">306</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-116" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb117" data-startfrom="907" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 906;"><span id="cb117-907"><a href="#cb117-907" aria-hidden="true" tabindex="-1"></a>japaDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2greg</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> unixEpoch <span class="op">-</span> japaEpoch))<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-117" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb118" data-startfrom="911" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 910;"><span id="cb118-911"><a href="#cb118-911" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Julian calendar`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-118" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb119" data-startfrom="915" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 914;"><span id="cb119-915"><a href="#cb119-915" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2juli</span>(days) {</span>
<span id="cb119-916"><a href="#cb119-916" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((days <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> days <span class="op">:</span> days <span class="op">-</span> <span class="dv">1460</span>) <span class="op">/</span> <span class="dv">1461</span>)<span class="op">;</span></span>
<span id="cb119-917"><a href="#cb119-917" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dotc <span class="op">=</span> days <span class="op">-</span> socy <span class="op">*</span> <span class="dv">1461</span><span class="op">;</span>                                  <span class="co">// [0, 1460]</span></span>
<span id="cb119-918"><a href="#cb119-918" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span>  <span class="co">// [0, 3]</span></span>
<span id="cb119-919"><a href="#cb119-919" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> year <span class="op">=</span> yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb119-920"><a href="#cb119-920" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> doty <span class="op">=</span> dotc <span class="op">-</span> <span class="dv">365</span> <span class="op">*</span> yotc<span class="op">;</span>                                   <span class="co">// [0, 365]</span></span>
<span id="cb119-921"><a href="#cb119-921" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [year<span class="op">,</span> doty]</span>
<span id="cb119-922"><a href="#cb119-922" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-119" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb120" data-startfrom="926" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 925;"><span id="cb120-926"><a href="#cb120-926" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2juli</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719470</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-120" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb121" data-startfrom="930" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 929;"><span id="cb121-930"><a href="#cb121-930" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The [Ethiopian calendar](https://en.wikipedia.org/wiki/Ethiopian_calendar#:~:text=the%20official%20state%20civil%20calendar%20of%20Ethiopia) follows the same rules as the Julian calendar, but have a different [epoch](https://en.wikipedia.org/wiki/Ethiopian_calendar#:~:text=months%20earlier%20on-,29%20August%20AD%208,-.%20Meanwhile%2C%20Europeans%20eventually).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-121" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb122" data-startfrom="934" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 933;"><span id="cb122-934"><a href="#cb122-934" aria-hidden="true" tabindex="-1"></a>ethiEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">7</span><span class="op">,</span> <span class="dv">181</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-122" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb123" data-startfrom="938" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 937;"><span id="cb123-938"><a href="#cb123-938" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2juli</span>(<span class="dv">2737</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-123" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb124" data-startfrom="942" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 941;"><span id="cb124-942"><a href="#cb124-942" aria-hidden="true" tabindex="-1"></a>ethiDeco <span class="op">=</span> <span class="fu">doty2deco</span>(<span class="op">...</span><span class="fu">dote2juli</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719470</span> <span class="op">-</span> <span class="dv">2737</span>)<span class="op">,</span> <span class="kw">null</span><span class="op">,</span> <span class="st">"0"</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-124" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb125" data-startfrom="946" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 945;"><span id="cb125-946"><a href="#cb125-946" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Julian date`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-125" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb126" data-startfrom="950" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 949;"><span id="cb126-950"><a href="#cb126-950" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Add 1721119.5 (2440587.5 - 719468) to the dote to get [Universal Time](https://en.wikipedia.org/wiki/Universal_Time#:~:text=a%20time%20standard%20based%20on%20Earth%27s%20rotation) (UT) [Julian Date](https://en.wikipedia.org/wiki/Julian_day#:~:text=any%20instant%20is%20the%20Julian%20day%20number%20plus%20the%20fraction%20of%20a%20day%20since%20the%20preceding%20noon%20in%20Universal%20Time) (JD).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-126" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb127" data-startfrom="954" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 953;"><span id="cb127-954"><a href="#cb127-954" aria-hidden="true" tabindex="-1"></a><span class="fl">2440587.5</span> <span class="op">-</span> <span class="dv">719468</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-127" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb128" data-startfrom="958" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 957;"><span id="cb128-958"><a href="#cb128-958" aria-hidden="true" tabindex="-1"></a>JDut <span class="op">=</span> zone0dote <span class="op">+</span> <span class="fl">1721119.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-128" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb129" data-startfrom="962" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 961;"><span id="cb129-962"><a href="#cb129-962" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Subtract 1721119.5 (2440587.5 - 719468) from the UT JD to get the dote`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-129" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb130" data-startfrom="966" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 965;"><span id="cb130-966"><a href="#cb130-966" aria-hidden="true" tabindex="-1"></a>JDut <span class="op">-</span> <span class="fl">1721119.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-130" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb131" data-startfrom="970" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 969;"><span id="cb131-970"><a href="#cb131-970" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Add 69.184 seconds to UNIX time, divide by 86400 seconds, and add 2440587.5 days to get Terrestrial Time (TT) JD.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-131" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb132" data-startfrom="974" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 973;"><span id="cb132-974"><a href="#cb132-974" aria-hidden="true" tabindex="-1"></a>JDtt <span class="op">=</span> (unix <span class="op">+</span> <span class="dv">69184</span>) <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="fl">2440587.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-132" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb133" data-startfrom="978" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 977;"><span id="cb133-978"><a href="#cb133-978" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Mars`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-133" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb134" data-startfrom="982" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 981;"><span id="cb134-982"><a href="#cb134-982" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Adapting Decalendar to measure time on Mars can illustrate how Decalendar works. We want the Martian Decalendar time to match the [Martian Sol Date](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Mars_Sol_Date). Sol is the word for a [Martian solar day](https://en.wikipedia.org/wiki/Mars_sol). The Martian Sol Date is [calculated from the Julian Date](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Formulas_to_compute_MSD_and_MTC).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-134" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb135" data-startfrom="986" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 985;"><span id="cb135-986"><a href="#cb135-986" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Martian Sol Date`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-135" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb136" data-startfrom="990" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 989;"><span id="cb136-990"><a href="#cb136-990" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`</span><span class="sc">${</span></span>
<span id="cb136-991"><a href="#cb136-991" aria-hidden="true" tabindex="-1"></a><span class="fu">tex</span><span class="vs">`</span></span>
<span id="cb136-992"><a href="#cb136-992" aria-hidden="true" tabindex="-1"></a><span class="vs">MSD = (JDTT ‚àí 2451549.5) / 1.0274912517 + 44796.0 ‚àí 0.0009626</span></span>
<span id="cb136-993"><a href="#cb136-993" aria-hidden="true" tabindex="-1"></a><span class="sc">\\</span></span>
<span id="cb136-994"><a href="#cb136-994" aria-hidden="true" tabindex="-1"></a><span class="vs">MSD = (JDTT ‚àí 2451549.5 + (44796.0 - 0.0009626) * 1.0274912517) / 1.0274912517 + 44796.0 ‚àí 0.0009626</span></span>
<span id="cb136-995"><a href="#cb136-995" aria-hidden="true" tabindex="-1"></a><span class="sc">\\</span></span>
<span id="cb136-996"><a href="#cb136-996" aria-hidden="true" tabindex="-1"></a><span class="vs">MSD = (JDTT ‚àí 2405522.0028779097) / 1.0274912517</span></span>
<span id="cb136-997"><a href="#cb136-997" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span><span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-136" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb137" data-startfrom="1001" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1000;"><span id="cb137-1001"><a href="#cb137-1001" aria-hidden="true" tabindex="-1"></a><span class="fl">2451549.5</span> <span class="op">-</span> (<span class="fl">44796.0</span> <span class="op">-</span> <span class="fl">0.0009626</span>) <span class="op">*</span> <span class="fl">1.0274912517</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-137" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb138" data-startfrom="1005" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1004;"><span id="cb138-1005"><a href="#cb138-1005" aria-hidden="true" tabindex="-1"></a>msd <span class="op">=</span> (JDtt <span class="op">-</span> <span class="fl">2405522.0028779097</span>) <span class="op">/</span> <span class="fl">1.0274912517</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-138" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb139" data-startfrom="1009" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1008;"><span id="cb139-1009"><a href="#cb139-1009" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Sol of the era</span></span>
<span id="cb139-1010"><a href="#cb139-1010" aria-hidden="true" tabindex="-1"></a><span class="vs">The Mars Sol Date and is similar to Julian Date in that we have to adjust their respective epochs to calculate dates. To calculate the Earth year and day of the year (doty) from the Julian Date, we first have to subtract 1721119.5 from the Julian Date to get the day of the era (dote). Similarly, to calculate the Mars year and sol of the year (soty) from the Mars Sol Date, we first have to subtract 28224 from the Martian Sol Date to get the sol of the era (sote).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-139" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb140" data-startfrom="1014" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1013;"><span id="cb140-1014"><a href="#cb140-1014" aria-hidden="true" tabindex="-1"></a>msd <span class="op">-</span> <span class="dv">28224</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-140" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb141" data-startfrom="1018" data-syntax-error-position="141" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 1017;"><span id="cb141-1018"><a href="#cb141-1018"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb141-1019"><a href="#cb141-1019"></a>md`We can also calculate the sote from UNIX time and the dote<span class="op">.</span> <span class="fu">To</span> calculate the sote from UNIX time<span class="op">,</span> we first have to shift the UNIX <span class="fu">epoch</span> <span class="op">(</span>`<span class="dv">1969</span><span class="op">+</span><span class="fl">3060.0000</span><span class="op">-</span><span class="dv">4</span>`<span class="op">)</span> to the Mars <span class="fu">Epoch</span> <span class="op">(</span>`<span class="dv">1953</span><span class="op">+</span><span class="fl">0844.1516515</span><span class="op">-</span><span class="dv">4</span>`<span class="op">)</span> by adding <span class="fl">6065.58483485</span> days to UNIX time and dividing by <span class="fl">1.0274912517</span> to convert days to sols<span class="op">.</span>`</span>
<span id="cb141-1020"><a href="#cb141-1020"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 1019, column 142)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb142" data-startfrom="1022" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1021;"><span id="cb142-1022"><a href="#cb142-1022" aria-hidden="true" tabindex="-1"></a>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="fl">6065.58483485</span>) <span class="op">/</span> <span class="fl">1.0274912517</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-142" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb143" data-startfrom="1026" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1025;"><span id="cb143-1026"><a href="#cb143-1026" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Likewise, to calculate the sote from the dote, we first have to shift the Decalendar epoch (0000+0000.0000-4) to the Mars Epoch (1953+0844.1516515-4) by subtracting 713402.41516515 days from the dote and dividing by 1.0274912517 to convert days to sols.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-143" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb144" data-startfrom="1030" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1029;"><span id="cb144-1030"><a href="#cb144-1030" aria-hidden="true" tabindex="-1"></a>sote <span class="op">=</span> (zone0dote <span class="op">-</span> <span class="fl">713402.41516515</span>) <span class="op">/</span> <span class="fl">1.0274912517</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-144" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb145" data-startfrom="1034" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1033;"><span id="cb145-1034"><a href="#cb145-1034" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Mars epoch`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-145" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb146" data-startfrom="1038" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1037;"><span id="cb146-1038"><a href="#cb146-1038" aria-hidden="true" tabindex="-1"></a>marsEpochDote <span class="op">=</span> <span class="dv">719468</span> <span class="op">-</span> <span class="fl">6065.58483485</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-146" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb147" data-startfrom="1042" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1041;"><span id="cb147-1042"><a href="#cb147-1042" aria-hidden="true" tabindex="-1"></a>marsEpochJD <span class="op">=</span> marsEpochDote <span class="op">+</span> <span class="fl">1721119.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-147" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb148" data-startfrom="1046" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1045;"><span id="cb148-1046"><a href="#cb148-1046" aria-hidden="true" tabindex="-1"></a>marsEpochDoty <span class="op">=</span> <span class="fu">dote2greg</span>(marsEpochDote)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-148" data-nodetype="declaration">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb149" data-startfrom="1050" data-syntax-error-position="37" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 1049;"><span id="cb149-1050"><a href="#cb149-1050"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb149-1051"><a href="#cb149-1051"></a>md`The Mars <span class="fu">epoch</span> <span class="op">(</span>Year <span class="dv">0</span> Sol <span class="dv">0</span><span class="op">)</span> is `<span class="fl">2434521.91516515</span>` as a Julian <span class="bu">Date</span><span class="op">,</span> `<span class="dv">1953</span><span class="op">-</span><span class="bn">05</span><span class="op">-</span><span class="er">24</span>T09<span class="op">:</span><span class="dv">57</span><span class="op">:</span><span class="fl">50.3</span><span class="op">+</span><span class="bn">00</span><span class="op">:</span><span class="bn">00</span>` in ISO8601 calendar date format<span class="op">,</span> and `<span class="dv">1953</span><span class="op">+</span><span class="fl">0844.1516515</span><span class="op">-</span><span class="dv">4</span>` in Decalendar<span class="op">.</span> <span class="fu">This</span> epoch yields matching numbers after the <span class="fu">decimal</span> <span class="op">(</span>fractional day time<span class="op">)</span> in the sol of the <span class="fu">era</span> <span class="op">(</span>sote<span class="op">),</span> sol of the <span class="fu">year</span> <span class="op">(</span>soty<span class="op">),</span> and Martian Sol <span class="bu">Date</span> <span class="op">(</span>msd<span class="op">).</span> <span class="fu">In</span> other words<span class="op">,</span> the difference between sote time and msd time is negligible<span class="op">.</span>`</span>
<span id="cb149-1052"><a href="#cb149-1052"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 1051, column 38)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb150" data-startfrom="1054" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1053;"><span id="cb150-1054"><a href="#cb150-1054" aria-hidden="true" tabindex="-1"></a>(sote <span class="op">-</span> msd) <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="fl">1e18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-150" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb151" data-startfrom="1058" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1057;"><span id="cb151-1058"><a href="#cb151-1058" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The Mars epoch is also the beginning of the Northward Spring Equinox ([Solar longitude (Ls) = 0](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Definition_of_year_and_seasons)) in [Martian Year 0](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Year_numbering), a fact I confirmed using [an online Martian time calculator](https://www-mars.lmd.jussieu.fr/mars/time/martian_time.html), as shown in the screenshot below:</span></span>
<span id="cb151-1059"><a href="#cb151-1059" aria-hidden="true" tabindex="-1"></a><span class="vs">![image.png](</span><span class="sc">${</span><span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"image.png"</span>)<span class="op">.</span><span class="fu">url</span>()<span class="sc">}</span><span class="vs">)`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-151" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb152" data-startfrom="1063" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1062;"><span id="cb152-1063"><a href="#cb152-1063" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The calculations for Ls are described on the following webpages:</span></span>
<span id="cb152-1064"><a href="#cb152-1064" aria-hidden="true" tabindex="-1"></a><span class="vs">- https://marsclock.com</span></span>
<span id="cb152-1065"><a href="#cb152-1065" aria-hidden="true" tabindex="-1"></a><span class="vs">- https://www.giss.nasa.gov/tools/mars24/help/algorithm.html</span></span>
<span id="cb152-1066"><a href="#cb152-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-1067"><a href="#cb152-1067" aria-hidden="true" tabindex="-1"></a><span class="vs">I decided not to recreate these calculations here. Ls is great at marking the seasons, but not useful for timekeeping because it ["does not increase linearly with time"](https://en.wikipedia.org/wiki/Solar_longitude#:~:text=does%20not%20increase%20linearly%20with%20time).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-152" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb153" data-startfrom="1071" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1070;"><span id="cb153-1071"><a href="#cb153-1071" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Instead of the exact Mars epoch, it may be easier to work with Julian Date </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`2434521.91</span><span class="sc">\o</span><span class="vs">verline6`</span><span class="sc">}</span><span class="vs">, which is 1953-05-24T10:00:00+00:00 in ISO8601 calendar date format and </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`1953{+}0844.1</span><span class="sc">\o</span><span class="vs">verline6{-}4`</span><span class="sc">}</span><span class="vs"> in Decalendar. This number is only 1.5 mils (2.16 minutes) more than the exact Mars epoch and thus should be sufficient for situations that do not require a high level of precision.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-153" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb154" data-startfrom="1075" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1074;"><span id="cb154-1075"><a href="#cb154-1075" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Martian years`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-154" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb155" data-startfrom="1079" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1078;"><span id="cb155-1079"><a href="#cb155-1079" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Martian years are grouped in cycles of 22 years (14709 sols). In a cycle, there are 9 short years that have 668 sols and 13 long years that have 669 sols. Years that are not evenly divisible by 2 always have 669 sols. This is easy to remember because odd years have an odd number of sols. In addition, there are two even years with 669 sols every cycle that  are always 10 years apart within a cycle and 12 years apart between cycles, e.g. 10, 20, 32, 42, 54, 64, etc.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-155" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb156" data-startfrom="1083" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1082;"><span id="cb156-1083"><a href="#cb156-1083" aria-hidden="true" tabindex="-1"></a><span class="dv">668</span> <span class="op">*</span> <span class="dv">22</span> <span class="op">+</span> <span class="dv">13</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-156" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb157" data-startfrom="1087" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1086;"><span id="cb157-1087"><a href="#cb157-1087" aria-hidden="true" tabindex="-1"></a>(<span class="dv">668</span> <span class="op">*</span> <span class="dv">9</span> <span class="op">+</span> <span class="dv">13</span> <span class="op">*</span> <span class="dv">669</span>) <span class="op">/</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-157" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb158" data-startfrom="1091" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1090;"><span id="cb158-1091"><a href="#cb158-1091" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Martian year length averaged over a cycle is 668.5909 sols which is more than the [time between northward spring equinoxes on Mars](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#:~:text=northward%20equinox%20year%20is%20668.5907%20sols) (668.5907), but will eventually be too short as the Martian year grows longer over the course of thousands of years. The error with the 22-year cycle is </span><span class="sc">${</span>((<span class="dv">668</span><span class="op">*</span><span class="dv">22</span><span class="op">+</span><span class="dv">13</span>)<span class="op">/</span><span class="dv">22</span><span class="op">-</span><span class="fl">668.5907</span>)<span class="op">*</span><span class="fl">1e6</span><span class="sc">}</span><span class="vs"> microsols (millionths of a sol) per year. This error rate will eventually be overtaken by the increase in the length of the Martian year. After 10000 years with a Martian year length increase of .07% per Martian millenium, 6685911.68 days will pass instead of 6685909.09 according to 22-year cycle.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-158" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb159" data-startfrom="1095" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1094;"><span id="cb159-1095"><a href="#cb159-1095" aria-hidden="true" tabindex="-1"></a><span class="fl">668.5907</span> <span class="op">*</span> <span class="dv">10000</span> <span class="op">*</span> <span class="fl">1.0000007</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-159" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb160" data-startfrom="1099" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1098;"><span id="cb160-1099"><a href="#cb160-1099" aria-hidden="true" tabindex="-1"></a><span class="fl">668.590909090909</span> <span class="op">*</span> <span class="dv">10000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-160" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb161" data-startfrom="1103" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1102;"><span id="cb161-1103"><a href="#cb161-1103" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`After 3862.158321 years based on a Martian year length increase of .07% per Martian millenium, an additional day will be needed to account for the lengthening of the Martian year.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-161" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb162" data-startfrom="1107" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1106;"><span id="cb162-1107"><a href="#cb162-1107" aria-hidden="true" tabindex="-1"></a><span class="fl">668.5907</span> <span class="op">*</span> <span class="fl">3862.158321</span> <span class="op">*</span> <span class="fl">1.0000007</span> <span class="op">-</span> (<span class="dv">668</span> <span class="op">+</span> <span class="dv">13</span> <span class="op">/</span> <span class="dv">22</span>) <span class="op">*</span> <span class="fl">3862.158321</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-162" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb163" data-startfrom="1111" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1110;"><span id="cb163-1111"><a href="#cb163-1111" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Instead of decreasing the cycle length to adjust to the fact that the Martian year is getting longer and an extra day will be needed sooner, we can introduce the concept of a supercycle. Based on the calculations above a supercycle can consist of 111 cycles of 33 Martian years each. This supercycle will add a day at the end of Year 3663, a year which would otherwise 668. The length of the (super)cycle only affects the timing of the bonus day that is added as the last day of the (super)cycle.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-163" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb164" data-startfrom="1115" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1114;"><span id="cb164-1115"><a href="#cb164-1115" aria-hidden="true" tabindex="-1"></a><span class="dv">3682</span> <span class="op">/</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-164" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb165" data-startfrom="1119" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1118;"><span id="cb165-1119"><a href="#cb165-1119" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`People living on Mars in the future may decide to change the epoch from 1953+0844.1516514995601-4, which is [arbitrary](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#:~:text=the%20choice%20as-,%22arbitrary%22,-%2C%20the%20great%20dust), to a more meaningful moment like the first human landing on Mars or the first seed planted in Martian soil. Regardless of the epoch, the calculations below should keep the northward spring equinox stable as Sol 0 without adjustment for thousands of years. The implementation of a supercycle (or some other mechanism of adding another day) will eventually be needed to maintain the start of Martian spring in the Northern Hemisphere as Sol 0. In the future, we may learn something new about Mar‚Äôs orbit around the Sun that informs the decision of how best to add extra days to the Martian Decalendar.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-165" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb166" data-startfrom="1123" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1122;"><span id="cb166-1123"><a href="#cb166-1123" aria-hidden="true" tabindex="-1"></a>marsSocy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(sote <span class="op">/</span> <span class="dv">14709</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-166" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb167" data-startfrom="1127" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1126;"><span id="cb167-1127"><a href="#cb167-1127" aria-hidden="true" tabindex="-1"></a>sotc <span class="op">=</span> sote <span class="op">-</span> marsSocy <span class="op">*</span> <span class="dv">14709</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-167" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb168" data-startfrom="1131" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1130;"><span id="cb168-1131"><a href="#cb168-1131" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2sote</span>(dote <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb168-1132"><a href="#cb168-1132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (dote <span class="op">-</span> <span class="fl">713402.41516515</span>) <span class="op">/</span> <span class="fl">1.0274912517</span></span>
<span id="cb168-1133"><a href="#cb168-1133" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-168" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb169" data-startfrom="1137" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1136;"><span id="cb169-1137"><a href="#cb169-1137" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2soty</span>(dote <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb169-1138"><a href="#cb169-1138" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fu">sote2soty</span>(<span class="fu">dote2sote</span>(dote))</span>
<span id="cb169-1139"><a href="#cb169-1139" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-169" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb170" data-startfrom="1143" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1142;"><span id="cb170-1143"><a href="#cb170-1143" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">sote2soty</span>(sote <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb170-1144"><a href="#cb170-1144" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((sote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> sote <span class="op">:</span> sote <span class="op">-</span> <span class="dv">14708</span>) <span class="op">/</span> <span class="dv">14709</span>)<span class="op">,</span> sotc <span class="op">=</span> sote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">14709</span><span class="op">,</span></span>
<span id="cb170-1145"><a href="#cb170-1145" aria-hidden="true" tabindex="-1"></a>    yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((sotc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(sotc <span class="op">/</span> <span class="dv">1336</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(sotc <span class="op">/</span> <span class="dv">6686</span>)) <span class="op">/</span> <span class="dv">668</span>)<span class="op">;</span></span>
<span id="cb170-1146"><a href="#cb170-1146" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">22</span><span class="op">,</span> sotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">668</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">2</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">trunc</span>((yotc <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> <span class="dv">10</span>))]</span>
<span id="cb170-1147"><a href="#cb170-1147" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-170" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb171" data-startfrom="1151" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1150;"><span id="cb171-1151"><a href="#cb171-1151" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`- Mars Epoch Example:</span></span>
<span id="cb171-1152"><a href="#cb171-1152" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Gregorian Decalendar:</span></span>
<span id="cb171-1153"><a href="#cb171-1153" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 1953</span></span>
<span id="cb171-1154"><a href="#cb171-1154" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 84.41516515</span></span>
<span id="cb171-1155"><a href="#cb171-1155" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 713402.41516515</span></span>
<span id="cb171-1156"><a href="#cb171-1156" aria-hidden="true" tabindex="-1"></a><span class="vs">  - Mars Decalendar:</span></span>
<span id="cb171-1157"><a href="#cb171-1157" aria-hidden="true" tabindex="-1"></a><span class="vs">    - year: 0</span></span>
<span id="cb171-1158"><a href="#cb171-1158" aria-hidden="true" tabindex="-1"></a><span class="vs">    - doty: 0</span></span>
<span id="cb171-1159"><a href="#cb171-1159" aria-hidden="true" tabindex="-1"></a><span class="vs">    - dote: 0`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-171" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb172" data-startfrom="1163" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1162;"><span id="cb172-1163"><a href="#cb172-1163" aria-hidden="true" tabindex="-1"></a><span class="fu">doty2dote</span>(<span class="dv">1953</span><span class="op">,</span> <span class="fl">84.41516515</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-172" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb173" data-startfrom="1167" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1166;"><span id="cb173-1167"><a href="#cb173-1167" aria-hidden="true" tabindex="-1"></a><span class="fu">dote2soty</span>(<span class="fl">713402.41516515</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-173" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb174" data-startfrom="1171" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1170;"><span id="cb174-1171"><a href="#cb174-1171" aria-hidden="true" tabindex="-1"></a>mars <span class="op">=</span> <span class="fu">dote2soty</span>(unix <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-174" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb175" data-startfrom="1175" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1174;"><span id="cb175-1175"><a href="#cb175-1175" aria-hidden="true" tabindex="-1"></a>marsDeco <span class="op">=</span> <span class="vs">`üóìÔ∏èÔ∏è</span><span class="sc">${</span>mars[<span class="dv">0</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(mars[<span class="dv">1</span>])<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">üï∞</span><span class="sc">${</span>(mars[<span class="dv">1</span>] <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="dv">10</span>)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-175" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb176" data-startfrom="1179" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1178;"><span id="cb176-1179"><a href="#cb176-1179" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`For a direct calculation of Martian and Earth time, check out the [Declock notebook](/@dec/declock).`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-176" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb177" data-startfrom="1183" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1182;"><span id="cb177-1183"><a href="#cb177-1183" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Moon</span></span>
<span id="cb177-1184"><a href="#cb177-1184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-1185"><a href="#cb177-1185" aria-hidden="true" tabindex="-1"></a><span class="vs">In the future, the Moon and its</span></span>
<span id="cb177-1186"><a href="#cb177-1186" aria-hidden="true" tabindex="-1"></a><span class="vs">[Lagrange points](https://en.wikipedia.org/wiki/Lagrange_point#:~:text=points%20of%20equilibrium%20for%20small%2Dmass%20objects%20under%20the%20gravitational%20influence%20of%20two%20massive%20orbiting%20bodies)</span></span>
<span id="cb177-1187"><a href="#cb177-1187" aria-hidden="true" tabindex="-1"></a><span class="vs">could be important staging areas for space travel. Humans living on the surface</span></span>
<span id="cb177-1188"><a href="#cb177-1188" aria-hidden="true" tabindex="-1"></a><span class="vs">of the Moon will need a time system that relates to their environment.</span></span>
<span id="cb177-1189"><a href="#cb177-1189" aria-hidden="true" tabindex="-1"></a><span class="vs">Decalendar measures time on the Moon in lunar years and lunar days. Just as a Martian solar day can be called a sol, a lunar day can be called a tel, which comes from the ancient Roman name [Tellus](https://en.wikipedia.org/wiki/Terra_%28mythology%29#Tellus_and_Terra_in_science_fiction:~:text=the%20name%20of%20the%20original%20earth%20goddess%20in%20the%20religious%20practices%20of%20the%20Republic) and is short for [tellurian or telluric](https://en.wikipedia.org/wiki/List_of_adjectivals_and_demonyms_of_astronomical_bodies#:~:text=Tellurian%2C%5B3%5D%20Telluric). A lunar year in Decalendar is a turn of the Moon around the Earth, which has the same duration as a turn of the Moon on its axis, because the Moon is [tidally locked](https://en.wikipedia.org/wiki/Tidal_locking#:~:text=the%20objects%20reaches-,a%20state%20where%20there%20is%20no%20longer%20any%20net%20change%20in%20its%20rotation%20rate%20over%20the%20course%20of%20a%20complete%20orbit,-.%20In%20the%20case) to the Earth.</span></span>
<span id="cb177-1190"><a href="#cb177-1190" aria-hidden="true" tabindex="-1"></a><span class="vs">The animation below shows how tidal locking synchronizes the Moon's turns on its axis and around the Earth.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-177" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb178" data-startfrom="1194" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1193;"><span id="cb178-1194"><a href="#cb178-1194" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@jhhamer/moon-earth-system</span></span>
<span id="cb178-1195"><a href="#cb178-1195" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@jhhamer/tides-in-hot-jupiter-systems</span></span>
<span id="cb178-1196"><a href="#cb178-1196" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb178-1197"><a href="#cb178-1197" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> h <span class="op">=</span> w<span class="op">;</span></span>
<span id="cb178-1198"><a href="#cb178-1198" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-1199"><a href="#cb178-1199" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> d3<span class="op">.</span><span class="fu">select</span>(DOM<span class="op">.</span><span class="fu">svg</span>(w<span class="op">,</span> h))<span class="op">;</span></span>
<span id="cb178-1200"><a href="#cb178-1200" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1201"><a href="#cb178-1201" aria-hidden="true" tabindex="-1"></a>  svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"rect"</span>)</span>
<span id="cb178-1202"><a href="#cb178-1202" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> <span class="st">"100%"</span>)</span>
<span id="cb178-1203"><a href="#cb178-1203" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> <span class="st">"100%"</span>)</span>
<span id="cb178-1204"><a href="#cb178-1204" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">;</span></span>
<span id="cb178-1205"><a href="#cb178-1205" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1206"><a href="#cb178-1206" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Earth</span></span>
<span id="cb178-1207"><a href="#cb178-1207" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> earth <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"ellipse"</span>)</span>
<span id="cb178-1208"><a href="#cb178-1208" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"rx"</span><span class="op">,</span> earth_radius<span class="op">*</span>scale)</span>
<span id="cb178-1209"><a href="#cb178-1209" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"ry"</span><span class="op">,</span> earth_radius<span class="op">*</span>scale)</span>
<span id="cb178-1210"><a href="#cb178-1210" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"steelblue"</span>))</span>
<span id="cb178-1211"><a href="#cb178-1211" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1212"><a href="#cb178-1212" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1213"><a href="#cb178-1213" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"earth"</span>)<span class="op">;</span></span>
<span id="cb178-1214"><a href="#cb178-1214" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1215"><a href="#cb178-1215" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> earth_midline <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb178-1216"><a href="#cb178-1216" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span><span class="op">-</span>earth_radius<span class="op">*</span>scale)</span>
<span id="cb178-1217"><a href="#cb178-1217" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1218"><a href="#cb178-1218" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span><span class="op">+</span>earth_radius<span class="op">*</span>scale)</span>
<span id="cb178-1219"><a href="#cb178-1219" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1220"><a href="#cb178-1220" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb178-1221"><a href="#cb178-1221" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">;</span></span>
<span id="cb178-1222"><a href="#cb178-1222" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1223"><a href="#cb178-1223" aria-hidden="true" tabindex="-1"></a>  <span class="co">//Moon</span></span>
<span id="cb178-1224"><a href="#cb178-1224" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> moonOrbit <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb178-1225"><a href="#cb178-1225" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1226"><a href="#cb178-1226" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1227"><a href="#cb178-1227" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1228"><a href="#cb178-1228" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> moonorbitpath <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb178-1229"><a href="#cb178-1229" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1230"><a href="#cb178-1230" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1231"><a href="#cb178-1231" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> earth_moon_dist)</span>
<span id="cb178-1232"><a href="#cb178-1232" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"id"</span><span class="op">,</span> <span class="st">"moon"</span>)</span>
<span id="cb178-1233"><a href="#cb178-1233" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"None"</span>)</span>
<span id="cb178-1234"><a href="#cb178-1234" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">'white'</span>))</span>
<span id="cb178-1235"><a href="#cb178-1235" aria-hidden="true" tabindex="-1"></a>   <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb178-1236"><a href="#cb178-1236" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-1237"><a href="#cb178-1237" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> moon <span class="op">=</span> moonOrbit<span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb178-1238"><a href="#cb178-1238" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> moon_radius<span class="op">*</span>scale)</span>
<span id="cb178-1239"><a href="#cb178-1239" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cx"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span> <span class="op">-</span> earth_moon_dist)</span>
<span id="cb178-1240"><a href="#cb178-1240" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"cy"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1241"><a href="#cb178-1241" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"lightgray"</span>))<span class="op">;</span></span>
<span id="cb178-1242"><a href="#cb178-1242" aria-hidden="true" tabindex="-1"></a>  <span class="kw">var</span> tidal_midline <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"line"</span>)</span>
<span id="cb178-1243"><a href="#cb178-1243" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x1"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span><span class="op">-</span>earth_moon_dist)</span>
<span id="cb178-1244"><a href="#cb178-1244" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y1"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1245"><a href="#cb178-1245" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x2"</span><span class="op">,</span> w<span class="op">/</span><span class="dv">2</span><span class="op">+</span>earth_moon_dist<span class="op">-</span><span class="dv">50</span><span class="op">+</span>(width <span class="op">&lt;</span> <span class="dv">800</span>)<span class="op">*</span><span class="dv">10</span><span class="op">+</span>(width <span class="op">&lt;</span> <span class="dv">400</span>)<span class="op">*</span><span class="dv">3</span>)</span>
<span id="cb178-1246"><a href="#cb178-1246" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y2"</span><span class="op">,</span> h<span class="op">/</span><span class="dv">2</span>)</span>
<span id="cb178-1247"><a href="#cb178-1247" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> <span class="dv">5</span>)</span>
<span id="cb178-1248"><a href="#cb178-1248" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> <span class="st">"white"</span>)<span class="op">;</span></span>
<span id="cb178-1249"><a href="#cb178-1249" aria-hidden="true" tabindex="-1"></a>  <span class="co">// var moon_midline = svg.append("line")</span></span>
<span id="cb178-1250"><a href="#cb178-1250" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("x1", w/2-earth_moon_dist)</span></span>
<span id="cb178-1251"><a href="#cb178-1251" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("y1", h/2)</span></span>
<span id="cb178-1252"><a href="#cb178-1252" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("x2", w/2+earth_moon_dist-943)</span></span>
<span id="cb178-1253"><a href="#cb178-1253" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("y2", h/2)</span></span>
<span id="cb178-1254"><a href="#cb178-1254" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("stroke-width", 4)</span></span>
<span id="cb178-1255"><a href="#cb178-1255" aria-hidden="true" tabindex="-1"></a>  <span class="co">//   .attr("stroke", "black");</span></span>
<span id="cb178-1256"><a href="#cb178-1256" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1257"><a href="#cb178-1257" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">timer</span>(animate)<span class="op">;</span></span>
<span id="cb178-1258"><a href="#cb178-1258" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1259"><a href="#cb178-1259" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">animate</span>(elapsed){</span>
<span id="cb178-1260"><a href="#cb178-1260" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> moondegrees <span class="op">=</span> ((elapsed<span class="op">/</span><span class="fl">16.2</span>)<span class="op">*.</span><span class="bn">0365</span>)<span class="op">%</span><span class="dv">360</span><span class="op">;</span></span>
<span id="cb178-1261"><a href="#cb178-1261" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> earthdegrees <span class="op">=</span> (elapsed<span class="op">/</span><span class="fl">16.2</span>)<span class="op">%</span><span class="dv">360</span><span class="op">;</span></span>
<span id="cb178-1262"><a href="#cb178-1262" aria-hidden="true" tabindex="-1"></a>    moon</span>
<span id="cb178-1263"><a href="#cb178-1263" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`rotate(-</span><span class="sc">${</span>moondegrees<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>w<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>h<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">)`</span>)<span class="op">;</span></span>
<span id="cb178-1264"><a href="#cb178-1264" aria-hidden="true" tabindex="-1"></a>    earth</span>
<span id="cb178-1265"><a href="#cb178-1265" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`rotate(-</span><span class="sc">${</span>moondegrees<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>w<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>h<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">)`</span>)<span class="op">;</span></span>
<span id="cb178-1266"><a href="#cb178-1266" aria-hidden="true" tabindex="-1"></a>    earth_midline</span>
<span id="cb178-1267"><a href="#cb178-1267" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`rotate(-</span><span class="sc">${</span>earthdegrees<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>w<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>h<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">)`</span>)<span class="op">;</span></span>
<span id="cb178-1268"><a href="#cb178-1268" aria-hidden="true" tabindex="-1"></a>    tidal_midline</span>
<span id="cb178-1269"><a href="#cb178-1269" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> <span class="vs">`rotate(-</span><span class="sc">${</span>moondegrees<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>w<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>h<span class="op">/</span><span class="dv">2</span><span class="sc">}</span><span class="vs">)`</span>)<span class="op">;</span></span>
<span id="cb178-1270"><a href="#cb178-1270" aria-hidden="true" tabindex="-1"></a>    <span class="co">// moon_midline</span></span>
<span id="cb178-1271"><a href="#cb178-1271" aria-hidden="true" tabindex="-1"></a>    <span class="co">//   .attr("transform", `rotate(-${moondegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb178-1272"><a href="#cb178-1272" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-1273"><a href="#cb178-1273" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb178-1274"><a href="#cb178-1274" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb178-1275"><a href="#cb178-1275" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> svg<span class="op">.</span><span class="fu">node</span>()<span class="op">;</span></span>
<span id="cb178-1276"><a href="#cb178-1276" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-178" data-nodetype="expression">

</div>
</div>
</div>
<div class="quarto-ojs-syntax-error">
<div class="sourceCode" id="cb179" data-startfrom="1280" data-syntax-error-position="52" data-source-offset="9"><pre class="sourceCode numberSource numberLines java code-with-copy"><code class="sourceCode java" style="counter-reset: source-line 1279;"><span id="cb179-1280"><a href="#cb179-1280"></a>```<span class="op">{</span>ojs<span class="op">}</span></span>
<span id="cb179-1281"><a href="#cb179-1281"></a>md`Tidal locking also affects the length of a <span class="fu">tel</span> <span class="op">(</span>`d`<span class="op">),</span> which is defined in terms of the duration of the lunar <span class="fu">year</span> <span class="op">(</span>`y`<span class="op">):</span> $<span class="op">{</span>tex`d <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span> \div y`<span class="op">}.</span> <span class="fu">The</span> average lunar year length in a time period from the <span class="kw">new</span> moon on <span class="dv">1999</span><span class="op">+</span><span class="dv">311</span> to the <span class="kw">new</span> moon <span class="dv">2500</span><span class="op">+</span><span class="dv">325</span> is <span class="fl">29.53023507695045</span> days according to <span class="op">[</span>astropixels<span class="op">.</span><span class="fu">com</span><span class="op">](</span>https<span class="op">:</span><span class="co">//astropixels.com/ephemeris/moon/synodicmonth2001.html) data. Based on this lunar year length, the length of a tel is ${1+1/29.53023507695045} days, which is [the time it takes the Moon to return to the same location above the Earth](https://en.wikipedia.org/wiki/Lunar_day#:~:text=the%20period%20between%20moonrises%20or%20high%20moon%20in%20a%20particular%20location%20on%20Earth). The number of tels in a lunar year is therefore ${29.53023507695045/1.0338635976785888} days. Decimal tels provide the time on the Moon. The [center of Zone 0 on the Moon](https://en.wikipedia.org/wiki/Selenographic_coordinate_system#:~:text=the%20midpoint%20of%20the%20visible%20moon%20as%20seen%20from%20the%20earth) is a [Meridian](https://en.wikipedia.org/wiki/Meridian_%28geography%28#:~:text=the%20locus%20connecting%20points%20of%20equal%20longitude) 05, a line that separates the [near side of the Moon](https://en.wikipedia.org/wiki/Near_side_of_the_Moon#:~:text=the%20lunar%20hemisphere%20that%20always%20faces%20towards%20Earth) into two equal West and East halves.`</span></span>
<span id="cb179-1282"><a href="#cb179-1282"></a>```</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
OJS Syntax Error (line 1281, column 53)Unexpected token
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb180" data-startfrom="1284" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1283;"><span id="cb180-1284"><a href="#cb180-1284" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Decalendar years typically start with the [Northward Equinox](https://en.wikipedia.org/wiki/March_equinox#:~:text=the%20equinox%20on%20the%20earth%20when%20the%20subsolar%20point%20appears%20to%20leave%20the%20southern%20hemisphere%20and%20cross%20the%20celestial%20equator%2C%20heading%20northward), but the Moon does</span></span>
<span id="cb180-1285"><a href="#cb180-1285" aria-hidden="true" tabindex="-1"></a><span class="vs">not have noticeable seasons because it is</span></span>
<span id="cb180-1286"><a href="#cb180-1286" aria-hidden="true" tabindex="-1"></a><span class="vs">[tilted by only about </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`4.1</span><span class="sc">\o</span><span class="vs">verline6`</span><span class="sc">}</span><span class="vs"> microturns on it axis](https://www.space.com/55-earths-moon-formation-composition-and-orbit.html#:~:text=tilted%20by%20only%20about%201.5%20degrees), which is more than 10000 times smaller than the Earth‚Äôs </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`65.</span><span class="sc">\o</span><span class="vs">verline1`</span><span class="sc">}</span><span class="vs"> milliturn [tilt](https://en.wikipedia.org/wiki/Axial_tilt#:~:text=axial%20tilt%20of-,about%2023.44%C2%B0,-.%5B7%5D%20This%20value%20remains). Therefore,</span></span>
<span id="cb180-1287"><a href="#cb180-1287" aria-hidden="true" tabindex="-1"></a><span class="vs">instead of following the seasons, we should follow the [Moon phases](https://en.wikipedia.org/wiki/Lunar_phase#:~:text=the%20apparent%20shape%20of%20the%20Moon%27s%20directly%20sunlit%20portion%20as%20viewed%20from%20the%20Earth).</span></span>
<span id="cb180-1288"><a href="#cb180-1288" aria-hidden="true" tabindex="-1"></a><span class="vs">Decalendar defines the lunar epoch to be</span></span>
<span id="cb180-1289"><a href="#cb180-1289" aria-hidden="true" tabindex="-1"></a><span class="vs">[1999+311.75972-0](https://en.wikipedia.org/wiki/New_moon#:~:text=18%3A14%20UTC%2C%206%20January%202000),</span></span>
<span id="cb180-1290"><a href="#cb180-1290" aria-hidden="true" tabindex="-1"></a><span class="vs">the first new moon after</span></span>
<span id="cb180-1291"><a href="#cb180-1291" aria-hidden="true" tabindex="-1"></a><span class="vs">[J2000](https://en.wikipedia.org/wiki/Epoch_%28astronomy%29#:~:text=currently%20used%20standard%20epoch%20%22J2000%22).</span></span>
<span id="cb180-1292"><a href="#cb180-1292" aria-hidden="true" tabindex="-1"></a><span class="vs">The number of days after this epoch is the lunar day of the era (dote). To obtain the current lunar year and tel of the year (toty), we first divide the lunar dote by 1.0338635976785888 to get the tel of</span></span>
<span id="cb180-1293"><a href="#cb180-1293" aria-hidden="true" tabindex="-1"></a><span class="vs">the era (tote). Then, after we split up the tote into lunar years, we can convert the remainder into the toty or a decimal lunar year,  which provides the Moon phase as shown by visualization and slider below.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-180" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb181" data-startfrom="1297" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1296;"><span id="cb181-1297"><a href="#cb181-1297" aria-hidden="true" tabindex="-1"></a><span class="fu">moon</span>(<span class="fu">universe</span>(width <span class="op">/</span> <span class="dv">4000</span> <span class="op">+</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="op">.</span><span class="dv">9</span><span class="op">,</span> <span class="st">"black"</span>)<span class="op">,</span> moonFraction <span class="op">/</span> <span class="dv">100</span><span class="op">,</span> <span class="st">"white"</span><span class="op">,</span> <span class="st">"black"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-181" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb182" data-startfrom="1301" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1300;"><span id="cb182-1301"><a href="#cb182-1301" aria-hidden="true" tabindex="-1"></a>viewof moonFraction <span class="op">=</span> <span class="fu">Scrubber</span>(d3<span class="op">.</span><span class="fu">range</span>(<span class="dv">101</span>)<span class="op">,</span> {</span>
<span id="cb182-1302"><a href="#cb182-1302" aria-hidden="true" tabindex="-1"></a>  <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span></span>
<span id="cb182-1303"><a href="#cb182-1303" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-182" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb183" data-startfrom="1307" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1306;"><span id="cb183-1307"><a href="#cb183-1307" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The lunar leap cycle is determined by the</span></span>
<span id="cb183-1308"><a href="#cb183-1308" aria-hidden="true" tabindex="-1"></a><span class="vs">[fractional part](https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part)</span></span>
<span id="cb183-1309"><a href="#cb183-1309" aria-hidden="true" tabindex="-1"></a><span class="vs">of the lunar year length, which is close to the fraction </span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`9/16=.5625`</span><span class="sc">}</span><span class="vs">. The</span></span>
<span id="cb183-1310"><a href="#cb183-1310" aria-hidden="true" tabindex="-1"></a><span class="vs">numerator in this fraction is the number of 29-tel long lunar years in the</span></span>
<span id="cb183-1311"><a href="#cb183-1311" aria-hidden="true" tabindex="-1"></a><span class="vs">cycle, while the denominator is the leap cycle length in lunar years. Inside a</span></span>
<span id="cb183-1312"><a href="#cb183-1312" aria-hidden="true" tabindex="-1"></a><span class="vs">lunar leap cycle, lunar years are numbered 0 through 15. Even-numbered lunar</span></span>
<span id="cb183-1313"><a href="#cb183-1313" aria-hidden="true" tabindex="-1"></a><span class="vs">years except for Year 10 have 28 tels. Year 10 and all odd-numbered years have</span></span>
<span id="cb183-1314"><a href="#cb183-1314" aria-hidden="true" tabindex="-1"></a><span class="vs">29 tels. This is easy to remember because with the exception of Year 10 in the</span></span>
<span id="cb183-1315"><a href="#cb183-1315" aria-hidden="true" tabindex="-1"></a><span class="vs">cycle, even-numbered years have an even number of tels (28) and odd-numbered</span></span>
<span id="cb183-1316"><a href="#cb183-1316" aria-hidden="true" tabindex="-1"></a><span class="vs">years have an odd number of tels (29).</span></span>
<span id="cb183-1317"><a href="#cb183-1317" aria-hidden="true" tabindex="-1"></a><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-183" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb184" data-startfrom="1321" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1320;"><span id="cb184-1321"><a href="#cb184-1321" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`The lunar leap cycle is designed to follow the lunar day-night cycle and the</span></span>
<span id="cb184-1322"><a href="#cb184-1322" aria-hidden="true" tabindex="-1"></a><span class="vs">Moon</span></span>
<span id="cb184-1323"><a href="#cb184-1323" aria-hidden="true" tabindex="-1"></a><span class="vs">and</span></span>
<span id="cb184-1324"><a href="#cb184-1324" aria-hidden="true" tabindex="-1"></a><span class="vs">[Earth</span></span>
<span id="cb184-1325"><a href="#cb184-1325" aria-hidden="true" tabindex="-1"></a><span class="vs">phases](https://en.wikipedia.org/wiki/Earth_phase#:~:text=the%20shape%20of%20the%20directly%20sunlit%20portion%20of%20Earth%20as%20viewed%20from%20the%20Moon), keeping the new moon close to Tel 0 and full moon close to Tel 14. The</span></span>
<span id="cb184-1326"><a href="#cb184-1326" aria-hidden="true" tabindex="-1"></a><span class="vs">error rate of the lunar leap cycle is -0.0004894922859186579 tels per lunar</span></span>
<span id="cb184-1327"><a href="#cb184-1327" aria-hidden="true" tabindex="-1"></a><span class="vs">year, which means we will have to add a tel before the Year 2042 to avoid</span></span>
<span id="cb184-1328"><a href="#cb184-1328" aria-hidden="true" tabindex="-1"></a><span class="vs">falling a tel behind the start of the lunar year.</span></span>
<span id="cb184-1329"><a href="#cb184-1329" aria-hidden="true" tabindex="-1"></a><span class="vs">A nice potential intercalation</span></span>
<span id="cb184-1330"><a href="#cb184-1330" aria-hidden="true" tabindex="-1"></a><span class="vs">point for this additional tel may be the Year 2000 which has 28 tels and is the</span></span>
<span id="cb184-1331"><a href="#cb184-1331" aria-hidden="true" tabindex="-1"></a><span class="vs">first year in Cycle 125.</span></span>
<span id="cb184-1332"><a href="#cb184-1332" aria-hidden="true" tabindex="-1"></a><span class="vs">Altogether in one cycle, there are 457 tels, which are numbered 0 to 456,</span></span>
<span id="cb184-1333"><a href="#cb184-1333" aria-hidden="true" tabindex="-1"></a><span class="vs">but Cycle 125 could be the first cycle to have 458 days, numbered 0 to 457.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-184" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb185" data-startfrom="1337" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1336;"><span id="cb185-1337"><a href="#cb185-1337" aria-hidden="true" tabindex="-1"></a>moonDote <span class="op">=</span> zone0dote <span class="op">-</span> <span class="fu">doty2dote</span>(<span class="dv">1999</span><span class="op">,</span> <span class="fl">311.75</span><span class="op">+</span><span class="dv">14</span><span class="op">/</span><span class="dv">60</span><span class="op">/</span><span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-185" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb186" data-startfrom="1341" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1340;"><span id="cb186-1341"><a href="#cb186-1341" aria-hidden="true" tabindex="-1"></a>moonTote <span class="op">=</span> moonDote <span class="op">/</span> <span class="fl">1.0338635976785888</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-186" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb187" data-startfrom="1345" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1344;"><span id="cb187-1345"><a href="#cb187-1345" aria-hidden="true" tabindex="-1"></a>moonEpoch <span class="op">=</span> <span class="fu">doty2dote</span>(<span class="dv">1999</span><span class="op">,</span> <span class="fl">311.75</span><span class="op">+</span><span class="dv">14</span><span class="op">/</span><span class="dv">60</span><span class="op">/</span><span class="dv">24</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-187" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb188" data-startfrom="1349" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1348;"><span id="cb188-1349"><a href="#cb188-1349" aria-hidden="true" tabindex="-1"></a>daysSinceJ2000 <span class="op">=</span> JDtt <span class="op">-</span> <span class="dv">2451545</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-188" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb189" data-startfrom="1353" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1352;"><span id="cb189-1353"><a href="#cb189-1353" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">tote2toty</span>(tote <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb189-1354"><a href="#cb189-1354" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((tote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> tote <span class="op">:</span> tote <span class="op">-</span> <span class="dv">456</span>) <span class="op">/</span> <span class="dv">457</span>)<span class="op">,</span> totc <span class="op">=</span> tote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">457</span><span class="op">,</span></span>
<span id="cb189-1355"><a href="#cb189-1355" aria-hidden="true" tabindex="-1"></a>    yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((totc <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(totc <span class="op">/</span> <span class="dv">56</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(totc <span class="op">/</span> <span class="dv">286</span>)) <span class="op">/</span> <span class="dv">28</span>)<span class="op">;</span></span>
<span id="cb189-1356"><a href="#cb189-1356" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">16</span><span class="op">,</span> totc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">28</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">2</span>) <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">trunc</span>((yotc <span class="op">-</span> <span class="dv">1</span>) <span class="op">/</span> <span class="dv">10</span>))]</span>
<span id="cb189-1357"><a href="#cb189-1357" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-189" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb190" data-startfrom="1361" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1360;"><span id="cb190-1361"><a href="#cb190-1361" aria-hidden="true" tabindex="-1"></a>yt <span class="op">=</span> <span class="fu">tote2toty</span>(moonTote)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-190" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb191" data-startfrom="1365" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1364;"><span id="cb191-1365"><a href="#cb191-1365" aria-hidden="true" tabindex="-1"></a>moonYear <span class="op">=</span> yt[<span class="dv">0</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-191" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb192" data-startfrom="1369" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1368;"><span id="cb192-1369"><a href="#cb192-1369" aria-hidden="true" tabindex="-1"></a>moonToty <span class="op">=</span> yt[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-192" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb193" data-startfrom="1373" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1372;"><span id="cb193-1373"><a href="#cb193-1373" aria-hidden="true" tabindex="-1"></a>moonTime <span class="op">=</span> moonToty <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-193" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb194" data-startfrom="1377" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1376;"><span id="cb194-1377"><a href="#cb194-1377" aria-hidden="true" tabindex="-1"></a>moonDeco <span class="op">=</span> <span class="vs">`üóì</span><span class="sc">${</span><span class="bu">String</span>(moonYear)<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">5</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span><span class="bu">String</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(moonToty))<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">2</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">üï∞</span><span class="sc">${</span>moonTime<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">4</span>)<span class="sc">}</span><span class="vs">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-194" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb195" data-startfrom="1381" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1380;"><span id="cb195-1381"><a href="#cb195-1381" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`## Appendix`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-195" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb196" data-startfrom="1385" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1384;"><span id="cb196-1385"><a href="#cb196-1385" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`Gravity is far lower on the Moon, which slightly speeds up the passage</span></span>
<span id="cb196-1386"><a href="#cb196-1386" aria-hidden="true" tabindex="-1"></a><span class="vs">of time. The increase in speed is about 648</span></span>
<span id="cb196-1387"><a href="#cb196-1387" aria-hidden="true" tabindex="-1"></a><span class="vs">(</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`56.0199 </span><span class="sc">\d</span><span class="vs">iv .0864 = 648.37847</span><span class="sc">\o</span><span class="vs">verline2`</span><span class="sc">}</span><span class="vs">) picodays (</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`10^{-12}`</span><span class="sc">}</span></span>
<span id="cb196-1388"><a href="#cb196-1388" aria-hidden="true" tabindex="-1"></a><span class="vs">days) per day (pdpd)</span></span>
<span id="cb196-1389"><a href="#cb196-1389" aria-hidden="true" tabindex="-1"></a><span class="vs">[faster on the Moon than on Earth](https://arxiv.org/html/2402.11150v1#:~:text=a%20time%20difference%20per%20day).</span></span>
<span id="cb196-1390"><a href="#cb196-1390" aria-hidden="true" tabindex="-1"></a><span class="vs">This difference is</span></span>
<span id="cb196-1391"><a href="#cb196-1391" aria-hidden="true" tabindex="-1"></a><span class="vs">[even greater](https://arxiv.org/html/2402.11150v1#:~:text=computed%20rates%20for%20various%20points%20of%20interest)</span></span>
<span id="cb196-1392"><a href="#cb196-1392" aria-hidden="true" tabindex="-1"></a><span class="vs">at the Moon's Lagrange points in the</span></span>
<span id="cb196-1393"><a href="#cb196-1393" aria-hidden="true" tabindex="-1"></a><span class="vs">[microgravity](https://www.nasa.gov/centers-and-facilities/glenn/what-is-microgravity)</span></span>
<span id="cb196-1394"><a href="#cb196-1394" aria-hidden="true" tabindex="-1"></a><span class="vs">of lunar orbit. To account for faster time on the Moon, we multiply time by the [fold change](https://en.wikipedia.org/wiki/Fold_change#:~:text=the%20ratio%20between%20the%20two%20quantities) (</span><span class="sc">${</span><span class="fu">tex</span><span class="vs">`1+</span><span class="sc">\f</span><span class="vs">rac{56.0199}{864</span><span class="sc">\t</span><span class="vs">imes10^{8}}`</span><span class="sc">}</span><span class="vs">) in the speed of time when moving from one place to another. I decided to not include this correction in the calculations above. The faster rate of time on the Moon slightly decreases the lunar year duration on the Moon. A shorter lunar year will slightly decrease the error rate in the Lunar leap year scheme. In contrast, the error rate will increase more significantly with time as the Moon drifts further from the Earth, causing its orbital velocity to decrease and the lunar year to become longer.`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-196" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb197" data-startfrom="1398" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1397;"><span id="cb197-1398"><a href="#cb197-1398" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Solar Hijiri Leap Cycle</span></span>
<span id="cb197-1399"><a href="#cb197-1399" aria-hidden="true" tabindex="-1"></a><span class="vs">| Yotc | Start | Stop  | N-365 |</span></span>
<span id="cb197-1400"><a href="#cb197-1400" aria-hidden="true" tabindex="-1"></a><span class="vs">| ---- | ----- | ----- | ----- |</span></span>
<span id="cb197-1401"><a href="#cb197-1401" aria-hidden="true" tabindex="-1"></a><span class="vs">| 0    | 0     | 365   | 0     |</span></span>
<span id="cb197-1402"><a href="#cb197-1402" aria-hidden="true" tabindex="-1"></a><span class="vs">| 1    | 365   | 730   | 0     |</span></span>
<span id="cb197-1403"><a href="#cb197-1403" aria-hidden="true" tabindex="-1"></a><span class="vs">| 2    | 730   | 1095  | 0     |</span></span>
<span id="cb197-1404"><a href="#cb197-1404" aria-hidden="true" tabindex="-1"></a><span class="vs">| 3    | 1095  | 1460  | 0     |</span></span>
<span id="cb197-1405"><a href="#cb197-1405" aria-hidden="true" tabindex="-1"></a><span class="vs">| 4    | 1460  | 1826  | 1     |</span></span>
<span id="cb197-1406"><a href="#cb197-1406" aria-hidden="true" tabindex="-1"></a><span class="vs">| 5    | 1826  | 2191  | 0     |</span></span>
<span id="cb197-1407"><a href="#cb197-1407" aria-hidden="true" tabindex="-1"></a><span class="vs">| 6    | 2191  | 2556  | 0     |</span></span>
<span id="cb197-1408"><a href="#cb197-1408" aria-hidden="true" tabindex="-1"></a><span class="vs">| 7    | 2556  | 2921  | 0     |</span></span>
<span id="cb197-1409"><a href="#cb197-1409" aria-hidden="true" tabindex="-1"></a><span class="vs">| 8    | 2921  | 3287  | 1     |</span></span>
<span id="cb197-1410"><a href="#cb197-1410" aria-hidden="true" tabindex="-1"></a><span class="vs">| 9    | 3287  | 3652  | 0     |</span></span>
<span id="cb197-1411"><a href="#cb197-1411" aria-hidden="true" tabindex="-1"></a><span class="vs">| 10   | 3652  | 4017  | 0     |</span></span>
<span id="cb197-1412"><a href="#cb197-1412" aria-hidden="true" tabindex="-1"></a><span class="vs">| 11   | 4017  | 4382  | 0     |</span></span>
<span id="cb197-1413"><a href="#cb197-1413" aria-hidden="true" tabindex="-1"></a><span class="vs">| 12   | 4382  | 4748  | 1     |</span></span>
<span id="cb197-1414"><a href="#cb197-1414" aria-hidden="true" tabindex="-1"></a><span class="vs">| 13   | 4748  | 5113  | 0     |</span></span>
<span id="cb197-1415"><a href="#cb197-1415" aria-hidden="true" tabindex="-1"></a><span class="vs">| 14   | 5113  | 5478  | 0     |</span></span>
<span id="cb197-1416"><a href="#cb197-1416" aria-hidden="true" tabindex="-1"></a><span class="vs">| 15   | 5478  | 5843  | 0     |</span></span>
<span id="cb197-1417"><a href="#cb197-1417" aria-hidden="true" tabindex="-1"></a><span class="vs">| 16   | 5843  | 6209  | 1     |</span></span>
<span id="cb197-1418"><a href="#cb197-1418" aria-hidden="true" tabindex="-1"></a><span class="vs">| 17   | 6209  | 6574  | 0     |</span></span>
<span id="cb197-1419"><a href="#cb197-1419" aria-hidden="true" tabindex="-1"></a><span class="vs">| 18   | 6574  | 6939  | 0     |</span></span>
<span id="cb197-1420"><a href="#cb197-1420" aria-hidden="true" tabindex="-1"></a><span class="vs">| 19   | 6939  | 7304  | 0     |</span></span>
<span id="cb197-1421"><a href="#cb197-1421" aria-hidden="true" tabindex="-1"></a><span class="vs">| 20   | 7304  | 7670  | 1     |</span></span>
<span id="cb197-1422"><a href="#cb197-1422" aria-hidden="true" tabindex="-1"></a><span class="vs">| 21   | 7670  | 8035  | 0     |</span></span>
<span id="cb197-1423"><a href="#cb197-1423" aria-hidden="true" tabindex="-1"></a><span class="vs">| 22   | 8035  | 8400  | 0     |</span></span>
<span id="cb197-1424"><a href="#cb197-1424" aria-hidden="true" tabindex="-1"></a><span class="vs">| 23   | 8400  | 8765  | 0     |</span></span>
<span id="cb197-1425"><a href="#cb197-1425" aria-hidden="true" tabindex="-1"></a><span class="vs">| 24   | 8765  | 9131  | 1     |</span></span>
<span id="cb197-1426"><a href="#cb197-1426" aria-hidden="true" tabindex="-1"></a><span class="vs">| 25   | 9131  | 9496  | 0     |</span></span>
<span id="cb197-1427"><a href="#cb197-1427" aria-hidden="true" tabindex="-1"></a><span class="vs">| 26   | 9496  | 9861  | 0     |</span></span>
<span id="cb197-1428"><a href="#cb197-1428" aria-hidden="true" tabindex="-1"></a><span class="vs">| 27   | 9861  | 10226 | 0     |</span></span>
<span id="cb197-1429"><a href="#cb197-1429" aria-hidden="true" tabindex="-1"></a><span class="vs">| 28   | 10226 | 10592 | 1     |</span></span>
<span id="cb197-1430"><a href="#cb197-1430" aria-hidden="true" tabindex="-1"></a><span class="vs">| 29   | 10592 | 10957 | 0     |</span></span>
<span id="cb197-1431"><a href="#cb197-1431" aria-hidden="true" tabindex="-1"></a><span class="vs">| 30   | 10957 | 11322 | 0     |</span></span>
<span id="cb197-1432"><a href="#cb197-1432" aria-hidden="true" tabindex="-1"></a><span class="vs">| 31   | 11322 | 11687 | 0     |</span></span>
<span id="cb197-1433"><a href="#cb197-1433" aria-hidden="true" tabindex="-1"></a><span class="vs">| 32   | 11687 | 12053 | 1     |`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-197" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb198" data-startfrom="1437" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1436;"><span id="cb198-1437"><a href="#cb198-1437" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Mars Leap Cycle</span></span>
<span id="cb198-1438"><a href="#cb198-1438" aria-hidden="true" tabindex="-1"></a><span class="vs">| Yotc | Start | Stop  | N-668 |</span></span>
<span id="cb198-1439"><a href="#cb198-1439" aria-hidden="true" tabindex="-1"></a><span class="vs">| ---- | ----- | ----- | ----- |</span></span>
<span id="cb198-1440"><a href="#cb198-1440" aria-hidden="true" tabindex="-1"></a><span class="vs">| 0    | 0     | 668   | 0     |</span></span>
<span id="cb198-1441"><a href="#cb198-1441" aria-hidden="true" tabindex="-1"></a><span class="vs">| 1    | 668   | 1337  | 1     |</span></span>
<span id="cb198-1442"><a href="#cb198-1442" aria-hidden="true" tabindex="-1"></a><span class="vs">| 2    | 1337  | 2005  | 0     |</span></span>
<span id="cb198-1443"><a href="#cb198-1443" aria-hidden="true" tabindex="-1"></a><span class="vs">| 3    | 2005  | 2674  | 1     |</span></span>
<span id="cb198-1444"><a href="#cb198-1444" aria-hidden="true" tabindex="-1"></a><span class="vs">| 4    | 2674  | 3342  | 0     |</span></span>
<span id="cb198-1445"><a href="#cb198-1445" aria-hidden="true" tabindex="-1"></a><span class="vs">| 5    | 3342  | 4011  | 1     |</span></span>
<span id="cb198-1446"><a href="#cb198-1446" aria-hidden="true" tabindex="-1"></a><span class="vs">| 6    | 4011  | 4679  | 0     |</span></span>
<span id="cb198-1447"><a href="#cb198-1447" aria-hidden="true" tabindex="-1"></a><span class="vs">| 7    | 4679  | 5348  | 1     |</span></span>
<span id="cb198-1448"><a href="#cb198-1448" aria-hidden="true" tabindex="-1"></a><span class="vs">| 8    | 5348  | 6016  | 0     |</span></span>
<span id="cb198-1449"><a href="#cb198-1449" aria-hidden="true" tabindex="-1"></a><span class="vs">| 9    | 6016  | 6685  | 1     |</span></span>
<span id="cb198-1450"><a href="#cb198-1450" aria-hidden="true" tabindex="-1"></a><span class="vs">| 10   | 6685  | 7354  | 1     |</span></span>
<span id="cb198-1451"><a href="#cb198-1451" aria-hidden="true" tabindex="-1"></a><span class="vs">| 11   | 7354  | 8023  | 1     |</span></span>
<span id="cb198-1452"><a href="#cb198-1452" aria-hidden="true" tabindex="-1"></a><span class="vs">| 12   | 8023  | 8691  | 0     |</span></span>
<span id="cb198-1453"><a href="#cb198-1453" aria-hidden="true" tabindex="-1"></a><span class="vs">| 13   | 8691  | 9360  | 1     |</span></span>
<span id="cb198-1454"><a href="#cb198-1454" aria-hidden="true" tabindex="-1"></a><span class="vs">| 14   | 9360  | 10028 | 0     |</span></span>
<span id="cb198-1455"><a href="#cb198-1455" aria-hidden="true" tabindex="-1"></a><span class="vs">| 15   | 10028 | 10697 | 1     |</span></span>
<span id="cb198-1456"><a href="#cb198-1456" aria-hidden="true" tabindex="-1"></a><span class="vs">| 16   | 10697 | 11365 | 0     |</span></span>
<span id="cb198-1457"><a href="#cb198-1457" aria-hidden="true" tabindex="-1"></a><span class="vs">| 17   | 11365 | 12034 | 1     |</span></span>
<span id="cb198-1458"><a href="#cb198-1458" aria-hidden="true" tabindex="-1"></a><span class="vs">| 18   | 12034 | 12702 | 0     |</span></span>
<span id="cb198-1459"><a href="#cb198-1459" aria-hidden="true" tabindex="-1"></a><span class="vs">| 19   | 12702 | 13371 | 1     |</span></span>
<span id="cb198-1460"><a href="#cb198-1460" aria-hidden="true" tabindex="-1"></a><span class="vs">| 20   | 13371 | 14040 | 1     |</span></span>
<span id="cb198-1461"><a href="#cb198-1461" aria-hidden="true" tabindex="-1"></a><span class="vs">| 21   | 14040 | 14709 | 1     |`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-198" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb199" data-startfrom="1465" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1464;"><span id="cb199-1465"><a href="#cb199-1465" aria-hidden="true" tabindex="-1"></a><span class="fu">md</span><span class="vs">`### Moon Leap Cycle</span></span>
<span id="cb199-1466"><a href="#cb199-1466" aria-hidden="true" tabindex="-1"></a><span class="vs">| Yotc | Start | Stop | N-28 |</span></span>
<span id="cb199-1467"><a href="#cb199-1467" aria-hidden="true" tabindex="-1"></a><span class="vs">| ---- | ----- | ---- |----- |</span></span>
<span id="cb199-1468"><a href="#cb199-1468" aria-hidden="true" tabindex="-1"></a><span class="vs">| 0    | 0     | 28   | 0    |</span></span>
<span id="cb199-1469"><a href="#cb199-1469" aria-hidden="true" tabindex="-1"></a><span class="vs">| 1    | 28    | 57   | 1    |</span></span>
<span id="cb199-1470"><a href="#cb199-1470" aria-hidden="true" tabindex="-1"></a><span class="vs">| 2    | 57    | 85   | 0    |</span></span>
<span id="cb199-1471"><a href="#cb199-1471" aria-hidden="true" tabindex="-1"></a><span class="vs">| 3    | 85    | 114  | 1    |</span></span>
<span id="cb199-1472"><a href="#cb199-1472" aria-hidden="true" tabindex="-1"></a><span class="vs">| 4    | 114   | 142  | 0    |</span></span>
<span id="cb199-1473"><a href="#cb199-1473" aria-hidden="true" tabindex="-1"></a><span class="vs">| 5    | 142   | 171  | 1    |</span></span>
<span id="cb199-1474"><a href="#cb199-1474" aria-hidden="true" tabindex="-1"></a><span class="vs">| 6    | 171   | 199  | 0    |</span></span>
<span id="cb199-1475"><a href="#cb199-1475" aria-hidden="true" tabindex="-1"></a><span class="vs">| 7    | 199   | 228  | 1    |</span></span>
<span id="cb199-1476"><a href="#cb199-1476" aria-hidden="true" tabindex="-1"></a><span class="vs">| 8    | 228   | 256  | 0    |</span></span>
<span id="cb199-1477"><a href="#cb199-1477" aria-hidden="true" tabindex="-1"></a><span class="vs">| 9    | 256   | 285  | 1    |</span></span>
<span id="cb199-1478"><a href="#cb199-1478" aria-hidden="true" tabindex="-1"></a><span class="vs">| 10   | 285   | 314  | 1    |</span></span>
<span id="cb199-1479"><a href="#cb199-1479" aria-hidden="true" tabindex="-1"></a><span class="vs">| 11   | 314   | 343  | 1    |</span></span>
<span id="cb199-1480"><a href="#cb199-1480" aria-hidden="true" tabindex="-1"></a><span class="vs">| 12   | 343   | 371  | 0    |</span></span>
<span id="cb199-1481"><a href="#cb199-1481" aria-hidden="true" tabindex="-1"></a><span class="vs">| 13   | 371   | 400  | 1    |</span></span>
<span id="cb199-1482"><a href="#cb199-1482" aria-hidden="true" tabindex="-1"></a><span class="vs">| 14   | 400   | 428  | 0    |</span></span>
<span id="cb199-1483"><a href="#cb199-1483" aria-hidden="true" tabindex="-1"></a><span class="vs">| 15   | 428   | 457  | 1    |`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-199" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb200" data-startfrom="1487" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1486;"><span id="cb200-1487"><a href="#cb200-1487" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {slider} <span class="im">from</span> <span class="st">"@jashkenas/inputs"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-200" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb201" data-startfrom="1491" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1490;"><span id="cb201-1491"><a href="#cb201-1491" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">moon</span>(canvas<span class="op">,</span> fraction<span class="op">,</span> colorOfTheSun<span class="op">,</span> colorOfTheDarkness) {</span>
<span id="cb201-1492"><a href="#cb201-1492" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>       moonPhase <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">trunc</span>(fraction <span class="op">*</span> <span class="dv">4</span>) <span class="op">%</span> <span class="dv">4</span><span class="op">;</span> <span class="co">// %4 so fraction == 1 results in phase == 0</span></span>
<span id="cb201-1493"><a href="#cb201-1493" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>          waxing <span class="op">=</span> moonPhase <span class="op">&lt;</span> <span class="dv">2</span><span class="op">;</span> <span class="co">// implies waning = !waxing</span></span>
<span id="cb201-1494"><a href="#cb201-1494" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>        crescent <span class="op">=</span> moonPhase <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb201-1495"><a href="#cb201-1495" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>         gibbous <span class="op">=</span> <span class="op">!</span>crescent<span class="op">;</span></span>
<span id="cb201-1496"><a href="#cb201-1496" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> backgroundColor <span class="op">=</span> waxing <span class="op">?</span> colorOfTheDarkness <span class="op">:</span> colorOfTheSun<span class="op">;</span></span>
<span id="cb201-1497"><a href="#cb201-1497" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>      coverColor <span class="op">=</span> (moonPhase <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> moonPhase <span class="op">==</span> <span class="dv">3</span>) <span class="op">?</span> colorOfTheDarkness <span class="op">:</span> colorOfTheSun<span class="op">;</span></span>
<span id="cb201-1498"><a href="#cb201-1498" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span>     revealColor <span class="op">=</span> waxing <span class="op">?</span> colorOfTheSun <span class="op">:</span> colorOfTheDarkness<span class="op">;</span></span>
<span id="cb201-1499"><a href="#cb201-1499" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> quarterFraction <span class="op">=</span> <span class="dv">4</span> <span class="op">*</span> (fraction <span class="op">%</span> <span class="op">.</span><span class="dv">25</span>)<span class="op">;</span></span>
<span id="cb201-1500"><a href="#cb201-1500" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> snakeEyeClosing <span class="op">=</span> gibbous  <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="dv">1</span> <span class="op">-</span> quarterFraction<span class="op">;</span></span>
<span id="cb201-1501"><a href="#cb201-1501" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> snakeEyeOpening <span class="op">=</span> crescent <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span>     quarterFraction<span class="op">;</span></span>
<span id="cb201-1502"><a href="#cb201-1502" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-1503"><a href="#cb201-1503" aria-hidden="true" tabindex="-1"></a>  <span class="co">// set up clipping rectangle for the crescent (right) half</span></span>
<span id="cb201-1504"><a href="#cb201-1504" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> defs <span class="op">=</span> canvas<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:defs"</span>))<span class="op">;</span></span>
<span id="cb201-1505"><a href="#cb201-1505" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> showRightHalf <span class="op">=</span> DOM<span class="op">.</span><span class="fu">uid</span>(<span class="st">"showRightHalf"</span>)<span class="op">;</span> <span class="co">// to ensure uid is unique across all cells and notebooks</span></span>
<span id="cb201-1506"><a href="#cb201-1506" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> clipper <span class="op">=</span> defs<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:clipPath"</span><span class="op">,</span> {<span class="dt">id</span><span class="op">:</span> showRightHalf<span class="op">.</span><span class="at">id</span>}))<span class="op">;</span>  </span>
<span id="cb201-1507"><a href="#cb201-1507" aria-hidden="true" tabindex="-1"></a>  clipper<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:rect"</span><span class="op">,</span>   { <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dt">width</span><span class="op">:</span> <span class="st">"50%"</span><span class="op">,</span> <span class="dt">height</span><span class="op">:</span> <span class="st">"100%"</span>}))<span class="op">;</span></span>
<span id="cb201-1508"><a href="#cb201-1508" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-1509"><a href="#cb201-1509" aria-hidden="true" tabindex="-1"></a>  <span class="co">// bottom layer; shows when nothing is painted on top</span></span>
<span id="cb201-1510"><a href="#cb201-1510" aria-hidden="true" tabindex="-1"></a>  canvas<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:circle"</span><span class="op">,</span>  { <span class="dt">fill</span><span class="op">:</span> backgroundColor<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span>}))<span class="op">;</span></span>
<span id="cb201-1511"><a href="#cb201-1511" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-1512"><a href="#cb201-1512" aria-hidden="true" tabindex="-1"></a>  <span class="co">// paint the next layer: the waxing crescent and waning gibbous</span></span>
<span id="cb201-1513"><a href="#cb201-1513" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> group <span class="op">=</span> canvas<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:g"</span><span class="op">,</span> { <span class="st">'clip-path'</span><span class="op">:</span> showRightHalf }))<span class="op">;</span></span>
<span id="cb201-1514"><a href="#cb201-1514" aria-hidden="true" tabindex="-1"></a>  group<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:circle"</span><span class="op">,</span>   { <span class="dt">fill</span><span class="op">:</span> revealColor<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span> }))<span class="op">;</span></span>
<span id="cb201-1515"><a href="#cb201-1515" aria-hidden="true" tabindex="-1"></a>  group<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:ellipse"</span><span class="op">,</span>  { <span class="dt">fill</span><span class="op">:</span> coverColor<span class="op">,</span>  <span class="dt">ry</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">rx</span><span class="op">:</span> snakeEyeClosing }))<span class="op">;</span></span>
<span id="cb201-1516"><a href="#cb201-1516" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-1517"><a href="#cb201-1517" aria-hidden="true" tabindex="-1"></a>  <span class="co">// finally, top it off with the gibbous half</span></span>
<span id="cb201-1518"><a href="#cb201-1518" aria-hidden="true" tabindex="-1"></a>  canvas<span class="op">.</span><span class="fu">appendChild</span>(DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:ellipse"</span><span class="op">,</span> { <span class="dt">fill</span><span class="op">:</span> revealColor<span class="op">,</span> <span class="dt">ry</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">rx</span><span class="op">:</span> snakeEyeOpening }))<span class="op">;</span></span>
<span id="cb201-1519"><a href="#cb201-1519" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb201-1520"><a href="#cb201-1520" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> canvas<span class="op">;</span></span>
<span id="cb201-1521"><a href="#cb201-1521" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-201" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb202" data-startfrom="1525" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1524;"><span id="cb202-1525"><a href="#cb202-1525" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">universe</span>(w<span class="op">,</span> colorOfTheUniverse) {</span>
<span id="cb202-1526"><a href="#cb202-1526" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> DOM<span class="op">.</span><span class="fu">element</span>(<span class="st">"svg:svg"</span><span class="op">,</span> {</span>
<span id="cb202-1527"><a href="#cb202-1527" aria-hidden="true" tabindex="-1"></a>    <span class="dt">viewBox</span><span class="op">:</span> <span class="st">"-1 -1 2 2"</span><span class="op">,</span> </span>
<span id="cb202-1528"><a href="#cb202-1528" aria-hidden="true" tabindex="-1"></a>    <span class="dt">width</span><span class="op">:</span> <span class="dv">100</span> <span class="op">*</span> w <span class="op">+</span> <span class="st">"%"</span><span class="op">,</span> </span>
<span id="cb202-1529"><a href="#cb202-1529" aria-hidden="true" tabindex="-1"></a>    <span class="dt">style</span><span class="op">:</span> <span class="st">"background-color: "</span> <span class="op">+</span> colorOfTheUniverse <span class="op">+</span> <span class="st">";"</span></span>
<span id="cb202-1530"><a href="#cb202-1530" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb202-1531"><a href="#cb202-1531" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-202" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb203" data-startfrom="1535" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1534;"><span id="cb203-1535"><a href="#cb203-1535" aria-hidden="true" tabindex="-1"></a>solar_system <span class="op">=</span> [</span>
<span id="cb203-1536"><a href="#cb203-1536" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Sun"</span><span class="op">,</span>     <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚äô"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">0</span><span class="op">,</span> <span class="dt">moons</span><span class="op">:</span> []}<span class="op">,</span>                           <span class="co">// Sun</span></span>
<span id="cb203-1537"><a href="#cb203-1537" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Mercury"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚òø"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">40</span><span class="op">*</span>factor_size<span class="op">,</span>   <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">8</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="op">-</span><span class="dv">120</span><span class="op">,</span> <span class="dt">moons</span><span class="op">:</span> []}<span class="op">,</span>                       <span class="co">// Mercury</span></span>
<span id="cb203-1538"><a href="#cb203-1538" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Venus"</span><span class="op">,</span>   <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÄ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">70</span><span class="op">*</span>factor_size<span class="op">,</span>   <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">3</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="op">-</span><span class="dv">50</span><span class="op">,</span> <span class="dt">moons</span><span class="op">:</span> []}<span class="op">,</span>                         <span class="co">// Venus</span></span>
<span id="cb203-1539"><a href="#cb203-1539" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Earth"</span><span class="op">,</span>   <span class="dt">symbol</span><span class="op">:</span> <span class="st">"üú®"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">100</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">12</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">6</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> angle_90<span class="op">,</span> <span class="co">// Earth</span></span>
<span id="cb203-1540"><a href="#cb203-1540" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [ { <span class="dt">name</span><span class="op">:</span> <span class="st">"Moon"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚òæ"</span><span class="op">,</span>  <span class="dt">R</span><span class="op">:</span> <span class="dv">25</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span>   <span class="dv">6</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">3</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">20</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">40</span> }<span class="op">,</span>      <span class="co">// the Moon</span></span>
<span id="cb203-1541"><a href="#cb203-1541" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">name</span><span class="op">:</span> <span class="st">"Sun_path"</span><span class="op">,</span>  <span class="dt">R</span><span class="op">:</span> <span class="dv">100</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">0</span>} ]}<span class="op">,</span>                                    <span class="co">// Earth-Sun orbit</span></span>
<span id="cb203-1542"><a href="#cb203-1542" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Mars"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÇ"</span><span class="op">,</span>    <span class="dt">R</span><span class="op">:</span> <span class="dv">150</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">1.13</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">20</span><span class="op">,</span>                                   <span class="co">// Mars</span></span>
<span id="cb203-1543"><a href="#cb203-1543" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [ { <span class="dt">R</span><span class="op">:</span>   <span class="dv">12</span><span class="op">*</span>factor_size <span class="op">+</span> (width<span class="op">&lt;</span><span class="dv">400</span>) <span class="op">*</span> <span class="dv">6</span><span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">200</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">25</span> }<span class="op">,</span>                                 <span class="co">// Phobos</span></span>
<span id="cb203-1544"><a href="#cb203-1544" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>   <span class="dv">20</span><span class="op">*</span>factor_size <span class="op">+</span> (width<span class="op">&lt;</span><span class="dv">400</span>) <span class="op">*</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">100</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">100</span> } ]}<span class="op">,</span>                              <span class="co">// Deimos   </span></span>
<span id="cb203-1545"><a href="#cb203-1545" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Jupiter"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÉ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">280</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">15</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">9</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">0.5</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">60</span><span class="op">,</span>               <span class="co">// Jupiter</span></span>
<span id="cb203-1546"><a href="#cb203-1546" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [ { <span class="dt">R</span><span class="op">:</span>  <span class="dv">20</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span>   <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">100</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">0</span> }<span class="op">,</span>                                                     <span class="co">// Io</span></span>
<span id="cb203-1547"><a href="#cb203-1547" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">32</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span>   <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">50</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">15</span> }<span class="op">,</span>                                                    <span class="co">// Europa</span></span>
<span id="cb203-1548"><a href="#cb203-1548" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">48</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span>   <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">25</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">100</span> }<span class="op">,</span>                                                    <span class="co">// Ganymede</span></span>
<span id="cb203-1549"><a href="#cb203-1549" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">80</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span>   <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">10</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">300</span> } ]}<span class="op">,</span>                                                 <span class="co">// Callisto  </span></span>
<span id="cb203-1550"><a href="#cb203-1550" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Saturn"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÑ"</span><span class="op">,</span>  <span class="dt">R</span><span class="op">:</span> <span class="dv">380</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">9</span> <span class="op">-</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">4</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">160</span><span class="op">,</span>               <span class="co">// Saturn</span></span>
<span id="cb203-1551"><a href="#cb203-1551" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [ { <span class="dt">R</span><span class="op">:</span>  <span class="dv">28</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">500</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">0</span> }<span class="op">,</span>                                                    <span class="co">// Saturn rings</span></span>
<span id="cb203-1552"><a href="#cb203-1552" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">30</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">400</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">0</span> }<span class="op">,</span></span>
<span id="cb203-1553"><a href="#cb203-1553" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">36</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">400</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">0</span> }<span class="op">,</span></span>
<span id="cb203-1554"><a href="#cb203-1554" aria-hidden="true" tabindex="-1"></a>             { <span class="dt">R</span><span class="op">:</span>  <span class="dv">38</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">400</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="dv">0</span> }<span class="op">,</span></span>
<span id="cb203-1555"><a href="#cb203-1555" aria-hidden="true" tabindex="-1"></a>             ]}<span class="op">,</span>        </span>
<span id="cb203-1556"><a href="#cb203-1556" aria-hidden="true" tabindex="-1"></a>]<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-203" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb204" data-startfrom="1560" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1559;"><span id="cb204-1560"><a href="#cb204-1560" aria-hidden="true" tabindex="-1"></a>tychnonic_model <span class="op">=</span> [ </span>
<span id="cb204-1561"><a href="#cb204-1561" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Earth"</span><span class="op">,</span>   <span class="dt">symbol</span><span class="op">:</span> <span class="st">"üú®"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>               <span class="dt">r</span><span class="op">:</span> <span class="dv">8</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>                            <span class="co">// Earth</span></span>
<span id="cb204-1562"><a href="#cb204-1562" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [  </span>
<span id="cb204-1563"><a href="#cb204-1563" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Moon"</span><span class="op">,</span>    <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚òæ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">10</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">4</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">25</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">40</span><span class="op">+</span>angle_90 }<span class="op">,</span>              <span class="co">// the Moon </span></span>
<span id="cb204-1564"><a href="#cb204-1564" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Sun_path"</span><span class="op">,</span>             <span class="dt">R</span><span class="op">:</span> <span class="dv">100</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">0</span>}<span class="op">,</span>                           <span class="co">// Earth-Sun orbit</span></span>
<span id="cb204-1565"><a href="#cb204-1565" aria-hidden="true" tabindex="-1"></a>          ]}<span class="op">,</span>    </span>
<span id="cb204-1566"><a href="#cb204-1566" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Sun"</span><span class="op">,</span>     <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚äô"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">100</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">10</span><span class="op">,</span> <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span>  <span class="op">-</span>angle_90<span class="op">,</span>        <span class="co">// Sun </span></span>
<span id="cb204-1567"><a href="#cb204-1567" aria-hidden="true" tabindex="-1"></a>    <span class="dt">moons</span><span class="op">:</span> [ </span>
<span id="cb204-1568"><a href="#cb204-1568" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Earth_path"</span><span class="op">,</span>           <span class="dt">R</span><span class="op">:</span> <span class="dv">100</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">2</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">0</span>}<span class="op">,</span>              <span class="co">// Earth-Sun orbit           </span></span>
<span id="cb204-1569"><a href="#cb204-1569" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Mercury"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚òø"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">40</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">8</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="op">-</span><span class="dv">120</span><span class="op">+</span>angle_90}<span class="op">,</span>  <span class="co">// Mercury    </span></span>
<span id="cb204-1570"><a href="#cb204-1570" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Venus"</span><span class="op">,</span>   <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÄ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">70</span><span class="op">*</span>factor_size<span class="op">,</span>  <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="dv">3</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="op">-</span><span class="dv">50</span><span class="op">+</span>angle_90}<span class="op">,</span>   <span class="co">// Venus</span></span>
<span id="cb204-1571"><a href="#cb204-1571" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Mars"</span><span class="op">,</span>    <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÇ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">150</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">6</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">1.13</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">20</span><span class="op">+</span>angle_90}<span class="op">,</span> <span class="co">// Mars</span></span>
<span id="cb204-1572"><a href="#cb204-1572" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Jupiter"</span><span class="op">,</span> <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÉ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">280</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">0.5</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">60</span><span class="op">+</span>angle_90}<span class="op">,</span>  <span class="co">// Jupiter</span></span>
<span id="cb204-1573"><a href="#cb204-1573" aria-hidden="true" tabindex="-1"></a>  { <span class="dt">name</span><span class="op">:</span> <span class="st">"Saturn"</span><span class="op">,</span>  <span class="dt">symbol</span><span class="op">:</span> <span class="st">"‚ôÑ"</span><span class="op">,</span> <span class="dt">R</span><span class="op">:</span> <span class="dv">380</span><span class="op">*</span>factor_size<span class="op">,</span> <span class="dt">r</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span>  <span class="dt">speed</span><span class="op">:</span> <span class="op">-</span><span class="fl">0.2</span><span class="op">+</span>Earth_speed<span class="op">,</span> <span class="dt">phi0</span><span class="op">:</span> <span class="dv">160</span><span class="op">+</span>angle_90}<span class="op">,</span> <span class="co">// Saturn</span></span>
<span id="cb204-1574"><a href="#cb204-1574" aria-hidden="true" tabindex="-1"></a>]}]<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-204" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb205" data-startfrom="1578" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1577;"><span id="cb205-1578"><a href="#cb205-1578" aria-hidden="true" tabindex="-1"></a>Earth_speed <span class="op">=</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-205" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb206" data-startfrom="1582" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1581;"><span id="cb206-1582"><a href="#cb206-1582" aria-hidden="true" tabindex="-1"></a>angle_90 <span class="op">=</span> <span class="dv">90</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-206" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb207" data-startfrom="1586" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1585;"><span id="cb207-1586"><a href="#cb207-1586" aria-hidden="true" tabindex="-1"></a>viewof heliocentric_options <span class="op">=</span> <span class="fu">columns</span>({</span>
<span id="cb207-1587"><a href="#cb207-1587" aria-hidden="true" tabindex="-1"></a>  <span class="dt">Sun_path</span><span class="op">:</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">'"Sun path" inherited from Tychonic model'</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})<span class="op">,</span>  </span>
<span id="cb207-1588"><a href="#cb207-1588" aria-hidden="true" tabindex="-1"></a>  <span class="dt">display_moons</span><span class="op">:</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Display the moons of other planets"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">true</span>})<span class="op">,</span></span>
<span id="cb207-1589"><a href="#cb207-1589" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-207" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb208" data-startfrom="1593" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1592;"><span id="cb208-1593"><a href="#cb208-1593" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb208-1594"><a href="#cb208-1594" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Sun {</span></span>
<span id="cb208-1595"><a href="#cb208-1595" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #666;</span></span>
<span id="cb208-1596"><a href="#cb208-1596" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #f2ba42;</span></span>
<span id="cb208-1597"><a href="#cb208-1597" aria-hidden="true" tabindex="-1"></a><span class="vs">      }</span></span>
<span id="cb208-1598"><a href="#cb208-1598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-1599"><a href="#cb208-1599" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Moon {</span></span>
<span id="cb208-1600"><a href="#cb208-1600" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #ccc;</span></span>
<span id="cb208-1601"><a href="#cb208-1601" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #f2e4d6;</span></span>
<span id="cb208-1602"><a href="#cb208-1602" aria-hidden="true" tabindex="-1"></a><span class="vs">      }</span></span>
<span id="cb208-1603"><a href="#cb208-1603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-1604"><a href="#cb208-1604" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Mars {</span></span>
<span id="cb208-1605"><a href="#cb208-1605" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #ff7700;</span></span>
<span id="cb208-1606"><a href="#cb208-1606" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb208-1607"><a href="#cb208-1607" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Jupiter {</span></span>
<span id="cb208-1608"><a href="#cb208-1608" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #ffa500;</span></span>
<span id="cb208-1609"><a href="#cb208-1609" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb208-1610"><a href="#cb208-1610" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Saturn {</span></span>
<span id="cb208-1611"><a href="#cb208-1611" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #cc9966;</span></span>
<span id="cb208-1612"><a href="#cb208-1612" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb208-1613"><a href="#cb208-1613" aria-hidden="true" tabindex="-1"></a><span class="vs">  #Earth {</span></span>
<span id="cb208-1614"><a href="#cb208-1614" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #00a5ff;</span></span>
<span id="cb208-1615"><a href="#cb208-1615" aria-hidden="true" tabindex="-1"></a><span class="vs">  }</span></span>
<span id="cb208-1616"><a href="#cb208-1616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-1617"><a href="#cb208-1617" aria-hidden="true" tabindex="-1"></a><span class="vs">  .planet {</span></span>
<span id="cb208-1618"><a href="#cb208-1618" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #aac;</span></span>
<span id="cb208-1619"><a href="#cb208-1619" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #85b6c5;</span></span>
<span id="cb208-1620"><a href="#cb208-1620" aria-hidden="true" tabindex="-1"></a><span class="vs">      }</span></span>
<span id="cb208-1621"><a href="#cb208-1621" aria-hidden="true" tabindex="-1"></a><span class="vs">  .moon {</span></span>
<span id="cb208-1622"><a href="#cb208-1622" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #aac;</span></span>
<span id="cb208-1623"><a href="#cb208-1623" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: #fff;</span></span>
<span id="cb208-1624"><a href="#cb208-1624" aria-hidden="true" tabindex="-1"></a><span class="vs">      }</span></span>
<span id="cb208-1625"><a href="#cb208-1625" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span></span>
<span id="cb208-1626"><a href="#cb208-1626" aria-hidden="true" tabindex="-1"></a><span class="vs">  .orbit {</span></span>
<span id="cb208-1627"><a href="#cb208-1627" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #aac;</span></span>
<span id="cb208-1628"><a href="#cb208-1628" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke-opacity: 0.8;</span></span>
<span id="cb208-1629"><a href="#cb208-1629" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: transparent;</span></span>
<span id="cb208-1630"><a href="#cb208-1630" aria-hidden="true" tabindex="-1"></a><span class="vs">      }</span></span>
<span id="cb208-1631"><a href="#cb208-1631" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-1632"><a href="#cb208-1632" aria-hidden="true" tabindex="-1"></a><span class="vs">  .orbit_moon {</span></span>
<span id="cb208-1633"><a href="#cb208-1633" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke: #aaa;</span></span>
<span id="cb208-1634"><a href="#cb208-1634" aria-hidden="true" tabindex="-1"></a><span class="vs">        stroke-opacity: 0.5;</span></span>
<span id="cb208-1635"><a href="#cb208-1635" aria-hidden="true" tabindex="-1"></a><span class="vs">        fill: transparent;</span></span>
<span id="cb208-1636"><a href="#cb208-1636" aria-hidden="true" tabindex="-1"></a><span class="vs">      }  </span></span>
<span id="cb208-1637"><a href="#cb208-1637" aria-hidden="true" tabindex="-1"></a><span class="vs">  </span></span>
<span id="cb208-1638"><a href="#cb208-1638" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-208" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb209" data-startfrom="1642" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1641;"><span id="cb209-1642"><a href="#cb209-1642" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@bcardiff/observable-columns</span></span>
<span id="cb209-1643"><a href="#cb209-1643" aria-hidden="true" tabindex="-1"></a>columns <span class="op">=</span> (args) <span class="kw">=&gt;</span> {</span>
<span id="cb209-1644"><a href="#cb209-1644" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;form&gt;&lt;/form&gt;`</span></span>
<span id="cb209-1645"><a href="#cb209-1645" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> {}</span>
<span id="cb209-1646"><a href="#cb209-1646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-1647"><a href="#cb209-1647" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> cols <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb209-1648"><a href="#cb209-1648" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> key <span class="kw">in</span> args) {</span>
<span id="cb209-1649"><a href="#cb209-1649" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="fu">appendChild</span>(args[key])</span>
<span id="cb209-1650"><a href="#cb209-1650" aria-hidden="true" tabindex="-1"></a>    cols<span class="op">++</span></span>
<span id="cb209-1651"><a href="#cb209-1651" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb209-1652"><a href="#cb209-1652" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb209-1653"><a href="#cb209-1653" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">style</span> <span class="op">=</span> <span class="vs">`width:200px; display: grid; grid-gap: 10px 100px; grid-template-columns: repeat(</span><span class="sc">${</span>cols<span class="sc">}</span><span class="vs">, auto); grid-auto-flow: row;`</span></span>
<span id="cb209-1654"><a href="#cb209-1654" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb209-1655"><a href="#cb209-1655" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb209-1656"><a href="#cb209-1656" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">keys</span>(args)<span class="op">.</span><span class="fu">reduce</span>((result<span class="op">,</span> key) <span class="kw">=&gt;</span> {</span>
<span id="cb209-1657"><a href="#cb209-1657" aria-hidden="true" tabindex="-1"></a>      result[key] <span class="op">=</span> args[key]<span class="op">.</span><span class="at">value</span></span>
<span id="cb209-1658"><a href="#cb209-1658" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> result</span>
<span id="cb209-1659"><a href="#cb209-1659" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(args) <span class="op">?</span> [] <span class="op">:</span> {})</span>
<span id="cb209-1660"><a href="#cb209-1660" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb209-1661"><a href="#cb209-1661" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="fu">oninput</span>()</span>
<span id="cb209-1662"><a href="#cb209-1662" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb209-1663"><a href="#cb209-1663" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form</span>
<span id="cb209-1664"><a href="#cb209-1664" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-209" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb210" data-startfrom="1668" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1667;"><span id="cb210-1668"><a href="#cb210-1668" aria-hidden="true" tabindex="-1"></a>factor_size <span class="op">=</span> system_width <span class="op">/</span> initial_width</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-210" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb211" data-startfrom="1672" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1671;"><span id="cb211-1672"><a href="#cb211-1672" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> width</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-211" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb212" data-startfrom="1676" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1675;"><span id="cb212-1676"><a href="#cb212-1676" aria-hidden="true" tabindex="-1"></a>system_width <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">min</span>(initial_width<span class="op">,</span><span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(<span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">.</span><span class="at">clientWidth</span> <span class="op">||</span> <span class="dv">0</span><span class="op">,</span> <span class="bu">window</span><span class="op">.</span><span class="at">innerWidth</span> <span class="op">||</span> <span class="dv">0</span>)<span class="op">-</span><span class="dv">20</span>)<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-212" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb213" data-startfrom="1680" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1679;"><span id="cb213-1680"><a href="#cb213-1680" aria-hidden="true" tabindex="-1"></a>initial_width <span class="op">=</span> <span class="dv">800</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-213" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb214" data-startfrom="1684" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1683;"><span id="cb214-1684"><a href="#cb214-1684" aria-hidden="true" tabindex="-1"></a>display_checkbox <span class="op">=</span> {</span>
<span id="cb214-1685"><a href="#cb214-1685" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> html <span class="op">=</span> system_model<span class="op">?</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`</span><span class="sc">${</span>viewof heliocentric_options<span class="sc">}</span><span class="vs">`</span><span class="op">:</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;div style="height:40.5px;"&gt;&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb214-1686"><a href="#cb214-1686" aria-hidden="true" tabindex="-1"></a>  <span class="kw">yield</span> html</span>
<span id="cb214-1687"><a href="#cb214-1687" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-214" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb215" data-startfrom="1691" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1690;"><span id="cb215-1691"><a href="#cb215-1691" aria-hidden="true" tabindex="-1"></a>viewof system_model  <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>(<span class="kw">new</span> <span class="bu">Map</span>([[<span class="st">"Heliocentric model"</span><span class="op">,</span> <span class="dv">1</span>]<span class="op">,</span> [<span class="st">"Tychonic model (geo-heliocentric)"</span><span class="op">,</span> <span class="dv">0</span>]])<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"System"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-215" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb216" data-startfrom="1695" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1694;"><span id="cb216-1695"><a href="#cb216-1695" aria-hidden="true" tabindex="-1"></a>viewof speed_factor <span class="op">=</span> <span class="fu">slider</span>({</span>
<span id="cb216-1696"><a href="#cb216-1696" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Animation speed"</span><span class="op">,</span></span>
<span id="cb216-1697"><a href="#cb216-1697" aria-hidden="true" tabindex="-1"></a>  <span class="dt">min</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb216-1698"><a href="#cb216-1698" aria-hidden="true" tabindex="-1"></a>  <span class="dt">max</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span></span>
<span id="cb216-1699"><a href="#cb216-1699" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb216-1700"><a href="#cb216-1700" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb216-1701"><a href="#cb216-1701" aria-hidden="true" tabindex="-1"></a>  <span class="dt">format</span><span class="op">:</span> v <span class="kw">=&gt;</span> <span class="fu">html</span><span class="vs">`</span><span class="sc">${</span>v <span class="op">==</span> <span class="dv">0</span><span class="op">?</span> <span class="st">'Stopped'</span> <span class="op">:</span> (v <span class="op">&lt;</span> <span class="dv">20</span><span class="op">?</span> <span class="st">'Slow '</span> <span class="op">:</span> (v <span class="op">&lt;</span> <span class="dv">60</span><span class="op">?</span> <span class="st">'Medium'</span> <span class="op">:</span> <span class="st">'Fast'</span> ) )<span class="sc">}</span><span class="vs"> (</span><span class="sc">${</span>v<span class="sc">}</span><span class="vs">%)&lt;br/&gt;`</span><span class="op">,</span></span>
<span id="cb216-1702"><a href="#cb216-1702" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-216" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb217" data-startfrom="1706" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1705;"><span id="cb217-1706"><a href="#cb217-1706" aria-hidden="true" tabindex="-1"></a>viewof scale <span class="op">=</span> <span class="fu">slider</span>({</span>
<span id="cb217-1707"><a href="#cb217-1707" aria-hidden="true" tabindex="-1"></a>  <span class="dt">min</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb217-1708"><a href="#cb217-1708" aria-hidden="true" tabindex="-1"></a>  <span class="dt">max</span><span class="op">:</span> <span class="dv">100</span><span class="op">,</span> </span>
<span id="cb217-1709"><a href="#cb217-1709" aria-hidden="true" tabindex="-1"></a>  <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb217-1710"><a href="#cb217-1710" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="dv">90</span><span class="op">,</span> </span>
<span id="cb217-1711"><a href="#cb217-1711" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Scale"</span><span class="op">,</span> </span>
<span id="cb217-1712"><a href="#cb217-1712" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-217" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb218" data-startfrom="1716" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1715;"><span id="cb218-1716"><a href="#cb218-1716" aria-hidden="true" tabindex="-1"></a><span class="co">// w  = window.innerWidth / 2 + (width &lt; 400) * 165</span></span>
<span id="cb218-1717"><a href="#cb218-1717" aria-hidden="true" tabindex="-1"></a>w  <span class="op">=</span> width <span class="op">/</span> <span class="dv">2</span> <span class="op">+</span> (width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">165</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-218" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb219" data-startfrom="1721" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1720;"><span id="cb219-1721"><a href="#cb219-1721" aria-hidden="true" tabindex="-1"></a>fontsize <span class="op">=</span> {</span>
<span id="cb219-1722"><a href="#cb219-1722" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (width<span class="op">&gt;</span><span class="dv">450</span>){</span>
<span id="cb219-1723"><a href="#cb219-1723" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">18</span><span class="op">;</span></span>
<span id="cb219-1724"><a href="#cb219-1724" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb219-1725"><a href="#cb219-1725" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (width<span class="op">&lt;</span><span class="dv">451</span>){</span>
<span id="cb219-1726"><a href="#cb219-1726" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">14</span><span class="op">;</span></span>
<span id="cb219-1727"><a href="#cb219-1727" aria-hidden="true" tabindex="-1"></a>}<span class="op">;</span></span>
<span id="cb219-1728"><a href="#cb219-1728" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-219" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb220" data-startfrom="1732" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1731;"><span id="cb220-1732"><a href="#cb220-1732" aria-hidden="true" tabindex="-1"></a>moon_orbit <span class="op">=</span> width<span class="op">/</span><span class="dv">2</span><span class="op">-</span>width<span class="op">/</span><span class="dv">13</span><span class="op">+</span>(width <span class="op">&lt;</span> <span class="dv">400</span>)<span class="op">*</span><span class="dv">135</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-220" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb221" data-startfrom="1736" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1735;"><span id="cb221-1736"><a href="#cb221-1736" aria-hidden="true" tabindex="-1"></a>earth_moon_dist <span class="op">=</span> moon_orbit<span class="op">/</span><span class="dv">2</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-221" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb222" data-startfrom="1740" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1739;"><span id="cb222-1740"><a href="#cb222-1740" aria-hidden="true" tabindex="-1"></a>earth_radius <span class="op">=</span> earth_moon_dist<span class="op">/</span><span class="fl">120.75</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-222" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb223" data-startfrom="1744" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1743;"><span id="cb223-1744"><a href="#cb223-1744" aria-hidden="true" tabindex="-1"></a>moon_radius <span class="op">=</span> earth_radius<span class="op">/</span><span class="fl">3.667</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-223" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb224" data-startfrom="1748" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1747;"><span id="cb224-1748"><a href="#cb224-1748" aria-hidden="true" tabindex="-1"></a><span class="fu">html</span><span class="vs">`&lt;style&gt;</span></span>
<span id="cb224-1749"><a href="#cb224-1749" aria-hidden="true" tabindex="-1"></a><span class="vs">#SVGchart {</span></span>
<span id="cb224-1750"><a href="#cb224-1750" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin:  </span><span class="sc">${</span><span class="op">-</span><span class="dv">10</span> <span class="op">-</span> <span class="bu">Number</span>(width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">3</span><span class="sc">}</span><span class="vs">px 0px </span><span class="sc">${</span><span class="op">-</span><span class="dv">80</span> <span class="op">+</span> <span class="bu">Number</span>(width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">56</span><span class="sc">}</span><span class="vs">px </span><span class="sc">${</span><span class="bu">Number</span>(width <span class="op">&lt;</span> <span class="dv">400</span>) <span class="op">*</span> <span class="dv">5</span><span class="sc">}</span><span class="vs">px;</span></span>
<span id="cb224-1751"><a href="#cb224-1751" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb224-1752"><a href="#cb224-1752" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/style&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-224" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb225" data-startfrom="1756" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1755;"><span id="cb225-1756"><a href="#cb225-1756" aria-hidden="true" tabindex="-1"></a>viewof dark_background <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Dark background"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-225" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb226" data-startfrom="1760" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1759;"><span id="cb226-1760"><a href="#cb226-1760" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb226-1761"><a href="#cb226-1761" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Full screen mode not successfully tested with Firefox v. 125 (April 2024)</span></span>
<span id="cb226-1762"><a href="#cb226-1762" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> firefoxAgent <span class="op">=</span> <span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">.</span><span class="fu">indexOf</span>(<span class="st">"Firefox"</span>) <span class="op">&gt;</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span> </span>
<span id="cb226-1763"><a href="#cb226-1763" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>firefoxAgent) {</span>
<span id="cb226-1764"><a href="#cb226-1764" aria-hidden="true" tabindex="-1"></a>    <span class="co">// See also: https://observablehq.com/@mbostock/fullscreen-canvas</span></span>
<span id="cb226-1765"><a href="#cb226-1765" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;button onclick=</span><span class="sc">${</span>({currentTarget}) <span class="kw">=&gt;</span> {</span>
<span id="cb226-1766"><a href="#cb226-1766" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> currentCell <span class="op">=</span> currentTarget<span class="op">.</span><span class="at">parentElement</span><span class="op">;</span></span>
<span id="cb226-1767"><a href="#cb226-1767" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> previousCell <span class="op">=</span> currentCell<span class="op">.</span><span class="at">previousElementSibling</span><span class="op">;</span></span>
<span id="cb226-1768"><a href="#cb226-1768" aria-hidden="true" tabindex="-1"></a>      previousCell<span class="op">.</span><span class="at">requestFullscreen</span> <span class="op">?</span> previousCell<span class="op">.</span><span class="fu">requestFullscreen</span>()</span>
<span id="cb226-1769"><a href="#cb226-1769" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> previousCell<span class="op">.</span><span class="at">webkitRequestFullscreen</span> <span class="op">?</span> previousCell<span class="op">.</span><span class="fu">webkitRequestFullscreen</span>()</span>
<span id="cb226-1770"><a href="#cb226-1770" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> (() <span class="kw">=&gt;</span> { <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">Error</span>(<span class="st">"Fullscreen API not supported"</span>)<span class="op">;</span> })<span class="op">;</span></span>
<span id="cb226-1771"><a href="#cb226-1771" aria-hidden="true" tabindex="-1"></a>    }<span class="sc">}</span><span class="vs">&gt;Full screen&lt;/button&gt;`</span></span>
<span id="cb226-1772"><a href="#cb226-1772" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb226-1773"><a href="#cb226-1773" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span></span>
<span id="cb226-1774"><a href="#cb226-1774" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;br/&gt;`</span></span>
<span id="cb226-1775"><a href="#cb226-1775" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-226" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb227" data-startfrom="1779" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1778;"><span id="cb227-1779"><a href="#cb227-1779" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { Scrubber } <span class="im">from</span> <span class="st">"@mbostock/scrubber"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-227" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb228" data-startfrom="1783" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1782;"><span id="cb228-1783"><a href="#cb228-1783" aria-hidden="true" tabindex="-1"></a>projection <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoOrthographic</span>()<span class="op">.</span><span class="fu">fitSize</span>([width<span class="op">,</span> width]<span class="op">,</span> { <span class="dt">type</span><span class="op">:</span> <span class="st">"Sphere"</span> })<span class="op">.</span><span class="fu">rotate</span>([<span class="op">-</span><span class="dv">54</span><span class="op">,</span> <span class="op">-</span><span class="dv">36</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-228" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb229" data-startfrom="1787" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1786;"><span id="cb229-1787"><a href="#cb229-1787" aria-hidden="true" tabindex="-1"></a>disputed <span class="op">=</span> <span class="cf">await</span> <span class="fu">FileAttachment</span>(<span class="st">"disputed-territories-1.geojson"</span>)<span class="op">.</span><span class="fu">json</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-229" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb230" data-startfrom="1791" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1790;"><span id="cb230-1791"><a href="#cb230-1791" aria-hidden="true" tabindex="-1"></a>viewof showDisputed <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;input type=checkbox&gt;`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-230" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb231" data-startfrom="1795" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1794;"><span id="cb231-1795"><a href="#cb231-1795" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">drag</span>(projection) {</span>
<span id="cb231-1796"><a href="#cb231-1796" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> v0<span class="op">,</span> q0<span class="op">,</span> r0<span class="op">;</span></span>
<span id="cb231-1797"><a href="#cb231-1797" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb231-1798"><a href="#cb231-1798" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragstarted</span>() {</span>
<span id="cb231-1799"><a href="#cb231-1799" aria-hidden="true" tabindex="-1"></a>    v0 <span class="op">=</span> versor<span class="op">.</span><span class="fu">cartesian</span>(projection<span class="op">.</span><span class="fu">invert</span>([d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">y</span>]))<span class="op">;</span></span>
<span id="cb231-1800"><a href="#cb231-1800" aria-hidden="true" tabindex="-1"></a>    q0 <span class="op">=</span> <span class="fu">versor</span>(r0 <span class="op">=</span> projection<span class="op">.</span><span class="fu">rotate</span>())<span class="op">;</span></span>
<span id="cb231-1801"><a href="#cb231-1801" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb231-1802"><a href="#cb231-1802" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb231-1803"><a href="#cb231-1803" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragged</span>() {</span>
<span id="cb231-1804"><a href="#cb231-1804" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> v1 <span class="op">=</span> versor<span class="op">.</span><span class="fu">cartesian</span>(projection<span class="op">.</span><span class="fu">rotate</span>(r0)<span class="op">.</span><span class="fu">invert</span>([d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">y</span>]))<span class="op">;</span></span>
<span id="cb231-1805"><a href="#cb231-1805" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> q1 <span class="op">=</span> versor<span class="op">.</span><span class="fu">multiply</span>(q0<span class="op">,</span> versor<span class="op">.</span><span class="fu">delta</span>(v0<span class="op">,</span> v1))<span class="op">;</span></span>
<span id="cb231-1806"><a href="#cb231-1806" aria-hidden="true" tabindex="-1"></a>    projection<span class="op">.</span><span class="fu">rotate</span>(versor<span class="op">.</span><span class="fu">rotation</span>(q1))<span class="op">;</span></span>
<span id="cb231-1807"><a href="#cb231-1807" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb231-1808"><a href="#cb231-1808" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb231-1809"><a href="#cb231-1809" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> d3<span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb231-1810"><a href="#cb231-1810" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> dragstarted)</span>
<span id="cb231-1811"><a href="#cb231-1811" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> dragged)<span class="op">;</span></span>
<span id="cb231-1812"><a href="#cb231-1812" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-231" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb232" data-startfrom="1816" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1815;"><span id="cb232-1816"><a href="#cb232-1816" aria-hidden="true" tabindex="-1"></a>graticule <span class="op">=</span> d3<span class="op">.</span><span class="fu">geoGraticule</span>()<span class="op">.</span><span class="fu">stepMinor</span>([<span class="dv">36</span><span class="op">,</span><span class="dv">36</span>])<span class="op">.</span><span class="fu">stepMajor</span>([<span class="dv">36</span><span class="op">,</span><span class="dv">36</span>])()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-232" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb233" data-startfrom="1820" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1819;"><span id="cb233-1820"><a href="#cb233-1820" aria-hidden="true" tabindex="-1"></a>graticule<span class="op">.</span><span class="at">coordinates</span> <span class="op">=</span> graticule<span class="op">.</span><span class="at">coordinates</span><span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb233-1821"><a href="#cb233-1821" aria-hidden="true" tabindex="-1"></a>  i <span class="kw">=&gt;</span> i<span class="op">.</span><span class="fu">map</span>(j <span class="kw">=&gt;</span> j<span class="op">.</span><span class="fu">map</span>((k<span class="op">,</span> index<span class="op">,</span> arr) <span class="kw">=&gt;</span> i<span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">3</span> <span class="op">&amp;&amp;</span> index <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> k <span class="op">-</span> <span class="dv">18</span> <span class="op">:</span> k))</span>
<span id="cb233-1822"><a href="#cb233-1822" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-233" data-nodetype="expression">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb234" data-startfrom="1826" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1825;"><span id="cb234-1826"><a href="#cb234-1826" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> <span class="fu">fetch</span>(</span>
<span id="cb234-1827"><a href="#cb234-1827" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://unpkg.com/visionscarto-world-atlas@0.0.6/world/50m_countries.geojson"</span></span>
<span id="cb234-1828"><a href="#cb234-1828" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">then</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">json</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-234" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb235" data-startfrom="1832" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1831;"><span id="cb235-1832"><a href="#cb235-1832" aria-hidden="true" tabindex="-1"></a>world <span class="op">=</span> <span class="fu">fetch</span>(</span>
<span id="cb235-1833"><a href="#cb235-1833" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://unpkg.com/visionscarto-world-atlas@0.0.6/world/50m.json"</span></span>
<span id="cb235-1834"><a href="#cb235-1834" aria-hidden="true" tabindex="-1"></a>)<span class="op">.</span><span class="fu">then</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">json</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-235" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb236" data-startfrom="1838" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1837;"><span id="cb236-1838"><a href="#cb236-1838" aria-hidden="true" tabindex="-1"></a>versor <span class="op">=</span> <span class="pp">require</span>(<span class="st">"versor@0.0.3"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-236" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb237" data-startfrom="1842" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1841;"><span id="cb237-1842"><a href="#cb237-1842" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">"d3@5"</span><span class="op">,</span> <span class="st">"d3-geo@1"</span><span class="op">,</span> <span class="st">"d3-geo-projection@2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-237" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<details class="code-fold hidden">
<summary>Code</summary>
<div class="sourceCode cell-code hidden" id="cb238" data-startfrom="1846" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 1845;"><span id="cb238-1846"><a href="#cb238-1846" aria-hidden="true" tabindex="-1"></a><span class="co">// Copyright 2021, Observable Inc.</span></span>
<span id="cb238-1847"><a href="#cb238-1847" aria-hidden="true" tabindex="-1"></a><span class="co">// Released under the ISC license.</span></span>
<span id="cb238-1848"><a href="#cb238-1848" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@d3/color-legend</span></span>
<span id="cb238-1849"><a href="#cb238-1849" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Swatches</span>(color<span class="op">,</span> {</span>
<span id="cb238-1850"><a href="#cb238-1850" aria-hidden="true" tabindex="-1"></a>  columns <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb238-1851"><a href="#cb238-1851" aria-hidden="true" tabindex="-1"></a>  format<span class="op">,</span></span>
<span id="cb238-1852"><a href="#cb238-1852" aria-hidden="true" tabindex="-1"></a>  <span class="dt">unknown</span><span class="op">:</span> formatUnknown<span class="op">,</span></span>
<span id="cb238-1853"><a href="#cb238-1853" aria-hidden="true" tabindex="-1"></a>  swatchSize <span class="op">=</span> <span class="dv">15</span><span class="op">,</span></span>
<span id="cb238-1854"><a href="#cb238-1854" aria-hidden="true" tabindex="-1"></a>  swatchWidth <span class="op">=</span> swatchSize<span class="op">,</span></span>
<span id="cb238-1855"><a href="#cb238-1855" aria-hidden="true" tabindex="-1"></a>  swatchHeight <span class="op">=</span> swatchSize<span class="op">,</span></span>
<span id="cb238-1856"><a href="#cb238-1856" aria-hidden="true" tabindex="-1"></a>  marginLeft <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb238-1857"><a href="#cb238-1857" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb238-1858"><a href="#cb238-1858" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> id <span class="op">=</span> <span class="vs">`-swatches-</span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">random</span>()<span class="op">.</span><span class="fu">toString</span>(<span class="dv">16</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">2</span>)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb238-1859"><a href="#cb238-1859" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> unknown <span class="op">=</span> formatUnknown <span class="op">==</span> <span class="kw">null</span> <span class="op">?</span> <span class="kw">undefined</span> <span class="op">:</span> color<span class="op">.</span><span class="fu">unknown</span>()<span class="op">;</span></span>
<span id="cb238-1860"><a href="#cb238-1860" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> unknowns <span class="op">=</span> unknown <span class="op">==</span> <span class="kw">null</span> <span class="op">||</span> unknown <span class="op">===</span> d3<span class="op">.</span><span class="at">scaleImplicit</span> <span class="op">?</span> [] <span class="op">:</span> [unknown]<span class="op">;</span></span>
<span id="cb238-1861"><a href="#cb238-1861" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> domain <span class="op">=</span> color<span class="op">.</span><span class="fu">domain</span>()<span class="op">.</span><span class="fu">concat</span>(unknowns)<span class="op">;</span></span>
<span id="cb238-1862"><a href="#cb238-1862" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (format <span class="op">===</span> <span class="kw">undefined</span>) format <span class="op">=</span> x <span class="kw">=&gt;</span> x <span class="op">===</span> unknown <span class="op">?</span> formatUnknown <span class="op">:</span> x<span class="op">;</span></span>
<span id="cb238-1863"><a href="#cb238-1863" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1864"><a href="#cb238-1864" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">entity</span>(character) {</span>
<span id="cb238-1865"><a href="#cb238-1865" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`&amp;#</span><span class="sc">${</span>character<span class="op">.</span><span class="fu">charCodeAt</span>(<span class="dv">0</span>)<span class="op">.</span><span class="fu">toString</span>()<span class="sc">}</span><span class="vs">;`</span><span class="op">;</span></span>
<span id="cb238-1866"><a href="#cb238-1866" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb238-1867"><a href="#cb238-1867" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1868"><a href="#cb238-1868" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (columns <span class="op">!==</span> <span class="kw">null</span>) <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;div style="display: flex; align-items: center; margin-left: </span><span class="sc">${</span><span class="op">+</span>marginLeft<span class="sc">}</span><span class="vs">px; min-height: 33px; font: 10px sans-serif;"&gt;</span></span>
<span id="cb238-1869"><a href="#cb238-1869" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;style&gt;</span></span>
<span id="cb238-1870"><a href="#cb238-1870" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1871"><a href="#cb238-1871" aria-hidden="true" tabindex="-1"></a><span class="vs">.</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-item {</span></span>
<span id="cb238-1872"><a href="#cb238-1872" aria-hidden="true" tabindex="-1"></a><span class="vs">  break-inside: avoid;</span></span>
<span id="cb238-1873"><a href="#cb238-1873" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: flex;</span></span>
<span id="cb238-1874"><a href="#cb238-1874" aria-hidden="true" tabindex="-1"></a><span class="vs">  align-items: center;</span></span>
<span id="cb238-1875"><a href="#cb238-1875" aria-hidden="true" tabindex="-1"></a><span class="vs">  padding-bottom: 1px;</span></span>
<span id="cb238-1876"><a href="#cb238-1876" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb238-1877"><a href="#cb238-1877" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1878"><a href="#cb238-1878" aria-hidden="true" tabindex="-1"></a><span class="vs">.</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-label {</span></span>
<span id="cb238-1879"><a href="#cb238-1879" aria-hidden="true" tabindex="-1"></a><span class="vs">  white-space: nowrap;</span></span>
<span id="cb238-1880"><a href="#cb238-1880" aria-hidden="true" tabindex="-1"></a><span class="vs">  overflow: hidden;</span></span>
<span id="cb238-1881"><a href="#cb238-1881" aria-hidden="true" tabindex="-1"></a><span class="vs">  text-overflow: ellipsis;</span></span>
<span id="cb238-1882"><a href="#cb238-1882" aria-hidden="true" tabindex="-1"></a><span class="vs">  max-width: calc(100% - </span><span class="sc">${</span><span class="op">+</span>swatchWidth<span class="sc">}</span><span class="vs">px - 0.5em);</span></span>
<span id="cb238-1883"><a href="#cb238-1883" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb238-1884"><a href="#cb238-1884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1885"><a href="#cb238-1885" aria-hidden="true" tabindex="-1"></a><span class="vs">.</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-swatch {</span></span>
<span id="cb238-1886"><a href="#cb238-1886" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: </span><span class="sc">${</span><span class="op">+</span>swatchWidth<span class="sc">}</span><span class="vs">px;</span></span>
<span id="cb238-1887"><a href="#cb238-1887" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: </span><span class="sc">${</span><span class="op">+</span>swatchHeight<span class="sc">}</span><span class="vs">px;</span></span>
<span id="cb238-1888"><a href="#cb238-1888" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin: 0 0.5em 0 0;</span></span>
<span id="cb238-1889"><a href="#cb238-1889" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb238-1890"><a href="#cb238-1890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1891"><a href="#cb238-1891" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/style&gt;</span></span>
<span id="cb238-1892"><a href="#cb238-1892" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div style=</span><span class="sc">${</span>{<span class="dt">width</span><span class="op">:</span> <span class="st">"100%"</span><span class="op">,</span> columns}<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>domain<span class="op">.</span><span class="fu">map</span>(value <span class="kw">=&gt;</span> {</span>
<span id="cb238-1893"><a href="#cb238-1893" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> label <span class="op">=</span> <span class="vs">`</span><span class="sc">${</span><span class="fu">format</span>(value)<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb238-1894"><a href="#cb238-1894" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;div class=</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-item&gt;</span></span>
<span id="cb238-1895"><a href="#cb238-1895" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div class=</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-swatch style=</span><span class="sc">${</span>{<span class="dt">background</span><span class="op">:</span> <span class="fu">color</span>(value)}<span class="sc">}</span><span class="vs">&gt;&lt;/div&gt;</span></span>
<span id="cb238-1896"><a href="#cb238-1896" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;div class=</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">-label title=</span><span class="sc">${</span>label<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>label<span class="sc">}</span><span class="vs">&lt;/div&gt;</span></span>
<span id="cb238-1897"><a href="#cb238-1897" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb238-1898"><a href="#cb238-1898" aria-hidden="true" tabindex="-1"></a>  })<span class="sc">}</span></span>
<span id="cb238-1899"><a href="#cb238-1899" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;</span></span>
<span id="cb238-1900"><a href="#cb238-1900" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb238-1901"><a href="#cb238-1901" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1902"><a href="#cb238-1902" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;div style="display: flex; align-items: center; min-height: 33px; margin-left: </span><span class="sc">${</span><span class="op">+</span>marginLeft<span class="sc">}</span><span class="vs">px; font: 10px sans-serif;"&gt;</span></span>
<span id="cb238-1903"><a href="#cb238-1903" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;style&gt;</span></span>
<span id="cb238-1904"><a href="#cb238-1904" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1905"><a href="#cb238-1905" aria-hidden="true" tabindex="-1"></a><span class="vs">.</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs"> {</span></span>
<span id="cb238-1906"><a href="#cb238-1906" aria-hidden="true" tabindex="-1"></a><span class="vs">  display: inline-flex;</span></span>
<span id="cb238-1907"><a href="#cb238-1907" aria-hidden="true" tabindex="-1"></a><span class="vs">  align-items: center;</span></span>
<span id="cb238-1908"><a href="#cb238-1908" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: 1em;</span></span>
<span id="cb238-1909"><a href="#cb238-1909" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb238-1910"><a href="#cb238-1910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1911"><a href="#cb238-1911" aria-hidden="true" tabindex="-1"></a><span class="vs">.</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">::before {</span></span>
<span id="cb238-1912"><a href="#cb238-1912" aria-hidden="true" tabindex="-1"></a><span class="vs">  content: "";</span></span>
<span id="cb238-1913"><a href="#cb238-1913" aria-hidden="true" tabindex="-1"></a><span class="vs">  width: </span><span class="sc">${</span><span class="op">+</span>swatchWidth<span class="sc">}</span><span class="vs">px;</span></span>
<span id="cb238-1914"><a href="#cb238-1914" aria-hidden="true" tabindex="-1"></a><span class="vs">  height: </span><span class="sc">${</span><span class="op">+</span>swatchHeight<span class="sc">}</span><span class="vs">px;</span></span>
<span id="cb238-1915"><a href="#cb238-1915" aria-hidden="true" tabindex="-1"></a><span class="vs">  margin-right: 0.5em;</span></span>
<span id="cb238-1916"><a href="#cb238-1916" aria-hidden="true" tabindex="-1"></a><span class="vs">  background: var(--color);</span></span>
<span id="cb238-1917"><a href="#cb238-1917" aria-hidden="true" tabindex="-1"></a><span class="vs">}</span></span>
<span id="cb238-1918"><a href="#cb238-1918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-1919"><a href="#cb238-1919" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/style&gt;</span></span>
<span id="cb238-1920"><a href="#cb238-1920" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;div&gt;</span><span class="sc">${</span>domain<span class="op">.</span><span class="fu">map</span>(value <span class="kw">=&gt;</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;span class="</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">" style="--color: </span><span class="sc">${</span><span class="fu">color</span>(value)<span class="sc">}</span><span class="vs">"&gt;</span><span class="sc">${</span><span class="fu">format</span>(value)<span class="sc">}</span><span class="vs">&lt;/span&gt;`</span>)<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb238-1921"><a href="#cb238-1921" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="ojs-cell-238" data-nodetype="declaration">

</div>
</div>
</div>


<!-- -->


<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMgRGVjYWxlbmRhcmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFRoZSB0YWJsZSBiZWxvdyBzaG93cyB0aGUgY3VycmVudCBab25lIDAgW1RpbWVzdGFtcF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGltZXN0YW1wIzp+OnRleHQ9YSUyMHNlcXVlbmNlJTIwb2YlMjBjaGFyYWN0ZXJzJTIwb3IlMjBlbmNvZGVkJTIwaW5mb3JtYXRpb24lMjBpZGVudGlmeWluZyUyMHdoZW4lMjBhJTIwY2VydGFpbiUyMGV2ZW50JTIwb2NjdXJyZWQpIGFuZCB0aGUgW0xlYXAgQ3ljbGVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvbGFyX2N5Y2xlXyUyOGNhbGVuZGFyJTI5KSBMZW5ndGggb2YgdHdlbHZlIERlYyBjYWxlbmRhcnMgKGRlY2FsZW5kYXJzKSwgc29ydGVkIGJ5IFtFcG9jaF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXBvY2gjOn46dGV4dD1hbiUyMGluc3RhbnQlMjBpbiUyMHRpbWUlMjBjaG9zZW4lMjBhcyUyMHRoZSUyMG9yaWdpbiUyMG9mJTIwYSUyMHBhcnRpY3VsYXIlMjBjYWxlbmRhciUyMGVyYSkuIERlYyBpcyBhIFttZWFzdXJlbWVudCBzeXN0ZW1dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1N5c3RlbV9vZl91bml0c19vZl9tZWFzdXJlbWVudCM6fjp0ZXh0PWElMjBjb2xsZWN0aW9uJTIwb2YlMjB1bml0cyUyMG9mJTIwbWVhc3VyZW1lbnQlMjBhbmQlMjBydWxlcyUyMHJlbGF0aW5nJTIwdGhlbSUyMHRvJTIwZWFjaCUyMG90aGVyKSB0aGF0IFtJXShodHRwczovL21hcHR2LmdpdGh1Yi5pbykgY3JlYXRlZCB0byBtZWFzdXJl4o+zdGltZSzwn5ONcG9zaXRpb24s8J+nrW9yaWVudGF0aW9uLPCfk5BhbmdsZXMsIGFuZPCflIRjeWNsZXMgaW4gW3R1cm5zXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UdXJuXyUyOGFuZ2xlJTI5Izp+OnRleHQ9YSUyMHVuaXQlMjBvZiUyMHBsYW5lJTIwYW5nbGUlMjBtZWFzdXJlbWVudCUyMGVxdWFsJTIwdG8lMjAyJUNGJTgwJUMyJUEwcmFkaWFucyUyQyUyMDM2MCVDMiVBMGRlZ3JlZXMpIChbJHt0ZXhgXFx0YXVgfV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHVybl8lMjhhbmdsZSUyOSM6fjp0ZXh0PXRoZSUyMEdyZWVrJTIwbGV0dGVyLHRvJTIwb25lJTIwdHVybikpIGluc3RlYWQgb2YgbW9udGhzLCB3ZWVrcywgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMsIGFuZCBkZWdyZWVzLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFRoZSBtYXAgYmVsb3cgc2hvd3MgY291bnRyaWVzIHdoZXJlIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIgaXMgbm90IHRoZSBvbmx5IG9mZmljaWFsIGNhbGVuZGFyLiBFdmVuIHRob3VnaCBpdCBlbXBoYXNpemVzIEdyZWdvcmlhbiBjYWxlbmRhciBhbHRlcm5hdGl2ZXMsIHRoZSBtYXAgZGVtb25zdHJhdGVzIHRoZSBuZWFyIHRvdGFsIGRvbWluYW5jZSBvZiB0aGUgR3JlZ29yaWFuIGNhbGVuZGFyLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AbWlraW1hL3dpa2lwZWRpYS1ncmV5LWdyZWVuLW9ydGhvZ3JhcGhpYy1wcm9qZWN0aW9ucy1tYXBzLWdlbmVyLzI/Y29sbGVjdGlvbj1AbWlraW1hL3dpa2lwZWRpYS1sb2NhdG9yLW1hcHNcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9kL2FlMWZkNzU5M2I4MDVlZWJcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9kLzg3YmE2ZjJlZjUxNjQyMWFcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AYmF5cmUvc3ZnLXN3YXRjaGVzXG5nbG9iZSA9IHtcbiAgY29uc3QgZGl2ID0gZDNcbiAgICAuY3JlYXRlKFwiZGl2XCIpXG4gICAgLnN0eWxlKFwid2lkdGhcIiwgd2lkdGgpXG4gICAgLnN0eWxlKFwiaGVpZ2h0XCIsIHdpZHRoKVxuICAgIC5zdHlsZShcInBvc2l0aW9uXCIsIFwic3RhdGljXCIpO1xuXG4gIGNvbnN0IHN2ZyA9IGRpdlxuICAgIC5hcHBlbmQoXCJzdmdcIilcbiAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIHdpZHRoKVxuICAgIC5zdHlsZShcIm1hcmdpbi10b3BcIiwgXCIyMHB4XCIpXG4gICAgLnN0eWxlKFwibWFyZ2luLWJvdHRvbVwiLCBgLSR7d2lkdGggLyA4MH1weGApXG4gICAgLy8gLmF0dHIoXCJ2aWV3Qm94XCIsIGAwIDAgJHt3aWR0aCA8IDcwMCA/IHdpZHRoICogMS41IDogd2lkdGh9ICR7d2lkdGggPCA3MDAgPyB3aWR0aCAqIDEuNSA6IHdpZHRofWApXG4gICAgLy8gLnN0eWxlKFwiYm9yZGVyXCIsIFwic29saWQgMXB4IGJsYWNrXCIpO1xuICBcbiAgbGV0IHAxID0gWzAsMF07XG4gIGxldCBwMiA9IFswLDBdO1xuICBcbiAgY291bnRyaWVzLmZlYXR1cmVzLmZvckVhY2goZCA9PiB7ZC5zZWxlY3RlZCA9IGZhbHNlfSlcbiAgXG4gIGxldCBwYXRoID0gZDMuZ2VvUGF0aChwcm9qZWN0aW9uKVxuICBcbiAgLy8gY3JlYXRlIHRoZSByYWRpYWwgZ3JhZGllbnRcbiAgbGV0IHJhZGlhbEdyYWRpZW50ID0gc3ZnLmFwcGVuZChcImRlZnNcIilcbiAgICAuYXBwZW5kKFwicmFkaWFsR3JhZGllbnRcIilcbiAgICAuYXR0cihcImN4XCIsIHdpZHRoICogMC40OClcbiAgICAuYXR0cihcImN5XCIsIHdpZHRoICogMC4zNSlcbiAgICAuYXR0cihcInJcIiwgd2lkdGggKiAwLjY0KVxuICAgIC5hdHRyKFwiaWRcIiwgXCJnclNlYVwiKVxuICAgIC5hdHRyKFwiZ3JhZGllbnRVbml0c1wiLFwidXNlclNwYWNlT25Vc2VcIilcblxuICByYWRpYWxHcmFkaWVudC5hcHBlbmQoXCJzdG9wXCIpXG4gICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMFwiKVxuICAgICAgICAuc3R5bGUoXCJzdG9wLWNvbG9yXCIsIFwiIzAwMDAwMFwiKSBcbiAgICAgICAgLnN0eWxlKFwic3RvcC1vcGFjaXR5XCIsIDApXG4gIFxuICByYWRpYWxHcmFkaWVudC5hcHBlbmQoXCJzdG9wXCIpXG4gICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMC41XCIpXG4gICAgICAgIC5zdHlsZShcInN0b3AtY29sb3JcIiwgXCIjMDAwMDAwXCIpIFxuICAgICAgICAuc3R5bGUoXCJzdG9wLW9wYWNpdHlcIiwgMC4wMDYpXG4gIFxuICByYWRpYWxHcmFkaWVudC5hcHBlbmQoXCJzdG9wXCIpXG4gICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMC41NlwiKVxuICAgICAgICAuc3R5bGUoXCJzdG9wLWNvbG9yXCIsIFwiIzAwMDAwMFwiKSBcbiAgICAgICAgLnN0eWxlKFwic3RvcC1vcGFjaXR5XCIsIDAuMDA5KVxuXG4gIHJhZGlhbEdyYWRpZW50LmFwcGVuZChcInN0b3BcIilcbiAgICAgICAgLmF0dHIoXCJvZmZzZXRcIiwgXCIwLjY0XCIpXG4gICAgICAgIC5zdHlsZShcInN0b3AtY29sb3JcIiwgXCIjMDAwMDAwXCIpIFxuICAgICAgICAuc3R5bGUoXCJzdG9wLW9wYWNpdHlcIiwgMC4wMTcpXG4gIFxuICByYWRpYWxHcmFkaWVudC5hcHBlbmQoXCJzdG9wXCIpXG4gICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMC43XCIpXG4gICAgICAgIC5zdHlsZShcInN0b3AtY29sb3JcIiwgXCIjMDAwMDAwXCIpIFxuICAgICAgICAuc3R5bGUoXCJzdG9wLW9wYWNpdHlcIiwgMC4wMzkpXG4gIFxuICByYWRpYWxHcmFkaWVudC5hcHBlbmQoXCJzdG9wXCIpXG4gICAgICAgIC5hdHRyKFwib2Zmc2V0XCIsIFwiMC43NFwiKVxuICAgICAgICAuc3R5bGUoXCJzdG9wLWNvbG9yXCIsIFwiIzAwMDAwMFwiKSBcbiAgICAgICAgLnN0eWxlKFwic3RvcC1vcGFjaXR5XCIsIDAuMDU1KVxuICBcbiAgcmFkaWFsR3JhZGllbnQuYXBwZW5kKFwic3RvcFwiKVxuICAgICAgICAuYXR0cihcIm9mZnNldFwiLCBcIjFcIilcbiAgICAgICAgLnN0eWxlKFwic3RvcC1jb2xvclwiLCBcIiMwMDAwMDBcIikgXG4gICAgICAgIC5zdHlsZShcInN0b3Atb3BhY2l0eVwiLCAwLjE0MilcbiAgXG4gIC8vIGNyZWF0ZSBiYWNrZ3JvdW5kIGNpY2xlXG4gIHN2Zy5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAuYXR0cihcImN4XCIsIHdpZHRoLzIpXG4gICAgLmF0dHIoXCJjeVwiLCB3aWR0aC8yKVxuICAgIC5hdHRyKFwiclwiLHdpZHRoLzIpXG4gICAgLmF0dHIoXCJmaWxsXCIsIFwiI0M3RTdGQlwiKVxuICAgIC5hdHRyKFwic3Ryb2tlXCIsIFwibm9uZVwiKVxuXG4gIGNvbnN0IGx1aGlHcmVnID0gW1xuICAgIFwiQWZnaGFuaXN0YW5cIixcbiAgICBcIkxpYnlhXCIsXG4gICAgXCJZZW1lblwiLFxuICAgIFwiQWxnZXJpYVwiLFxuICAgIFwiU2F1ZGkgQXJhYmlhXCIsXG4gICAgXCJFZ3lwdFwiLFxuICAgIFwiU29tYWxpYVwiLFxuICAgIFwiSXJhcVwiLFxuICAgIFwiSm9yZGFuXCIsXG4gICAgXCJMaWJ5YVwiLFxuICAgIFwiTWF1cml0YW5pYVwiLFxuICAgIFwiTW9yb2Njb1wiLFxuICAgIFwiT21hblwiLFxuICAgIFwiUGFraXN0YW5cIixcbiAgICBcIlNhdWRpIEFyYWJpYVwiLFxuICAgIFwiU29tYWxpYVwiLFxuICAgIFwiVHVuaXNpYVwiLFxuICAgIFwiVW5pdGVkIEFyYWIgRW1pcmF0ZXNcIixcbiAgXVxuICBjb25zdCBjb2xvcnMgPSBkMy5zY2hlbWVDYXRlZ29yeTEwLmNvbmNhdChkMy5zY2hlbWVEYXJrMik7XG4gIGNvbnN0IGNvdW50cmllc1BhdGggPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBcImNvdW50cmllc1wiKVxuICAgICAgLnNlbGVjdEFsbChcInBhdGhcIilcbiAgICAgIC5kYXRhKGNvdW50cmllcy5mZWF0dXJlcylcbiAgICAgIC5qb2luKFwicGF0aFwiKVxuICAgICAgLmF0dHIoXCJpZFwiLCBkPT5kLnByb3BlcnRpZXMuZm9ybWFsX2VuKVxuICAgICAgLmF0dHIoXCJkXCIsIHBhdGgpXG4gICAgICAuYXR0cihcInN0cm9rZVwiLCBcIiM2NTY1NjVcIilcbiAgICAgIC5hdHRyKFwiZmlsbFwiLCBkID0+IGQuc2VsZWN0ZWQgPyBcIiNDMTI4MzhcIiA6IFwiI0ZERkJFQVwiKVxuICAgICAgLmF0dHIoXCJmaWxsXCIsIGQgPT4gbHVoaUdyZWcuaW5jbHVkZXMoZC5wcm9wZXJ0aWVzLm5hbWVfZW4pID8gY29sb3JzWzBdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiRXRoaW9waWFcIiA/IGNvbG9yc1sxXSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIklzcmFlbFwiID8gY29sb3JzWzJdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiSXJhblwiID8gY29sb3JzWzNdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiSW5kaWFcIiA/IGNvbG9yc1s0XSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIk5lcGFsXCIgPyBjb2xvcnNbNV0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJCYW5nbGFkZXNoXCIgPyBjb2xvcnNbNl0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJNeWFubWFyXCIgPyBjb2xvcnNbN10gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJUaGFpbGFuZFwiID8gY29sb3JzWzhdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiVGFpd2FuXCIgPyBjb2xvcnMgWzldIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiTm9ydGggS29yZWFcIiA/IGNvbG9yc1sxMF0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJKYXBhblwiID8gY29sb3JzWzExXSA6IFwiI0ZERkJFQVwiKVxuICAgICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgZCA9PiBkLnNlbGVjdGVkID8gXCIyXCIgOiBcIjFcIilcbiAgICAgIC5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAvLyBpbnZlcnQgc2VsZWN0aW9uXG4gICAgICAgIGQuc2VsZWN0ZWQgPSAhZC5zZWxlY3RlZDtcbiAgICAgICAgY29uc29sZS5sb2coZCk7XG4gICAgICAgIGNvdW50cmllc1BhdGguYXR0cihcImZpbGxcIiwgZCA9PiBsdWhpR3JlZy5pbmNsdWRlcyhkLnByb3BlcnRpZXMubmFtZV9lbikgPyBjb2xvcnNbMF0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJFdGhpb3BpYVwiID8gY29sb3JzWzFdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiSXNyYWVsXCIgPyBjb2xvcnNbMl0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJJcmFuXCIgPyBjb2xvcnNbM10gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJJbmRpYVwiID8gY29sb3JzWzRdIDogZC5wcm9wZXJ0aWVzLm5hbWVfZW4gPT09IFwiTmVwYWxcIiA/IGNvbG9yc1s1XSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIkJhbmdsYWRlc2hcIiA/IGNvbG9yc1s2XSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIk15YW5tYXJcIiA/IGNvbG9yc1s3XSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIlRoYWlsYW5kXCIgPyBjb2xvcnNbOF0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJUYWl3YW5cIiA/IGNvbG9ycyBbOV0gOiBkLnByb3BlcnRpZXMubmFtZV9lbiA9PT0gXCJOb3J0aCBLb3JlYVwiID8gY29sb3JzWzEwXSA6IGQucHJvcGVydGllcy5uYW1lX2VuID09PSBcIkphcGFuXCIgPyBjb2xvcnNbMTFdIDogXCIjRkRGQkVBXCIpXG4gICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgZCA9PiBkLnNlbGVjdGVkID8gXCIjQzEyODM4XCIgOiBcIiM2NTY1NjVcIilcbiAgICAgICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCBkID0+IGQuc2VsZWN0ZWQgPyBcIjJcIiA6IFwiMVwiKVxuICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGQuc2VsZWN0ZWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYnJpbmcgb24gdG9wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykucmFpc2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgIC8vIHNob3cgZGlzcHV0ZWQgem9uZXNcbiAgICAgICAgaWYoc2hvd0Rpc3B1dGVkKXtcbiAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGQucHJvcGVydGllcy5hZG0wX2EzO1xuICAgICAgICAgIGRpc3B1dGVkUGF0aC5hdHRyKFwiZGlzcGxheVwiLFwibm9uZVwiKTtcbiAgICAgICAgICBkaXNwdXRlZFBhdGguZmlsdGVyKGUgPT4gZS5wcm9wZXJ0aWVzWydkaXNwdXRlZC10ZXJyaXRvcmllc19DbGFpbWFudHNfSVNPJ10uaW5jbHVkZXMoc2VsZWN0ZWQpKVxuICAgICAgICAgICAgLmF0dHIoXCJkaXNwbGF5XCIsIGQ9Pntjb25zb2xlLmxvZyhkKTsgcmV0dXJuIG51bGx9KVxuICAgICAgICB9XG4gICAgICAgIGlmKHNob3dEaXNwdXRlZCl7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkLnByb3BlcnRpZXMuYWRtMF9hMztcbiAgICAgICAgICBkaXNwdXRlZFBhdGguYXR0cihcImRpc3BsYXlcIixcIm5vbmVcIik7XG4gICAgICAgICAgZGlzcHV0ZWRQYXRoLmZpbHRlcihlID0+IGUucHJvcGVydGllc1snZGlzcHV0ZWQtdGVycml0b3JpZXNfQ2xhaW1hbnRzX0lTTyddLmluY2x1ZGVzKHNlbGVjdGVkKSlcbiAgICAgICAgICAgIC5hdHRyKFwiZGlzcGxheVwiLCBkPT57Y29uc29sZS5sb2coZCk7IHJldHVybiBudWxsfSlcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gc2V0IHVwIHRyYW5zaXRpb25cbiAgICAgICAgbGV0IG5ld0NlbnRyb2lkID0gZDMuZ2VvQ2VudHJvaWQoZCkubWFwKHYgPT4gLXYpXG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0aW9uLnJvdGF0ZShuZXdDZW50cm9pZCk7XG4gICAgICAgIHBhdGggPSBkMy5nZW9QYXRoKHByb2plY3Rpb24pO1xuICAgICAgICBncmF0aWN1bGVQYXRoLmF0dHIoXCJkXCIsIHBhdGgpO1xuICAgICAgICBjb3VudHJpZXNQYXRoLmF0dHIoXCJkXCIsIHBhdGgpO1xuICAgICAgICBkaXNwdXRlZFBhdGguYXR0cihcImRcIiwgcGF0aCk7XG4gICAgICB9KVxuICAgICAgLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcInN0cm9rZVwiLCBkPT5kLnNlbGVjdGVkID8gXCIjQzEyODM4XCIgOiBcIiM2NTY1NjVcIikuYXR0cihcInN0cm9rZS13aWR0aFwiLCBkPT5kLnNlbGVjdGVkID8gXCIzXCIgOiBcIjJcIikucmFpc2UoKTsgXG4gICAgICB9KVxuICAgICAgLm9uKFwibW91c2VvdXRcIiwgZnVuY3Rpb24oKSB7IFxuICAgICAgICBkMy5zZWxlY3QodGhpcykuYXR0cihcInN0cm9rZVwiLCBkPT5kLnNlbGVjdGVkID8gXCIjQzEyODM4XCIgOiBcIiM2NTY1NjVcIikuYXR0cihcInN0cm9rZS13aWR0aFwiLCBkPT5kLnNlbGVjdGVkID8gXCIyXCIgOiBcIjFcIilcbiAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gY29uc3QgZGlzcHV0ZWRQYXRoID0gc3ZnLmFwcGVuZChcImdcIilcbiAgICAgIC5hdHRyKFwiaWRcIiwgXCJkaXNwdXRlZCBhcmVhc1wiKVxuICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKVxuICAgICAgLnNlbGVjdEFsbChcInBhdGhcIilcbiAgICAgIC5kYXRhKGRpc3B1dGVkLmZlYXR1cmVzKVxuICAgICAgLmpvaW4oXCJwYXRoXCIpXG4gICAgICAuYXR0cihcImlkXCIsIGQ9PmQucHJvcGVydGllcy5nZW9tZXRyeSlcbiAgICAgIC5hdHRyKFwiZFwiLCBwYXRoKVxuICAgICAgLmF0dHIoXCJmaWxsXCIsIFwiI0MxMjgzOEFBXCIpXG4gICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLDAuNSlcbiAgICAgIC5hdHRyKFwiZGlzcGxheVwiLCBcIm5vbmVcIilcbiBcbiBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgY29uc29sZS5sb2coXCJSZW5kZXJcIilcbiAgICBwYXRoID0gZDMuZ2VvUGF0aChwcm9qZWN0aW9uKVxuICAgIGdyYXRpY3VsZVBhdGguYXR0cihcImRcIiwgcGF0aClcbiAgICBjb3VudHJpZXNQYXRoLmF0dHIoXCJkXCIsIHBhdGgpXG4gIH1cblxuICAgIC8vIGFkZCBncmF0aWN1bGVcbiBjb25zdCBncmF0aWN1bGVQYXRoID0gc3ZnLmFwcGVuZChcInBhdGhcIilcbiAgICAgIC5kYXR1bShncmF0aWN1bGUpXG4gICAgICAuYXR0cihcImlkXCIsIFwiZ3JhdGljdWxlXCIpXG4gICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgXCIjNjU2NTY1XCIpXG4gICAgICAgICAgLmF0dHIoXCJvcGFjaXR5XCIsIDAuOClcbiAgICAgICAgICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCAwLjMpXG4gICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIFwibm9uZVwiKVxuICAgICAgICAgIC5hdHRyKFwiZFwiLCBwYXRoKVxuICAgICAgICAgIC5hdHRyKFwicG9pbnRlci1ldmVudHNcIixcIm5vbmVcIilcbiAgXG4gIC8vIGFwcGVuZCBzaGFkZWQgY2lyY2xlIGFuZCBvdXRlciBsaW5lXG4gIFxuICBzdmcuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgLmF0dHIoXCJjeFwiLCB3aWR0aC8yKVxuICAgIC5hdHRyKFwiY3lcIiwgd2lkdGgvMilcbiAgICAuYXR0cihcInJcIix3aWR0aC8yKVxuICAgIC5hdHRyKFwiZmlsbFwiLCBcInVybCgjZ3JTZWEpXCIpXG4gICAgLmF0dHIoXCJzdHJva2VcIiwgXCJub25lXCIpXG4gICAgLy8uYXR0cihcInN0cm9rZS13aWR0aFwiLDEuNSlcbiAgICAuYXR0cihcInBvaW50ZXItZXZlbnRzXCIsXCJub25lXCIpXG4gICAgXG4gICAgc3ZnXG4gICAgLmNhbGwoZHJhZyhwcm9qZWN0aW9uKVxuICAgICAgICAub24oXCJkcmFnLnJlbmRlclwiLCAoKSA9PiByZW5kZXIoKSkpXG4gICAgLmNhbGwoKCkgPT4gcmVuZGVyKCkpXG5cbiAgXG4gICBkaXZcbiAgICAuYXBwZW5kKFwiZGl2XCIpXG4gICAgLnN0eWxlKFwicG9zaXRpb25cIiwgXCJhYnNvbHV0ZVwiKVxuICAgIC5zdHlsZShcInRvcFwiLCBcIi0yMHB4XCIpXG4gICAgLnN0eWxlKFwibGVmdFwiLCBcIjBweFwiKVxuICAgIC5hcHBlbmQoKCkgPT5cbiAgICAgIFN3YXRjaGVzKFxuICAgICAgICBkMy5zY2FsZU9yZGluYWwoXG4gICAgICAgICAgW1wiTHVuYXIgSGlqaXJpXCIsIFwiRXRoaW9waWFuXCIsIFwiSGVicmV3XCIsIFwiU29sYXIgSGlqaXJpXCIsIFwiSW5kaWFuXCIsIFwiTmVwYWxpXCIsIFwiQmVuZ2FsaVwiLCBcIkJ1cm1lc2VcIiwgXCJUaGFpXCIsIFwiTWluZ3VvXCIsIFwiSnVjaGVcIiwgXCJKYXBhbmVzZVwiXSxcbiAgICAgICAgICBjb2xvcnNcbiAgICAgICAgKVxuICAgICAgKVxuICAgICk7IFxuICAgIHJldHVybiBkaXYubm9kZSgpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC03IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgRm9yIG1vcmUgRGVjIG1hcHMgbGlrZSB0aGUgb25lIGFib3ZlLCBjaGVjayBvdXQgdGhlc2Ugbm90ZWJvb2tzOlxuLSBbRGVjYWxjXSgvQGRlYy9hbGMpXG4tIFtEZWNhbGlwZXJdKC9AZGVjL2FsaSlcbi0gW0RlY2lyY10oL0BkZWMvaXJjKVxuLSBbRGVjbG9ja10oL0BkZWMvbG9jKVxuLSBbU29sYXIgdGVybWluYXRvcl0oL0BkZWMvc29sYXItdGVybWluYXRvcilcbi0gW1RoZSBTdW4ncyB2aWV3IG9mIHRoZSBFYXJ0aF0oL0BkZWMvdGhlLXN1bnMtdmlldy1vZi10aGUtZWFydGgpYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgRGVjIG1lYXN1cmVzIHRpbWUgdXNpbmcgeWVhciBhbmQgZGF5cy4gQSB5ZWFyIGlzIGEgdHVybiBvZiBvbmUgW2NlbGVzdGlhbCBib2R5XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3Ryb25vbWljYWxfb2JqZWN0Izp+OnRleHQ9YSUyMHNpbmdsZSUyQyUyMHRpZ2h0bHklMjBib3VuZCUyQyUyMGNvbnRpZ3VvdXMlMjBlbnRpdHkpIGFyb3VuZCBbdGhlIHBvaW50IGl0IG9yYml0c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQmFyeWNlbnRlcl8lMjhhc3Ryb25vbXklMjkjOn46dGV4dD10aGUlMjBwb2ludCUyMGFib3V0JTIwd2hpY2glMjB0aGUlMjBib2RpZXMlMjBvcmJpdCkgYW5kIGEgZGF5IGlzIGEgdHVybiBvZiBhIGNlbGVzdGlhbCBib2R5IG9uIFtpdHMgYXhpc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXhpYWxfdGlsdCM6fjp0ZXh0PXRoZSUyMGltYWdpbmFyeSUyMGxpbmUlMjB0aGF0JTIwcGFzc2VzJTIwdGhyb3VnaCUyMGJvdGglMjB0aGUlMjBub3J0aCUyMHBvbGUlMjBhbmQlMjBzb3V0aCUyMHBvbGUpLiBUaGUgRWFydGggKHRoZSBibHVlIGNpcmNsZSBsYWJlbGVkICR7dGV4YFxccmFpc2Vib3h7MnB0fXvwn5yofWB9IGJlbG93KSBtYWtlcyAzNjUuMjQgdHVybnMgb24gaXRzIGF4aXMgaW4gYSB5ZWFyIGFuZCBNYXJzIChyZWQgY2lyY2xlIGxhYmVsZWQg4pmCIGJlbG93KSB0dXJucyBvbiBpdHMgYXhpcyA2NjguNTkgdGltZXMgcGVyIHllYXIuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgSW4gdGhlIGNhc2Ugb2YgW3RpZGFsbHkgbG9ja2VkXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaWRhbF9sb2NraW5nIzp+OnRleHQ9dGhlJTIwb2JqZWN0cyUyMHJlYWNoZXMtLGElMjBzdGF0ZSUyMHdoZXJlJTIwdGhlcmUlMjBpcyUyMG5vJTIwbG9uZ2VyJTIwYW55JTIwbmV0JTIwY2hhbmdlJTIwaW4lMjBpdHMlMjByb3RhdGlvbiUyMHJhdGUlMjBvdmVyJTIwdGhlJTIwY291cnNlJTIwb2YlMjBhJTIwY29tcGxldGUlMjBvcmJpdCwtLiUyMEluJTIwdGhlJTIwY2FzZSkgbW9vbnMsIHN1Y2ggYXMgdGhlIFtFYXJ0aCdzIG1vb25dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01vb24jOn46dGV4dD1FYXJ0aCUyN3MlMjBvbmx5JTIwbmF0dXJhbCUyMHNhdGVsbGl0ZSkgKOKYviksIERlY2FsZW5kYXIgdXNlcyBbdGlkYWwgZGF5c10oaHR0cHM6Ly9vY2VhbnNlcnZpY2Uubm9hYS5nb3YvZWR1Y2F0aW9uL3R1dG9yaWFsX3RpZGVzL3RpZGVzMDVfbHVuYXJkYXkuaHRtbCM6fjp0ZXh0PXRoZSUyMHRpbWUlMjBpdCUyMHRha2VzJTIwZm9yJTIwYSUyMHNwZWNpZmljJTIwc2l0ZSUyMG9uJTIwdGhlJTIwRWFydGglMjB0byUyMHJvdGF0ZSUyMGZyb20lMjBhbiUyMGV4YWN0JTIwcG9pbnQlMjB1bmRlciUyMHRoZSUyMG1vb24lMjB0byUyMHRoZSUyMHNhbWUlMjBwb2ludCUyMHVuZGVyJTIwdGhlJTIwbW9vbiksICAgaW5zdGVhZCBvZiBbc3lub2RpY10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU3lub2RpY19kYXkjOn46dGV4dD10aGUlMjBwZXJpb2QlMjBmb3IlMjBhJTIwY2VsZXN0aWFsJTIwb2JqZWN0JTIwdG8lMjByb3RhdGUlMjBvbmNlJTIwaW4lMjByZWxhdGlvbiUyMHRvJTIwdGhlJTIwc3RhciUyMGl0JTIwaXMlMjBvcmJpdGluZykgb3IgW3NpZGVyZWFsXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaWRlcmVhbF90aW1lIzp+OnRleHQ9YSUyMHN0YXIlMjBzZWVuJTIwYXQlMjBvbmUlMjBwb3NpdGlvbiUyMGluJTIwdGhlJTIwc2t5JTIwd2lsbCUyMGJlJTIwc2VlbiUyMGF0JTIwdGhlJTIwc2FtZSUyMHBvc2l0aW9uJTIwb24lMjBhbm90aGVyJTIwbmlnaHQlMjBhdCUyMHRoZSUyMHNhbWUlMjB0aW1lJTIwb2YlMjBkYXklMjAlMjhvciUyMG5pZ2h0JTI5JTJDJTIwaWYlMjB0aGUlMjBkYXklMjBpcyUyMGRlZmluZWQlMjBhcyUyMGElMjBzaWRlcmVhbCUyMGRheSkgZGF5cywgYmVjYXVzZSB0aWRhbCBsb2NraW5nIGNhdXNlcyBzeW5vZGljIGRheXMgdG8gYmUgaW5maW5pdGUgYW5kIHNpZGVyZWFsIGRheXMgdG8gaGF2ZSB0aGUgc2FtZSBkdXJhdGlvbiBhcyBhIHllYXIuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImNoYXJ0ID0ge1xuICBjb25zdCBzdmcgPSBkMy5jcmVhdGUoXCJzdmdcIilcbiAgICAuYXR0cihcInZpZXdCb3hcIiwgWzAsIDAsIHN5c3RlbV93aWR0aCwgaGVpZ2h0IC8gMS41XSlcbiAgICAuYXR0cihcIndpZHRoXCIsIHN5c3RlbV93aWR0aCAqIDEuNikgICAgIFxuICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodCAvIDEuNClcbiAgICAuYXR0cihcImlkXCIsIFwiU1ZHY2hhcnRcIik7XG5cbiAgLy8gRGFyayBiYWNrZ3JvdW5kXG4gIHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBcIjMyMCVcIilcbiAgICAuYXR0cihcImhlaWdodFwiLCBcIjEyMCVcIilcbiAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIC13aWR0aC8zICsgXCIsXCIgKyAtaGVpZ2h0LzEyOC4wMiArIFwiKVwiKVxuICAgIC5hdHRyKFwiZmlsbFwiLCBkYXJrX2JhY2tncm91bmQ/IFwiIzAwMFwiOlwiI0ZGRlwiKTsgIFxuICBcbiAgLy8gUGxhbmV0IGdyb3VwXG4gIGNvbnN0IGNvbnRhaW5lciA9IHN2Zy5hcHBlbmQoXCJnXCIpXG4gICAgLmF0dHIoXCJpZFwiLCBcIm9yYml0X2NvbnRhaW5lclwiKVxuICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgd2lkdGgvNC40ICsgXCIsXCIgKyBoZWlnaHQvMy4wMiArIFwiKVwiKTtcblxuICAvLyBEcmF3IHBsYW5ldHMgYW5kIG1vb25zXG4gIGNvbnRhaW5lci5zZWxlY3RBbGwoXCJnLnBsYW5ldFwiKS5kYXRhKHN5c3RlbV9tb2RlbCA9PSAxID8gc29sYXJfc3lzdGVtIDogdHljaG5vbmljX21vZGVsKS5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAuYXR0cihcImNsYXNzXCIsIFwicGxhbmV0X2NsdXN0ZXJcIilcbiAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICBkMy5zZWxlY3QodGhpcykuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwib3JiaXRcIilcbiAgICAgICAgIC5hdHRyKFwiclwiLCBkLlIpO1xuICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAgLmF0dHIoXCJyXCIsIGQucilcbiAgICAgICAgIC5hdHRyKFwiY3hcIixkLlIpXG4gICAgICAgICAuYXR0cihcImN5XCIsMClcbiAgICAgICAgIC5hdHRyKFwiaWRcIiwgZC5uYW1lKVxuICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcInBsYW5ldFwiKTtcbiAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImdcIilcbiAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQuUiArIFwiLDApXCIpXG4gICAgICAgLmNhbGwoZyA9PiBnLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBkYXJrX2JhY2tncm91bmQ/IFwid2hpdGVcIjogXCJibGFja1wiKVxuICAgICAgICAgLmF0dHIoXCJkeFwiLCBgJHtkLm5hbWUgPT0gXCJKdXBpdGVyXCIgPyAyLjQ2IC0gKHdpZHRoIDwgNDAwKSAqIC42NSA6IGQubmFtZSA9PSBcIkVhcnRoXCIgPyAuODcgOiBkLm5hbWUgPT0gXCJTYXR1cm5cIiA/IDEgLSAod2lkdGggPCA0MDApICogLjY1IDogZC5uYW1lID09IFwiTWFyc1wiID8gMS41IDogZC5uYW1lID09IFwiU3VuXCIgPyAuNSA6IC4zfWVtYClcbiAgICAgICAgIC5hdHRyKFwiZHlcIiwgXCIwLjI1ZW1cIilcbiAgICAgICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIDE0KVxuICAgICAgICAgLmF0dHIoXCJmb250LWZhY2VcIiwgXCJPcGVuIFNhbnNcIilcbiAgICAgICAgIC50ZXh0KGQuc3ltYm9sKSk7XG5cbiAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImdcIilcbiAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQuUiArIFwiLDApXCIpICAgICAgICAgICAgIFxuICAgICAgIC5zZWxlY3RBbGwoXCJnLm1vb25cIikuZGF0YShkLm1vb25zKS5lbnRlcigpLmFwcGVuZChcImdcIilcbiAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZShcIiArIGQuUiArIFwiLDApXCIpXG4gICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibW9vbl9jbHVzdGVyXCIpXG4gICAgICAgICAuZWFjaChmdW5jdGlvbihkLCBpKSB7XG4gICAgICAgICAgIC8vIENvbmRpdGlvbnMgdG8gZGlzcGxheSBwbGFuZXRzJyBtb29ucy4gRm9yIHRoZSBFYXJ0aCwgd2UgYWx3YXlzIGRpc3BsYXkgdGhlIE1vb25cbiAgICAgICAgICAgaWYoIXN5c3RlbV9tb2RlbCB8fCAgaGVsaW9jZW50cmljX29wdGlvbnMuZGlzcGxheV9tb29ucyB8fCBkLm5hbWU9PVwiTW9vblwiIHx8IGQubmFtZT09XCJTdW5fcGF0aFwiKSB7ICAgIFxuXG4gICAgIC8vIE9yYml0cyBhcmUgZGlzcGxheWVkXG4gICAgIGlmKCEoZC5uYW1lPT1cIlN1bl9wYXRoXCIgJiYgIWhlbGlvY2VudHJpY19vcHRpb25zLlN1bl9wYXRoKSl7XG4gICAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImNpcmNsZVwiKVxuICAgICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwib3JiaXRfbW9vblwiKVxuICAgICAgICAgICAuYXR0cihcInJcIiwgZC5SKVxuICAgICB9XG4gICAgIGQzLnNlbGVjdCh0aGlzKS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgIC5hdHRyKFwiclwiLCBkLnIpXG4gICAgICAgICAuYXR0cihcImN4XCIsZC5SKVxuICAgICAgICAgLmF0dHIoXCJjeVwiLCAwKVxuICAgICAgICAgLmF0dHIoXCJpZFwiLCBkLm5hbWUpXG4gICAgICAgICAuYXR0cihcImNsYXNzXCIsIFwibW9vblwiKTtcbiAgICAgZDMuc2VsZWN0KHRoaXMpLmFwcGVuZChcImdcIilcbiAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKFwiICsgZC5SICsgXCIsMClcIilcbiAgICAgICAgIC5jYWxsKGcgPT4gZy5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBkYXJrX2JhY2tncm91bmQ/IFwid2hpdGVcIjogXCJibGFja1wiKVxuICAgICAgICAgICAuYXR0cihcImR4XCIsIFwiMC41ZW1cIilcbiAgICAgICAgICAgLmF0dHIoXCJkeVwiLCBcIjAuNWVtXCIpXG4gICAgICAgICAgIC5hdHRyKFwiZm9udC1zaXplXCIsIDE0KVxuICAgICAgICAgICAuYXR0cihcImZvbnQtZmFjZVwiLCBcIk9wZW4gU2Fuc1wiKVxuICAgICAgICAgICAudGV4dChkLnN5bWJvbCkpO1xuICAgICAgICAgICB9XG4gICAgICAgICB9KTtcbiAgICAgXG4gIH0pO1xuXG4gIFxuICAvLyB0aHJvdHRsZSBhbmltYXRpb25cbiAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtcbiAgICB2YXIgZGVsdGEgPSAoRGF0ZS5ub3coKSAtIG5ldyBEYXRlKCkuc2V0SG91cnMoMCwwLDAsMCkpO1xuICAgIFxuICAgIHN2Zy5zZWxlY3RBbGwoXCIucGxhbmV0X2NsdXN0ZXIsIC5tb29uX2NsdXN0ZXJcIilcbiAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChkLnBoaTAgKyAoZGVsdGEgKiAoZC5zcGVlZCAqIHNwZWVkX2ZhY3Rvci8xMDAwKSkpICsgXCIpXCI7XG4gICAgfSk7XG5cbiAgICAvLyBXZSBkbyBub3Qgcm90YXRlIHN5bWJvbHNcbiAgICBzdmcuc2VsZWN0QWxsKFwidGV4dFwiKVxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICBpZigoc3lzdGVtX21vZGVsID09IDEpIHx8IChkLnN5bWJvbCA9PSBcIuKKmVwiKSB8fCAoZC5zeW1ib2wgPT0gXCLwn5yoXCIpIHx8IChkLnN5bWJvbCA9PSBcIuKYvlwiKSl7XG4gICAgICAgICAgaWYoZC5zeW1ib2wgPT0gXCLwn5yoXCIpe1xuICAgICAgICAgICAgLy8gRWFydGggc3ltYm9sIHRyYW5zbGF0ZWQgYWJvdmUgdGhlIHBsYW5ldFxuICAgICAgICAgICAgaWYoc3lzdGVtX21vZGVsID09IDApXG4gICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZSgtMTYsLTIwKVwiOyAgXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArICgtZC5waGkwICsgKC1kZWx0YSAqIGQuc3BlZWQgKiBzcGVlZF9mYWN0b3IvMTAwMCkpICsgXCIpIHRyYW5zbGF0ZSgtMTYsLTIwKVwiOyBcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZigoc3lzdGVtX21vZGVsID09IDEpICYmIGQuc3ltYm9sID09IFwi4pi+XCIpXG4gICAgICAgICAgICByZXR1cm4gXCJyb3RhdGUoXCIgKyAoLWFuZ2xlXzkwIC0gZC5waGkwICsgZGVsdGEgKiAoRWFydGhfc3BlZWQgLSBkLnNwZWVkKSAqIChzcGVlZF9mYWN0b3IvMTAwMCkgKSAgKyBcIikgdHJhbnNsYXRlKDAsLTIpXCI7IFxuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArICgtZC5waGkwICsgKC1kZWx0YSAqIGQuc3BlZWQgKiBzcGVlZF9mYWN0b3IvMTAwMCkpICsgXCIpXCI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgIHJldHVybiBcInJvdGF0ZShcIiArIChhbmdsZV85MCAtIGQucGhpMCArIGRlbHRhICogKEVhcnRoX3NwZWVkIC0gZC5zcGVlZCkgKiAoc3BlZWRfZmFjdG9yLzEwMDApICkgICsgXCIpIHRyYW5zbGF0ZSg0LC0zKVwiO1xuICAgIH0pO1xuXG4gICAgIFxuICB9LCAwKTsgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgIFxuXG4gIHJldHVybiBzdmcubm9kZSgpOyBcbn1cblxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyBEYXkgb2YgdGhlIGVyYWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ1bml4ID0ge1xuICB3aGlsZSh0cnVlKSB7XG4gICAgeWllbGQgRGF0ZS5ub3coKTtcbiAgfVxufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIHVuaXgyZG90ZSh1bml4LCB6b25lLCBvZmZzZXQgPSA3MTk0NjgpIHtcbiAgcmV0dXJuIFtcbiAgICAodW5peCA/PyBEYXRlLm5vdygpKSAvIDg2NDAwMDAwXG4gICAgKyAoem9uZSA9IHpvbmUgPz8gKDEwIC0gTWF0aC5yb3VuZChcbiAgICAgICAgKG5ldyBEYXRlKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gMTQ0KSkgJSAxMFxuICAgICAgKSAvIDEwICsgb2Zmc2V0LCB6b25lXVxufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImN1cnJlbnQgPSB1bml4MmRvdGUodW5peClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiBkb3R5MmRvdGUoeWVhciA9IDE5NjksIGRvdHkgPSAzMDYpIHtcbiAgICByZXR1cm4gZG90eSArIE1hdGguZmxvb3IoeWVhciAqIDM2NSArIE1hdGguZmxvb3IoeWVhciAvIDQpIC0gTWF0aC5mbG9vcih5ZWFyIC8gMTAwKSArIE1hdGguZmxvb3IoeWVhciAvIDQwMCkpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InVuaXhFcG9jaCA9IGRvdHkyZG90ZSgxOTY5LCAzMDYpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgSXQgaXMgcG9zc2libGUgdG8gc3VidHJhY3QgMTAgZnJvbSB0aGUgRGVjIHRpbWVzIHpvbmVzIHRvIGNvbnZlcnQgdGhlbSBmcm9tIHBvc2l0aXZlIHRvIG5lZ2F0aXZlLiBSZWdhcmRsZXNzIG9mIHRoZWlyIHNpZ24sIERlYyB0aW1lIHpvbmUgbnVtYmVycyB3b3JrIGxpa2UgW2FycmF5IGluZGV4ZXNdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0FycmF5XyUyOGRhdGFfc3RydWN0dXJlJTI5I0VsZW1lbnRfaWRlbnRpZmllcl9hbmRfYWRkcmVzc2luZ19mb3JtdWxhczp+OnRleHQ9VGhlJTIwZmlyc3QlMjBlbGVtZW50JTIwb2YlMjB0aGUlMjBhcnJheSUyMGlzJTIwaW5kZXhlZCUyMGJ5JTIwc3Vic2NyaXB0JTIwb2YlMjAwKS4gV2UgY2FuIGFsc28gdXNlIHBvc2l0aXZlIGFuZCBuZWdhdGl2ZSB0aW1lIHpvbmUgaW5kZXhlcyBhcyB0aW1lIHpvbmUgb2Zmc2V0cyB0byBvYnRhaW4gdGhlIHRpbWUgaW4gdGhlIGRlc2lyZWQgdGltZSB6b25lLiBTb21ldGltZXMgaXQgZWFzaWVyIHRvIHVzZSBhIG5lZ2F0aXZlIG9mZnNldCB0aGFuIGEgcG9zaXRpdmUgb2Zmc2V0LiBGb3IgZXhhbXBsZS4gd2hlbiBjb252ZXJ0aW5nIFpvbmUgMCB0aW1lIHRvIFpvbmUgOCB0aW1lLCB3ZSBjYW4gc3VidHJhY3QgMiwgcmF0aGVyIHRoYW4gYWRkIDgsIHRvIHRoZSBab25lIDAgdGltZSBpbiBkZWNpZGF5cy4gQWRkaW5nIHBvc2l0aXZlIG9mZnNldHMgd29ya3MgZm9yIGJvdGggdGltZXMgYW5kIGRhdGVzIHdpdGggdGltZXMgKGRhdGV0aW1lcyksIGJ1dCBhZGRpbmcgYSBuZWdhdGl2ZSBvZmZzZXQgdG8gYSBkYXRldGltZSB3aWxsIGdpdmUgdXMgdGhlIHByZXZpb3VzIGRhdGUgcmF0aGVyIHRoYW4gdGhlIGN1cnJlbnQgb25lLiBJbiBzaG9ydCwgd2UgaGF2ZSB0byBpbmNyZW1lbnQgYSBkYXRlIGlmIHdlIGFkZCBhIG5lZ2F0aXZlIGluZGV4IHRvIGl0LiBgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gbG9uZzJ0dXJuKGRlZ3JlZXMgPSAtMTgwLCBlID0gMykge1xuICAvLyB0dXJuczogZT0wLCBkZWNpdHVybnM6IGU9MSwgZXRjLlxuICByZXR1cm4gKCgoZGVncmVlcyAlPSAzNjApIDwgMCA/IGRlZ3JlZXMgKyAzNjAgOiBkZWdyZWVzKSArIDE4KSAvICgzNjAgLyAxMCoqZSkgJSAxMCoqZTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiBsb25nMnpvbmUoZGVncmVlcyA9IC0xODApIHtcbiAgcmV0dXJuIE1hdGguZmxvb3IobG9uZzJ0dXJuKGRlZ3JlZXMsIDEpKTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMjIERlZ3JlZXMgdG8gbWlsbGl0dXJucyBmcm9tIE1lcmlkaWFuIDBgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiT2JqZWN0LmZyb21FbnRyaWVzKFstMTgwLCAtOTAsIDAsIDksIDE4LCAzNiwgNDUsIDkwLCAxNjJdLm1hcCh4ID0+IFt4LCBsb25nMnR1cm4oeCwgMyldKSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyBDYWxjdWxhdGUgRGVjYWxlbmRhciBkYXRlcyBmcm9tIFVOSVggdGltZWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBUbyBvYnRhaW4gdGhlIGNvbXBvbmVudHMgb2YgYSBEZWMgdGltZXN0YW1wLCB3ZSBmaXJzdCBjYWxjdWxhdGUgdGhlIGRvdGUgZnJvbSBVTklYIHRpbWUsIGFzIGRlc2NyaWJlZCBhYm92ZS5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiem9uZTBkb3RlID0gdW5peCAvIDg2NDAwMDAwICsgNzE5NDY4IFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InpvbmUwZGVjbyA9IGRvdGUyZGVjbyh6b25lMGRvdGUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTI5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgVGhlIGRvdGUgYWxsb3dzIHVzIHRvIGNhbGN1bGF0ZSB0aGUgdGhlIHNvbGFyIGN5Y2xlIChzb2N5KSwgdGhlIGRheSBvZiB0aGUgY3ljbGUgKGRvdGMpLCBhbmQgdGhlIHllYXIgb2YgdGhlIGN5Y2xlICh5b3RjKS4gQSBzb2N5IGluIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIgaXMgWzQwMCB5ZWFyc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU29sYXJfY3ljbGVfJTI4Y2FsZW5kYXIlMjkjOn46dGV4dD00MDAlMkR5ZWFyJTIwY3ljbGUlMjBvZiUyMHRoZSUyMEdyZWdvcmlhbiUyMGNhbGVuZGFyKS5cblRoZSBzb2N5IGNhbGN1bGF0aW9ucyBiZWxvdyB3ZXJlIGRldmVsb3BlZCBieSBbSG93YXJkIEhpbm5hbnRdKGh0dHBzOi8vaG93YXJkaGlubmFudC5naXRodWIuaW8pLCB3aG8gdXNlcyB0aGUgdGVybSBbKmVyYSpdKGh0dHBzOi8vaG93YXJkaGlubmFudC5naXRodWIuaW8vZGF0ZV9hbGdvcml0aG1zLmh0bWwjOn46dGV4dD1lcmElMjBpcyUyMGElMjA0MDAlMjB5ZWFyJTIwcGVyaW9kKSB0byByZWZlciB0byBhIHNvbGFyIGN5Y2xlIGluIHRoZSBhc3NvY2lhdGVkIFtwdWJsaWNhdGlvbl0oaHR0cHM6Ly9ob3dhcmRoaW5uYW50LmdpdGh1Yi5pby9kYXRlX2FsZ29yaXRobXMuaHRtbCkgYW5kIFtDKysgbGlicmFyeV0oaHR0cHM6Ly9ob3dhcmRoaW5uYW50LmdpdGh1Yi5pby9kYXRlL2RhdGUuaHRtbCkuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyMgQ3ljbGVgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoic29jeSA9IE1hdGguZmxvb3Ioem9uZTBkb3RlIC8gMTQ2MDk3KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyMgRGF5IG9mIHRoZSBjeWNsZWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMzMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RjID0gem9uZTBkb3RlIC0gc29jeSAqIDE0NjA5N1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyMgWWVhciBvZiB0aGUgY3ljbGVgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTM1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoieW90YyA9IE1hdGguZmxvb3IoKGRvdGNcbiAgLSBNYXRoLmZsb29yKGRvdGMgLyAxNDYwKVxuICArIE1hdGguZmxvb3IoZG90YyAvIDM2NTI0KVxuICAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjA5NilcbikgLyAzNjUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTM2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgV2UgdGhlbiB1c2UgdGhlIHNvY3ksIGRvdGMsIGFuZCB5b3RjIHRvIGNhbGN1bGF0ZSBhIHllYXIgYW5kIGRheSBvZiB0aGUgeWVhciAoZG90eSkuIFRoZSBkb3R5IGlzIGJvdGggdGhlIGNhbGVuZGFyIGRhdGUgYW5kIHRoZSB0aW1lIG9mIGRheS4gSWYgd2UgZmxvb3IgYSBkb3R5LCBpdCBpcyBsaWtlIGFuIFthcnJheSBpbmRleF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQXJyYXlfJTI4ZGF0YV9zdHJ1Y3R1cmUlMjkjRWxlbWVudF9pZGVudGlmaWVyX2FuZF9hZGRyZXNzaW5nX2Zvcm11bGFzOn46dGV4dD1XaGVuJTIwZGF0YSUyMG9iamVjdHMlMjBhcmUlMjBzdG9yZWQlMjBpbiUyMGFuJTIwYXJyYXklMkMlMjBpbmRpdmlkdWFsJTIwb2JqZWN0cyUyMGFyZSUyMHNlbGVjdGVkJTIwYnklMjBhbiUyMGluZGV4KSB0aGF0IGNhbiB1bmVxdWl2b2NhbGx5IGlkZW50aWZ5IGFueSBtb250aCBhbmQgZGF5IG9mIHRoZSBtb250aCAoZG90bSkgaW4gdGhlIFtHcmVnb3JpYW4gY2FsZW5kYXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyZWdvcmlhbl9jYWxlbmRhciM6fjp0ZXh0PXRoZSUyMGNhbGVuZGFyJTIwdXNlZCUyMGluJTIwbW9zdCUyMHBhcnRzJTIwb2YlMjB0aGUlMjB3b3JsZCkgb3IgYW55IG9mIHRoZSBvdGhlciBjYWxlbmRhciBzeXN0ZW1zIGRpc2N1c3NlZCBiZWxvdy5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTM3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMjIyBZZWFyYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InllYXIgPSB5b3RjICsgc29jeSAqIDQwMFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InpvbmUwZGF0ZXRpbWUgPSBkb3RjIC0geW90YyAqIDM2NSAtIE1hdGguZmxvb3IoeW90YyAvIDQpICsgTWF0aC5mbG9vcih5b3RjIC8gMTAwKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00MCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyMgRGF5IG9mIHRoZSB5ZWFyYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InpvbmUwZG90eSA9IE1hdGguZmxvb3Ioem9uZTBkYXRldGltZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMjIEN1cnJlbnQgRGVjYWxlbmRhciBkYXRlYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImAke3llYXJ9KyR7em9uZTBkb3R5LnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpfWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiBkb3RlMmdyZWcoZG90ZSA9IDcxOTQ2OCkge1xuICBjb25zdCBzb2N5ID0gTWF0aC5mbG9vcigoZG90ZSA+PSAwID8gZG90ZSA6IGRvdGUgLSAxNDYwOTYpIC8gMTQ2MDk3KSwgZG90YyA9IGRvdGUgLSBzb2N5ICogMTQ2MDk3LFxuICAgICAgICB5b3RjID0gTWF0aC5mbG9vcigoZG90YyAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjApICsgTWF0aC5mbG9vcihkb3RjIC8gMzY1MjQpIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MDk2KSkgLyAzNjUpO1xuICByZXR1cm4gW3lvdGMgKyBzb2N5ICogNDAwLCBkb3RjICsgTWF0aC5mbG9vcih5b3RjIC8gMTAwKSAtIHlvdGMgKiAzNjUgLSBNYXRoLmZsb29yKHlvdGMgLyA0KV07XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQ2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJncmVnKC4uLnVuaXgyZG90ZSh1bml4KSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNDgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJncmVnRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMmdyZWcoLi4udW5peDJkb3RlKHVuaXgsIDApKSwgbnVsbCwgXCIwXCIsIHRydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQ5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90eTJkZWNvKC4uLmRvdGUyZ3JlZyguLi51bml4MmRvdGUodW5peCwgMCkpLCBudWxsLCBcIjBcIiwgdHJ1ZSwgdHJ1ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNTAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiBkb3R5MmRlY28oeWVhciA9IDE5NjksIGRvdHkgPSAzMDYsIHpvbmUgPSAwLCBsZWFkID0gXCIwXCIsIGVtb2ppID0gZmFsc2UsIG1pbnVzID0gZmFsc2UpIHtcbiAgcmV0dXJuIGRvdGUyZGVjbyhkb3R5MmRvdGUoeWVhciwgZG90eSksIHpvbmUsIGxlYWQsIGVtb2ppLCBtaW51cyk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTUxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gZG90ZTJkZWNvKGRvdGUgPSA3MTk0NjgsIHpvbmUgPSAwLCBsZWFkID0gXCIwXCIsIGVtb2ppID0gZmFsc2UsIG1pbnVzID0gZmFsc2UpIHtcbmxldCBbeWVhciwgZG90eV0gPSBkb3RlMmRvdHkoZG90ZSk7XG5yZXR1cm4gYCR7ZW1vamkgPyBcIvCfl5PvuI9cIiA6IFwiXCJ9JHtcbiAgICAoeWVhciArIG1pbnVzKS50b1N0cmluZygpLnBhZFN0YXJ0KDQsIGxlYWQpfSR7bWludXMgPyBcIi1cIiA6IFwiK1wifSR7XG4gICAgTWF0aC5hYnMoTWF0aC5mbG9vcihkb3R5ID0gZG90eSAtICgzNjUgKyB5ZWFyMmxlYXAoeWVhciArIDEpKSAqIE51bWJlcihtaW51cykpXG4gICAgKS50b1N0cmluZygpLnBhZFN0YXJ0KDMsIGxlYWQpfSR7ZW1vamkgPyBcIvCflbDvuI9cIiA6IFwiXCJ977iPJHtcbiAgICBNYXRoLmFicyhkb3R5ICUgMSAqIDEwKS50b0ZpeGVkKDQpfSR7em9uZSAhPSBudWxsID8gKG1pbnVzID8gXCIrXCIgOiBcIi1cIikgKyBTdHJpbmcoem9uZSkgOiBcIlwifWBcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJmdW5jdGlvbiB5ZWFyMmxlYXAoeWVhciA9IDE5NzApIHtcbiAgICByZXR1cm4geWVhciAlIDQgPT0gMCAmJiB5ZWFyICUgMTAwICE9IDAgfHwgeWVhciAlIDQwMCA9PSAwO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGdyZWcybGVhcCh5ZWFyID0gMTk3MCkge1xuICAgIHJldHVybiB5ZWFyICUgNCA9PSAwICYmIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTU0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gZG90ZTJkb3R5KGRheXMgPSA3MTk0NjgpIHtcbiAgICBjb25zdCBjeWtsID0gTWF0aC5mbG9vcigoZGF5cyA+PSAwID8gZGF5cyA6IGRheXMgLSAxNDYwOTYpIC8gMTQ2MDk3KSwgZG90YyA9IGRheXMgLSBjeWtsICogMTQ2MDk3LFxuICAgICAgICB5b3RjID0gTWF0aC5mbG9vcigoZG90YyAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjApICsgTWF0aC5mbG9vcihkb3RjIC8gMzY1MjQpIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MDk2KSkgLyAzNjUpO1xuICAgIHJldHVybiBbeW90YyArIGN5a2wgKiA0MDAsIGRvdGMgKyBNYXRoLmZsb29yKHlvdGMgLyAxMDApIC0geW90YyAqIDM2NSAtIE1hdGguZmxvb3IoeW90YyAvIDQpXTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyBDb252ZXJ0IGEgRGVjYWxlbmRhciBkYXRlIHRvIGFuIElTTyBjYWxlbmRhciBkYXRlYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01NiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vbnRoX2luZGV4ID0gTWF0aC5mbG9vcigoNSAqIHpvbmUwZG90eSArIDIpIC8gMTUzKTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNTciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtb250aF9kYXkgPSBbXG4gIE1hdGguZmxvb3IobW9udGhfaW5kZXggPCAxMCA/IG1vbnRoX2luZGV4ICsgMyA6IG1vbnRoX2luZGV4IC0gOSksXG4gIE1hdGguZmxvb3Ioem9uZTBkb3R5IC0gKDE1MyAqIG1vbnRoX2luZGV4ICsgMikgLyA1ICsgMilcbl07XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTU4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYCR7XG4gIHllYXIgKyAoem9uZTBkb3R5ID4gMzA1KX0tJHtcbiAgbW9udGhfZGF5WzBdLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgXCIwXCIpfS0ke1xuICBtb250aF9kYXlbMV0udG9TdHJpbmcoKS5wYWRTdGFydCgyLCBcIjBcIilcbn1gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTU5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMgQ29udmVydCBhIHllYXIgYW5kIGEgbW9udGggdG8gYSBEZWNhbGVuZGFyIGRhdGVgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYCR7XG4gIG5ldyBEYXRlKCkuZ2V0VVRDRnVsbFllYXIoKSAtIChtb250aF9kYXlbMF0gPCAzKX0rJHtcbiAgU3RyaW5nKE1hdGguZmxvb3IoKDE1MyAqIChcbiAgICBtb250aF9kYXlbMF0gPiAyID8gbW9udGhfZGF5WzBdIC0gMyA6IG1vbnRoX2RheVswXSArIDlcbiAgKSArIDIpIC8gNSkgKyBtb250aF9kYXlbMV0gLSAxKS5wYWRTdGFydCgzLCBcIjBcIil9YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC02MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIFNvbGFyIEhpamlyaSBjYWxlbmRhcmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBEZWMgZm9jdXNlcyBvbiB0aGUgR3JlZ29yaWFuIGNhbGVuZGFyLCBiZWNhdXNlIGl0IGlzIGJ5IGZhciB0aGUgbW9zdCB3aWRlbHkgdXNlZCBjYWxlbmRhciBzeXN0ZW0uIE90aGVyIHRoYW4gaXRzIHViaXF1aXR5LCBhbm90aGVyIG1ham9yIHN0cmVuZ3RoIG9mIHRoZSBHcmVnb3JpYW4gY2FsZW5kZXIgaXMgYW4gaW50ZXJjYWxhdGlvbiBzeXN0ZW0gdGhhdCBpcyBlYXN5IHRvIHVuZGVyc3RhbmQgYW5kIHF1aXRlIGFjY3VyYXRlLiBUaGUgR3JlZ29yaWFuIGNhbGVuZGFyIGxlYXAgeWVhcnMgYXJlIGFsd2F5cyBkaXZpc2libGUgYnkgNCwgYW5kIHRodXMgYXJlIGFsd2F5cyBldmVuIG51bWJlcnMsIGUuZy4gMjAwMCwgMjAwNCwgMjAwOCwgMjAxMiwgMjAxNiwgMjAyMCwgMjAyNCwgMjAyOCwgMjAzMiwgMjAzNiwgMjA0MCwgMjA0NCwgYW5kIDIwNDgsIGFuZCBhcmUgZ3JvdXBlZCBpbnRvIGN5Y2xlcyBvZiA0MDAgeWVhcnMuXG5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTYzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgSW4gY29udHJhc3QsIHRoZSBTb2xhciBIaWppcmkgY2FsZW5kYXIgaXMgW+KAnG9ubHkgaW4gb2ZmaWNpYWwgdXNlIGluIElyYW7igJ1dKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1NvbGFyX0hpanJpX2NhbGVuZGFyIzp+OnRleHQ9c29sYXIlMjBoaWpyaSUyMGNhbGVuZGFyJTIwaXRzZWxmJTIwcmVtYWlucyUyMG9ubHklMjBpbiUyMG9mZmljaWFsJTIwdXNlJTIwaW4lMjBpcmFuKSBhbmQgaXRzIFszMy15ZWFyIGN5Y2xlXShodHRwOi8vYXJhbWlzLm9ic3BtLmZyL35oZXlkYXJpL2RpdmVycy9pci1jYWwtZW5nLmh0bWwjOn46dGV4dD0lMjB0aGUlMjBmaXJzdCUyMGxlYXAlMjB5ZWFyJTIwb2YlMjB0aGUlMjAzMyUyRHllYXIlMjBjeWNsZSUyMGlzJTIwcXVpbnF1ZW5uaWFsJTIwYW5kJTIwdGhlJTIwc2V2ZW4lMjBvdGhlcnMlMjBxdWFkcmVubmlhbCkgaW50ZXJjYWxhdGlvbiBzeXN0ZW0gZG9lcyBub3QgeWllbGQgaW5zdGFudGx5IHJlY29nbml6YWJsZSBsZWFwIHllYXJzLiBXaXRoaW4gYW55IGN5Y2xlLCBTb2xhciBIaWppcmkgbGVhcCB5ZWFycyB3aWxsIGJlIGVpdGhlciBhbGwgZXZlbiBvciBhbGwgb2RkLCBidXQgdGhpcyBwYXR0ZXJuIGZsaXBzIHdpdGggZXZlcnkgY3ljbGUuIFNpbWlsYXJseSwgMzMteWVhciBjeWNsZXMgYXJlIGhhcmQgdG8gcmVjb2duaXplIGluc3RhbnRseSBiZWNhdXNlIHRoZSBzdGFydCBhbmQgZW5kIHllYXJzIGFsc28gZmxpcCBiYWNrIGFuZCBmb3J0aCBiZXR3ZWVuIGV2ZW50IGFuZCBvZGQgZXZlcnkgY3ljbGUsIDAgdG8gMzIsIDMzIHRvIDY1LCA2NiB0byA5OCwgZXRjLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBPbiB0aGUgb3RoZXIgaGFuZCwgdGhlIFNvbGFyIEhpamlyaSBjYWxlbmRhciBpcyBtdWNoIG1vcmUgYWNjdXJhdGUuIEEgbW9yZSBhY2N1cmF0ZSBpbnRlcmNhbGF0aW9uIHN5c3RlbSBtZWFucyB0aGF0IHRoZSBjYWxlbmRhciBjYW4gYmUgdXNlZCBmb3IgbG9uZ2VyIGJlZm9yZSBhZGRpdGlvbmFsIGludGVyY2FsYXRpb24gcnVsZXMgaGF2ZSB0byBiZSBjcmVhdGVkLiBUaGUgU29sYXIgSGlqaXJpIGNhbGVuZGFyIGFsc28gYXZvaWRzIHRoZSB0d28gbWFqb3IgZmxhd3Mgb2YgdGhlIEdyZWdvcmlhbiBjYWxlbmRhcjogMS4gTGVhcCBEYXkgaXMgbm90IGF0IHRoZSBlbmQgb2YgdGhlIHllYXIgYW5kIDIuIE5ldyBZZWFyIERheSBpcyBhbiBhcmJpdHJhcnkgZGF5IHRoYXQgaXMgbm90IGNvbm5lY3RlZCB0byBhbnkgc2Vhc29uYWwgZXZlbnQgbGlrZSBhIFtzb2xzdGljZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU29sc3RpY2UjOn46dGV4dD10aGUlMjB0aW1lJTIwd2hlbiUyMHRoZSUyMHN1biUyMHJlYWNoZXMlMjBpdHMlMjBtb3N0JTIwbm9ydGhlcmx5JTIwb3IlMjBzb3V0aGVybHklMjBleGN1cnNpb24lMjByZWxhdGl2ZSUyMHRvJTIwdGhlJTIwY2VsZXN0aWFsJTIwZXF1YXRvcikgb3IgW2VxdWlub3hdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0VxdWlub3gjOn46dGV4dD1hJTIwbW9tZW50JTIwaW4lMjB0aW1lJTIwd2hlbiUyMHRoZSUyMHN1biUyMGNyb3NzZXMlMjB0aGUlMjBlYXJ0aCdzJTIwZXF1YXRvcikuIEluIHRoZSBTb2xhciBIaWppcmkgY2FsZW5kYXIsIExlYXAgRGF5IGlzIGF0IFt0aGUgZW5kIG9mIHRoZSB5ZWFyXShodHRwczovL2lyYW4tdGltZXMuY29tL3BlcnNpYW4tY2FsZW5kYXItc2tpcHMtbGVhcC1kYXktdGhpcy15ZWFyLXNvLXlvdXItYmlydGhkYXktY29tZXMtYS1kYXktZWFybHktdGhlLW5leHQtMTItbW9udGhzLyM6fjp0ZXh0PWlyYW5pYW5zJTIwYWRkZWQlMjB0aGVpciUyMGxlYXAlMjBkYXklMjB0aHJlZSUyMHdlZWtzJTIwbGF0ZXIlMjBhdCUyMHRoZSUyMGVuZCUyMG9mJTIwdGhlJTIwbW9udGglMjBvZiUyMGVzZmFuZCkgKDEpIGFuZCBOZXcgWWVhciBEYXkgaXMgdGhlIFtOb3J0aHdhcmQgRXF1aW5veF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWFyY2hfZXF1aW5veCM6fjp0ZXh0PXRoZSUyMGVxdWlub3glMjBvbiUyMHRoZSUyMGVhcnRoJTIwd2hlbiUyMHRoZSUyMHN1YnNvbGFyJTIwcG9pbnQlMjBhcHBlYXJzJTIwdG8lMjBsZWF2ZSUyMHRoZSUyMHNvdXRoZXJuJTIwaGVtaXNwaGVyZSUyMGFuZCUyMGNyb3NzJTIwdGhlJTIwY2VsZXN0aWFsJTIwZXF1YXRvcikgKDIpLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBEZWNhbGVuZGFyIGFkZHJlc3NlcyB0aGUgdHdvIG1ham9yIGZsYXdzIG9mIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIgYnkgbW92aW5nIHRoZSBzdGFydCBvZiB0aGUgeWVhciB0byBNYXJjaCAxLiBXaGVuIExlYXAgRGF5IGlzIHRoZSBsYXN0IGRheSBvZiB0aGUgeWVhciwgdGhlIGRheSBudW1iZXJzIChpbmRleGVzKSB1c2VkIGJ5IERlY2FsZW5kYXIgcmVtYWluIGNvbnN0YW50IHllYXIgdG8geWVhci4gU3RhcnRpbmcgdGhlIHllYXIgb24gTWFyY2ggMSBhbHNvIGJyaW5ncyBEZWNhbGVuZGFyIGluIGFsaWdubWVudCB3aXRoIHRoZSBbbWV0ZXJlb2xvZ2ljYWwgc2Vhc29uc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2Vhc29uIzp+OnRleHQ9bWV0ZW9yb2xvZ2ljYWwlMjBzZWFzb25zJTIwYXJlJTIwcmVja29uZWQlMjBieSUyMHRlbXBlcmF0dXJlJTJDJTIwd2l0aCUyMHN1bW1lciUyMGJlaW5nJTIwdGhlJTIwaG90dGVzdCUyMHF1YXJ0ZXIlMjBvZiUyMHRoZSUyMHllYXIlMjBhbmQlMjB3aW50ZXIlMjB0aGUlMjBjb2xkZXN0JTIwcXVhcnRlciUyMG9mJTIwdGhlJTIweWVhcikuIEluIGNvbnRyYXN0LCB0aGUgU29sYXIgSGlqaXJpIGNhbGVuZGFyIHN0YXJ0cyBpdHMgeWVhciBvbiB0aGUgTm9ydGh3YXJkIEVxdWlub3ggYW5kIGlzIGRlc2lnbmVkIHRvIG1hdGNoIHRoZSBbTm9ydGh3YXJkIEVxdWlub3ggeWVhcl0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJvcGljYWxfeWVhciM6fjp0ZXh0PWJldHdlZW4lMjB0d28lMjBtYXJjaCUyMGVxdWlub3hlcykgcmF0aGVyIHRoYW4gdGhlIFttZWFuIHRyb3BpY2FsIHllYXJdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1Ryb3BpY2FsX3llYXIjOn46dGV4dD0zNjUuMjQyNzQwLSxtZWFuJTIwdHJvcGljYWwlMjB5ZWFyKSwgYW5kIHRodXMgbW9yZSBjbG9zZWx5IG1hdGNoZXMgdGhlIFthc3Ryb25vbWljYWwgc2Vhc29uc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvU2Vhc29uI0FzdHJvbm9taWNhbCkuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC02NiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFRoZSBOb3J0aHdhcmQgZXF1aW5veCBpbiBZZWFyIDYyMSB3YXMgb24gRGF5IDE5IGF0IERvdCA5MDQ4NiBpbiBab25lIDAgKDA2MjErMDE5OS4wNDg2LTAsIDA2MjEtMDMtMjBUMjE6NDMrMDA6MDAsIE1hcmNoIDIwIDYyMSBDRSBhdCA5OjQzIFBNKSBhY2NvcmRpbmcgdG8gW2RhdGEuZ2lzcy5uYXNhLmdvdl0oaHR0cHM6Ly9kYXRhLmdpc3MubmFzYS5nb3YvbW9kZWxFL2FyNXBsb3RzL3NydmVybmFsLmh0bWwpLiBJbiBab25lIDUsIHRoZSBTSCBlcG9jaCBkZWNvIGlzIDA2MjErMDIwMC4wNDg2LTUuXG5UaGUgU0ggZXBvY2hhbCBkb3RlIGlzIHRoZXJlZm9yZSAyMjY4MzUuIFRoZSBVTklYIGVwb2NoYWwgZG90ZSBpcyA3MTk0NjguXG5UaGUgbnVtYmVyIG9mIGRheXMgdGhhdCBuZWVkIHRvIGJlIGFkZGVkIHRvIFVOSVggdGltZSB0byBtb3JlIHRoZSBlcG9jaCBmcm9tIFllYXIgMTk2OSBEYXkgMzA2IHRvIFllYXIgNjIyIERheSAyMCBpcyB0aGVyZWZvcmUgNDkyNjMzLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJzb2hpRXBvY2ggPSBkb3R5MmRvdGUoNjIxLCAyMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBbVGhlIG1vZGVybiBub3J0aHdhcmQgZXF1aW5veCB5ZWFyIGxlbmd0aF0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVHJvcGljYWxfeWVhciM6fjp0ZXh0PTM2NS4yNDIxMzclMjBkYXlzLSwzNjUuMjQyMzc0JTIwZGF5cywtQmV0d2VlbiUyMHR3byUyMEp1bmUpIGlzIDM2NS4yNDIzNzQuIFRoZSBlcnJvciB3aXRoIHRoZSAzMy15ZWFyIGN5Y2xlIGlzICR7KCgzNjUrOC8zMyktMzY1LjI0MjM3NCkqMWU2fSBtaWNyb2RheXMgKG1pbGxpb250aHMgb2YgYSBzb2wpIHBlciB5ZWFyLCB3aGljaCBpcyBtdWNoIGJldHRlciB0aGFuIHRoZSBHcmVnb3JpYW4gY2FsZW5kYXIgeWVhcmx5IGVycm9yIG9mICR7KDM2NS4yNDI1LTM2NS4yNDIzNzQpKjFlNn0gbWljcm9kYXlzLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNjkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiI3MTk0NjggLSAyMjY4MzVcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNzAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMmdyZWcoMjI2ODM1LCA0KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC03MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InpvbmUwZG90ZVNIID0gdW5peCAvIDg2NDAwMDAwICsgNDkyNjMzXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTcyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgVGhlIFNvbGFyIEhpamlyaSBjYWxlbmRhciBoYXMgMzMteWVhciBjeWNsZXMgd2l0aCA4IGxlYXAgeWVhcnMgYW5kIDI1IGNvbW1vbiB5ZWFycy4gVGhlIHRvdGFsIG51bWJlciBvZiBkYXlzIGluIGEgY3ljbGUgaXMgMzMgKiAzNjUgKyA4ID0gMTIwNTMuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC03MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IjMzICogMzY1ICsgOFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC03NCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InNvY3lTSCA9IE1hdGguZmxvb3Ioem9uZTBkb3RlU0ggLyAxMjA1MylcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNzUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RjU0ggPSB6b25lMGRvdGVTSCAtIHNvY3lTSCAqIDEyMDUzXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTc2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoieW90Y1NIID0gTWF0aC5mbG9vcigoZG90Y1NIIC0gTWF0aC5mbG9vcihkb3RjU0ggLyAxNDYwKSkgLyAzNjUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTc3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoieWVhclNIID0geW90Y1NIICsgc29jeVNIICogMzNcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNzgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ6b25lMGRhdGV0aW1lU0ggPSBkb3RjU0ggLSB5b3RjU0ggKiAzNjUgLSBNYXRoLmZsb29yKHlvdGNTSCAvIDQpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTc5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiem9uZTBkb3R5U0ggPSB+fnpvbmUwZGF0ZXRpbWVTSFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04MCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InpvbmUwdGltZVNIID0gem9uZTBkYXRldGltZVNIICUgMVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IjcxOTQ2OCAtIDIyNjgzNVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC04MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGRvdGUyc29oaShkb3RlID0gNDkyNjMzKSB7XG4gIGNvbnN0IHNvY3kgPSBNYXRoLmZsb29yKChkb3RlID49IDAgPyBkb3RlIDogZG90ZSAtIDEyMDUyKSAvIDEyMDUzKSxcbiAgZG90YyA9IGRvdGUgLSBzb2N5ICogMTIwNTMsIHlvdGMgPSBNYXRoLmZsb29yKChkb3RjIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MSkpIC8gMzY1KVxuICByZXR1cm4gW3lvdGMgKyBzb2N5ICogMzMsIGRvdGMgLSAoeW90YyAqIDM2NSArIE1hdGgudHJ1bmMoKHlvdGMgLSAxKSAvIDQpKV1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtODQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJzb0hpRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMnNvaGkodW5peCAvIDg2NDAwMDAwICsgNDkyNjMzKSwgbnVsbCwgXCIwXCIsIHRydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTg1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJzb2hpKHVuaXggLyA4NjQwMDAwMCArIDQ5MjYzMylcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtODYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAtIFNvbGFyIEhpamlyaSBOZXcgWWVhciBFeGFtcGxlOlxuICAtIEdyZWdvcmlhbiBEZWNhbGVuZGFyOlxuICAgIC0geWVhcjogMjAyNFxuICAgIC0gZG90eTogMDE5XG4gICAgLSBkb3RlOiA3MzkyNzBcbiAgLSBTb2xhciBIaWppcmkgRGVjYWxlbmRhcjpcbiAgICAtIHllYXI6IDE0MDNcbiAgICAtIGRvdHk6IDBcbiAgICAtIGRvdGU6IDUxMjQzNWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtODciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3R5MmRvdGUoMjAyNCwgMTkpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTg4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJzb2hpKDUxMjQzNSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtODkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMnNvaGkoNDkyNjMzKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05MCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRvdGUyZ3JlZyg1MTI0MzUgKyAyMjY4MzUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTkxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiNzE5NDY4IC0gNDkyNjMzXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTkyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMgTHVuYXIgSGlqaXJpIGNhbGVuZGFyXG5UaGUgbWFpbiBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIEx1bmFyIEhpamlyaSBhbmQgb3RoZXIgRGVjYWxlbmRhcnMgaXMgaXRzIHllYXIgbGVuZ3RoLCAzNTQgb3IgMzU1IGRheXMsIHdoaWNoIGNvbWVzIGZyb20gZm9sbG93aW5nIHRoZSBNb29uIGluc3RlYWQgb2YgdGhlIFN1bi4gVGhlIEx1bmFyIGFuZCBTb2xhciBIaWppcmkgY2FsZW5kYXJzIHNob3VsZCBoYXZlIHRoZSBzYW1lIGVwb2NoLCBidXQgdGhlcmUgaXMgYSBkaWZmZXJlbmNlIG9mIDQ4NSBkYXlzIGluIHRoZSB2YWx1ZXMgbmVlZGVkIHRvIG1ha2UgdGhlIG91dHB1dCBtYXRjaCBleHBlY3RhdGlvbnMuIFRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIFVOSVggZXBvY2ggYW5kIHRoZSBTb2xhciBIaWppcmkgY2FsZW5kYXIgZXBvY2ggaXMgNzE5NDY4IC0gMjI2ODM1ID0gNDkyNjMzLCB3aGlsZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBVTklYIGVwb2NoIGFuZCB0aGUgTHVuYXIgSGlqaXJpIGVwb2NoIGlzIDcxOTQ2OCAtIDIyNzMyMCA9IDQ5MjE0OC4gVGhlIEx1bmFyIEhpamlyaSBjYWxlbmRhciBjeWNsZSBpcyAzMCB5ZWFycyBsb25nIGFuZCBjb25zaXN0cyBvZiAxOSBjb21tb24geWVhcnMgYW5kIDExIGxlYXAgeWVhcnMuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC05MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGRvdGUybHVoaShkb3RlID0gNDkyMTQ4KSB7XG4gIGNvbnN0IHNvY3kgPSBNYXRoLmZsb29yKChkb3RlID49IDAgPyBkb3RlIDogZG90ZSAtIDEwNjMwKSAvIDEwNjMxKSxcbiAgZG90YyA9IGRvdGUgLSBzb2N5ICogMTA2MzEsIHlvdGMgPSBNYXRoLmZsb29yKCgzMCAqIGRvdGMgKyAxMDY0NikgLyAxMDYzMSkgLSAxXG4gIHJldHVybiBbeW90YyArIHNvY3kgKiAzMCArIDEsIGRvdGMgLSAoeW90YyAqIDM1NCArIE1hdGguZmxvb3IoKDExICogKHlvdGMgKyAxKSArIDMpIC8gMzApKV1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJsdUhpRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMmx1aGkodW5peCAvIDg2NDAwMDAwICsgNDkyMTQ4KSwgbnVsbCwgXCIwXCIsIHRydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTk1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJsdWhpKHVuaXggLyA4NjQwMDAwMCArIDQ5MjE0OClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJsdWhpRXBvY2ggPSBkb3R5MmRvdGUoNjIyLCAxNDApXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTk3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJkb3R5KDIyNzMyMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOTgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAtIEx1bmFyIEhpamlyaSBOZXcgWWVhciBFeGFtcGxlOlxuICAtIEdyZWdvcmlhbiBEZWNhbGVuZGFyOlxuICAgIC0geWVhcjogMjAyM1xuICAgIC0gZG90eTogMTQwXG4gICAgLSBkb3RlOiA3MzkwMjVcbiAgLSBMdW5hciBIaWppcmkgRGVjYWxlbmRhcjpcbiAgICAtIHllYXI6IDE0NDVcbiAgICAtIGRvdHk6IDBcbiAgICAtIGRvdGU6IDUxMTcwNWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtOTkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3R5MmRvdGUoMjAyMywgMTQwKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3R5MmRvdGUoMjAyMywgMTQwKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMmx1aGkoNTExNzA1KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMmx1aGkoNzM5MDI1IC0gMjI3MzIwKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiI3MzkwMjUgLSAyMjczMjBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTA0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90ZTJncmVnKDUxMTcwNSArIDIyNzMyMClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTA2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiYmVuZ0Vwb2NoID0gZG90eTJkb3RlKDU5MywgNDQpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEwNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImJlbmdEZWNvID0gZG90eTJkZWNvKC4uLmRvdGUyZ3JlZyguLi51bml4MmRvdGUodW5peCwgMCwgdW5peEVwb2NoIC0gYmVuZ0Vwb2NoKSksIG51bGwsIFwiMFwiLCB0cnVlKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbmRpRXBvY2ggPSBkb3R5MmRvdGUoNzgsIDIwKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMDkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbmRpRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMmdyZWcoLi4udW5peDJkb3RlKHVuaXgsIDAsIHVuaXhFcG9jaCAtIGluZGlFcG9jaCkpLCBudWxsLCBcIjBcIiwgdHJ1ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTEwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidGhhaUVwb2NoID0gZG90eTJkb3RlKC01NDMsIDE5KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMTEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ0aGFpRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMmdyZWcoLi4udW5peDJkb3RlKHVuaXgsIDAsIHVuaXhFcG9jaCAtIHRoYWlFcG9jaCkpLCBudWxsLCBcIjBcIiwgdHJ1ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTEyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWluZ0Vwb2NoID0gZG90eTJkb3RlKDE5MTAsIDMwNilcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTEzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWluZ0RlY28gPSBkb3R5MmRlY28oLi4uZG90ZTJncmVnKC4uLnVuaXgyZG90ZSh1bml4LCAwLCB1bml4RXBvY2ggLSBtaW5nRXBvY2gpKSwgbnVsbCwgXCIwXCIsIHRydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTExNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im5lcGFFcG9jaCA9IGRvdHkyZG90ZSgtNTcsIDQ0KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJuZXBhRGVjbyA9IGRvdHkyZGVjbyguLi5kb3RlMmdyZWcoLi4udW5peDJkb3RlKHVuaXgsIDAsIHVuaXhFcG9jaCAtIG5lcGFFcG9jaCkpLCBudWxsLCBcIjBcIiwgdHJ1ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTE2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiamFwYUVwb2NoID0gZG90eTJkb3RlKDIwMTgsIDMwNilcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTE3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiamFwYURlY28gPSBkb3R5MmRlY28oLi4uZG90ZTJncmVnKC4uLnVuaXgyZG90ZSh1bml4LCAwLCB1bml4RXBvY2ggLSBqYXBhRXBvY2gpKSwgbnVsbCwgXCIwXCIsIHRydWUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTExOCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIEp1bGlhbiBjYWxlbmRhcmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTE5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gZG90ZTJqdWxpKGRheXMpIHtcbiAgY29uc3Qgc29jeSA9IE1hdGguZmxvb3IoKGRheXMgPj0gMCA/IGRheXMgOiBkYXlzIC0gMTQ2MCkgLyAxNDYxKTtcbiAgY29uc3QgZG90YyA9IGRheXMgLSBzb2N5ICogMTQ2MTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWzAsIDE0NjBdXG4gIGNvbnN0IHlvdGMgPSBNYXRoLmZsb29yKChkb3RjIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MCkpIC8gMzY1KTsgIC8vIFswLCAzXVxuICBjb25zdCB5ZWFyID0geW90YyArIHNvY3kgKiA0O1xuICBjb25zdCBkb3R5ID0gZG90YyAtIDM2NSAqIHlvdGM7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBbMCwgMzY1XVxuICByZXR1cm4gW3llYXIsIGRvdHldXG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRvdGUyanVsaSh1bml4IC8gODY0MDAwMDAgKyA3MTk0NzApXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFRoZSBbRXRoaW9waWFuIGNhbGVuZGFyXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdGhpb3BpYW5fY2FsZW5kYXIjOn46dGV4dD10aGUlMjBvZmZpY2lhbCUyMHN0YXRlJTIwY2l2aWwlMjBjYWxlbmRhciUyMG9mJTIwRXRoaW9waWEpIGZvbGxvd3MgdGhlIHNhbWUgcnVsZXMgYXMgdGhlIEp1bGlhbiBjYWxlbmRhciwgYnV0IGhhdmUgYSBkaWZmZXJlbnQgW2Vwb2NoXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FdGhpb3BpYW5fY2FsZW5kYXIjOn46dGV4dD1tb250aHMlMjBlYXJsaWVyJTIwb24tLDI5JTIwQXVndXN0JTIwQUQlMjA4LC0uJTIwTWVhbndoaWxlJTJDJTIwRXVyb3BlYW5zJTIwZXZlbnR1YWxseSkuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMjIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJldGhpRXBvY2ggPSBkb3R5MmRvdGUoNywgMTgxKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMjMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMmp1bGkoMjczNylcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTI0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZXRoaURlY28gPSBkb3R5MmRlY28oLi4uZG90ZTJqdWxpKHVuaXggLyA4NjQwMDAwMCArIDcxOTQ3MCAtIDI3MzcpLCBudWxsLCBcIjBcIiwgdHJ1ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTI1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMgSnVsaWFuIGRhdGVgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYEFkZCAxNzIxMTE5LjUgKDI0NDA1ODcuNSAtIDcxOTQ2OCkgdG8gdGhlIGRvdGUgdG8gZ2V0IFtVbml2ZXJzYWwgVGltZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVW5pdmVyc2FsX1RpbWUjOn46dGV4dD1hJTIwdGltZSUyMHN0YW5kYXJkJTIwYmFzZWQlMjBvbiUyMEVhcnRoJTI3cyUyMHJvdGF0aW9uKSAoVVQpIFtKdWxpYW4gRGF0ZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSnVsaWFuX2RheSM6fjp0ZXh0PWFueSUyMGluc3RhbnQlMjBpcyUyMHRoZSUyMEp1bGlhbiUyMGRheSUyMG51bWJlciUyMHBsdXMlMjB0aGUlMjBmcmFjdGlvbiUyMG9mJTIwYSUyMGRheSUyMHNpbmNlJTIwdGhlJTIwcHJlY2VkaW5nJTIwbm9vbiUyMGluJTIwVW5pdmVyc2FsJTIwVGltZSkgKEpEKS5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IjI0NDA1ODcuNSAtIDcxOTQ2OFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJKRHV0ID0gem9uZTBkb3RlICsgMTcyMTExOS41XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEyOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFN1YnRyYWN0IDE3MjExMTkuNSAoMjQ0MDU4Ny41IC0gNzE5NDY4KSBmcm9tIHRoZSBVVCBKRCB0byBnZXQgdGhlIGRvdGVgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IkpEdXQgLSAxNzIxMTE5LjVcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTMxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgQWRkIDY5LjE4NCBzZWNvbmRzIHRvIFVOSVggdGltZSwgZGl2aWRlIGJ5IDg2NDAwIHNlY29uZHMsIGFuZCBhZGQgMjQ0MDU4Ny41IGRheXMgdG8gZ2V0IFRlcnJlc3RyaWFsIFRpbWUgKFRUKSBKRC5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IkpEdHQgPSAodW5peCArIDY5MTg0KSAvIDg2NDAwMDAwICsgMjQ0MDU4Ny41XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIE1hcnNgXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzNCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYEFkYXB0aW5nIERlY2FsZW5kYXIgdG8gbWVhc3VyZSB0aW1lIG9uIE1hcnMgY2FuIGlsbHVzdHJhdGUgaG93IERlY2FsZW5kYXIgd29ya3MuIFdlIHdhbnQgdGhlIE1hcnRpYW4gRGVjYWxlbmRhciB0aW1lIHRvIG1hdGNoIHRoZSBbTWFydGlhbiBTb2wgRGF0ZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGltZWtlZXBpbmdfb25fTWFycyNNYXJzX1NvbF9EYXRlKS4gU29sIGlzIHRoZSB3b3JkIGZvciBhIFtNYXJ0aWFuIHNvbGFyIGRheV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTWFyc19zb2wpLiBUaGUgTWFydGlhbiBTb2wgRGF0ZSBpcyBbY2FsY3VsYXRlZCBmcm9tIHRoZSBKdWxpYW4gRGF0ZV0oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGltZWtlZXBpbmdfb25fTWFycyNGb3JtdWxhc190b19jb21wdXRlX01TRF9hbmRfTVRDKS5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyBNYXJ0aWFuIFNvbCBEYXRlYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMzYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAke1xudGV4YFxuTVNEID0gKEpEVFQg4oiSIDI0NTE1NDkuNSkgLyAxLjAyNzQ5MTI1MTcgKyA0NDc5Ni4wIOKIkiAwLjAwMDk2MjZcblxcXFxcbk1TRCA9IChKRFRUIOKIkiAyNDUxNTQ5LjUgKyAoNDQ3OTYuMCAtIDAuMDAwOTYyNikgKiAxLjAyNzQ5MTI1MTcpIC8gMS4wMjc0OTEyNTE3ICsgNDQ3OTYuMCDiiJIgMC4wMDA5NjI2XG5cXFxcXG5NU0QgPSAoSkRUVCDiiJIgMjQwNTUyMi4wMDI4Nzc5MDk3KSAvIDEuMDI3NDkxMjUxN1xuYH1gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTEzNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IjI0NTE1NDkuNSAtICg0NDc5Ni4wIC0gMC4wMDA5NjI2KSAqIDEuMDI3NDkxMjUxN1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xMzgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtc2QgPSAoSkR0dCAtIDI0MDU1MjIuMDAyODc3OTA5NykgLyAxLjAyNzQ5MTI1MTdcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTM5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMjIFNvbCBvZiB0aGUgZXJhXG5UaGUgTWFycyBTb2wgRGF0ZSBhbmQgaXMgc2ltaWxhciB0byBKdWxpYW4gRGF0ZSBpbiB0aGF0IHdlIGhhdmUgdG8gYWRqdXN0IHRoZWlyIHJlc3BlY3RpdmUgZXBvY2hzIHRvIGNhbGN1bGF0ZSBkYXRlcy4gVG8gY2FsY3VsYXRlIHRoZSBFYXJ0aCB5ZWFyIGFuZCBkYXkgb2YgdGhlIHllYXIgKGRvdHkpIGZyb20gdGhlIEp1bGlhbiBEYXRlLCB3ZSBmaXJzdCBoYXZlIHRvIHN1YnRyYWN0IDE3MjExMTkuNSBmcm9tIHRoZSBKdWxpYW4gRGF0ZSB0byBnZXQgdGhlIGRheSBvZiB0aGUgZXJhIChkb3RlKS4gU2ltaWxhcmx5LCB0byBjYWxjdWxhdGUgdGhlIE1hcnMgeWVhciBhbmQgc29sIG9mIHRoZSB5ZWFyIChzb3R5KSBmcm9tIHRoZSBNYXJzIFNvbCBEYXRlLCB3ZSBmaXJzdCBoYXZlIHRvIHN1YnRyYWN0IDI4MjI0IGZyb20gdGhlIE1hcnRpYW4gU29sIERhdGUgdG8gZ2V0IHRoZSBzb2wgb2YgdGhlIGVyYSAoc290ZSkuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNDAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtc2QgLSAyODIyNCBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTQyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiKHVuaXggLyA4NjQwMDAwMCArIDYwNjUuNTg0ODM0ODUpIC8gMS4wMjc0OTEyNTE3XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYExpa2V3aXNlLCB0byBjYWxjdWxhdGUgdGhlIHNvdGUgZnJvbSB0aGUgZG90ZSwgd2UgZmlyc3QgaGF2ZSB0byBzaGlmdCB0aGUgRGVjYWxlbmRhciBlcG9jaCAoMDAwMCswMDAwLjAwMDAtNCkgdG8gdGhlIE1hcnMgRXBvY2ggKDE5NTMrMDg0NC4xNTE2NTE1LTQpIGJ5IHN1YnRyYWN0aW5nIDcxMzQwMi40MTUxNjUxNSBkYXlzIGZyb20gdGhlIGRvdGUgYW5kIGRpdmlkaW5nIGJ5IDEuMDI3NDkxMjUxNyB0byBjb252ZXJ0IGRheXMgdG8gc29scy5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0NCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InNvdGUgPSAoem9uZTBkb3RlIC0gNzEzNDAyLjQxNTE2NTE1KSAvIDEuMDI3NDkxMjUxN1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNDUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMgTWFycyBlcG9jaGBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTQ2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWFyc0Vwb2NoRG90ZSA9IDcxOTQ2OCAtIDYwNjUuNTg0ODM0ODVcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTQ3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWFyc0Vwb2NoSkQgPSBtYXJzRXBvY2hEb3RlICsgMTcyMTExOS41XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE0OCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1hcnNFcG9jaERvdHkgPSBkb3RlMmdyZWcobWFyc0Vwb2NoRG90ZSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTUwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiKHNvdGUgLSBtc2QpICUgMSAqIDFlMThcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTUxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgVGhlIE1hcnMgZXBvY2ggaXMgYWxzbyB0aGUgYmVnaW5uaW5nIG9mIHRoZSBOb3J0aHdhcmQgU3ByaW5nIEVxdWlub3ggKFtTb2xhciBsb25naXR1ZGUgKExzKSA9IDBdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RpbWVrZWVwaW5nX29uX01hcnMjRGVmaW5pdGlvbl9vZl95ZWFyX2FuZF9zZWFzb25zKSkgaW4gW01hcnRpYW4gWWVhciAwXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaW1la2VlcGluZ19vbl9NYXJzI1llYXJfbnVtYmVyaW5nKSwgYSBmYWN0IEkgY29uZmlybWVkIHVzaW5nIFthbiBvbmxpbmUgTWFydGlhbiB0aW1lIGNhbGN1bGF0b3JdKGh0dHBzOi8vd3d3LW1hcnMubG1kLmp1c3NpZXUuZnIvbWFycy90aW1lL21hcnRpYW5fdGltZS5odG1sKSwgYXMgc2hvd24gaW4gdGhlIHNjcmVlbnNob3QgYmVsb3c6XG4hW2ltYWdlLnBuZ10oJHthd2FpdCBGaWxlQXR0YWNobWVudChcImltYWdlLnBuZ1wiKS51cmwoKX0pYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBUaGUgY2FsY3VsYXRpb25zIGZvciBMcyBhcmUgZGVzY3JpYmVkIG9uIHRoZSBmb2xsb3dpbmcgd2VicGFnZXM6XG4tIGh0dHBzOi8vbWFyc2Nsb2NrLmNvbVxuLSBodHRwczovL3d3dy5naXNzLm5hc2EuZ292L3Rvb2xzL21hcnMyNC9oZWxwL2FsZ29yaXRobS5odG1sXG5cbkkgZGVjaWRlZCBub3QgdG8gcmVjcmVhdGUgdGhlc2UgY2FsY3VsYXRpb25zIGhlcmUuIExzIGlzIGdyZWF0IGF0IG1hcmtpbmcgdGhlIHNlYXNvbnMsIGJ1dCBub3QgdXNlZnVsIGZvciB0aW1la2VlcGluZyBiZWNhdXNlIGl0IFtcImRvZXMgbm90IGluY3JlYXNlIGxpbmVhcmx5IHdpdGggdGltZVwiXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Tb2xhcl9sb25naXR1ZGUjOn46dGV4dD1kb2VzJTIwbm90JTIwaW5jcmVhc2UlMjBsaW5lYXJseSUyMHdpdGglMjB0aW1lKS5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE1MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYEluc3RlYWQgb2YgdGhlIGV4YWN0IE1hcnMgZXBvY2gsIGl0IG1heSBiZSBlYXNpZXIgdG8gd29yayB3aXRoIEp1bGlhbiBEYXRlICR7dGV4YDI0MzQ1MjEuOTFcXG92ZXJsaW5lNmB9LCB3aGljaCBpcyAxOTUzLTA1LTI0VDEwOjAwOjAwKzAwOjAwIGluIElTTzg2MDEgY2FsZW5kYXIgZGF0ZSBmb3JtYXQgYW5kICR7dGV4YDE5NTN7K30wODQ0LjFcXG92ZXJsaW5lNnstfTRgfSBpbiBEZWNhbGVuZGFyLiBUaGlzIG51bWJlciBpcyBvbmx5IDEuNSBtaWxzICgyLjE2IG1pbnV0ZXMpIG1vcmUgdGhhbiB0aGUgZXhhY3QgTWFycyBlcG9jaCBhbmQgdGh1cyBzaG91bGQgYmUgc3VmZmljaWVudCBmb3Igc2l0dWF0aW9ucyB0aGF0IGRvIG5vdCByZXF1aXJlIGEgaGlnaCBsZXZlbCBvZiBwcmVjaXNpb24uYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMgTWFydGlhbiB5ZWFyc2BcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTU1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgTWFydGlhbiB5ZWFycyBhcmUgZ3JvdXBlZCBpbiBjeWNsZXMgb2YgMjIgeWVhcnMgKDE0NzA5IHNvbHMpLiBJbiBhIGN5Y2xlLCB0aGVyZSBhcmUgOSBzaG9ydCB5ZWFycyB0aGF0IGhhdmUgNjY4IHNvbHMgYW5kIDEzIGxvbmcgeWVhcnMgdGhhdCBoYXZlIDY2OSBzb2xzLiBZZWFycyB0aGF0IGFyZSBub3QgZXZlbmx5IGRpdmlzaWJsZSBieSAyIGFsd2F5cyBoYXZlIDY2OSBzb2xzLiBUaGlzIGlzIGVhc3kgdG8gcmVtZW1iZXIgYmVjYXVzZSBvZGQgeWVhcnMgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNvbHMuIEluIGFkZGl0aW9uLCB0aGVyZSBhcmUgdHdvIGV2ZW4geWVhcnMgd2l0aCA2Njkgc29scyBldmVyeSBjeWNsZSB0aGF0ICBhcmUgYWx3YXlzIDEwIHllYXJzIGFwYXJ0IHdpdGhpbiBhIGN5Y2xlIGFuZCAxMiB5ZWFycyBhcGFydCBiZXR3ZWVuIGN5Y2xlcywgZS5nLiAxMCwgMjAsIDMyLCA0MiwgNTQsIDY0LCBldGMuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNTYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiI2NjggKiAyMiArIDEzXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE1NyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Iig2NjggKiA5ICsgMTMgKiA2NjkpIC8gMjJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTU4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgTWFydGlhbiB5ZWFyIGxlbmd0aCBhdmVyYWdlZCBvdmVyIGEgY3ljbGUgaXMgNjY4LjU5MDkgc29scyB3aGljaCBpcyBtb3JlIHRoYW4gdGhlIFt0aW1lIGJldHdlZW4gbm9ydGh3YXJkIHNwcmluZyBlcXVpbm94ZXMgb24gTWFyc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGltZWtlZXBpbmdfb25fTWFycyM6fjp0ZXh0PW5vcnRod2FyZCUyMGVxdWlub3glMjB5ZWFyJTIwaXMlMjA2NjguNTkwNyUyMHNvbHMpICg2NjguNTkwNyksIGJ1dCB3aWxsIGV2ZW50dWFsbHkgYmUgdG9vIHNob3J0IGFzIHRoZSBNYXJ0aWFuIHllYXIgZ3Jvd3MgbG9uZ2VyIG92ZXIgdGhlIGNvdXJzZSBvZiB0aG91c2FuZHMgb2YgeWVhcnMuIFRoZSBlcnJvciB3aXRoIHRoZSAyMi15ZWFyIGN5Y2xlIGlzICR7KCg2NjgqMjIrMTMpLzIyLTY2OC41OTA3KSoxZTZ9IG1pY3Jvc29scyAobWlsbGlvbnRocyBvZiBhIHNvbCkgcGVyIHllYXIuIFRoaXMgZXJyb3IgcmF0ZSB3aWxsIGV2ZW50dWFsbHkgYmUgb3ZlcnRha2VuIGJ5IHRoZSBpbmNyZWFzZSBpbiB0aGUgbGVuZ3RoIG9mIHRoZSBNYXJ0aWFuIHllYXIuIEFmdGVyIDEwMDAwIHllYXJzIHdpdGggYSBNYXJ0aWFuIHllYXIgbGVuZ3RoIGluY3JlYXNlIG9mIC4wNyUgcGVyIE1hcnRpYW4gbWlsbGVuaXVtLCA2Njg1OTExLjY4IGRheXMgd2lsbCBwYXNzIGluc3RlYWQgb2YgNjY4NTkwOS4wOSBhY2NvcmRpbmcgdG8gMjIteWVhciBjeWNsZS5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE1OSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IjY2OC41OTA3ICogMTAwMDAgKiAxLjAwMDAwMDdcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTYwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiNjY4LjU5MDkwOTA5MDkwOSAqIDEwMDAwXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE2MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYEFmdGVyIDM4NjIuMTU4MzIxIHllYXJzIGJhc2VkIG9uIGEgTWFydGlhbiB5ZWFyIGxlbmd0aCBpbmNyZWFzZSBvZiAuMDclIHBlciBNYXJ0aWFuIG1pbGxlbml1bSwgYW4gYWRkaXRpb25hbCBkYXkgd2lsbCBiZSBuZWVkZWQgdG8gYWNjb3VudCBmb3IgdGhlIGxlbmd0aGVuaW5nIG9mIHRoZSBNYXJ0aWFuIHllYXIuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNjIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiI2NjguNTkwNyAqIDM4NjIuMTU4MzIxICogMS4wMDAwMDA3IC0gKDY2OCArIDEzIC8gMjIpICogMzg2Mi4xNTgzMjFcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTYzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgSW5zdGVhZCBvZiBkZWNyZWFzaW5nIHRoZSBjeWNsZSBsZW5ndGggdG8gYWRqdXN0IHRvIHRoZSBmYWN0IHRoYXQgdGhlIE1hcnRpYW4geWVhciBpcyBnZXR0aW5nIGxvbmdlciBhbmQgYW4gZXh0cmEgZGF5IHdpbGwgYmUgbmVlZGVkIHNvb25lciwgd2UgY2FuIGludHJvZHVjZSB0aGUgY29uY2VwdCBvZiBhIHN1cGVyY3ljbGUuIEJhc2VkIG9uIHRoZSBjYWxjdWxhdGlvbnMgYWJvdmUgYSBzdXBlcmN5Y2xlIGNhbiBjb25zaXN0IG9mIDExMSBjeWNsZXMgb2YgMzMgTWFydGlhbiB5ZWFycyBlYWNoLiBUaGlzIHN1cGVyY3ljbGUgd2lsbCBhZGQgYSBkYXkgYXQgdGhlIGVuZCBvZiBZZWFyIDM2NjMsIGEgeWVhciB3aGljaCB3b3VsZCBvdGhlcndpc2UgNjY4LiBUaGUgbGVuZ3RoIG9mIHRoZSAoc3VwZXIpY3ljbGUgb25seSBhZmZlY3RzIHRoZSB0aW1pbmcgb2YgdGhlIGJvbnVzIGRheSB0aGF0IGlzIGFkZGVkIGFzIHRoZSBsYXN0IGRheSBvZiB0aGUgKHN1cGVyKWN5Y2xlLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTY0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiMzY4MiAvIDMzXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE2NSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFBlb3BsZSBsaXZpbmcgb24gTWFycyBpbiB0aGUgZnV0dXJlIG1heSBkZWNpZGUgdG8gY2hhbmdlIHRoZSBlcG9jaCBmcm9tIDE5NTMrMDg0NC4xNTE2NTE0OTk1NjAxLTQsIHdoaWNoIGlzIFthcmJpdHJhcnldKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RpbWVrZWVwaW5nX29uX01hcnMjOn46dGV4dD10aGUlMjBjaG9pY2UlMjBhcy0sJTIyYXJiaXRyYXJ5JTIyLC0lMkMlMjB0aGUlMjBncmVhdCUyMGR1c3QpLCB0byBhIG1vcmUgbWVhbmluZ2Z1bCBtb21lbnQgbGlrZSB0aGUgZmlyc3QgaHVtYW4gbGFuZGluZyBvbiBNYXJzIG9yIHRoZSBmaXJzdCBzZWVkIHBsYW50ZWQgaW4gTWFydGlhbiBzb2lsLiBSZWdhcmRsZXNzIG9mIHRoZSBlcG9jaCwgdGhlIGNhbGN1bGF0aW9ucyBiZWxvdyBzaG91bGQga2VlcCB0aGUgbm9ydGh3YXJkIHNwcmluZyBlcXVpbm94IHN0YWJsZSBhcyBTb2wgMCB3aXRob3V0IGFkanVzdG1lbnQgZm9yIHRob3VzYW5kcyBvZiB5ZWFycy4gVGhlIGltcGxlbWVudGF0aW9uIG9mIGEgc3VwZXJjeWNsZSAob3Igc29tZSBvdGhlciBtZWNoYW5pc20gb2YgYWRkaW5nIGFub3RoZXIgZGF5KSB3aWxsIGV2ZW50dWFsbHkgYmUgbmVlZGVkIHRvIG1haW50YWluIHRoZSBzdGFydCBvZiBNYXJ0aWFuIHNwcmluZyBpbiB0aGUgTm9ydGhlcm4gSGVtaXNwaGVyZSBhcyBTb2wgMC4gSW4gdGhlIGZ1dHVyZSwgd2UgbWF5IGxlYXJuIHNvbWV0aGluZyBuZXcgYWJvdXQgTWFy4oCZcyBvcmJpdCBhcm91bmQgdGhlIFN1biB0aGF0IGluZm9ybXMgdGhlIGRlY2lzaW9uIG9mIGhvdyBiZXN0IHRvIGFkZCBleHRyYSBkYXlzIHRvIHRoZSBNYXJ0aWFuIERlY2FsZW5kYXIuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNjYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtYXJzU29jeSA9IE1hdGguZmxvb3Ioc290ZSAvIDE0NzA5KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNjciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJzb3RjID0gc290ZSAtIG1hcnNTb2N5ICogMTQ3MDlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTY4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gZG90ZTJzb3RlKGRvdGUgPSA3MTk0NjgpIHtcbiAgICByZXR1cm4gKGRvdGUgLSA3MTM0MDIuNDE1MTY1MTUpIC8gMS4wMjc0OTEyNTE3XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE2OSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGRvdGUyc290eShkb3RlID0gNzE5NDY4KSB7XG4gICAgcmV0dXJuIHNvdGUyc290eShkb3RlMnNvdGUoZG90ZSkpXG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE3MCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIHNvdGUyc290eShzb3RlID0gNzE5NDY4KSB7XG4gICAgY29uc3Qgc29jeSA9IE1hdGguZmxvb3IoKHNvdGUgPj0gMCA/IHNvdGUgOiBzb3RlIC0gMTQ3MDgpIC8gMTQ3MDkpLCBzb3RjID0gc290ZSAtIHNvY3kgKiAxNDcwOSxcbiAgICB5b3RjID0gTWF0aC5mbG9vcigoc290YyAtIE1hdGguZmxvb3Ioc290YyAvIDEzMzYpIC0gTWF0aC5mbG9vcihzb3RjIC8gNjY4NikpIC8gNjY4KTtcbiAgICByZXR1cm4gW3lvdGMgKyBzb2N5ICogMjIsIHNvdGMgLSAoeW90YyAqIDY2OCArIE1hdGguZmxvb3IoeW90YyAvIDIpICsgTWF0aC50cnVuYygoeW90YyAtIDEpIC8gMTApKV1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTcxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgLSBNYXJzIEVwb2NoIEV4YW1wbGU6XG4gIC0gR3JlZ29yaWFuIERlY2FsZW5kYXI6XG4gICAgLSB5ZWFyOiAxOTUzXG4gICAgLSBkb3R5OiA4NC40MTUxNjUxNVxuICAgIC0gZG90ZTogNzEzNDAyLjQxNTE2NTE1XG4gIC0gTWFycyBEZWNhbGVuZGFyOlxuICAgIC0geWVhcjogMFxuICAgIC0gZG90eTogMFxuICAgIC0gZG90ZTogMGBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTcyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZG90eTJkb3RlKDE5NTMsIDg0LjQxNTE2NTE1KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNzMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkb3RlMnNvdHkoNzEzNDAyLjQxNTE2NTE1KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xNzQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtYXJzID0gZG90ZTJzb3R5KHVuaXggLyA4NjQwMDAwMCArIDcxOTQ2OClcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTc1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWFyc0RlY28gPSBg8J+Xk++4j++4jyR7bWFyc1swXS50b1N0cmluZygpLnBhZFN0YXJ0KDQsIFwiMFwiKX0rJHtNYXRoLmZsb29yKG1hcnNbMV0pLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpffCflbAkeyhtYXJzWzFdICUgMSAqIDEwKS50b0ZpeGVkKDQpfWBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTc2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgRm9yIGEgZGlyZWN0IGNhbGN1bGF0aW9uIG9mIE1hcnRpYW4gYW5kIEVhcnRoIHRpbWUsIGNoZWNrIG91dCB0aGUgW0RlY2xvY2sgbm90ZWJvb2tdKC9AZGVjL2RlY2xvY2spLmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTc3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgIyMgTW9vblxuXG5JbiB0aGUgZnV0dXJlLCB0aGUgTW9vbiBhbmQgaXRzXG5bTGFncmFuZ2UgcG9pbnRzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MYWdyYW5nZV9wb2ludCM6fjp0ZXh0PXBvaW50cyUyMG9mJTIwZXF1aWxpYnJpdW0lMjBmb3IlMjBzbWFsbCUyRG1hc3MlMjBvYmplY3RzJTIwdW5kZXIlMjB0aGUlMjBncmF2aXRhdGlvbmFsJTIwaW5mbHVlbmNlJTIwb2YlMjB0d28lMjBtYXNzaXZlJTIwb3JiaXRpbmclMjBib2RpZXMpXG5jb3VsZCBiZSBpbXBvcnRhbnQgc3RhZ2luZyBhcmVhcyBmb3Igc3BhY2UgdHJhdmVsLiBIdW1hbnMgbGl2aW5nIG9uIHRoZSBzdXJmYWNlXG5vZiB0aGUgTW9vbiB3aWxsIG5lZWQgYSB0aW1lIHN5c3RlbSB0aGF0IHJlbGF0ZXMgdG8gdGhlaXIgZW52aXJvbm1lbnQuXG5EZWNhbGVuZGFyIG1lYXN1cmVzIHRpbWUgb24gdGhlIE1vb24gaW4gbHVuYXIgeWVhcnMgYW5kIGx1bmFyIGRheXMuIEp1c3QgYXMgYSBNYXJ0aWFuIHNvbGFyIGRheSBjYW4gYmUgY2FsbGVkIGEgc29sLCBhIGx1bmFyIGRheSBjYW4gYmUgY2FsbGVkIGEgdGVsLCB3aGljaCBjb21lcyBmcm9tIHRoZSBhbmNpZW50IFJvbWFuIG5hbWUgW1RlbGx1c10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVGVycmFfJTI4bXl0aG9sb2d5JTI5I1RlbGx1c19hbmRfVGVycmFfaW5fc2NpZW5jZV9maWN0aW9uOn46dGV4dD10aGUlMjBuYW1lJTIwb2YlMjB0aGUlMjBvcmlnaW5hbCUyMGVhcnRoJTIwZ29kZGVzcyUyMGluJTIwdGhlJTIwcmVsaWdpb3VzJTIwcHJhY3RpY2VzJTIwb2YlMjB0aGUlMjBSZXB1YmxpYykgYW5kIGlzIHNob3J0IGZvciBbdGVsbHVyaWFuIG9yIHRlbGx1cmljXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaXN0X29mX2FkamVjdGl2YWxzX2FuZF9kZW1vbnltc19vZl9hc3Ryb25vbWljYWxfYm9kaWVzIzp+OnRleHQ9VGVsbHVyaWFuJTJDJTVCMyU1RCUyMFRlbGx1cmljKS4gQSBsdW5hciB5ZWFyIGluIERlY2FsZW5kYXIgaXMgYSB0dXJuIG9mIHRoZSBNb29uIGFyb3VuZCB0aGUgRWFydGgsIHdoaWNoIGhhcyB0aGUgc2FtZSBkdXJhdGlvbiBhcyBhIHR1cm4gb2YgdGhlIE1vb24gb24gaXRzIGF4aXMsIGJlY2F1c2UgdGhlIE1vb24gaXMgW3RpZGFsbHkgbG9ja2VkXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9UaWRhbF9sb2NraW5nIzp+OnRleHQ9dGhlJTIwb2JqZWN0cyUyMHJlYWNoZXMtLGElMjBzdGF0ZSUyMHdoZXJlJTIwdGhlcmUlMjBpcyUyMG5vJTIwbG9uZ2VyJTIwYW55JTIwbmV0JTIwY2hhbmdlJTIwaW4lMjBpdHMlMjByb3RhdGlvbiUyMHJhdGUlMjBvdmVyJTIwdGhlJTIwY291cnNlJTIwb2YlMjBhJTIwY29tcGxldGUlMjBvcmJpdCwtLiUyMEluJTIwdGhlJTIwY2FzZSkgdG8gdGhlIEVhcnRoLlxuVGhlIGFuaW1hdGlvbiBiZWxvdyBzaG93cyBob3cgdGlkYWwgbG9ja2luZyBzeW5jaHJvbml6ZXMgdGhlIE1vb24ncyB0dXJucyBvbiBpdHMgYXhpcyBhbmQgYXJvdW5kIHRoZSBFYXJ0aC5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE3OCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AamhoYW1lci9tb29uLWVhcnRoLXN5c3RlbVxuLy8gaHR0cHM6Ly9vYnNlcnZhYmxlaHEuY29tL0BqaGhhbWVyL3RpZGVzLWluLWhvdC1qdXBpdGVyLXN5c3RlbXNcbntcbiAgY29uc3QgaCA9IHc7XG4gICAgXG4gIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdChET00uc3ZnKHcsIGgpKTtcbiAgXG4gIHN2Zy5hcHBlbmQoXCJyZWN0XCIpXG4gICAgLmF0dHIoXCJ3aWR0aFwiLCBcIjEwMCVcIilcbiAgICAuYXR0cihcImhlaWdodFwiLCBcIjEwMCVcIilcbiAgICAuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKTtcbiAgXG4gIC8vRWFydGhcbiAgdmFyIGVhcnRoID0gc3ZnLmFwcGVuZChcImVsbGlwc2VcIilcbiAgICAuYXR0cihcInJ4XCIsIGVhcnRoX3JhZGl1cypzY2FsZSlcbiAgICAuYXR0cihcInJ5XCIsIGVhcnRoX3JhZGl1cypzY2FsZSlcbiAgICAuYXR0cihcImZpbGxcIiwgZDMuY29sb3IoXCJzdGVlbGJsdWVcIikpXG4gICAgLmF0dHIoXCJjeFwiLCB3LzIpXG4gICAgLmF0dHIoXCJjeVwiLCBoLzIpXG4gICAgLmF0dHIoXCJpZFwiLCBcImVhcnRoXCIpO1xuICBcbiAgdmFyIGVhcnRoX21pZGxpbmUgPSBzdmcuYXBwZW5kKFwibGluZVwiKVxuICAgIC5hdHRyKFwieDFcIiwgdy8yLWVhcnRoX3JhZGl1cypzY2FsZSlcbiAgICAuYXR0cihcInkxXCIsIGgvMilcbiAgICAuYXR0cihcIngyXCIsIHcvMitlYXJ0aF9yYWRpdXMqc2NhbGUpXG4gICAgLmF0dHIoXCJ5MlwiLCBoLzIpXG4gICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgNSlcbiAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpO1xuICBcbiAgLy9Nb29uXG4gIHZhciBtb29uT3JiaXQgPSBzdmcuYXBwZW5kKFwiZ1wiKVxuICAgIC5hdHRyKFwieFwiLCB3LzIpXG4gICAgLmF0dHIoXCJ5XCIsIGgvMilcbiAgXG4gIHZhciBtb29ub3JiaXRwYXRoID0gc3ZnLmFwcGVuZChcImNpcmNsZVwiKVxuICAgLmF0dHIoXCJjeFwiLCB3LzIpXG4gICAuYXR0cihcImN5XCIsIGgvMilcbiAgIC5hdHRyKFwiclwiLCBlYXJ0aF9tb29uX2Rpc3QpXG4gICAuYXR0cihcImlkXCIsIFwibW9vblwiKVxuICAgLmF0dHIoXCJmaWxsXCIsIFwiTm9uZVwiKVxuICAgLmF0dHIoXCJzdHJva2VcIiwgZDMuY29sb3IoJ3doaXRlJykpXG4gICAuYXR0cihcInN0cm9rZS13aWR0aFwiLCAxKTtcbiAgICBcbiAgdmFyIG1vb24gPSBtb29uT3JiaXQuYXBwZW5kKFwiY2lyY2xlXCIpXG4gICAgLmF0dHIoXCJyXCIsIG1vb25fcmFkaXVzKnNjYWxlKVxuICAgIC5hdHRyKFwiY3hcIiwgdy8yIC0gZWFydGhfbW9vbl9kaXN0KVxuICAgIC5hdHRyKFwiY3lcIiwgaC8yKVxuICAgIC5hdHRyKFwiZmlsbFwiLCBkMy5jb2xvcihcImxpZ2h0Z3JheVwiKSk7XG4gIHZhciB0aWRhbF9taWRsaW5lID0gc3ZnLmFwcGVuZChcImxpbmVcIilcbiAgICAuYXR0cihcIngxXCIsIHcvMi1lYXJ0aF9tb29uX2Rpc3QpXG4gICAgLmF0dHIoXCJ5MVwiLCBoLzIpXG4gICAgLmF0dHIoXCJ4MlwiLCB3LzIrZWFydGhfbW9vbl9kaXN0LTUwKyh3aWR0aCA8IDgwMCkqMTArKHdpZHRoIDwgNDAwKSozKVxuICAgIC5hdHRyKFwieTJcIiwgaC8yKVxuICAgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIDUpXG4gICAgLmF0dHIoXCJzdHJva2VcIiwgXCJ3aGl0ZVwiKTtcbiAgLy8gdmFyIG1vb25fbWlkbGluZSA9IHN2Zy5hcHBlbmQoXCJsaW5lXCIpXG4gIC8vICAgLmF0dHIoXCJ4MVwiLCB3LzItZWFydGhfbW9vbl9kaXN0KVxuICAvLyAgIC5hdHRyKFwieTFcIiwgaC8yKVxuICAvLyAgIC5hdHRyKFwieDJcIiwgdy8yK2VhcnRoX21vb25fZGlzdC05NDMpXG4gIC8vICAgLmF0dHIoXCJ5MlwiLCBoLzIpXG4gIC8vICAgLmF0dHIoXCJzdHJva2Utd2lkdGhcIiwgNClcbiAgLy8gICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpO1xuICBcbiAgZDMudGltZXIoYW5pbWF0ZSk7XG4gIFxuICBmdW5jdGlvbiBhbmltYXRlKGVsYXBzZWQpe1xuICAgIHZhciBtb29uZGVncmVlcyA9ICgoZWxhcHNlZC8xNi4yKSouMDM2NSklMzYwO1xuICAgIHZhciBlYXJ0aGRlZ3JlZXMgPSAoZWxhcHNlZC8xNi4yKSUzNjA7XG4gICAgbW9vblxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHJvdGF0ZSgtJHttb29uZGVncmVlc30gJHt3LzJ9ICR7aC8yfSlgKTtcbiAgICBlYXJ0aFxuICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHJvdGF0ZSgtJHttb29uZGVncmVlc30gJHt3LzJ9ICR7aC8yfSlgKTtcbiAgICBlYXJ0aF9taWRsaW5lXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgcm90YXRlKC0ke2VhcnRoZGVncmVlc30gJHt3LzJ9ICR7aC8yfSlgKTtcbiAgICB0aWRhbF9taWRsaW5lXG4gICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBgcm90YXRlKC0ke21vb25kZWdyZWVzfSAke3cvMn0gJHtoLzJ9KWApO1xuICAgIC8vIG1vb25fbWlkbGluZVxuICAgIC8vICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgYHJvdGF0ZSgtJHttb29uZGVncmVlc30gJHt3LzJ9ICR7aC8yfSlgKTtcbiAgICBcbiAgfTtcbiAgXG4gIHJldHVybiBzdmcubm9kZSgpO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xODAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBEZWNhbGVuZGFyIHllYXJzIHR5cGljYWxseSBzdGFydCB3aXRoIHRoZSBbTm9ydGh3YXJkIEVxdWlub3hdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01hcmNoX2VxdWlub3gjOn46dGV4dD10aGUlMjBlcXVpbm94JTIwb24lMjB0aGUlMjBlYXJ0aCUyMHdoZW4lMjB0aGUlMjBzdWJzb2xhciUyMHBvaW50JTIwYXBwZWFycyUyMHRvJTIwbGVhdmUlMjB0aGUlMjBzb3V0aGVybiUyMGhlbWlzcGhlcmUlMjBhbmQlMjBjcm9zcyUyMHRoZSUyMGNlbGVzdGlhbCUyMGVxdWF0b3IlMkMlMjBoZWFkaW5nJTIwbm9ydGh3YXJkKSwgYnV0IHRoZSBNb29uIGRvZXNcbm5vdCBoYXZlIG5vdGljZWFibGUgc2Vhc29ucyBiZWNhdXNlIGl0IGlzXG5bdGlsdGVkIGJ5IG9ubHkgYWJvdXQgJHt0ZXhgNC4xXFxvdmVybGluZTZgfSBtaWNyb3R1cm5zIG9uIGl0IGF4aXNdKGh0dHBzOi8vd3d3LnNwYWNlLmNvbS81NS1lYXJ0aHMtbW9vbi1mb3JtYXRpb24tY29tcG9zaXRpb24tYW5kLW9yYml0Lmh0bWwjOn46dGV4dD10aWx0ZWQlMjBieSUyMG9ubHklMjBhYm91dCUyMDEuNSUyMGRlZ3JlZXMpLCB3aGljaCBpcyBtb3JlIHRoYW4gMTAwMDAgdGltZXMgc21hbGxlciB0aGFuIHRoZSBFYXJ0aOKAmXMgJHt0ZXhgNjUuXFxvdmVybGluZTFgfSBtaWxsaXR1cm4gW3RpbHRdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0F4aWFsX3RpbHQjOn46dGV4dD1heGlhbCUyMHRpbHQlMjBvZi0sYWJvdXQlMjAyMy40NCVDMiVCMCwtLiU1QjclNUQlMjBUaGlzJTIwdmFsdWUlMjByZW1haW5zKS4gVGhlcmVmb3JlLFxuaW5zdGVhZCBvZiBmb2xsb3dpbmcgdGhlIHNlYXNvbnMsIHdlIHNob3VsZCBmb2xsb3cgdGhlIFtNb29uIHBoYXNlc10oaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTHVuYXJfcGhhc2UjOn46dGV4dD10aGUlMjBhcHBhcmVudCUyMHNoYXBlJTIwb2YlMjB0aGUlMjBNb29uJTI3cyUyMGRpcmVjdGx5JTIwc3VubGl0JTIwcG9ydGlvbiUyMGFzJTIwdmlld2VkJTIwZnJvbSUyMHRoZSUyMEVhcnRoKS5cbkRlY2FsZW5kYXIgZGVmaW5lcyB0aGUgbHVuYXIgZXBvY2ggdG8gYmVcblsxOTk5KzMxMS43NTk3Mi0wXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9OZXdfbW9vbiM6fjp0ZXh0PTE4JTNBMTQlMjBVVEMlMkMlMjA2JTIwSmFudWFyeSUyMDIwMDApLFxudGhlIGZpcnN0IG5ldyBtb29uIGFmdGVyXG5bSjIwMDBdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Vwb2NoXyUyOGFzdHJvbm9teSUyOSM6fjp0ZXh0PWN1cnJlbnRseSUyMHVzZWQlMjBzdGFuZGFyZCUyMGVwb2NoJTIwJTIySjIwMDAlMjIpLlxuVGhlIG51bWJlciBvZiBkYXlzIGFmdGVyIHRoaXMgZXBvY2ggaXMgdGhlIGx1bmFyIGRheSBvZiB0aGUgZXJhIChkb3RlKS4gVG8gb2J0YWluIHRoZSBjdXJyZW50IGx1bmFyIHllYXIgYW5kIHRlbCBvZiB0aGUgeWVhciAodG90eSksIHdlIGZpcnN0IGRpdmlkZSB0aGUgbHVuYXIgZG90ZSBieSAxLjAzMzg2MzU5NzY3ODU4ODggdG8gZ2V0IHRoZSB0ZWwgb2ZcbnRoZSBlcmEgKHRvdGUpLiBUaGVuLCBhZnRlciB3ZSBzcGxpdCB1cCB0aGUgdG90ZSBpbnRvIGx1bmFyIHllYXJzLCB3ZSBjYW4gY29udmVydCB0aGUgcmVtYWluZGVyIGludG8gdGhlIHRvdHkgb3IgYSBkZWNpbWFsIGx1bmFyIHllYXIsICB3aGljaCBwcm92aWRlcyB0aGUgTW9vbiBwaGFzZSBhcyBzaG93biBieSB2aXN1YWxpemF0aW9uIGFuZCBzbGlkZXIgYmVsb3cuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xODEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtb29uKHVuaXZlcnNlKHdpZHRoIC8gNDAwMCArICh3aWR0aCA8IDQwMCkgKiAuOSwgXCJibGFja1wiKSwgbW9vbkZyYWN0aW9uIC8gMTAwLCBcIndoaXRlXCIsIFwiYmxhY2tcIilcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTgyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIG1vb25GcmFjdGlvbiA9IFNjcnViYmVyKGQzLnJhbmdlKDEwMSksIHtcbiAgZGVsYXk6IDg2LjRcbn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4MyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYFRoZSBsdW5hciBsZWFwIGN5Y2xlIGlzIGRldGVybWluZWQgYnkgdGhlXG5bZnJhY3Rpb25hbCBwYXJ0XShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GcmFjdGlvbmFsX3BhcnQjOn46dGV4dD10aGUlMjBleGNlc3MlMjBiZXlvbmQlMjB0aGF0JTIwbnVtYmVyJTI3cyUyMGludGVnZXIlMjBwYXJ0KVxub2YgdGhlIGx1bmFyIHllYXIgbGVuZ3RoLCB3aGljaCBpcyBjbG9zZSB0byB0aGUgZnJhY3Rpb24gJHt0ZXhgOS8xNj0uNTYyNWB9LiBUaGVcbm51bWVyYXRvciBpbiB0aGlzIGZyYWN0aW9uIGlzIHRoZSBudW1iZXIgb2YgMjktdGVsIGxvbmcgbHVuYXIgeWVhcnMgaW4gdGhlXG5jeWNsZSwgd2hpbGUgdGhlIGRlbm9taW5hdG9yIGlzIHRoZSBsZWFwIGN5Y2xlIGxlbmd0aCBpbiBsdW5hciB5ZWFycy4gSW5zaWRlIGFcbmx1bmFyIGxlYXAgY3ljbGUsIGx1bmFyIHllYXJzIGFyZSBudW1iZXJlZCAwIHRocm91Z2ggMTUuIEV2ZW4tbnVtYmVyZWQgbHVuYXJcbnllYXJzIGV4Y2VwdCBmb3IgWWVhciAxMCBoYXZlIDI4IHRlbHMuIFllYXIgMTAgYW5kIGFsbCBvZGQtbnVtYmVyZWQgeWVhcnMgaGF2ZVxuMjkgdGVscy4gVGhpcyBpcyBlYXN5IHRvIHJlbWVtYmVyIGJlY2F1c2Ugd2l0aCB0aGUgZXhjZXB0aW9uIG9mIFllYXIgMTAgaW4gdGhlXG5jeWNsZSwgZXZlbi1udW1iZXJlZCB5ZWFycyBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHRlbHMgKDI4KSBhbmQgb2RkLW51bWJlcmVkXG55ZWFycyBoYXZlIGFuIG9kZCBudW1iZXIgb2YgdGVscyAoMjkpLlxuYFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xODQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGBUaGUgbHVuYXIgbGVhcCBjeWNsZSBpcyBkZXNpZ25lZCB0byBmb2xsb3cgdGhlIGx1bmFyIGRheS1uaWdodCBjeWNsZSBhbmQgdGhlXG5Nb29uXG5hbmRcbltFYXJ0aFxucGhhc2VzXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9FYXJ0aF9waGFzZSM6fjp0ZXh0PXRoZSUyMHNoYXBlJTIwb2YlMjB0aGUlMjBkaXJlY3RseSUyMHN1bmxpdCUyMHBvcnRpb24lMjBvZiUyMEVhcnRoJTIwYXMlMjB2aWV3ZWQlMjBmcm9tJTIwdGhlJTIwTW9vbiksIGtlZXBpbmcgdGhlIG5ldyBtb29uIGNsb3NlIHRvIFRlbCAwIGFuZCBmdWxsIG1vb24gY2xvc2UgdG8gVGVsIDE0LiBUaGVcbmVycm9yIHJhdGUgb2YgdGhlIGx1bmFyIGxlYXAgY3ljbGUgaXMgLTAuMDAwNDg5NDkyMjg1OTE4NjU3OSB0ZWxzIHBlciBsdW5hclxueWVhciwgd2hpY2ggbWVhbnMgd2Ugd2lsbCBoYXZlIHRvIGFkZCBhIHRlbCBiZWZvcmUgdGhlIFllYXIgMjA0MiB0byBhdm9pZFxuZmFsbGluZyBhIHRlbCBiZWhpbmQgdGhlIHN0YXJ0IG9mIHRoZSBsdW5hciB5ZWFyLlxuQSBuaWNlIHBvdGVudGlhbCBpbnRlcmNhbGF0aW9uXG5wb2ludCBmb3IgdGhpcyBhZGRpdGlvbmFsIHRlbCBtYXkgYmUgdGhlIFllYXIgMjAwMCB3aGljaCBoYXMgMjggdGVscyBhbmQgaXMgdGhlXG5maXJzdCB5ZWFyIGluIEN5Y2xlIDEyNS5cbkFsdG9nZXRoZXIgaW4gb25lIGN5Y2xlLCB0aGVyZSBhcmUgNDU3IHRlbHMsIHdoaWNoIGFyZSBudW1iZXJlZCAwIHRvIDQ1NixcbmJ1dCBDeWNsZSAxMjUgY291bGQgYmUgdGhlIGZpcnN0IGN5Y2xlIHRvIGhhdmUgNDU4IGRheXMsIG51bWJlcmVkIDAgdG8gNDU3LmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTg1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibW9vbkRvdGUgPSB6b25lMGRvdGUgLSBkb3R5MmRvdGUoMTk5OSwgMzExLjc1KzE0LzYwLzI0KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xODYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtb29uVG90ZSA9IG1vb25Eb3RlIC8gMS4wMzM4NjM1OTc2Nzg1ODg4XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4NyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vb25FcG9jaCA9IGRvdHkyZG90ZSgxOTk5LCAzMTEuNzUrMTQvNjAvMjQpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE4OCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRheXNTaW5jZUoyMDAwID0gSkR0dCAtIDI0NTE1NDVcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTg5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gdG90ZTJ0b3R5KHRvdGUgPSA3MTk0NjgpIHtcbiAgICBjb25zdCBzb2N5ID0gTWF0aC5mbG9vcigodG90ZSA+PSAwID8gdG90ZSA6IHRvdGUgLSA0NTYpIC8gNDU3KSwgdG90YyA9IHRvdGUgLSBzb2N5ICogNDU3LFxuICAgIHlvdGMgPSBNYXRoLmZsb29yKCh0b3RjIC0gTWF0aC5mbG9vcih0b3RjIC8gNTYpIC0gTWF0aC5mbG9vcih0b3RjIC8gMjg2KSkgLyAyOCk7XG4gICAgcmV0dXJuIFt5b3RjICsgc29jeSAqIDE2LCB0b3RjIC0gKHlvdGMgKiAyOCArIE1hdGguZmxvb3IoeW90YyAvIDIpICsgTWF0aC50cnVuYygoeW90YyAtIDEpIC8gMTApKV1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTkwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoieXQgPSB0b3RlMnRvdHkobW9vblRvdGUpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE5MSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vb25ZZWFyID0geXRbMF1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTkyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibW9vblRvdHkgPSB5dFsxXVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xOTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtb29uVGltZSA9IG1vb25Ub3R5ICUgMSAqIDEwXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE5NCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vb25EZWNvID0gYPCfl5Mke1N0cmluZyhtb29uWWVhcikucGFkU3RhcnQoNSwgXCIwXCIpfSske1N0cmluZyhNYXRoLmZsb29yKG1vb25Ub3R5KSkucGFkU3RhcnQoMiwgXCIwXCIpffCflbAke21vb25UaW1lLnRvRml4ZWQoNCl9YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xOTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyBBcHBlbmRpeGBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMTk2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoibWRgR3Jhdml0eSBpcyBmYXIgbG93ZXIgb24gdGhlIE1vb24sIHdoaWNoIHNsaWdodGx5IHNwZWVkcyB1cCB0aGUgcGFzc2FnZVxub2YgdGltZS4gVGhlIGluY3JlYXNlIGluIHNwZWVkIGlzIGFib3V0IDY0OFxuKCR7dGV4YDU2LjAxOTkgXFxkaXYgLjA4NjQgPSA2NDguMzc4NDdcXG92ZXJsaW5lMmB9KSBwaWNvZGF5cyAoJHt0ZXhgMTBeey0xMn1gfVxuZGF5cykgcGVyIGRheSAocGRwZClcbltmYXN0ZXIgb24gdGhlIE1vb24gdGhhbiBvbiBFYXJ0aF0oaHR0cHM6Ly9hcnhpdi5vcmcvaHRtbC8yNDAyLjExMTUwdjEjOn46dGV4dD1hJTIwdGltZSUyMGRpZmZlcmVuY2UlMjBwZXIlMjBkYXkpLlxuVGhpcyBkaWZmZXJlbmNlIGlzXG5bZXZlbiBncmVhdGVyXShodHRwczovL2FyeGl2Lm9yZy9odG1sLzI0MDIuMTExNTB2MSM6fjp0ZXh0PWNvbXB1dGVkJTIwcmF0ZXMlMjBmb3IlMjB2YXJpb3VzJTIwcG9pbnRzJTIwb2YlMjBpbnRlcmVzdClcbmF0IHRoZSBNb29uJ3MgTGFncmFuZ2UgcG9pbnRzIGluIHRoZVxuW21pY3JvZ3Jhdml0eV0oaHR0cHM6Ly93d3cubmFzYS5nb3YvY2VudGVycy1hbmQtZmFjaWxpdGllcy9nbGVubi93aGF0LWlzLW1pY3JvZ3Jhdml0eSlcbm9mIGx1bmFyIG9yYml0LiBUbyBhY2NvdW50IGZvciBmYXN0ZXIgdGltZSBvbiB0aGUgTW9vbiwgd2UgbXVsdGlwbHkgdGltZSBieSB0aGUgW2ZvbGQgY2hhbmdlXShodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Gb2xkX2NoYW5nZSM6fjp0ZXh0PXRoZSUyMHJhdGlvJTIwYmV0d2VlbiUyMHRoZSUyMHR3byUyMHF1YW50aXRpZXMpICgke3RleGAxK1xcZnJhY3s1Ni4wMTk5fXs4NjRcXHRpbWVzMTBeezh9fWB9KSBpbiB0aGUgc3BlZWQgb2YgdGltZSB3aGVuIG1vdmluZyBmcm9tIG9uZSBwbGFjZSB0byBhbm90aGVyLiBJIGRlY2lkZWQgdG8gbm90IGluY2x1ZGUgdGhpcyBjb3JyZWN0aW9uIGluIHRoZSBjYWxjdWxhdGlvbnMgYWJvdmUuIFRoZSBmYXN0ZXIgcmF0ZSBvZiB0aW1lIG9uIHRoZSBNb29uIHNsaWdodGx5IGRlY3JlYXNlcyB0aGUgbHVuYXIgeWVhciBkdXJhdGlvbiBvbiB0aGUgTW9vbi4gQSBzaG9ydGVyIGx1bmFyIHllYXIgd2lsbCBzbGlnaHRseSBkZWNyZWFzZSB0aGUgZXJyb3IgcmF0ZSBpbiB0aGUgTHVuYXIgbGVhcCB5ZWFyIHNjaGVtZS4gSW4gY29udHJhc3QsIHRoZSBlcnJvciByYXRlIHdpbGwgaW5jcmVhc2UgbW9yZSBzaWduaWZpY2FudGx5IHdpdGggdGltZSBhcyB0aGUgTW9vbiBkcmlmdHMgZnVydGhlciBmcm9tIHRoZSBFYXJ0aCwgY2F1c2luZyBpdHMgb3JiaXRhbCB2ZWxvY2l0eSB0byBkZWNyZWFzZSBhbmQgdGhlIGx1bmFyIHllYXIgdG8gYmVjb21lIGxvbmdlci5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTE5NyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1kYCMjIyBTb2xhciBIaWppcmkgTGVhcCBDeWNsZVxufCBZb3RjIHwgU3RhcnQgfCBTdG9wICB8IE4tMzY1IHxcbnwgLS0tLSB8IC0tLS0tIHwgLS0tLS0gfCAtLS0tLSB8XG58IDAgICAgfCAwICAgICB8IDM2NSAgIHwgMCAgICAgfFxufCAxICAgIHwgMzY1ICAgfCA3MzAgICB8IDAgICAgIHxcbnwgMiAgICB8IDczMCAgIHwgMTA5NSAgfCAwICAgICB8XG58IDMgICAgfCAxMDk1ICB8IDE0NjAgIHwgMCAgICAgfFxufCA0ICAgIHwgMTQ2MCAgfCAxODI2ICB8IDEgICAgIHxcbnwgNSAgICB8IDE4MjYgIHwgMjE5MSAgfCAwICAgICB8XG58IDYgICAgfCAyMTkxICB8IDI1NTYgIHwgMCAgICAgfFxufCA3ICAgIHwgMjU1NiAgfCAyOTIxICB8IDAgICAgIHxcbnwgOCAgICB8IDI5MjEgIHwgMzI4NyAgfCAxICAgICB8XG58IDkgICAgfCAzMjg3ICB8IDM2NTIgIHwgMCAgICAgfFxufCAxMCAgIHwgMzY1MiAgfCA0MDE3ICB8IDAgICAgIHxcbnwgMTEgICB8IDQwMTcgIHwgNDM4MiAgfCAwICAgICB8XG58IDEyICAgfCA0MzgyICB8IDQ3NDggIHwgMSAgICAgfFxufCAxMyAgIHwgNDc0OCAgfCA1MTEzICB8IDAgICAgIHxcbnwgMTQgICB8IDUxMTMgIHwgNTQ3OCAgfCAwICAgICB8XG58IDE1ICAgfCA1NDc4ICB8IDU4NDMgIHwgMCAgICAgfFxufCAxNiAgIHwgNTg0MyAgfCA2MjA5ICB8IDEgICAgIHxcbnwgMTcgICB8IDYyMDkgIHwgNjU3NCAgfCAwICAgICB8XG58IDE4ICAgfCA2NTc0ICB8IDY5MzkgIHwgMCAgICAgfFxufCAxOSAgIHwgNjkzOSAgfCA3MzA0ICB8IDAgICAgIHxcbnwgMjAgICB8IDczMDQgIHwgNzY3MCAgfCAxICAgICB8XG58IDIxICAgfCA3NjcwICB8IDgwMzUgIHwgMCAgICAgfFxufCAyMiAgIHwgODAzNSAgfCA4NDAwICB8IDAgICAgIHxcbnwgMjMgICB8IDg0MDAgIHwgODc2NSAgfCAwICAgICB8XG58IDI0ICAgfCA4NzY1ICB8IDkxMzEgIHwgMSAgICAgfFxufCAyNSAgIHwgOTEzMSAgfCA5NDk2ICB8IDAgICAgIHxcbnwgMjYgICB8IDk0OTYgIHwgOTg2MSAgfCAwICAgICB8XG58IDI3ICAgfCA5ODYxICB8IDEwMjI2IHwgMCAgICAgfFxufCAyOCAgIHwgMTAyMjYgfCAxMDU5MiB8IDEgICAgIHxcbnwgMjkgICB8IDEwNTkyIHwgMTA5NTcgfCAwICAgICB8XG58IDMwICAgfCAxMDk1NyB8IDExMzIyIHwgMCAgICAgfFxufCAzMSAgIHwgMTEzMjIgfCAxMTY4NyB8IDAgICAgIHxcbnwgMzIgICB8IDExNjg3IHwgMTIwNTMgfCAxICAgICB8YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xOTgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMgTWFycyBMZWFwIEN5Y2xlXG58IFlvdGMgfCBTdGFydCB8IFN0b3AgIHwgTi02NjggfFxufCAtLS0tIHwgLS0tLS0gfCAtLS0tLSB8IC0tLS0tIHxcbnwgMCAgICB8IDAgICAgIHwgNjY4ICAgfCAwICAgICB8XG58IDEgICAgfCA2NjggICB8IDEzMzcgIHwgMSAgICAgfFxufCAyICAgIHwgMTMzNyAgfCAyMDA1ICB8IDAgICAgIHxcbnwgMyAgICB8IDIwMDUgIHwgMjY3NCAgfCAxICAgICB8XG58IDQgICAgfCAyNjc0ICB8IDMzNDIgIHwgMCAgICAgfFxufCA1ICAgIHwgMzM0MiAgfCA0MDExICB8IDEgICAgIHxcbnwgNiAgICB8IDQwMTEgIHwgNDY3OSAgfCAwICAgICB8XG58IDcgICAgfCA0Njc5ICB8IDUzNDggIHwgMSAgICAgfFxufCA4ICAgIHwgNTM0OCAgfCA2MDE2ICB8IDAgICAgIHxcbnwgOSAgICB8IDYwMTYgIHwgNjY4NSAgfCAxICAgICB8XG58IDEwICAgfCA2Njg1ICB8IDczNTQgIHwgMSAgICAgfFxufCAxMSAgIHwgNzM1NCAgfCA4MDIzICB8IDEgICAgIHxcbnwgMTIgICB8IDgwMjMgIHwgODY5MSAgfCAwICAgICB8XG58IDEzICAgfCA4NjkxICB8IDkzNjAgIHwgMSAgICAgfFxufCAxNCAgIHwgOTM2MCAgfCAxMDAyOCB8IDAgICAgIHxcbnwgMTUgICB8IDEwMDI4IHwgMTA2OTcgfCAxICAgICB8XG58IDE2ICAgfCAxMDY5NyB8IDExMzY1IHwgMCAgICAgfFxufCAxNyAgIHwgMTEzNjUgfCAxMjAzNCB8IDEgICAgIHxcbnwgMTggICB8IDEyMDM0IHwgMTI3MDIgfCAwICAgICB8XG58IDE5ICAgfCAxMjcwMiB8IDEzMzcxIHwgMSAgICAgfFxufCAyMCAgIHwgMTMzNzEgfCAxNDA0MCB8IDEgICAgIHxcbnwgMjEgICB8IDE0MDQwIHwgMTQ3MDkgfCAxICAgICB8YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0xOTkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJtZGAjIyMgTW9vbiBMZWFwIEN5Y2xlXG58IFlvdGMgfCBTdGFydCB8IFN0b3AgfCBOLTI4IHxcbnwgLS0tLSB8IC0tLS0tIHwgLS0tLSB8LS0tLS0gfFxufCAwICAgIHwgMCAgICAgfCAyOCAgIHwgMCAgICB8XG58IDEgICAgfCAyOCAgICB8IDU3ICAgfCAxICAgIHxcbnwgMiAgICB8IDU3ICAgIHwgODUgICB8IDAgICAgfFxufCAzICAgIHwgODUgICAgfCAxMTQgIHwgMSAgICB8XG58IDQgICAgfCAxMTQgICB8IDE0MiAgfCAwICAgIHxcbnwgNSAgICB8IDE0MiAgIHwgMTcxICB8IDEgICAgfFxufCA2ICAgIHwgMTcxICAgfCAxOTkgIHwgMCAgICB8XG58IDcgICAgfCAxOTkgICB8IDIyOCAgfCAxICAgIHxcbnwgOCAgICB8IDIyOCAgIHwgMjU2ICB8IDAgICAgfFxufCA5ICAgIHwgMjU2ICAgfCAyODUgIHwgMSAgICB8XG58IDEwICAgfCAyODUgICB8IDMxNCAgfCAxICAgIHxcbnwgMTEgICB8IDMxNCAgIHwgMzQzICB8IDEgICAgfFxufCAxMiAgIHwgMzQzICAgfCAzNzEgIHwgMCAgICB8XG58IDEzICAgfCAzNzEgICB8IDQwMCAgfCAxICAgIHxcbnwgMTQgICB8IDQwMCAgIHwgNDI4ICB8IDAgICAgfFxufCAxNSAgIHwgNDI4ICAgfCA0NTcgIHwgMSAgICB8YFxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMDAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbXBvcnQge3NsaWRlcn0gZnJvbSBcIkBqYXNoa2VuYXMvaW5wdXRzXCJcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjAxIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gbW9vbihjYW52YXMsIGZyYWN0aW9uLCBjb2xvck9mVGhlU3VuLCBjb2xvck9mVGhlRGFya25lc3MpIHtcbiAgY29uc3QgICAgICAgbW9vblBoYXNlID0gTWF0aC50cnVuYyhmcmFjdGlvbiAqIDQpICUgNDsgLy8gJTQgc28gZnJhY3Rpb24gPT0gMSByZXN1bHRzIGluIHBoYXNlID09IDBcbiAgY29uc3QgICAgICAgICAgd2F4aW5nID0gbW9vblBoYXNlIDwgMjsgLy8gaW1wbGllcyB3YW5pbmcgPSAhd2F4aW5nXG4gIGNvbnN0ICAgICAgICBjcmVzY2VudCA9IG1vb25QaGFzZSAlIDIgPT0gMDtcbiAgY29uc3QgICAgICAgICBnaWJib3VzID0gIWNyZXNjZW50O1xuICBjb25zdCBiYWNrZ3JvdW5kQ29sb3IgPSB3YXhpbmcgPyBjb2xvck9mVGhlRGFya25lc3MgOiBjb2xvck9mVGhlU3VuO1xuICBjb25zdCAgICAgIGNvdmVyQ29sb3IgPSAobW9vblBoYXNlID09IDAgfHwgbW9vblBoYXNlID09IDMpID8gY29sb3JPZlRoZURhcmtuZXNzIDogY29sb3JPZlRoZVN1bjtcbiAgY29uc3QgICAgIHJldmVhbENvbG9yID0gd2F4aW5nID8gY29sb3JPZlRoZVN1biA6IGNvbG9yT2ZUaGVEYXJrbmVzcztcbiAgY29uc3QgcXVhcnRlckZyYWN0aW9uID0gNCAqIChmcmFjdGlvbiAlIC4yNSk7XG4gIGNvbnN0IHNuYWtlRXllQ2xvc2luZyA9IGdpYmJvdXMgID8gMCA6IDEgLSBxdWFydGVyRnJhY3Rpb247XG4gIGNvbnN0IHNuYWtlRXllT3BlbmluZyA9IGNyZXNjZW50ID8gMCA6ICAgICBxdWFydGVyRnJhY3Rpb247XG4gIFxuICAvLyBzZXQgdXAgY2xpcHBpbmcgcmVjdGFuZ2xlIGZvciB0aGUgY3Jlc2NlbnQgKHJpZ2h0KSBoYWxmXG4gIGNvbnN0IGRlZnMgPSBjYW52YXMuYXBwZW5kQ2hpbGQoRE9NLmVsZW1lbnQoXCJzdmc6ZGVmc1wiKSk7XG4gIGNvbnN0IHNob3dSaWdodEhhbGYgPSBET00udWlkKFwic2hvd1JpZ2h0SGFsZlwiKTsgLy8gdG8gZW5zdXJlIHVpZCBpcyB1bmlxdWUgYWNyb3NzIGFsbCBjZWxscyBhbmQgbm90ZWJvb2tzXG4gIGNvbnN0IGNsaXBwZXIgPSBkZWZzLmFwcGVuZENoaWxkKERPTS5lbGVtZW50KFwic3ZnOmNsaXBQYXRoXCIsIHtpZDogc2hvd1JpZ2h0SGFsZi5pZH0pKTsgIFxuICBjbGlwcGVyLmFwcGVuZENoaWxkKERPTS5lbGVtZW50KFwic3ZnOnJlY3RcIiwgICB7IHk6IC0xLCB3aWR0aDogXCI1MCVcIiwgaGVpZ2h0OiBcIjEwMCVcIn0pKTtcbiAgXG4gIC8vIGJvdHRvbSBsYXllcjsgc2hvd3Mgd2hlbiBub3RoaW5nIGlzIHBhaW50ZWQgb24gdG9wXG4gIGNhbnZhcy5hcHBlbmRDaGlsZChET00uZWxlbWVudChcInN2ZzpjaXJjbGVcIiwgIHsgZmlsbDogYmFja2dyb3VuZENvbG9yLCByOiAxfSkpO1xuICBcbiAgLy8gcGFpbnQgdGhlIG5leHQgbGF5ZXI6IHRoZSB3YXhpbmcgY3Jlc2NlbnQgYW5kIHdhbmluZyBnaWJib3VzXG4gIGNvbnN0IGdyb3VwID0gY2FudmFzLmFwcGVuZENoaWxkKERPTS5lbGVtZW50KFwic3ZnOmdcIiwgeyAnY2xpcC1wYXRoJzogc2hvd1JpZ2h0SGFsZiB9KSk7XG4gIGdyb3VwLmFwcGVuZENoaWxkKERPTS5lbGVtZW50KFwic3ZnOmNpcmNsZVwiLCAgIHsgZmlsbDogcmV2ZWFsQ29sb3IsICByOiAxIH0pKTtcbiAgZ3JvdXAuYXBwZW5kQ2hpbGQoRE9NLmVsZW1lbnQoXCJzdmc6ZWxsaXBzZVwiLCAgeyBmaWxsOiBjb3ZlckNvbG9yLCAgcnk6IDEsIHJ4OiBzbmFrZUV5ZUNsb3NpbmcgfSkpO1xuICBcbiAgLy8gZmluYWxseSwgdG9wIGl0IG9mZiB3aXRoIHRoZSBnaWJib3VzIGhhbGZcbiAgY2FudmFzLmFwcGVuZENoaWxkKERPTS5lbGVtZW50KFwic3ZnOmVsbGlwc2VcIiwgeyBmaWxsOiByZXZlYWxDb2xvciwgcnk6IDEsIHJ4OiBzbmFrZUV5ZU9wZW5pbmcgfSkpO1xuICBcbiAgcmV0dXJuIGNhbnZhcztcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjAyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZnVuY3Rpb24gdW5pdmVyc2UodywgY29sb3JPZlRoZVVuaXZlcnNlKSB7XG4gIHJldHVybiBET00uZWxlbWVudChcInN2ZzpzdmdcIiwge1xuICAgIHZpZXdCb3g6IFwiLTEgLTEgMiAyXCIsIFxuICAgIHdpZHRoOiAxMDAgKiB3ICsgXCIlXCIsIFxuICAgIHN0eWxlOiBcImJhY2tncm91bmQtY29sb3I6IFwiICsgY29sb3JPZlRoZVVuaXZlcnNlICsgXCI7XCJcbiAgfSk7XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InNvbGFyX3N5c3RlbSA9IFtcbiAgeyBuYW1lOiBcIlN1blwiLCAgICAgc3ltYm9sOiBcIuKKmVwiLCBSOiAwLCAgICAgICAgICAgICAgICByOiA0LCBzcGVlZDogMCwgcGhpMDogIDAsIG1vb25zOiBbXX0sICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VuXG4gIHsgbmFtZTogXCJNZXJjdXJ5XCIsIHN5bWJvbDogXCLimL9cIiwgUjogNDAqZmFjdG9yX3NpemUsICAgcjogMywgc3BlZWQ6IC04LCBwaGkwOiAgLTEyMCwgbW9vbnM6IFtdfSwgICAgICAgICAgICAgICAgICAgICAgIC8vIE1lcmN1cnlcbiAgeyBuYW1lOiBcIlZlbnVzXCIsICAgc3ltYm9sOiBcIuKZgFwiLCBSOiA3MCpmYWN0b3Jfc2l6ZSwgICByOiAzLCBzcGVlZDogLTMsIHBoaTA6IC01MCwgbW9vbnM6IFtdfSwgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVmVudXNcbiAgeyBuYW1lOiBcIkVhcnRoXCIsICAgc3ltYm9sOiBcIvCfnKhcIiwgUjogMTAwKmZhY3Rvcl9zaXplLCAgcjogMTIgLSAod2lkdGggPCA0MDApICogNiwgc3BlZWQ6IC1FYXJ0aF9zcGVlZCwgcGhpMDogYW5nbGVfOTAsIC8vIEVhcnRoXG4gICAgbW9vbnM6IFsgeyBuYW1lOiBcIk1vb25cIiwgc3ltYm9sOiBcIuKYvlwiLCAgUjogMjUqZmFjdG9yX3NpemUsIHI6ICAgNiAtICh3aWR0aCA8IDQwMCkgKiAzLCBzcGVlZDogLTIwLCBwaGkwOiA0MCB9LCAgICAgIC8vIHRoZSBNb29uXG4gICAgICAgICAgICAgeyBuYW1lOiBcIlN1bl9wYXRoXCIsICBSOiAxMDAqZmFjdG9yX3NpemUsICByOiAwLCBzcGVlZDogMCwgcGhpMDogMH0gXX0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWFydGgtU3VuIG9yYml0XG4gIHsgbmFtZTogXCJNYXJzXCIsIHN5bWJvbDogXCLimYJcIiwgICAgUjogMTUwKmZhY3Rvcl9zaXplLCAgcjogNiwgc3BlZWQ6IC0xLjEzLCBwaGkwOiAyMCwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcnNcbiAgICBtb29uczogWyB7IFI6ICAgMTIqZmFjdG9yX3NpemUgKyAod2lkdGg8NDAwKSAqIDYsICByOiAxLCBzcGVlZDogLTIwMCwgcGhpMDogIDI1IH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGhvYm9zXG4gICAgICAgICAgICAgeyBSOiAgIDIwKmZhY3Rvcl9zaXplICsgKHdpZHRoPDQwMCkgKiAxMCwgcjogMSwgc3BlZWQ6IC0xMDAsIHBoaTA6IDEwMCB9IF19LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlaW1vcyAgIFxuICB7IG5hbWU6IFwiSnVwaXRlclwiLCBzeW1ib2w6IFwi4pmDXCIsIFI6IDI4MCpmYWN0b3Jfc2l6ZSwgIHI6IDE1IC0gKHdpZHRoIDwgNDAwKSAqIDksIHNwZWVkOiAtMC41LCBwaGkwOiA2MCwgICAgICAgICAgICAgICAvLyBKdXBpdGVyXG4gICAgbW9vbnM6IFsgeyBSOiAgMjAqZmFjdG9yX3NpemUsIHI6IDEsICAgc3BlZWQ6IC0xMDAsIHBoaTA6IDAgfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElvXG4gICAgICAgICAgICAgeyBSOiAgMzIqZmFjdG9yX3NpemUsIHI6IDEsICAgc3BlZWQ6IC01MCwgcGhpMDogIDE1IH0sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV1cm9wYVxuICAgICAgICAgICAgIHsgUjogIDQ4KmZhY3Rvcl9zaXplLCByOiAxLCAgIHNwZWVkOiAtMjUsIHBoaTA6IDEwMCB9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHYW55bWVkZVxuICAgICAgICAgICAgIHsgUjogIDgwKmZhY3Rvcl9zaXplLCByOiAxLCAgIHNwZWVkOiAtMTAsIHBoaTA6IDMwMCB9IF19LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDYWxsaXN0byAgXG4gIHsgbmFtZTogXCJTYXR1cm5cIiwgc3ltYm9sOiBcIuKZhFwiLCAgUjogMzgwKmZhY3Rvcl9zaXplLCAgcjogOSAtICh3aWR0aCA8IDQwMCkgKiA0LCBzcGVlZDogLTAuMiwgcGhpMDogMTYwLCAgICAgICAgICAgICAgIC8vIFNhdHVyblxuICAgIG1vb25zOiBbIHsgUjogIDI4KmZhY3Rvcl9zaXplLCByOiAwLjUsIHNwZWVkOiAtNTAwLCBwaGkwOiAgMCB9LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTYXR1cm4gcmluZ3NcbiAgICAgICAgICAgICB7IFI6ICAzMCpmYWN0b3Jfc2l6ZSwgcjogMC41LCBzcGVlZDogLTQwMCwgcGhpMDogIDAgfSxcbiAgICAgICAgICAgICB7IFI6ICAzNipmYWN0b3Jfc2l6ZSwgcjogMC41LCBzcGVlZDogLTQwMCwgcGhpMDogIDAgfSxcbiAgICAgICAgICAgICB7IFI6ICAzOCpmYWN0b3Jfc2l6ZSwgcjogMC41LCBzcGVlZDogLTQwMCwgcGhpMDogIDAgfSxcbiAgICAgICAgICAgICBdfSwgICAgICAgIFxuXTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjA0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidHljaG5vbmljX21vZGVsID0gWyBcbiAgeyBuYW1lOiBcIkVhcnRoXCIsICAgc3ltYm9sOiBcIvCfnKhcIiwgUjogMCwgICAgICAgICAgICAgICByOiA4LCAgc3BlZWQ6IDAsIHBoaTA6IDAsICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVhcnRoXG4gICAgbW9vbnM6IFsgIFxuICB7IG5hbWU6IFwiTW9vblwiLCAgICBzeW1ib2w6IFwi4pi+XCIsIFI6IDEwKmZhY3Rvcl9zaXplLCAgcjogNCwgIHNwZWVkOiAtMjUsIHBoaTA6IDQwK2FuZ2xlXzkwIH0sICAgICAgICAgICAgICAvLyB0aGUgTW9vbiBcbiAgeyBuYW1lOiBcIlN1bl9wYXRoXCIsICAgICAgICAgICAgIFI6IDEwMCpmYWN0b3Jfc2l6ZSwgcjogMCwgIHNwZWVkOiAwLCBwaGkwOiAwfSwgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFYXJ0aC1TdW4gb3JiaXRcbiAgICAgICAgICBdfSwgICAgXG4gIHsgbmFtZTogXCJTdW5cIiwgICAgIHN5bWJvbDogXCLiiplcIiwgUjogMTAwKmZhY3Rvcl9zaXplLCByOiAxMCwgc3BlZWQ6IC1FYXJ0aF9zcGVlZCwgcGhpMDogIC1hbmdsZV85MCwgICAgICAgIC8vIFN1biBcbiAgICBtb29uczogWyBcbiAgeyBuYW1lOiBcIkVhcnRoX3BhdGhcIiwgICAgICAgICAgIFI6IDEwMCpmYWN0b3Jfc2l6ZSwgcjogMCwgIHNwZWVkOiAtMitFYXJ0aF9zcGVlZCwgcGhpMDogMH0sICAgICAgICAgICAgICAvLyBFYXJ0aC1TdW4gb3JiaXQgICAgICAgICAgIFxuICB7IG5hbWU6IFwiTWVyY3VyeVwiLCBzeW1ib2w6IFwi4pi/XCIsIFI6IDQwKmZhY3Rvcl9zaXplLCAgcjogMywgIHNwZWVkOiAtOCtFYXJ0aF9zcGVlZCwgcGhpMDogLTEyMCthbmdsZV85MH0sICAvLyBNZXJjdXJ5ICAgIFxuICB7IG5hbWU6IFwiVmVudXNcIiwgICBzeW1ib2w6IFwi4pmAXCIsIFI6IDcwKmZhY3Rvcl9zaXplLCAgcjogMywgIHNwZWVkOiAtMytFYXJ0aF9zcGVlZCwgcGhpMDogLTUwK2FuZ2xlXzkwfSwgICAvLyBWZW51c1xuICB7IG5hbWU6IFwiTWFyc1wiLCAgICBzeW1ib2w6IFwi4pmCXCIsIFI6IDE1MCpmYWN0b3Jfc2l6ZSwgcjogNiwgIHNwZWVkOiAtMS4xMytFYXJ0aF9zcGVlZCwgcGhpMDogMjArYW5nbGVfOTB9LCAvLyBNYXJzXG4gIHsgbmFtZTogXCJKdXBpdGVyXCIsIHN5bWJvbDogXCLimYNcIiwgUjogMjgwKmZhY3Rvcl9zaXplLCByOiAzLCAgc3BlZWQ6IC0wLjUrRWFydGhfc3BlZWQsIHBoaTA6IDYwK2FuZ2xlXzkwfSwgIC8vIEp1cGl0ZXJcbiAgeyBuYW1lOiBcIlNhdHVyblwiLCAgc3ltYm9sOiBcIuKZhFwiLCBSOiAzODAqZmFjdG9yX3NpemUsIHI6IDMsICBzcGVlZDogLTAuMitFYXJ0aF9zcGVlZCwgcGhpMDogMTYwK2FuZ2xlXzkwfSwgLy8gU2F0dXJuXG5dfV07XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6IkVhcnRoX3NwZWVkID0gMlxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMDYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJhbmdsZV85MCA9IDkwXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBoZWxpb2NlbnRyaWNfb3B0aW9ucyA9IGNvbHVtbnMoe1xuICBTdW5fcGF0aDogSW5wdXRzLnRvZ2dsZSh7bGFiZWw6ICdcIlN1biBwYXRoXCIgaW5oZXJpdGVkIGZyb20gVHljaG9uaWMgbW9kZWwnLCB2YWx1ZTogZmFsc2V9KSwgIFxuICBkaXNwbGF5X21vb25zOiBJbnB1dHMudG9nZ2xlKHtsYWJlbDogXCJEaXNwbGF5IHRoZSBtb29ucyBvZiBvdGhlciBwbGFuZXRzXCIsIHZhbHVlOiB0cnVlfSksXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMDgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYDxzdHlsZT5cbiAgI1N1biB7XG4gICAgICAgIHN0cm9rZTogIzY2NjtcbiAgICAgICAgZmlsbDogI2YyYmE0MjtcbiAgICAgIH1cblxuICAjTW9vbiB7XG4gICAgICAgIHN0cm9rZTogI2NjYztcbiAgICAgICAgZmlsbDogI2YyZTRkNjtcbiAgICAgIH1cblxuICAjTWFycyB7XG4gICAgICAgIGZpbGw6ICNmZjc3MDA7XG4gIH1cbiAgI0p1cGl0ZXIge1xuICAgICAgICBmaWxsOiAjZmZhNTAwO1xuICB9XG4gICNTYXR1cm4ge1xuICAgICAgICBmaWxsOiAjY2M5OTY2O1xuICB9XG4gICNFYXJ0aCB7XG4gICAgICAgIGZpbGw6ICMwMGE1ZmY7XG4gIH1cblxuICAucGxhbmV0IHtcbiAgICAgICAgc3Ryb2tlOiAjYWFjO1xuICAgICAgICBmaWxsOiAjODViNmM1O1xuICAgICAgfVxuICAubW9vbiB7XG4gICAgICAgIHN0cm9rZTogI2FhYztcbiAgICAgICAgZmlsbDogI2ZmZjtcbiAgICAgIH1cbiAgXG4gIC5vcmJpdCB7XG4gICAgICAgIHN0cm9rZTogI2FhYztcbiAgICAgICAgc3Ryb2tlLW9wYWNpdHk6IDAuODtcbiAgICAgICAgZmlsbDogdHJhbnNwYXJlbnQ7XG4gICAgICB9XG5cbiAgLm9yYml0X21vb24ge1xuICAgICAgICBzdHJva2U6ICNhYWE7XG4gICAgICAgIHN0cm9rZS1vcGFjaXR5OiAwLjU7XG4gICAgICAgIGZpbGw6IHRyYW5zcGFyZW50O1xuICAgICAgfSAgXG4gIFxuPC9zdHlsZT5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIwOSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Ii8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AYmNhcmRpZmYvb2JzZXJ2YWJsZS1jb2x1bW5zXG5jb2x1bW5zID0gKGFyZ3MpID0+IHtcbiAgY29uc3QgZm9ybSA9IGh0bWxgPGZvcm0+PC9mb3JtPmBcbiAgZm9ybS52YWx1ZSA9IHt9XG5cbiAgbGV0IGNvbHMgPSAwXG4gIGZvciAoY29uc3Qga2V5IGluIGFyZ3MpIHtcbiAgICBmb3JtLmFwcGVuZENoaWxkKGFyZ3Nba2V5XSlcbiAgICBjb2xzKytcbiAgfVxuICBcbiAgZm9ybS5zdHlsZSA9IGB3aWR0aDoyMDBweDsgZGlzcGxheTogZ3JpZDsgZ3JpZC1nYXA6IDEwcHggMTAwcHg7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogcmVwZWF0KCR7Y29sc30sIGF1dG8pOyBncmlkLWF1dG8tZmxvdzogcm93O2BcbiAgXG4gIGZvcm0ub25pbnB1dCA9ICgpID0+IHtcbiAgICBmb3JtLnZhbHVlID0gT2JqZWN0LmtleXMoYXJncykucmVkdWNlKChyZXN1bHQsIGtleSkgPT4ge1xuICAgICAgcmVzdWx0W2tleV0gPSBhcmdzW2tleV0udmFsdWVcbiAgICAgIHJldHVybiByZXN1bHRcbiAgICB9LCBBcnJheS5pc0FycmF5KGFyZ3MpID8gW10gOiB7fSlcbiAgfVxuICBmb3JtLm9uaW5wdXQoKVxuICBcbiAgcmV0dXJuIGZvcm1cbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjEwIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZmFjdG9yX3NpemUgPSBzeXN0ZW1fd2lkdGggLyBpbml0aWFsX3dpZHRoXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIxMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImhlaWdodCA9IHdpZHRoXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIxMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InN5c3RlbV93aWR0aCA9IE1hdGgubWluKGluaXRpYWxfd2lkdGgsTWF0aC5tYXgoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoIHx8IDAsIHdpbmRvdy5pbm5lcldpZHRoIHx8IDApLTIwKTtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjEzIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiaW5pdGlhbF93aWR0aCA9IDgwMDtcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjE0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZGlzcGxheV9jaGVja2JveCA9IHtcbiAgY29uc3QgaHRtbCA9IHN5c3RlbV9tb2RlbD8gaHRsLmh0bWxgJHt2aWV3b2YgaGVsaW9jZW50cmljX29wdGlvbnN9YDogaHRsLmh0bWxgPGRpdiBzdHlsZT1cImhlaWdodDo0MC41cHg7XCI+PC9kaXY+YDtcbiAgeWllbGQgaHRtbFxufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMTUiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2Ygc3lzdGVtX21vZGVsICA9IElucHV0cy5yYWRpbyhuZXcgTWFwKFtbXCJIZWxpb2NlbnRyaWMgbW9kZWxcIiwgMV0sIFtcIlR5Y2hvbmljIG1vZGVsIChnZW8taGVsaW9jZW50cmljKVwiLCAwXV0pLCB7dmFsdWU6IDEsIGxhYmVsOiBcIlN5c3RlbVwifSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjE2IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIHNwZWVkX2ZhY3RvciA9IHNsaWRlcih7XG4gIHRpdGxlOiBcIkFuaW1hdGlvbiBzcGVlZFwiLFxuICBtaW46IDAsXG4gIG1heDogMTAwLFxuICBzdGVwOiAxLFxuICB2YWx1ZTogMTUsXG4gIGZvcm1hdDogdiA9PiBodG1sYCR7diA9PSAwPyAnU3RvcHBlZCcgOiAodiA8IDIwPyAnU2xvdyAnIDogKHYgPCA2MD8gJ01lZGl1bScgOiAnRmFzdCcgKSApfSAoJHt2fSUpPGJyLz5gLFxufSk7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIxNyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBzY2FsZSA9IHNsaWRlcih7XG4gIG1pbjogMSwgXG4gIG1heDogMTAwLCBcbiAgc3RlcDogMSwgXG4gIHZhbHVlOiA5MCwgXG4gIHRpdGxlOiBcIlNjYWxlXCIsIFxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjE4IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiLy8gdyAgPSB3aW5kb3cuaW5uZXJXaWR0aCAvIDIgKyAod2lkdGggPCA0MDApICogMTY1XG53ICA9IHdpZHRoIC8gMiArICh3aWR0aCA8IDQwMCkgKiAxNjVcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjE5IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZm9udHNpemUgPSB7XG4gIGlmICh3aWR0aD40NTApe1xuICByZXR1cm4gMTg7XG59O1xuaWYgKHdpZHRoPDQ1MSl7XG4gIHJldHVybiAxNDtcbn07XG59XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIyMCIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vb25fb3JiaXQgPSB3aWR0aC8yLXdpZHRoLzEzKyh3aWR0aCA8IDQwMCkqMTM1O1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjEiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJlYXJ0aF9tb29uX2Rpc3QgPSBtb29uX29yYml0LzI7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIyMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImVhcnRoX3JhZGl1cyA9IGVhcnRoX21vb25fZGlzdC8xMjAuNzU7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIyMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6Im1vb25fcmFkaXVzID0gZWFydGhfcmFkaXVzLzMuNjY3O1xuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJodG1sYDxzdHlsZT5cbiNTVkdjaGFydCB7XG4gIG1hcmdpbjogICR7LTEwIC0gTnVtYmVyKHdpZHRoIDwgNDAwKSAqIDN9cHggMHB4ICR7LTgwICsgTnVtYmVyKHdpZHRoIDwgNDAwKSAqIDU2fXB4ICR7TnVtYmVyKHdpZHRoIDwgNDAwKSAqIDV9cHg7XG59XG48L3N0eWxlPmBcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjI1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIGRhcmtfYmFja2dyb3VuZCA9IElucHV0cy50b2dnbGUoe2xhYmVsOiBcIkRhcmsgYmFja2dyb3VuZFwiLCB2YWx1ZTogZmFsc2V9KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjYiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ7XG4gIC8vIEZ1bGwgc2NyZWVuIG1vZGUgbm90IHN1Y2Nlc3NmdWxseSB0ZXN0ZWQgd2l0aCBGaXJlZm94IHYuIDEyNSAoQXByaWwgMjAyNClcbiAgbGV0IGZpcmVmb3hBZ2VudCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkZpcmVmb3hcIikgPiAtMTsgXG4gIGlmKCFmaXJlZm94QWdlbnQpIHtcbiAgICAvLyBTZWUgYWxzbzogaHR0cHM6Ly9vYnNlcnZhYmxlaHEuY29tL0BtYm9zdG9jay9mdWxsc2NyZWVuLWNhbnZhc1xuICAgICAgcmV0dXJuIGh0bC5odG1sYDxidXR0b24gb25jbGljaz0keyh7Y3VycmVudFRhcmdldH0pID0+IHtcbiAgICAgIGNvbnN0IGN1cnJlbnRDZWxsID0gY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgY29uc3QgcHJldmlvdXNDZWxsID0gY3VycmVudENlbGwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICAgIHByZXZpb3VzQ2VsbC5yZXF1ZXN0RnVsbHNjcmVlbiA/IHByZXZpb3VzQ2VsbC5yZXF1ZXN0RnVsbHNjcmVlbigpXG4gICAgICAgIDogcHJldmlvdXNDZWxsLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuID8gcHJldmlvdXNDZWxsLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKClcbiAgICAgICAgOiAoKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoXCJGdWxsc2NyZWVuIEFQSSBub3Qgc3VwcG9ydGVkXCIpOyB9KTtcbiAgICB9fT5GdWxsIHNjcmVlbjwvYnV0dG9uPmBcbiAgfVxuICBlbHNlXG4gICAgcmV0dXJuIGh0bC5odG1sYDxici8+YFxufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjciLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJpbXBvcnQgeyBTY3J1YmJlciB9IGZyb20gXCJAbWJvc3RvY2svc2NydWJiZXJcIlxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJwcm9qZWN0aW9uID0gZDMuZ2VvT3J0aG9ncmFwaGljKCkuZml0U2l6ZShbd2lkdGgsIHdpZHRoXSwgeyB0eXBlOiBcIlNwaGVyZVwiIH0pLnJvdGF0ZShbLTU0LCAtMzZdKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMjkiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJkaXNwdXRlZCA9IGF3YWl0IEZpbGVBdHRhY2htZW50KFwiZGlzcHV0ZWQtdGVycml0b3JpZXMtMS5nZW9qc29uXCIpLmpzb24oKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMzAiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2Ygc2hvd0Rpc3B1dGVkID0gaHRtbGA8aW5wdXQgdHlwZT1jaGVja2JveD5gXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIzMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImZ1bmN0aW9uIGRyYWcocHJvamVjdGlvbikge1xuICBsZXQgdjAsIHEwLCByMDtcbiAgXG4gIGZ1bmN0aW9uIGRyYWdzdGFydGVkKCkge1xuICAgIHYwID0gdmVyc29yLmNhcnRlc2lhbihwcm9qZWN0aW9uLmludmVydChbZDMuZXZlbnQueCwgZDMuZXZlbnQueV0pKTtcbiAgICBxMCA9IHZlcnNvcihyMCA9IHByb2plY3Rpb24ucm90YXRlKCkpO1xuICB9XG4gIFxuICBmdW5jdGlvbiBkcmFnZ2VkKCkge1xuICAgIGNvbnN0IHYxID0gdmVyc29yLmNhcnRlc2lhbihwcm9qZWN0aW9uLnJvdGF0ZShyMCkuaW52ZXJ0KFtkMy5ldmVudC54LCBkMy5ldmVudC55XSkpO1xuICAgIGNvbnN0IHExID0gdmVyc29yLm11bHRpcGx5KHEwLCB2ZXJzb3IuZGVsdGEodjAsIHYxKSk7XG4gICAgcHJvamVjdGlvbi5yb3RhdGUodmVyc29yLnJvdGF0aW9uKHExKSk7XG4gIH1cbiAgXG4gIHJldHVybiBkMy5kcmFnKClcbiAgICAgIC5vbihcInN0YXJ0XCIsIGRyYWdzdGFydGVkKVxuICAgICAgLm9uKFwiZHJhZ1wiLCBkcmFnZ2VkKTtcbn1cbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjMyIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZ3JhdGljdWxlID0gZDMuZ2VvR3JhdGljdWxlKCkuc3RlcE1pbm9yKFszNiwzNl0pLnN0ZXBNYWpvcihbMzYsMzZdKSgpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIzMyIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImdyYXRpY3VsZS5jb29yZGluYXRlcyA9IGdyYXRpY3VsZS5jb29yZGluYXRlcy5tYXAoXG4gIGkgPT4gaS5tYXAoaiA9PiBqLm1hcCgoaywgaW5kZXgsIGFycikgPT4gaS5sZW5ndGggPT09IDMgJiYgaW5kZXggPT09IDAgPyBrIC0gMTggOiBrKSlcbilcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjM0IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiY291bnRyaWVzID0gZmV0Y2goXG4gIFwiaHR0cHM6Ly91bnBrZy5jb20vdmlzaW9uc2NhcnRvLXdvcmxkLWF0bGFzQDAuMC42L3dvcmxkLzUwbV9jb3VudHJpZXMuZ2VvanNvblwiXG4pLnRoZW4oZCA9PiBkLmpzb24oKSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjM1IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoid29ybGQgPSBmZXRjaChcbiAgXCJodHRwczovL3VucGtnLmNvbS92aXNpb25zY2FydG8td29ybGQtYXRsYXNAMC4wLjYvd29ybGQvNTBtLmpzb25cIlxuKS50aGVuKGQgPT4gZC5qc29uKCkpXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIzNiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZlcnNvciA9IHJlcXVpcmUoXCJ2ZXJzb3JAMC4wLjNcIilcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMjM3IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiZDMgPSByZXF1aXJlKFwiZDNANVwiLCBcImQzLWdlb0AxXCIsIFwiZDMtZ2VvLXByb2plY3Rpb25AMlwiKVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0yMzgiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiIvLyBDb3B5cmlnaHQgMjAyMSwgT2JzZXJ2YWJsZSBJbmMuXG4vLyBSZWxlYXNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQGQzL2NvbG9yLWxlZ2VuZFxuZnVuY3Rpb24gU3dhdGNoZXMoY29sb3IsIHtcbiAgY29sdW1ucyA9IG51bGwsXG4gIGZvcm1hdCxcbiAgdW5rbm93bjogZm9ybWF0VW5rbm93bixcbiAgc3dhdGNoU2l6ZSA9IDE1LFxuICBzd2F0Y2hXaWR0aCA9IHN3YXRjaFNpemUsXG4gIHN3YXRjaEhlaWdodCA9IHN3YXRjaFNpemUsXG4gIG1hcmdpbkxlZnQgPSAwXG59ID0ge30pIHtcbiAgY29uc3QgaWQgPSBgLXN3YXRjaGVzLSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygxNikuc2xpY2UoMil9YDtcbiAgY29uc3QgdW5rbm93biA9IGZvcm1hdFVua25vd24gPT0gbnVsbCA/IHVuZGVmaW5lZCA6IGNvbG9yLnVua25vd24oKTtcbiAgY29uc3QgdW5rbm93bnMgPSB1bmtub3duID09IG51bGwgfHwgdW5rbm93biA9PT0gZDMuc2NhbGVJbXBsaWNpdCA/IFtdIDogW3Vua25vd25dO1xuICBjb25zdCBkb21haW4gPSBjb2xvci5kb21haW4oKS5jb25jYXQodW5rbm93bnMpO1xuICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIGZvcm1hdCA9IHggPT4geCA9PT0gdW5rbm93biA/IGZvcm1hdFVua25vd24gOiB4O1xuXG4gIGZ1bmN0aW9uIGVudGl0eShjaGFyYWN0ZXIpIHtcbiAgICByZXR1cm4gYCYjJHtjaGFyYWN0ZXIuY2hhckNvZGVBdCgwKS50b1N0cmluZygpfTtgO1xuICB9XG5cbiAgaWYgKGNvbHVtbnMgIT09IG51bGwpIHJldHVybiBodGwuaHRtbGA8ZGl2IHN0eWxlPVwiZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgbWFyZ2luLWxlZnQ6ICR7K21hcmdpbkxlZnR9cHg7IG1pbi1oZWlnaHQ6IDMzcHg7IGZvbnQ6IDEwcHggc2Fucy1zZXJpZjtcIj5cbiAgPHN0eWxlPlxuXG4uJHtpZH0taXRlbSB7XG4gIGJyZWFrLWluc2lkZTogYXZvaWQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHBhZGRpbmctYm90dG9tOiAxcHg7XG59XG5cbi4ke2lkfS1sYWJlbCB7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xuICBtYXgtd2lkdGg6IGNhbGMoMTAwJSAtICR7K3N3YXRjaFdpZHRofXB4IC0gMC41ZW0pO1xufVxuXG4uJHtpZH0tc3dhdGNoIHtcbiAgd2lkdGg6ICR7K3N3YXRjaFdpZHRofXB4O1xuICBoZWlnaHQ6ICR7K3N3YXRjaEhlaWdodH1weDtcbiAgbWFyZ2luOiAwIDAuNWVtIDAgMDtcbn1cblxuICA8L3N0eWxlPlxuICA8ZGl2IHN0eWxlPSR7e3dpZHRoOiBcIjEwMCVcIiwgY29sdW1uc319PiR7ZG9tYWluLm1hcCh2YWx1ZSA9PiB7XG4gICAgY29uc3QgbGFiZWwgPSBgJHtmb3JtYXQodmFsdWUpfWA7XG4gICAgcmV0dXJuIGh0bC5odG1sYDxkaXYgY2xhc3M9JHtpZH0taXRlbT5cbiAgICAgIDxkaXYgY2xhc3M9JHtpZH0tc3dhdGNoIHN0eWxlPSR7e2JhY2tncm91bmQ6IGNvbG9yKHZhbHVlKX19PjwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz0ke2lkfS1sYWJlbCB0aXRsZT0ke2xhYmVsfT4ke2xhYmVsfTwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH0pfVxuICA8L2Rpdj5cbjwvZGl2PmA7XG5cbiAgcmV0dXJuIGh0bC5odG1sYDxkaXYgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyOyBtaW4taGVpZ2h0OiAzM3B4OyBtYXJnaW4tbGVmdDogJHsrbWFyZ2luTGVmdH1weDsgZm9udDogMTBweCBzYW5zLXNlcmlmO1wiPlxuICA8c3R5bGU+XG5cbi4ke2lkfSB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBtYXJnaW4tcmlnaHQ6IDFlbTtcbn1cblxuLiR7aWR9OjpiZWZvcmUge1xuICBjb250ZW50OiBcIlwiO1xuICB3aWR0aDogJHsrc3dhdGNoV2lkdGh9cHg7XG4gIGhlaWdodDogJHsrc3dhdGNoSGVpZ2h0fXB4O1xuICBtYXJnaW4tcmlnaHQ6IDAuNWVtO1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1jb2xvcik7XG59XG5cbiAgPC9zdHlsZT5cbiAgPGRpdj4ke2RvbWFpbi5tYXAodmFsdWUgPT4gaHRsLmh0bWxgPHNwYW4gY2xhc3M9XCIke2lkfVwiIHN0eWxlPVwiLS1jb2xvcjogJHtjb2xvcih2YWx1ZSl9XCI+JHtmb3JtYXQodmFsdWUpfTwvc3Bhbj5gKX08L2Rpdj5gO1xufVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdtb29uRnJhY3Rpb24nKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnaGVsaW9jZW50cmljX29wdGlvbnMnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc3lzdGVtX21vZGVsJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ3NwZWVkX2ZhY3RvcicpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdzY2FsZScpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdkYXJrX2JhY2tncm91bmQnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnc2hvd0Rpc3B1dGVkJykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../blog/dec/al";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/maptv\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="maptv/maptv.github.io" data-repo-id="R_kgDOKbInnA" data-category="General" data-category-id="" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark"><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb239" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> 'Decalendar'</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> 'Martin Laptev'</span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span><span class="co"> html</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="an">echo:</span><span class="co"> false</span></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="an">observable:</span><span class="co"> 'https://observablehq.com/@dec/al'</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-12"><a href="#cb239-12" aria-hidden="true" tabindex="-1"></a><span class="in">md`# Decalendar`</span></span>
<span id="cb239-13"><a href="#cb239-13" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-14"><a href="#cb239-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-17"><a href="#cb239-17" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-18"><a href="#cb239-18" aria-hidden="true" tabindex="-1"></a><span class="in">md`The table below shows the current Zone 0 [Timestamp](https://en.wikipedia.org/wiki/Timestamp#:~:text=a%20sequence%20of%20characters%20or%20encoded%20information%20identifying%20when%20a%20certain%20event%20occurred) and the [Leap Cycle](https://en.wikipedia.org/wiki/Solar_cycle_%28calendar%29) Length of twelve Dec calendars (decalendars), sorted by [Epoch](https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era). Dec is a [measurement system](https://en.wikipedia.org/wiki/System_of_units_of_measurement#:~:text=a%20collection%20of%20units%20of%20measurement%20and%20rules%20relating%20them%20to%20each%20other) that [I](https://maptv.github.io) created to measure‚è≥time,üìçposition,üß≠orientation,üìêangles, andüîÑcycles in [turns](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=a%20unit%20of%20plane%20angle%20measurement%20equal%20to%202%CF%80%C2%A0radians%2C%20360%C2%A0degrees) ([${tex`\tau`}](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=the%20Greek%20letter,to%20one%20turn)) instead of months, weeks, hours, minutes, seconds, and degrees.`</span></span>
<span id="cb239-19"><a href="#cb239-19" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-20"><a href="#cb239-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-23"><a href="#cb239-23" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-24"><a href="#cb239-24" aria-hidden="true" tabindex="-1"></a><span class="in">md`| Calendar     | Timestamp     | Leap Cycle Length                                    | Epoch          | Symbol | </span></span>
<span id="cb239-25"><a href="#cb239-25" aria-hidden="true" tabindex="-1"></a><span class="in">| ------------ | ------------- | ---------------------------------------------------- | -------------- | --- | </span></span>
<span id="cb239-26"><a href="#cb239-26" aria-hidden="true" tabindex="-1"></a><span class="in">| Thai         | `${thaiDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${thaiEpoch}` | üáπüá≠  |</span></span>
<span id="cb239-27"><a href="#cb239-27" aria-hidden="true" tabindex="-1"></a><span class="in">| Nepali       | `${nepaDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${nepaEpoch}` | üá≥üáµ  |</span></span>
<span id="cb239-28"><a href="#cb239-28" aria-hidden="true" tabindex="-1"></a><span class="in">| Gregorian    | `${gregDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `0`            | Ô∏é‚ôÅ   |</span></span>
<span id="cb239-29"><a href="#cb239-29" aria-hidden="true" tabindex="-1"></a><span class="in">| Ethiopian    | `${ethiDeco}` | &lt;code&gt;365 x 3&amp;nbsp;&amp;nbsp; + 366 x 1&lt;/code&gt;           | `${ethiEpoch}` | Ô∏éüá™üáπ  |</span></span>
<span id="cb239-30"><a href="#cb239-30" aria-hidden="true" tabindex="-1"></a><span class="in">| Indian       | `${indiDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${indiEpoch}` | üáÆüá≥  |</span></span>
<span id="cb239-31"><a href="#cb239-31" aria-hidden="true" tabindex="-1"></a><span class="in">| Bengali      | `${bengDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${bengEpoch}` | üáßüá©Ô∏é  |</span></span>
<span id="cb239-32"><a href="#cb239-32" aria-hidden="true" tabindex="-1"></a><span class="in">| Solar Hijiri | `${soHiDeco}` | &lt;code&gt;365 x 25&amp;nbsp; + 366 x 8&lt;/code&gt;                | `${sohiEpoch}` | ‚ò´   | </span></span>
<span id="cb239-33"><a href="#cb239-33" aria-hidden="true" tabindex="-1"></a><span class="in">| Lunar Hijiri | `${luHiDeco}` | &lt;code&gt;354 x 19&amp;nbsp; + 355 x 11&lt;/code&gt;               | `${luhiEpoch}` | ‚ò™   | </span></span>
<span id="cb239-34"><a href="#cb239-34" aria-hidden="true" tabindex="-1"></a><span class="in">| Minguo       | `${mingDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${mingEpoch}` | üáπüáº  |</span></span>
<span id="cb239-35"><a href="#cb239-35" aria-hidden="true" tabindex="-1"></a><span class="in">| Japanese     | `${japaDeco}` | &lt;code&gt;365 x 303 + 366 x 97&lt;/code&gt;                    | `${japaEpoch}` | üáØüáµÔ∏é  |</span></span>
<span id="cb239-36"><a href="#cb239-36" aria-hidden="true" tabindex="-1"></a><span class="in">| Martian      | `${marsDeco}` | &lt;code&gt;668 x 8&amp;nbsp;&amp;nbsp; + 669 x 13&lt;/code&gt;          | `${marsEpochDote.toFixed(5)}` | ‚ôÇ   | </span></span>
<span id="cb239-37"><a href="#cb239-37" aria-hidden="true" tabindex="-1"></a><span class="in">| Lunar        | `${moonDeco}` | &lt;code&gt;28 &amp;nbsp;x 7&amp;nbsp;&amp;nbsp; + 29&amp;nbsp; x 9&lt;/code&gt; | `${moonEpoch.toFixed(5)}` | ‚òæ   | `</span></span>
<span id="cb239-38"><a href="#cb239-38" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-39"><a href="#cb239-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-42"><a href="#cb239-42" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-43"><a href="#cb239-43" aria-hidden="true" tabindex="-1"></a><span class="in">md`The timestamp format in the table above is described in the [Dec calculations (Decalc) notebook](/@dec/alc) and can be summarized as `year+dday.dday-z`, where `year` is the current year, `dday.dday` is the [decidays](https://en.wikipedia.org/wiki/Decimal_time#Fractional_days:~:text=dividing%20the%20day%20into%2010%20decidays) since the year started, and `z` is the time zone.`</span></span>
<span id="cb239-44"><a href="#cb239-44" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-45"><a href="#cb239-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-48"><a href="#cb239-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-49"><a href="#cb239-49" aria-hidden="true" tabindex="-1"></a><span class="in">md`The map below shows countries where the Gregorian calendar is not the only official calendar. Even though it emphasizes Gregorian calendar alternatives, the map demonstrates the near total dominance of the Gregorian calendar.`</span></span>
<span id="cb239-50"><a href="#cb239-50" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-51"><a href="#cb239-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-54"><a href="#cb239-54" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-55"><a href="#cb239-55" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@mikima/wikipedia-grey-green-orthographic-projections-maps-gener/2?collection=@mikima/wikipedia-locator-maps</span></span>
<span id="cb239-56"><a href="#cb239-56" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/d/ae1fd7593b805eeb</span></span>
<span id="cb239-57"><a href="#cb239-57" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/d/87ba6f2ef516421a</span></span>
<span id="cb239-58"><a href="#cb239-58" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@bayre/svg-swatches</span></span>
<span id="cb239-59"><a href="#cb239-59" aria-hidden="true" tabindex="-1"></a><span class="in">globe = {</span></span>
<span id="cb239-60"><a href="#cb239-60" aria-hidden="true" tabindex="-1"></a><span class="in">  const div = d3</span></span>
<span id="cb239-61"><a href="#cb239-61" aria-hidden="true" tabindex="-1"></a><span class="in">    .create("div")</span></span>
<span id="cb239-62"><a href="#cb239-62" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("width", width)</span></span>
<span id="cb239-63"><a href="#cb239-63" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("height", width)</span></span>
<span id="cb239-64"><a href="#cb239-64" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("position", "static");</span></span>
<span id="cb239-65"><a href="#cb239-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-66"><a href="#cb239-66" aria-hidden="true" tabindex="-1"></a><span class="in">  const svg = div</span></span>
<span id="cb239-67"><a href="#cb239-67" aria-hidden="true" tabindex="-1"></a><span class="in">    .append("svg")</span></span>
<span id="cb239-68"><a href="#cb239-68" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("width", width)</span></span>
<span id="cb239-69"><a href="#cb239-69" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("height", width)</span></span>
<span id="cb239-70"><a href="#cb239-70" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("margin-top", "20px")</span></span>
<span id="cb239-71"><a href="#cb239-71" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("margin-bottom", `-${width / 80}px`)</span></span>
<span id="cb239-72"><a href="#cb239-72" aria-hidden="true" tabindex="-1"></a><span class="in">    // .attr("viewBox", `0 0 ${width &lt; 700 ? width * 1.5 : width} ${width &lt; 700 ? width * 1.5 : width}`)</span></span>
<span id="cb239-73"><a href="#cb239-73" aria-hidden="true" tabindex="-1"></a><span class="in">    // .style("border", "solid 1px black");</span></span>
<span id="cb239-74"><a href="#cb239-74" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-75"><a href="#cb239-75" aria-hidden="true" tabindex="-1"></a><span class="in">  let p1 = [0,0];</span></span>
<span id="cb239-76"><a href="#cb239-76" aria-hidden="true" tabindex="-1"></a><span class="in">  let p2 = [0,0];</span></span>
<span id="cb239-77"><a href="#cb239-77" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-78"><a href="#cb239-78" aria-hidden="true" tabindex="-1"></a><span class="in">  countries.features.forEach(d =&gt; {d.selected = false})</span></span>
<span id="cb239-79"><a href="#cb239-79" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-80"><a href="#cb239-80" aria-hidden="true" tabindex="-1"></a><span class="in">  let path = d3.geoPath(projection)</span></span>
<span id="cb239-81"><a href="#cb239-81" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-82"><a href="#cb239-82" aria-hidden="true" tabindex="-1"></a><span class="in">  // create the radial gradient</span></span>
<span id="cb239-83"><a href="#cb239-83" aria-hidden="true" tabindex="-1"></a><span class="in">  let radialGradient = svg.append("defs")</span></span>
<span id="cb239-84"><a href="#cb239-84" aria-hidden="true" tabindex="-1"></a><span class="in">    .append("radialGradient")</span></span>
<span id="cb239-85"><a href="#cb239-85" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cx", width * 0.48)</span></span>
<span id="cb239-86"><a href="#cb239-86" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cy", width * 0.35)</span></span>
<span id="cb239-87"><a href="#cb239-87" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("r", width * 0.64)</span></span>
<span id="cb239-88"><a href="#cb239-88" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("id", "grSea")</span></span>
<span id="cb239-89"><a href="#cb239-89" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("gradientUnits","userSpaceOnUse")</span></span>
<span id="cb239-90"><a href="#cb239-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-91"><a href="#cb239-91" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-92"><a href="#cb239-92" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0")</span></span>
<span id="cb239-93"><a href="#cb239-93" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-94"><a href="#cb239-94" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0)</span></span>
<span id="cb239-95"><a href="#cb239-95" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-96"><a href="#cb239-96" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-97"><a href="#cb239-97" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0.5")</span></span>
<span id="cb239-98"><a href="#cb239-98" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-99"><a href="#cb239-99" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.006)</span></span>
<span id="cb239-100"><a href="#cb239-100" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-101"><a href="#cb239-101" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-102"><a href="#cb239-102" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0.56")</span></span>
<span id="cb239-103"><a href="#cb239-103" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-104"><a href="#cb239-104" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.009)</span></span>
<span id="cb239-105"><a href="#cb239-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-106"><a href="#cb239-106" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-107"><a href="#cb239-107" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0.64")</span></span>
<span id="cb239-108"><a href="#cb239-108" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-109"><a href="#cb239-109" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.017)</span></span>
<span id="cb239-110"><a href="#cb239-110" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-111"><a href="#cb239-111" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-112"><a href="#cb239-112" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0.7")</span></span>
<span id="cb239-113"><a href="#cb239-113" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-114"><a href="#cb239-114" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.039)</span></span>
<span id="cb239-115"><a href="#cb239-115" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-116"><a href="#cb239-116" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-117"><a href="#cb239-117" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "0.74")</span></span>
<span id="cb239-118"><a href="#cb239-118" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-119"><a href="#cb239-119" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.055)</span></span>
<span id="cb239-120"><a href="#cb239-120" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-121"><a href="#cb239-121" aria-hidden="true" tabindex="-1"></a><span class="in">  radialGradient.append("stop")</span></span>
<span id="cb239-122"><a href="#cb239-122" aria-hidden="true" tabindex="-1"></a><span class="in">        .attr("offset", "1")</span></span>
<span id="cb239-123"><a href="#cb239-123" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-color", "#000000") </span></span>
<span id="cb239-124"><a href="#cb239-124" aria-hidden="true" tabindex="-1"></a><span class="in">        .style("stop-opacity", 0.142)</span></span>
<span id="cb239-125"><a href="#cb239-125" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-126"><a href="#cb239-126" aria-hidden="true" tabindex="-1"></a><span class="in">  // create background cicle</span></span>
<span id="cb239-127"><a href="#cb239-127" aria-hidden="true" tabindex="-1"></a><span class="in">  svg.append("circle")</span></span>
<span id="cb239-128"><a href="#cb239-128" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cx", width/2)</span></span>
<span id="cb239-129"><a href="#cb239-129" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cy", width/2)</span></span>
<span id="cb239-130"><a href="#cb239-130" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("r",width/2)</span></span>
<span id="cb239-131"><a href="#cb239-131" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", "#C7E7FB")</span></span>
<span id="cb239-132"><a href="#cb239-132" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke", "none")</span></span>
<span id="cb239-133"><a href="#cb239-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-134"><a href="#cb239-134" aria-hidden="true" tabindex="-1"></a><span class="in">  const luhiGreg = [</span></span>
<span id="cb239-135"><a href="#cb239-135" aria-hidden="true" tabindex="-1"></a><span class="in">    "Afghanistan",</span></span>
<span id="cb239-136"><a href="#cb239-136" aria-hidden="true" tabindex="-1"></a><span class="in">    "Libya",</span></span>
<span id="cb239-137"><a href="#cb239-137" aria-hidden="true" tabindex="-1"></a><span class="in">    "Yemen",</span></span>
<span id="cb239-138"><a href="#cb239-138" aria-hidden="true" tabindex="-1"></a><span class="in">    "Algeria",</span></span>
<span id="cb239-139"><a href="#cb239-139" aria-hidden="true" tabindex="-1"></a><span class="in">    "Saudi Arabia",</span></span>
<span id="cb239-140"><a href="#cb239-140" aria-hidden="true" tabindex="-1"></a><span class="in">    "Egypt",</span></span>
<span id="cb239-141"><a href="#cb239-141" aria-hidden="true" tabindex="-1"></a><span class="in">    "Somalia",</span></span>
<span id="cb239-142"><a href="#cb239-142" aria-hidden="true" tabindex="-1"></a><span class="in">    "Iraq",</span></span>
<span id="cb239-143"><a href="#cb239-143" aria-hidden="true" tabindex="-1"></a><span class="in">    "Jordan",</span></span>
<span id="cb239-144"><a href="#cb239-144" aria-hidden="true" tabindex="-1"></a><span class="in">    "Libya",</span></span>
<span id="cb239-145"><a href="#cb239-145" aria-hidden="true" tabindex="-1"></a><span class="in">    "Mauritania",</span></span>
<span id="cb239-146"><a href="#cb239-146" aria-hidden="true" tabindex="-1"></a><span class="in">    "Morocco",</span></span>
<span id="cb239-147"><a href="#cb239-147" aria-hidden="true" tabindex="-1"></a><span class="in">    "Oman",</span></span>
<span id="cb239-148"><a href="#cb239-148" aria-hidden="true" tabindex="-1"></a><span class="in">    "Pakistan",</span></span>
<span id="cb239-149"><a href="#cb239-149" aria-hidden="true" tabindex="-1"></a><span class="in">    "Saudi Arabia",</span></span>
<span id="cb239-150"><a href="#cb239-150" aria-hidden="true" tabindex="-1"></a><span class="in">    "Somalia",</span></span>
<span id="cb239-151"><a href="#cb239-151" aria-hidden="true" tabindex="-1"></a><span class="in">    "Tunisia",</span></span>
<span id="cb239-152"><a href="#cb239-152" aria-hidden="true" tabindex="-1"></a><span class="in">    "United Arab Emirates",</span></span>
<span id="cb239-153"><a href="#cb239-153" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb239-154"><a href="#cb239-154" aria-hidden="true" tabindex="-1"></a><span class="in">  const colors = d3.schemeCategory10.concat(d3.schemeDark2);</span></span>
<span id="cb239-155"><a href="#cb239-155" aria-hidden="true" tabindex="-1"></a><span class="in">  const countriesPath = svg.append("g")</span></span>
<span id="cb239-156"><a href="#cb239-156" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("id", "countries")</span></span>
<span id="cb239-157"><a href="#cb239-157" aria-hidden="true" tabindex="-1"></a><span class="in">      .selectAll("path")</span></span>
<span id="cb239-158"><a href="#cb239-158" aria-hidden="true" tabindex="-1"></a><span class="in">      .data(countries.features)</span></span>
<span id="cb239-159"><a href="#cb239-159" aria-hidden="true" tabindex="-1"></a><span class="in">      .join("path")</span></span>
<span id="cb239-160"><a href="#cb239-160" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("id", d=&gt;d.properties.formal_en)</span></span>
<span id="cb239-161"><a href="#cb239-161" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("d", path)</span></span>
<span id="cb239-162"><a href="#cb239-162" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("stroke", "#656565")</span></span>
<span id="cb239-163"><a href="#cb239-163" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("fill", d =&gt; d.selected ? "#C12838" : "#FDFBEA")</span></span>
<span id="cb239-164"><a href="#cb239-164" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("fill", d =&gt; luhiGreg.includes(d.properties.name_en) ? colors[0] : d.properties.name_en === "Ethiopia" ? colors[1] : d.properties.name_en === "Israel" ? colors[2] : d.properties.name_en === "Iran" ? colors[3] : d.properties.name_en === "India" ? colors[4] : d.properties.name_en === "Nepal" ? colors[5] : d.properties.name_en === "Bangladesh" ? colors[6] : d.properties.name_en === "Myanmar" ? colors[7] : d.properties.name_en === "Thailand" ? colors[8] : d.properties.name_en === "Taiwan" ? colors [9] : d.properties.name_en === "North Korea" ? colors[10] : d.properties.name_en === "Japan" ? colors[11] : "#FDFBEA")</span></span>
<span id="cb239-165"><a href="#cb239-165" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("stroke-width", d =&gt; d.selected ? "2" : "1")</span></span>
<span id="cb239-166"><a href="#cb239-166" aria-hidden="true" tabindex="-1"></a><span class="in">      .on("click", function(d){</span></span>
<span id="cb239-167"><a href="#cb239-167" aria-hidden="true" tabindex="-1"></a><span class="in">        // invert selection</span></span>
<span id="cb239-168"><a href="#cb239-168" aria-hidden="true" tabindex="-1"></a><span class="in">        d.selected = !d.selected;</span></span>
<span id="cb239-169"><a href="#cb239-169" aria-hidden="true" tabindex="-1"></a><span class="in">        console.log(d);</span></span>
<span id="cb239-170"><a href="#cb239-170" aria-hidden="true" tabindex="-1"></a><span class="in">        countriesPath.attr("fill", d =&gt; luhiGreg.includes(d.properties.name_en) ? colors[0] : d.properties.name_en === "Ethiopia" ? colors[1] : d.properties.name_en === "Israel" ? colors[2] : d.properties.name_en === "Iran" ? colors[3] : d.properties.name_en === "India" ? colors[4] : d.properties.name_en === "Nepal" ? colors[5] : d.properties.name_en === "Bangladesh" ? colors[6] : d.properties.name_en === "Myanmar" ? colors[7] : d.properties.name_en === "Thailand" ? colors[8] : d.properties.name_en === "Taiwan" ? colors [9] : d.properties.name_en === "North Korea" ? colors[10] : d.properties.name_en === "Japan" ? colors[11] : "#FDFBEA")</span></span>
<span id="cb239-171"><a href="#cb239-171" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("stroke", d =&gt; d.selected ? "#C12838" : "#656565")</span></span>
<span id="cb239-172"><a href="#cb239-172" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("stroke-width", d =&gt; d.selected ? "2" : "1")</span></span>
<span id="cb239-173"><a href="#cb239-173" aria-hidden="true" tabindex="-1"></a><span class="in">          .each(function(d) {</span></span>
<span id="cb239-174"><a href="#cb239-174" aria-hidden="true" tabindex="-1"></a><span class="in">                              if(d.selected){</span></span>
<span id="cb239-175"><a href="#cb239-175" aria-hidden="true" tabindex="-1"></a><span class="in">                                 // bring on top</span></span>
<span id="cb239-176"><a href="#cb239-176" aria-hidden="true" tabindex="-1"></a><span class="in">                                 d3.select(this).raise()</span></span>
<span id="cb239-177"><a href="#cb239-177" aria-hidden="true" tabindex="-1"></a><span class="in">                              }</span></span>
<span id="cb239-178"><a href="#cb239-178" aria-hidden="true" tabindex="-1"></a><span class="in">                            })</span></span>
<span id="cb239-179"><a href="#cb239-179" aria-hidden="true" tabindex="-1"></a><span class="in">        // show disputed zones</span></span>
<span id="cb239-180"><a href="#cb239-180" aria-hidden="true" tabindex="-1"></a><span class="in">        if(showDisputed){</span></span>
<span id="cb239-181"><a href="#cb239-181" aria-hidden="true" tabindex="-1"></a><span class="in">          const selected = d.properties.adm0_a3;</span></span>
<span id="cb239-182"><a href="#cb239-182" aria-hidden="true" tabindex="-1"></a><span class="in">          disputedPath.attr("display","none");</span></span>
<span id="cb239-183"><a href="#cb239-183" aria-hidden="true" tabindex="-1"></a><span class="in">          disputedPath.filter(e =&gt; e.properties['disputed-territories_Claimants_ISO'].includes(selected))</span></span>
<span id="cb239-184"><a href="#cb239-184" aria-hidden="true" tabindex="-1"></a><span class="in">            .attr("display", d=&gt;{console.log(d); return null})</span></span>
<span id="cb239-185"><a href="#cb239-185" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb239-186"><a href="#cb239-186" aria-hidden="true" tabindex="-1"></a><span class="in">        if(showDisputed){</span></span>
<span id="cb239-187"><a href="#cb239-187" aria-hidden="true" tabindex="-1"></a><span class="in">          const selected = d.properties.adm0_a3;</span></span>
<span id="cb239-188"><a href="#cb239-188" aria-hidden="true" tabindex="-1"></a><span class="in">          disputedPath.attr("display","none");</span></span>
<span id="cb239-189"><a href="#cb239-189" aria-hidden="true" tabindex="-1"></a><span class="in">          disputedPath.filter(e =&gt; e.properties['disputed-territories_Claimants_ISO'].includes(selected))</span></span>
<span id="cb239-190"><a href="#cb239-190" aria-hidden="true" tabindex="-1"></a><span class="in">            .attr("display", d=&gt;{console.log(d); return null})</span></span>
<span id="cb239-191"><a href="#cb239-191" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb239-192"><a href="#cb239-192" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb239-193"><a href="#cb239-193" aria-hidden="true" tabindex="-1"></a><span class="in">        // set up transition</span></span>
<span id="cb239-194"><a href="#cb239-194" aria-hidden="true" tabindex="-1"></a><span class="in">        let newCentroid = d3.geoCentroid(d).map(v =&gt; -v)</span></span>
<span id="cb239-195"><a href="#cb239-195" aria-hidden="true" tabindex="-1"></a><span class="in">        </span></span>
<span id="cb239-196"><a href="#cb239-196" aria-hidden="true" tabindex="-1"></a><span class="in">        projection.rotate(newCentroid);</span></span>
<span id="cb239-197"><a href="#cb239-197" aria-hidden="true" tabindex="-1"></a><span class="in">        path = d3.geoPath(projection);</span></span>
<span id="cb239-198"><a href="#cb239-198" aria-hidden="true" tabindex="-1"></a><span class="in">        graticulePath.attr("d", path);</span></span>
<span id="cb239-199"><a href="#cb239-199" aria-hidden="true" tabindex="-1"></a><span class="in">        countriesPath.attr("d", path);</span></span>
<span id="cb239-200"><a href="#cb239-200" aria-hidden="true" tabindex="-1"></a><span class="in">        disputedPath.attr("d", path);</span></span>
<span id="cb239-201"><a href="#cb239-201" aria-hidden="true" tabindex="-1"></a><span class="in">      })</span></span>
<span id="cb239-202"><a href="#cb239-202" aria-hidden="true" tabindex="-1"></a><span class="in">      .on("mouseover", function() {</span></span>
<span id="cb239-203"><a href="#cb239-203" aria-hidden="true" tabindex="-1"></a><span class="in">        d3.select(this).attr("stroke", d=&gt;d.selected ? "#C12838" : "#656565").attr("stroke-width", d=&gt;d.selected ? "3" : "2").raise(); </span></span>
<span id="cb239-204"><a href="#cb239-204" aria-hidden="true" tabindex="-1"></a><span class="in">      })</span></span>
<span id="cb239-205"><a href="#cb239-205" aria-hidden="true" tabindex="-1"></a><span class="in">      .on("mouseout", function() { </span></span>
<span id="cb239-206"><a href="#cb239-206" aria-hidden="true" tabindex="-1"></a><span class="in">        d3.select(this).attr("stroke", d=&gt;d.selected ? "#C12838" : "#656565").attr("stroke-width", d=&gt;d.selected ? "2" : "1")</span></span>
<span id="cb239-207"><a href="#cb239-207" aria-hidden="true" tabindex="-1"></a><span class="in">      })</span></span>
<span id="cb239-208"><a href="#cb239-208" aria-hidden="true" tabindex="-1"></a><span class="in">                               </span></span>
<span id="cb239-209"><a href="#cb239-209" aria-hidden="true" tabindex="-1"></a><span class="in"> const disputedPath = svg.append("g")</span></span>
<span id="cb239-210"><a href="#cb239-210" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("id", "disputed areas")</span></span>
<span id="cb239-211"><a href="#cb239-211" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("stroke", "white")</span></span>
<span id="cb239-212"><a href="#cb239-212" aria-hidden="true" tabindex="-1"></a><span class="in">      .selectAll("path")</span></span>
<span id="cb239-213"><a href="#cb239-213" aria-hidden="true" tabindex="-1"></a><span class="in">      .data(disputed.features)</span></span>
<span id="cb239-214"><a href="#cb239-214" aria-hidden="true" tabindex="-1"></a><span class="in">      .join("path")</span></span>
<span id="cb239-215"><a href="#cb239-215" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("id", d=&gt;d.properties.geometry)</span></span>
<span id="cb239-216"><a href="#cb239-216" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("d", path)</span></span>
<span id="cb239-217"><a href="#cb239-217" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("fill", "#C12838AA")</span></span>
<span id="cb239-218"><a href="#cb239-218" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("stroke-width",0.5)</span></span>
<span id="cb239-219"><a href="#cb239-219" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("display", "none")</span></span>
<span id="cb239-220"><a href="#cb239-220" aria-hidden="true" tabindex="-1"></a><span class="in"> </span></span>
<span id="cb239-221"><a href="#cb239-221" aria-hidden="true" tabindex="-1"></a><span class="in"> function render() {</span></span>
<span id="cb239-222"><a href="#cb239-222" aria-hidden="true" tabindex="-1"></a><span class="in">    console.log("Render")</span></span>
<span id="cb239-223"><a href="#cb239-223" aria-hidden="true" tabindex="-1"></a><span class="in">    path = d3.geoPath(projection)</span></span>
<span id="cb239-224"><a href="#cb239-224" aria-hidden="true" tabindex="-1"></a><span class="in">    graticulePath.attr("d", path)</span></span>
<span id="cb239-225"><a href="#cb239-225" aria-hidden="true" tabindex="-1"></a><span class="in">    countriesPath.attr("d", path)</span></span>
<span id="cb239-226"><a href="#cb239-226" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-227"><a href="#cb239-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-228"><a href="#cb239-228" aria-hidden="true" tabindex="-1"></a><span class="in">    // add graticule</span></span>
<span id="cb239-229"><a href="#cb239-229" aria-hidden="true" tabindex="-1"></a><span class="in"> const graticulePath = svg.append("path")</span></span>
<span id="cb239-230"><a href="#cb239-230" aria-hidden="true" tabindex="-1"></a><span class="in">      .datum(graticule)</span></span>
<span id="cb239-231"><a href="#cb239-231" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("id", "graticule")</span></span>
<span id="cb239-232"><a href="#cb239-232" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("stroke", "#656565")</span></span>
<span id="cb239-233"><a href="#cb239-233" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("opacity", 0.8)</span></span>
<span id="cb239-234"><a href="#cb239-234" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("stroke-width", 0.3)</span></span>
<span id="cb239-235"><a href="#cb239-235" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("fill", "none")</span></span>
<span id="cb239-236"><a href="#cb239-236" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("d", path)</span></span>
<span id="cb239-237"><a href="#cb239-237" aria-hidden="true" tabindex="-1"></a><span class="in">          .attr("pointer-events","none")</span></span>
<span id="cb239-238"><a href="#cb239-238" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-239"><a href="#cb239-239" aria-hidden="true" tabindex="-1"></a><span class="in">  // append shaded circle and outer line</span></span>
<span id="cb239-240"><a href="#cb239-240" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-241"><a href="#cb239-241" aria-hidden="true" tabindex="-1"></a><span class="in">  svg.append("circle")</span></span>
<span id="cb239-242"><a href="#cb239-242" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cx", width/2)</span></span>
<span id="cb239-243"><a href="#cb239-243" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cy", width/2)</span></span>
<span id="cb239-244"><a href="#cb239-244" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("r",width/2)</span></span>
<span id="cb239-245"><a href="#cb239-245" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", "url(#grSea)")</span></span>
<span id="cb239-246"><a href="#cb239-246" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke", "none")</span></span>
<span id="cb239-247"><a href="#cb239-247" aria-hidden="true" tabindex="-1"></a><span class="in">    //.attr("stroke-width",1.5)</span></span>
<span id="cb239-248"><a href="#cb239-248" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("pointer-events","none")</span></span>
<span id="cb239-249"><a href="#cb239-249" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb239-250"><a href="#cb239-250" aria-hidden="true" tabindex="-1"></a><span class="in">    svg</span></span>
<span id="cb239-251"><a href="#cb239-251" aria-hidden="true" tabindex="-1"></a><span class="in">    .call(drag(projection)</span></span>
<span id="cb239-252"><a href="#cb239-252" aria-hidden="true" tabindex="-1"></a><span class="in">        .on("drag.render", () =&gt; render()))</span></span>
<span id="cb239-253"><a href="#cb239-253" aria-hidden="true" tabindex="-1"></a><span class="in">    .call(() =&gt; render())</span></span>
<span id="cb239-254"><a href="#cb239-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-255"><a href="#cb239-255" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-256"><a href="#cb239-256" aria-hidden="true" tabindex="-1"></a><span class="in">   div</span></span>
<span id="cb239-257"><a href="#cb239-257" aria-hidden="true" tabindex="-1"></a><span class="in">    .append("div")</span></span>
<span id="cb239-258"><a href="#cb239-258" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("position", "absolute")</span></span>
<span id="cb239-259"><a href="#cb239-259" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("top", "-20px")</span></span>
<span id="cb239-260"><a href="#cb239-260" aria-hidden="true" tabindex="-1"></a><span class="in">    .style("left", "0px")</span></span>
<span id="cb239-261"><a href="#cb239-261" aria-hidden="true" tabindex="-1"></a><span class="in">    .append(() =&gt;</span></span>
<span id="cb239-262"><a href="#cb239-262" aria-hidden="true" tabindex="-1"></a><span class="in">      Swatches(</span></span>
<span id="cb239-263"><a href="#cb239-263" aria-hidden="true" tabindex="-1"></a><span class="in">        d3.scaleOrdinal(</span></span>
<span id="cb239-264"><a href="#cb239-264" aria-hidden="true" tabindex="-1"></a><span class="in">          ["Lunar Hijiri", "Ethiopian", "Hebrew", "Solar Hijiri", "Indian", "Nepali", "Bengali", "Burmese", "Thai", "Minguo", "Juche", "Japanese"],</span></span>
<span id="cb239-265"><a href="#cb239-265" aria-hidden="true" tabindex="-1"></a><span class="in">          colors</span></span>
<span id="cb239-266"><a href="#cb239-266" aria-hidden="true" tabindex="-1"></a><span class="in">        )</span></span>
<span id="cb239-267"><a href="#cb239-267" aria-hidden="true" tabindex="-1"></a><span class="in">      )</span></span>
<span id="cb239-268"><a href="#cb239-268" aria-hidden="true" tabindex="-1"></a><span class="in">    ); </span></span>
<span id="cb239-269"><a href="#cb239-269" aria-hidden="true" tabindex="-1"></a><span class="in">    return div.node();</span></span>
<span id="cb239-270"><a href="#cb239-270" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-271"><a href="#cb239-271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-272"><a href="#cb239-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-275"><a href="#cb239-275" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-276"><a href="#cb239-276" aria-hidden="true" tabindex="-1"></a><span class="in">md`For more Dec maps like the one above, check out these notebooks:</span></span>
<span id="cb239-277"><a href="#cb239-277" aria-hidden="true" tabindex="-1"></a><span class="in">- [Decalc](/@dec/alc)</span></span>
<span id="cb239-278"><a href="#cb239-278" aria-hidden="true" tabindex="-1"></a><span class="in">- [Decaliper](/@dec/ali)</span></span>
<span id="cb239-279"><a href="#cb239-279" aria-hidden="true" tabindex="-1"></a><span class="in">- [Decirc](/@dec/irc)</span></span>
<span id="cb239-280"><a href="#cb239-280" aria-hidden="true" tabindex="-1"></a><span class="in">- [Declock](/@dec/loc)</span></span>
<span id="cb239-281"><a href="#cb239-281" aria-hidden="true" tabindex="-1"></a><span class="in">- [Solar terminator](/@dec/solar-terminator)</span></span>
<span id="cb239-282"><a href="#cb239-282" aria-hidden="true" tabindex="-1"></a><span class="in">- [The Sun's view of the Earth](/@dec/the-suns-view-of-the-earth)`</span></span>
<span id="cb239-283"><a href="#cb239-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-284"><a href="#cb239-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-287"><a href="#cb239-287" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-288"><a href="#cb239-288" aria-hidden="true" tabindex="-1"></a><span class="in">md`Dec measures time using year and days. A year is a turn of one [celestial body](https://en.wikipedia.org/wiki/Astronomical_object#:~:text=a%20single%2C%20tightly%20bound%2C%20contiguous%20entity) around [the point it orbits](https://en.wikipedia.org/wiki/Barycenter_%28astronomy%29#:~:text=the%20point%20about%20which%20the%20bodies%20orbit) and a day is a turn of a celestial body on [its axis](https://en.wikipedia.org/wiki/Axial_tilt#:~:text=the%20imaginary%20line%20that%20passes%20through%20both%20the%20north%20pole%20and%20south%20pole). The Earth (the blue circle labeled ${tex`\raisebox{2pt}{üú®}`} below) makes 365.24 turns on its axis in a year and Mars (red circle labeled ‚ôÇ below) turns on its axis 668.59 times per year.`</span></span>
<span id="cb239-289"><a href="#cb239-289" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-290"><a href="#cb239-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-293"><a href="#cb239-293" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-294"><a href="#cb239-294" aria-hidden="true" tabindex="-1"></a><span class="in">md`In the case of [tidally locked](https://en.wikipedia.org/wiki/Tidal_locking#:~:text=the%20objects%20reaches-,a%20state%20where%20there%20is%20no%20longer%20any%20net%20change%20in%20its%20rotation%20rate%20over%20the%20course%20of%20a%20complete%20orbit,-.%20In%20the%20case) moons, such as the [Earth's moon](https://en.wikipedia.org/wiki/Moon#:~:text=Earth%27s%20only%20natural%20satellite) (‚òæ), Decalendar uses [tidal days](https://oceanservice.noaa.gov/education/tutorial_tides/tides05_lunarday.html#:~:text=the%20time%20it%20takes%20for%20a%20specific%20site%20on%20the%20Earth%20to%20rotate%20from%20an%20exact%20point%20under%20the%20moon%20to%20the%20same%20point%20under%20the%20moon),   instead of [synodic](https://en.wikipedia.org/wiki/Synodic_day#:~:text=the%20period%20for%20a%20celestial%20object%20to%20rotate%20once%20in%20relation%20to%20the%20star%20it%20is%20orbiting) or [sidereal](https://en.wikipedia.org/wiki/Sidereal_time#:~:text=a%20star%20seen%20at%20one%20position%20in%20the%20sky%20will%20be%20seen%20at%20the%20same%20position%20on%20another%20night%20at%20the%20same%20time%20of%20day%20%28or%20night%29%2C%20if%20the%20day%20is%20defined%20as%20a%20sidereal%20day) days, because tidal locking causes synodic days to be infinite and sidereal days to have the same duration as a year.`</span></span>
<span id="cb239-295"><a href="#cb239-295" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-296"><a href="#cb239-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-299"><a href="#cb239-299" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-300"><a href="#cb239-300" aria-hidden="true" tabindex="-1"></a><span class="in">chart = {</span></span>
<span id="cb239-301"><a href="#cb239-301" aria-hidden="true" tabindex="-1"></a><span class="in">  const svg = d3.create("svg")</span></span>
<span id="cb239-302"><a href="#cb239-302" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("viewBox", [0, 0, system_width, height / 1.5])</span></span>
<span id="cb239-303"><a href="#cb239-303" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("width", system_width * 1.6)     </span></span>
<span id="cb239-304"><a href="#cb239-304" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("height", height / 1.4)</span></span>
<span id="cb239-305"><a href="#cb239-305" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("id", "SVGchart");</span></span>
<span id="cb239-306"><a href="#cb239-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-307"><a href="#cb239-307" aria-hidden="true" tabindex="-1"></a><span class="in">  // Dark background</span></span>
<span id="cb239-308"><a href="#cb239-308" aria-hidden="true" tabindex="-1"></a><span class="in">  svg.append("rect")</span></span>
<span id="cb239-309"><a href="#cb239-309" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("width", "320%")</span></span>
<span id="cb239-310"><a href="#cb239-310" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("height", "120%")</span></span>
<span id="cb239-311"><a href="#cb239-311" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("transform", "translate(" + -width/3 + "," + -height/128.02 + ")")</span></span>
<span id="cb239-312"><a href="#cb239-312" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", dark_background? "#000":"#FFF");  </span></span>
<span id="cb239-313"><a href="#cb239-313" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-314"><a href="#cb239-314" aria-hidden="true" tabindex="-1"></a><span class="in">  // Planet group</span></span>
<span id="cb239-315"><a href="#cb239-315" aria-hidden="true" tabindex="-1"></a><span class="in">  const container = svg.append("g")</span></span>
<span id="cb239-316"><a href="#cb239-316" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("id", "orbit_container")</span></span>
<span id="cb239-317"><a href="#cb239-317" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("transform", "translate(" + width/4.4 + "," + height/3.02 + ")");</span></span>
<span id="cb239-318"><a href="#cb239-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-319"><a href="#cb239-319" aria-hidden="true" tabindex="-1"></a><span class="in">  // Draw planets and moons</span></span>
<span id="cb239-320"><a href="#cb239-320" aria-hidden="true" tabindex="-1"></a><span class="in">  container.selectAll("g.planet").data(system_model == 1 ? solar_system : tychnonic_model).enter().append("g")</span></span>
<span id="cb239-321"><a href="#cb239-321" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("class", "planet_cluster")</span></span>
<span id="cb239-322"><a href="#cb239-322" aria-hidden="true" tabindex="-1"></a><span class="in">    .each(function(d, i) {</span></span>
<span id="cb239-323"><a href="#cb239-323" aria-hidden="true" tabindex="-1"></a><span class="in">      d3.select(this).append("circle")</span></span>
<span id="cb239-324"><a href="#cb239-324" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("class", "orbit")</span></span>
<span id="cb239-325"><a href="#cb239-325" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("r", d.R);</span></span>
<span id="cb239-326"><a href="#cb239-326" aria-hidden="true" tabindex="-1"></a><span class="in">      d3.select(this).append("circle")</span></span>
<span id="cb239-327"><a href="#cb239-327" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("r", d.r)</span></span>
<span id="cb239-328"><a href="#cb239-328" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("cx",d.R)</span></span>
<span id="cb239-329"><a href="#cb239-329" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("cy",0)</span></span>
<span id="cb239-330"><a href="#cb239-330" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("id", d.name)</span></span>
<span id="cb239-331"><a href="#cb239-331" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("class", "planet");</span></span>
<span id="cb239-332"><a href="#cb239-332" aria-hidden="true" tabindex="-1"></a><span class="in">     d3.select(this).append("g")</span></span>
<span id="cb239-333"><a href="#cb239-333" aria-hidden="true" tabindex="-1"></a><span class="in">       .attr("transform", "translate(" + d.R + ",0)")</span></span>
<span id="cb239-334"><a href="#cb239-334" aria-hidden="true" tabindex="-1"></a><span class="in">       .call(g =&gt; g.append("text")</span></span>
<span id="cb239-335"><a href="#cb239-335" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("fill", dark_background? "white": "black")</span></span>
<span id="cb239-336"><a href="#cb239-336" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("dx", `${d.name == "Jupiter" ? 2.46 - (width &lt; 400) * .65 : d.name == "Earth" ? .87 : d.name == "Saturn" ? 1 - (width &lt; 400) * .65 : d.name == "Mars" ? 1.5 : d.name == "Sun" ? .5 : .3}em`)</span></span>
<span id="cb239-337"><a href="#cb239-337" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("dy", "0.25em")</span></span>
<span id="cb239-338"><a href="#cb239-338" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("font-size", 14)</span></span>
<span id="cb239-339"><a href="#cb239-339" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("font-face", "Open Sans")</span></span>
<span id="cb239-340"><a href="#cb239-340" aria-hidden="true" tabindex="-1"></a><span class="in">         .text(d.symbol));</span></span>
<span id="cb239-341"><a href="#cb239-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-342"><a href="#cb239-342" aria-hidden="true" tabindex="-1"></a><span class="in">     d3.select(this).append("g")</span></span>
<span id="cb239-343"><a href="#cb239-343" aria-hidden="true" tabindex="-1"></a><span class="in">       .attr("transform", "translate(" + d.R + ",0)")             </span></span>
<span id="cb239-344"><a href="#cb239-344" aria-hidden="true" tabindex="-1"></a><span class="in">       .selectAll("g.moon").data(d.moons).enter().append("g")</span></span>
<span id="cb239-345"><a href="#cb239-345" aria-hidden="true" tabindex="-1"></a><span class="in">       .attr("transform", "translate(" + d.R + ",0)")</span></span>
<span id="cb239-346"><a href="#cb239-346" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("class", "moon_cluster")</span></span>
<span id="cb239-347"><a href="#cb239-347" aria-hidden="true" tabindex="-1"></a><span class="in">         .each(function(d, i) {</span></span>
<span id="cb239-348"><a href="#cb239-348" aria-hidden="true" tabindex="-1"></a><span class="in">           // Conditions to display planets' moons. For the Earth, we always display the Moon</span></span>
<span id="cb239-349"><a href="#cb239-349" aria-hidden="true" tabindex="-1"></a><span class="in">           if(!system_model ||  heliocentric_options.display_moons || d.name=="Moon" || d.name=="Sun_path") {    </span></span>
<span id="cb239-350"><a href="#cb239-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-351"><a href="#cb239-351" aria-hidden="true" tabindex="-1"></a><span class="in">     // Orbits are displayed</span></span>
<span id="cb239-352"><a href="#cb239-352" aria-hidden="true" tabindex="-1"></a><span class="in">     if(!(d.name=="Sun_path" &amp;&amp; !heliocentric_options.Sun_path)){</span></span>
<span id="cb239-353"><a href="#cb239-353" aria-hidden="true" tabindex="-1"></a><span class="in">       d3.select(this).append("circle")</span></span>
<span id="cb239-354"><a href="#cb239-354" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("class", "orbit_moon")</span></span>
<span id="cb239-355"><a href="#cb239-355" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("r", d.R)</span></span>
<span id="cb239-356"><a href="#cb239-356" aria-hidden="true" tabindex="-1"></a><span class="in">     }</span></span>
<span id="cb239-357"><a href="#cb239-357" aria-hidden="true" tabindex="-1"></a><span class="in">     d3.select(this).append("circle")</span></span>
<span id="cb239-358"><a href="#cb239-358" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("r", d.r)</span></span>
<span id="cb239-359"><a href="#cb239-359" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("cx",d.R)</span></span>
<span id="cb239-360"><a href="#cb239-360" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("cy", 0)</span></span>
<span id="cb239-361"><a href="#cb239-361" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("id", d.name)</span></span>
<span id="cb239-362"><a href="#cb239-362" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("class", "moon");</span></span>
<span id="cb239-363"><a href="#cb239-363" aria-hidden="true" tabindex="-1"></a><span class="in">     d3.select(this).append("g")</span></span>
<span id="cb239-364"><a href="#cb239-364" aria-hidden="true" tabindex="-1"></a><span class="in">         .attr("transform", "translate(" + d.R + ",0)")</span></span>
<span id="cb239-365"><a href="#cb239-365" aria-hidden="true" tabindex="-1"></a><span class="in">         .call(g =&gt; g.append("text")</span></span>
<span id="cb239-366"><a href="#cb239-366" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("fill", dark_background? "white": "black")</span></span>
<span id="cb239-367"><a href="#cb239-367" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("dx", "0.5em")</span></span>
<span id="cb239-368"><a href="#cb239-368" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("dy", "0.5em")</span></span>
<span id="cb239-369"><a href="#cb239-369" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("font-size", 14)</span></span>
<span id="cb239-370"><a href="#cb239-370" aria-hidden="true" tabindex="-1"></a><span class="in">           .attr("font-face", "Open Sans")</span></span>
<span id="cb239-371"><a href="#cb239-371" aria-hidden="true" tabindex="-1"></a><span class="in">           .text(d.symbol));</span></span>
<span id="cb239-372"><a href="#cb239-372" aria-hidden="true" tabindex="-1"></a><span class="in">           }</span></span>
<span id="cb239-373"><a href="#cb239-373" aria-hidden="true" tabindex="-1"></a><span class="in">         });</span></span>
<span id="cb239-374"><a href="#cb239-374" aria-hidden="true" tabindex="-1"></a><span class="in">     </span></span>
<span id="cb239-375"><a href="#cb239-375" aria-hidden="true" tabindex="-1"></a><span class="in">  });</span></span>
<span id="cb239-376"><a href="#cb239-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-377"><a href="#cb239-377" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-378"><a href="#cb239-378" aria-hidden="true" tabindex="-1"></a><span class="in">  // throttle animation</span></span>
<span id="cb239-379"><a href="#cb239-379" aria-hidden="true" tabindex="-1"></a><span class="in">  setInterval(function(){</span></span>
<span id="cb239-380"><a href="#cb239-380" aria-hidden="true" tabindex="-1"></a><span class="in">    var delta = (Date.now() - new Date().setHours(0,0,0,0));</span></span>
<span id="cb239-381"><a href="#cb239-381" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb239-382"><a href="#cb239-382" aria-hidden="true" tabindex="-1"></a><span class="in">    svg.selectAll(".planet_cluster, .moon_cluster")</span></span>
<span id="cb239-383"><a href="#cb239-383" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", function(d) {</span></span>
<span id="cb239-384"><a href="#cb239-384" aria-hidden="true" tabindex="-1"></a><span class="in">      return "rotate(" + (d.phi0 + (delta * (d.speed * speed_factor/1000))) + ")";</span></span>
<span id="cb239-385"><a href="#cb239-385" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb239-386"><a href="#cb239-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-387"><a href="#cb239-387" aria-hidden="true" tabindex="-1"></a><span class="in">    // We do not rotate symbols</span></span>
<span id="cb239-388"><a href="#cb239-388" aria-hidden="true" tabindex="-1"></a><span class="in">    svg.selectAll("text")</span></span>
<span id="cb239-389"><a href="#cb239-389" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", function(d) {</span></span>
<span id="cb239-390"><a href="#cb239-390" aria-hidden="true" tabindex="-1"></a><span class="in">        if((system_model == 1) || (d.symbol == "‚äô") || (d.symbol == "üú®") || (d.symbol == "‚òæ")){</span></span>
<span id="cb239-391"><a href="#cb239-391" aria-hidden="true" tabindex="-1"></a><span class="in">          if(d.symbol == "üú®"){</span></span>
<span id="cb239-392"><a href="#cb239-392" aria-hidden="true" tabindex="-1"></a><span class="in">            // Earth symbol translated above the planet</span></span>
<span id="cb239-393"><a href="#cb239-393" aria-hidden="true" tabindex="-1"></a><span class="in">            if(system_model == 0)</span></span>
<span id="cb239-394"><a href="#cb239-394" aria-hidden="true" tabindex="-1"></a><span class="in">              return "translate(-16,-20)";  </span></span>
<span id="cb239-395"><a href="#cb239-395" aria-hidden="true" tabindex="-1"></a><span class="in">            else</span></span>
<span id="cb239-396"><a href="#cb239-396" aria-hidden="true" tabindex="-1"></a><span class="in">              return "rotate(" + (-d.phi0 + (-delta * d.speed * speed_factor/1000)) + ") translate(-16,-20)"; </span></span>
<span id="cb239-397"><a href="#cb239-397" aria-hidden="true" tabindex="-1"></a><span class="in">          }</span></span>
<span id="cb239-398"><a href="#cb239-398" aria-hidden="true" tabindex="-1"></a><span class="in">          else if((system_model == 1) &amp;&amp; d.symbol == "‚òæ")</span></span>
<span id="cb239-399"><a href="#cb239-399" aria-hidden="true" tabindex="-1"></a><span class="in">            return "rotate(" + (-angle_90 - d.phi0 + delta * (Earth_speed - d.speed) * (speed_factor/1000) )  + ") translate(0,-2)"; </span></span>
<span id="cb239-400"><a href="#cb239-400" aria-hidden="true" tabindex="-1"></a><span class="in">          else</span></span>
<span id="cb239-401"><a href="#cb239-401" aria-hidden="true" tabindex="-1"></a><span class="in">            return "rotate(" + (-d.phi0 + (-delta * d.speed * speed_factor/1000)) + ")";</span></span>
<span id="cb239-402"><a href="#cb239-402" aria-hidden="true" tabindex="-1"></a><span class="in">        }</span></span>
<span id="cb239-403"><a href="#cb239-403" aria-hidden="true" tabindex="-1"></a><span class="in">        else</span></span>
<span id="cb239-404"><a href="#cb239-404" aria-hidden="true" tabindex="-1"></a><span class="in">          return "rotate(" + (angle_90 - d.phi0 + delta * (Earth_speed - d.speed) * (speed_factor/1000) )  + ") translate(4,-3)";</span></span>
<span id="cb239-405"><a href="#cb239-405" aria-hidden="true" tabindex="-1"></a><span class="in">    });</span></span>
<span id="cb239-406"><a href="#cb239-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-407"><a href="#cb239-407" aria-hidden="true" tabindex="-1"></a><span class="in">     </span></span>
<span id="cb239-408"><a href="#cb239-408" aria-hidden="true" tabindex="-1"></a><span class="in">  }, 0);                       </span></span>
<span id="cb239-409"><a href="#cb239-409" aria-hidden="true" tabindex="-1"></a><span class="in">                      </span></span>
<span id="cb239-410"><a href="#cb239-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-411"><a href="#cb239-411" aria-hidden="true" tabindex="-1"></a><span class="in">  return svg.node(); </span></span>
<span id="cb239-412"><a href="#cb239-412" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-413"><a href="#cb239-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-414"><a href="#cb239-414" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-415"><a href="#cb239-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-418"><a href="#cb239-418" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-419"><a href="#cb239-419" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Day of the era`</span></span>
<span id="cb239-420"><a href="#cb239-420" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-421"><a href="#cb239-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-424"><a href="#cb239-424" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-425"><a href="#cb239-425" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Get dote from UNIX time</span></span>
<span id="cb239-426"><a href="#cb239-426" aria-hidden="true" tabindex="-1"></a><span class="in">Most Dec calendar (Decalendar) calculations require us to obtain a day of the era (dote), which is simply the number of days since a [calendar epoch](https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era). The Gregorian Decalendar era starts exactly 60 days later than the [Common Era](https://en.wikipedia.org/wiki/Common_Era).</span></span>
<span id="cb239-427"><a href="#cb239-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-428"><a href="#cb239-428" aria-hidden="true" tabindex="-1"></a><span class="in">The `unix2dote` function below 1) translates [UNIX time](https://en.wikipedia.org/wiki/Unix_time#:~:text=a%20date%20and%20time%20representation%20widely%20used%20in%20computing) into a dote by converting (milli)seconds of UNIX time into days and 2) adds an offset that shifts the [UNIX epoch](https://en.wikipedia.org/wiki/Epoch_%28computing%29#:~:text=a%20fixed%20date%20and%20time%20used%20as%20a%20reference%20from%20which%20a%20computer%20measures%20system%20time) to the epoch for a given calendar. The default offset is 719468, the number of days between the UNIX epoch and the Dec Gregorian calendar epoch. `</span></span>
<span id="cb239-429"><a href="#cb239-429" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-430"><a href="#cb239-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-433"><a href="#cb239-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-434"><a href="#cb239-434" aria-hidden="true" tabindex="-1"></a><span class="in">unix = {</span></span>
<span id="cb239-435"><a href="#cb239-435" aria-hidden="true" tabindex="-1"></a><span class="in">  while(true) {</span></span>
<span id="cb239-436"><a href="#cb239-436" aria-hidden="true" tabindex="-1"></a><span class="in">    yield Date.now();</span></span>
<span id="cb239-437"><a href="#cb239-437" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-438"><a href="#cb239-438" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-439"><a href="#cb239-439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-440"><a href="#cb239-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-443"><a href="#cb239-443" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-444"><a href="#cb239-444" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2dote(unix, zone, offset = 719468) {</span></span>
<span id="cb239-445"><a href="#cb239-445" aria-hidden="true" tabindex="-1"></a><span class="in">  return [</span></span>
<span id="cb239-446"><a href="#cb239-446" aria-hidden="true" tabindex="-1"></a><span class="in">    (unix ?? Date.now()) / 86400000</span></span>
<span id="cb239-447"><a href="#cb239-447" aria-hidden="true" tabindex="-1"></a><span class="in">    + (zone = zone ?? (10 - Math.round(</span></span>
<span id="cb239-448"><a href="#cb239-448" aria-hidden="true" tabindex="-1"></a><span class="in">        (new Date).getTimezoneOffset() / 144)) % 10</span></span>
<span id="cb239-449"><a href="#cb239-449" aria-hidden="true" tabindex="-1"></a><span class="in">      ) / 10 + offset, zone]</span></span>
<span id="cb239-450"><a href="#cb239-450" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-451"><a href="#cb239-451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-452"><a href="#cb239-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-455"><a href="#cb239-455" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-456"><a href="#cb239-456" aria-hidden="true" tabindex="-1"></a><span class="in">current = unix2dote(unix)</span></span>
<span id="cb239-457"><a href="#cb239-457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-458"><a href="#cb239-458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-461"><a href="#cb239-461" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-462"><a href="#cb239-462" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2dote(year = 1969, doty = 306) {</span></span>
<span id="cb239-463"><a href="#cb239-463" aria-hidden="true" tabindex="-1"></a><span class="in">    return doty + Math.floor(year * 365 + Math.floor(year / 4) - Math.floor(year / 100) + Math.floor(year / 400));</span></span>
<span id="cb239-464"><a href="#cb239-464" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-465"><a href="#cb239-465" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-466"><a href="#cb239-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-469"><a href="#cb239-469" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-470"><a href="#cb239-470" aria-hidden="true" tabindex="-1"></a><span class="in">unixEpoch = doty2dote(1969, 306)</span></span>
<span id="cb239-471"><a href="#cb239-471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-472"><a href="#cb239-472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-475"><a href="#cb239-475" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-476"><a href="#cb239-476" aria-hidden="true" tabindex="-1"></a><span class="in">md`Other than providing a dote, `unix2dote` also returns the provided Dec time zone and can infer the time zone if it is not provided. The time zone inference method is described in the [Dec clock (Declock) notebook](/@dec/lock). Time zone inference is not exact. Unequivocal Dec time zone determination requires knowing your longitude. To obtain a Dec time zone from a given longitude, the functions below first add 18 degrees (half a turn) to align the longitude in degrees with [Meridian 0](https://en.wikipedia.org/wiki/18th_meridian_west#:~:text=a%20line%20of%20longitude%20that%20extends%20from%20the%20North%20Pole%20across%20the%20Arctic%20Ocean%2C%20Greenland%2C%20Iceland%2C%20the%20Atlantic%20Ocean%2C%20the%20Canary%20Islands%2C%20the%20Southern%20Ocean%2C%20and%20Antarctica%20to%20the%20South%20Pole), which is the start of Zone 0, the [Prime Meridian](https://en.wikipedia.org/wiki/Prime_meridian), and the [International Date Line](https://en.wikipedia.org/wiki/International_Date_Line#:~:text=the%20line%20between%20the%20South%20and%20North%20Poles%20that%20is%20the%20boundary%20between%20one%20calendar%20day%20and%20the%20next) in Dec.`</span></span>
<span id="cb239-477"><a href="#cb239-477" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-478"><a href="#cb239-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-481"><a href="#cb239-481" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-482"><a href="#cb239-482" aria-hidden="true" tabindex="-1"></a><span class="in">md`Once 0 turns is set to Meridian 0, `long2turn` converts degrees to deciturns (tenths of a turn). The `long2zone` function then simply [floors](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=gives%20as%20output%20the%20greatest%20integer%20less%20than%20or%20equal%20to%20x) the deciturns provided by `long2turn`. Alternatively, we can convert degrees to deciturns and round. This alternative conversion method is simpler but can cause confusion because it sets 0 turns to Meridian 05, the middle of Zone 0 (5 [ctr](https://en.wikipedia.org/wiki/Turn_%28angle%29#:~:text=in%2C%20e.g.%2C-,centiturns%20%28ctr%29,-%2C%20milliturns%20%28mtr%29%2C%20etc)). Regardless of which conversion method we use, Dec time zones always range from 0 to 9, even if the provided degree value for longitude is outside the typical range (${tex`-180¬∞ \le \lambda \le 180¬∞`}).`</span></span>
<span id="cb239-483"><a href="#cb239-483" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-484"><a href="#cb239-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-487"><a href="#cb239-487" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-488"><a href="#cb239-488" aria-hidden="true" tabindex="-1"></a><span class="in">md`It is possible to subtract 10 from the Dec times zones to convert them from positive to negative. Regardless of their sign, Dec time zone numbers work like [array indexes](https://en.wikipedia.org/wiki/Array_%28data_structure%29#Element_identifier_and_addressing_formulas:~:text=The%20first%20element%20of%20the%20array%20is%20indexed%20by%20subscript%20of%200). We can also use positive and negative time zone indexes as time zone offsets to obtain the time in the desired time zone. Sometimes it easier to use a negative offset than a positive offset. For example. when converting Zone 0 time to Zone 8 time, we can subtract 2, rather than add 8, to the Zone 0 time in decidays. Adding positive offsets works for both times and dates with times (datetimes), but adding a negative offset to a datetime will give us the previous date rather than the current one. In short, we have to increment a date if we add a negative index to it. `</span></span>
<span id="cb239-489"><a href="#cb239-489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-490"><a href="#cb239-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-493"><a href="#cb239-493" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-494"><a href="#cb239-494" aria-hidden="true" tabindex="-1"></a><span class="in">function long2turn(degrees = -180, e = 3) {</span></span>
<span id="cb239-495"><a href="#cb239-495" aria-hidden="true" tabindex="-1"></a><span class="in">  // turns: e=0, deciturns: e=1, etc.</span></span>
<span id="cb239-496"><a href="#cb239-496" aria-hidden="true" tabindex="-1"></a><span class="in">  return (((degrees %= 360) &lt; 0 ? degrees + 360 : degrees) + 18) / (360 / 10**e) % 10**e;</span></span>
<span id="cb239-497"><a href="#cb239-497" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-498"><a href="#cb239-498" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-499"><a href="#cb239-499" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-502"><a href="#cb239-502" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-503"><a href="#cb239-503" aria-hidden="true" tabindex="-1"></a><span class="in">function long2zone(degrees = -180) {</span></span>
<span id="cb239-504"><a href="#cb239-504" aria-hidden="true" tabindex="-1"></a><span class="in">  return Math.floor(long2turn(degrees, 1));</span></span>
<span id="cb239-505"><a href="#cb239-505" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-506"><a href="#cb239-506" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-507"><a href="#cb239-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-510"><a href="#cb239-510" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-511"><a href="#cb239-511" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Degrees to milliturns from Meridian 0`</span></span>
<span id="cb239-512"><a href="#cb239-512" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-513"><a href="#cb239-513" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-516"><a href="#cb239-516" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-517"><a href="#cb239-517" aria-hidden="true" tabindex="-1"></a><span class="in">Object.fromEntries([-180, -90, 0, 9, 18, 36, 45, 90, 162].map(x =&gt; [x, long2turn(x, 3)]))</span></span>
<span id="cb239-518"><a href="#cb239-518" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-519"><a href="#cb239-519" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-522"><a href="#cb239-522" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-523"><a href="#cb239-523" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Calculate Decalendar dates from UNIX time`</span></span>
<span id="cb239-524"><a href="#cb239-524" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-525"><a href="#cb239-525" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-528"><a href="#cb239-528" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-529"><a href="#cb239-529" aria-hidden="true" tabindex="-1"></a><span class="in">md`To obtain the components of a Dec timestamp, we first calculate the dote from UNIX time, as described above.`</span></span>
<span id="cb239-530"><a href="#cb239-530" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-531"><a href="#cb239-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-534"><a href="#cb239-534" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-535"><a href="#cb239-535" aria-hidden="true" tabindex="-1"></a><span class="in">zone0dote = unix / 86400000 + 719468 </span></span>
<span id="cb239-536"><a href="#cb239-536" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-537"><a href="#cb239-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-540"><a href="#cb239-540" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-541"><a href="#cb239-541" aria-hidden="true" tabindex="-1"></a><span class="in">zone0deco = dote2deco(zone0dote)</span></span>
<span id="cb239-542"><a href="#cb239-542" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-543"><a href="#cb239-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-546"><a href="#cb239-546" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-547"><a href="#cb239-547" aria-hidden="true" tabindex="-1"></a><span class="in">md`The dote allows us to calculate the the solar cycle (socy), the day of the cycle (dotc), and the year of the cycle (yotc). A socy in the Gregorian calendar is [400 years](https://en.wikipedia.org/wiki/Solar_cycle_%28calendar%29#:~:text=400%2Dyear%20cycle%20of%20the%20Gregorian%20calendar).</span></span>
<span id="cb239-548"><a href="#cb239-548" aria-hidden="true" tabindex="-1"></a><span class="in">The socy calculations below were developed by [Howard Hinnant](https://howardhinnant.github.io), who uses the term [*era*](https://howardhinnant.github.io/date_algorithms.html#:~:text=era%20is%20a%20400%20year%20period) to refer to a solar cycle in the associated [publication](https://howardhinnant.github.io/date_algorithms.html) and [C++ library](https://howardhinnant.github.io/date/date.html).`</span></span>
<span id="cb239-549"><a href="#cb239-549" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-550"><a href="#cb239-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-553"><a href="#cb239-553" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-554"><a href="#cb239-554" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Cycle`</span></span>
<span id="cb239-555"><a href="#cb239-555" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-556"><a href="#cb239-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-559"><a href="#cb239-559" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-560"><a href="#cb239-560" aria-hidden="true" tabindex="-1"></a><span class="in">socy = Math.floor(zone0dote / 146097)</span></span>
<span id="cb239-561"><a href="#cb239-561" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-562"><a href="#cb239-562" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-565"><a href="#cb239-565" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-566"><a href="#cb239-566" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Day of the cycle`</span></span>
<span id="cb239-567"><a href="#cb239-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-568"><a href="#cb239-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-571"><a href="#cb239-571" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-572"><a href="#cb239-572" aria-hidden="true" tabindex="-1"></a><span class="in">dotc = zone0dote - socy * 146097</span></span>
<span id="cb239-573"><a href="#cb239-573" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-574"><a href="#cb239-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-577"><a href="#cb239-577" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-578"><a href="#cb239-578" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Year of the cycle`</span></span>
<span id="cb239-579"><a href="#cb239-579" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-580"><a href="#cb239-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-583"><a href="#cb239-583" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-584"><a href="#cb239-584" aria-hidden="true" tabindex="-1"></a><span class="in">yotc = Math.floor((dotc</span></span>
<span id="cb239-585"><a href="#cb239-585" aria-hidden="true" tabindex="-1"></a><span class="in">  - Math.floor(dotc / 1460)</span></span>
<span id="cb239-586"><a href="#cb239-586" aria-hidden="true" tabindex="-1"></a><span class="in">  + Math.floor(dotc / 36524)</span></span>
<span id="cb239-587"><a href="#cb239-587" aria-hidden="true" tabindex="-1"></a><span class="in">  - Math.floor(dotc / 146096)</span></span>
<span id="cb239-588"><a href="#cb239-588" aria-hidden="true" tabindex="-1"></a><span class="in">) / 365)</span></span>
<span id="cb239-589"><a href="#cb239-589" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-590"><a href="#cb239-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-593"><a href="#cb239-593" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-594"><a href="#cb239-594" aria-hidden="true" tabindex="-1"></a><span class="in">md`We then use the socy, dotc, and yotc to calculate a year and day of the year (doty). The doty is both the calendar date and the time of day. If we floor a doty, it is like an [array index](https://en.wikipedia.org/wiki/Array_%28data_structure%29#Element_identifier_and_addressing_formulas:~:text=When%20data%20objects%20are%20stored%20in%20an%20array%2C%20individual%20objects%20are%20selected%20by%20an%20index) that can unequivocally identify any month and day of the month (dotm) in the [Gregorian calendar](https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world) or any of the other calendar systems discussed below.`</span></span>
<span id="cb239-595"><a href="#cb239-595" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-596"><a href="#cb239-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-599"><a href="#cb239-599" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-600"><a href="#cb239-600" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Year`</span></span>
<span id="cb239-601"><a href="#cb239-601" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-602"><a href="#cb239-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-605"><a href="#cb239-605" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-606"><a href="#cb239-606" aria-hidden="true" tabindex="-1"></a><span class="in">year = yotc + socy * 400</span></span>
<span id="cb239-607"><a href="#cb239-607" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-608"><a href="#cb239-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-611"><a href="#cb239-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-612"><a href="#cb239-612" aria-hidden="true" tabindex="-1"></a><span class="in">zone0datetime = dotc - yotc * 365 - Math.floor(yotc / 4) + Math.floor(yotc / 100)</span></span>
<span id="cb239-613"><a href="#cb239-613" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-614"><a href="#cb239-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-617"><a href="#cb239-617" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-618"><a href="#cb239-618" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Day of the year`</span></span>
<span id="cb239-619"><a href="#cb239-619" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-620"><a href="#cb239-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-623"><a href="#cb239-623" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-624"><a href="#cb239-624" aria-hidden="true" tabindex="-1"></a><span class="in">zone0doty = Math.floor(zone0datetime)</span></span>
<span id="cb239-625"><a href="#cb239-625" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-626"><a href="#cb239-626" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-629"><a href="#cb239-629" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-630"><a href="#cb239-630" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Current Decalendar date`</span></span>
<span id="cb239-631"><a href="#cb239-631" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-632"><a href="#cb239-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-635"><a href="#cb239-635" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-636"><a href="#cb239-636" aria-hidden="true" tabindex="-1"></a><span class="in">`${year}+${zone0doty.toString().padStart(3, "0")}`</span></span>
<span id="cb239-637"><a href="#cb239-637" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-638"><a href="#cb239-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-641"><a href="#cb239-641" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-642"><a href="#cb239-642" aria-hidden="true" tabindex="-1"></a><span class="in">md`If we are going to do a calculation more than once, it is useful to create a function. The `dote2greg` function below combines the calculation described above.`</span></span>
<span id="cb239-643"><a href="#cb239-643" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-644"><a href="#cb239-644" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-647"><a href="#cb239-647" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-648"><a href="#cb239-648" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2greg(dote = 719468) {</span></span>
<span id="cb239-649"><a href="#cb239-649" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((dote &gt;= 0 ? dote : dote - 146096) / 146097), dotc = dote - socy * 146097,</span></span>
<span id="cb239-650"><a href="#cb239-650" aria-hidden="true" tabindex="-1"></a><span class="in">        yotc = Math.floor((dotc - Math.floor(dotc / 1460) + Math.floor(dotc / 36524) - Math.floor(dotc / 146096)) / 365);</span></span>
<span id="cb239-651"><a href="#cb239-651" aria-hidden="true" tabindex="-1"></a><span class="in">  return [yotc + socy * 400, dotc + Math.floor(yotc / 100) - yotc * 365 - Math.floor(yotc / 4)];</span></span>
<span id="cb239-652"><a href="#cb239-652" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-653"><a href="#cb239-653" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-654"><a href="#cb239-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-657"><a href="#cb239-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-658"><a href="#cb239-658" aria-hidden="true" tabindex="-1"></a><span class="in">dote2greg(...unix2dote(unix))</span></span>
<span id="cb239-659"><a href="#cb239-659" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-660"><a href="#cb239-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-663"><a href="#cb239-663" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-664"><a href="#cb239-664" aria-hidden="true" tabindex="-1"></a><span class="in">md`#### Get timestamp from year and doty</span></span>
<span id="cb239-665"><a href="#cb239-665" aria-hidden="true" tabindex="-1"></a><span class="in">It is a good idea to put the time zone at the end of every timestamp. The `doty2deco` function formats the provided year, doty, and time zone into a Dec timestamp.`</span></span>
<span id="cb239-666"><a href="#cb239-666" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-667"><a href="#cb239-667" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-670"><a href="#cb239-670" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-671"><a href="#cb239-671" aria-hidden="true" tabindex="-1"></a><span class="in">gregDeco = doty2deco(...dote2greg(...unix2dote(unix, 0)), null, "0", true)</span></span>
<span id="cb239-672"><a href="#cb239-672" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-673"><a href="#cb239-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-676"><a href="#cb239-676" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-677"><a href="#cb239-677" aria-hidden="true" tabindex="-1"></a><span class="in">doty2deco(...dote2greg(...unix2dote(unix, 0)), null, "0", true, true)</span></span>
<span id="cb239-678"><a href="#cb239-678" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-679"><a href="#cb239-679" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-682"><a href="#cb239-682" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-683"><a href="#cb239-683" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2deco(year = 1969, doty = 306, zone = 0, lead = "0", emoji = false, minus = false) {</span></span>
<span id="cb239-684"><a href="#cb239-684" aria-hidden="true" tabindex="-1"></a><span class="in">  return dote2deco(doty2dote(year, doty), zone, lead, emoji, minus);</span></span>
<span id="cb239-685"><a href="#cb239-685" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-686"><a href="#cb239-686" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-687"><a href="#cb239-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-690"><a href="#cb239-690" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-691"><a href="#cb239-691" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2deco(dote = 719468, zone = 0, lead = "0", emoji = false, minus = false) {</span></span>
<span id="cb239-692"><a href="#cb239-692" aria-hidden="true" tabindex="-1"></a><span class="in">let [year, doty] = dote2doty(dote);</span></span>
<span id="cb239-693"><a href="#cb239-693" aria-hidden="true" tabindex="-1"></a><span class="in">return `${emoji ? "üóìÔ∏è" : ""}${</span></span>
<span id="cb239-694"><a href="#cb239-694" aria-hidden="true" tabindex="-1"></a><span class="in">    (year + minus).toString().padStart(4, lead)}${minus ? "-" : "+"}${</span></span>
<span id="cb239-695"><a href="#cb239-695" aria-hidden="true" tabindex="-1"></a><span class="in">    Math.abs(Math.floor(doty = doty - (365 + year2leap(year + 1)) * Number(minus))</span></span>
<span id="cb239-696"><a href="#cb239-696" aria-hidden="true" tabindex="-1"></a><span class="in">    ).toString().padStart(3, lead)}${emoji ? "üï∞Ô∏è" : ""}Ô∏è${</span></span>
<span id="cb239-697"><a href="#cb239-697" aria-hidden="true" tabindex="-1"></a><span class="in">    Math.abs(doty % 1 * 10).toFixed(4)}${zone != null ? (minus ? "+" : "-") + String(zone) : ""}`</span></span>
<span id="cb239-698"><a href="#cb239-698" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-699"><a href="#cb239-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-700"><a href="#cb239-700" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-703"><a href="#cb239-703" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-704"><a href="#cb239-704" aria-hidden="true" tabindex="-1"></a><span class="in">function year2leap(year = 1970) {</span></span>
<span id="cb239-705"><a href="#cb239-705" aria-hidden="true" tabindex="-1"></a><span class="in">    return year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0;</span></span>
<span id="cb239-706"><a href="#cb239-706" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-707"><a href="#cb239-707" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-708"><a href="#cb239-708" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-711"><a href="#cb239-711" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-712"><a href="#cb239-712" aria-hidden="true" tabindex="-1"></a><span class="in">function greg2leap(year = 1970) {</span></span>
<span id="cb239-713"><a href="#cb239-713" aria-hidden="true" tabindex="-1"></a><span class="in">    return year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0;</span></span>
<span id="cb239-714"><a href="#cb239-714" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-715"><a href="#cb239-715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-716"><a href="#cb239-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-719"><a href="#cb239-719" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-720"><a href="#cb239-720" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2doty(days = 719468) {</span></span>
<span id="cb239-721"><a href="#cb239-721" aria-hidden="true" tabindex="-1"></a><span class="in">    const cykl = Math.floor((days &gt;= 0 ? days : days - 146096) / 146097), dotc = days - cykl * 146097,</span></span>
<span id="cb239-722"><a href="#cb239-722" aria-hidden="true" tabindex="-1"></a><span class="in">        yotc = Math.floor((dotc - Math.floor(dotc / 1460) + Math.floor(dotc / 36524) - Math.floor(dotc / 146096)) / 365);</span></span>
<span id="cb239-723"><a href="#cb239-723" aria-hidden="true" tabindex="-1"></a><span class="in">    return [yotc + cykl * 400, dotc + Math.floor(yotc / 100) - yotc * 365 - Math.floor(yotc / 4)];</span></span>
<span id="cb239-724"><a href="#cb239-724" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-725"><a href="#cb239-725" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-726"><a href="#cb239-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-729"><a href="#cb239-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-730"><a href="#cb239-730" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Convert a Decalendar date to an ISO calendar date`</span></span>
<span id="cb239-731"><a href="#cb239-731" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-732"><a href="#cb239-732" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-735"><a href="#cb239-735" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-736"><a href="#cb239-736" aria-hidden="true" tabindex="-1"></a><span class="in">month_index = Math.floor((5 * zone0doty + 2) / 153);</span></span>
<span id="cb239-737"><a href="#cb239-737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-738"><a href="#cb239-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-741"><a href="#cb239-741" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-742"><a href="#cb239-742" aria-hidden="true" tabindex="-1"></a><span class="in">month_day = [</span></span>
<span id="cb239-743"><a href="#cb239-743" aria-hidden="true" tabindex="-1"></a><span class="in">  Math.floor(month_index &lt; 10 ? month_index + 3 : month_index - 9),</span></span>
<span id="cb239-744"><a href="#cb239-744" aria-hidden="true" tabindex="-1"></a><span class="in">  Math.floor(zone0doty - (153 * month_index + 2) / 5 + 2)</span></span>
<span id="cb239-745"><a href="#cb239-745" aria-hidden="true" tabindex="-1"></a><span class="in">];</span></span>
<span id="cb239-746"><a href="#cb239-746" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-747"><a href="#cb239-747" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-750"><a href="#cb239-750" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-751"><a href="#cb239-751" aria-hidden="true" tabindex="-1"></a><span class="in">`${</span></span>
<span id="cb239-752"><a href="#cb239-752" aria-hidden="true" tabindex="-1"></a><span class="in">  year + (zone0doty &gt; 305)}-${</span></span>
<span id="cb239-753"><a href="#cb239-753" aria-hidden="true" tabindex="-1"></a><span class="in">  month_day[0].toString().padStart(2, "0")}-${</span></span>
<span id="cb239-754"><a href="#cb239-754" aria-hidden="true" tabindex="-1"></a><span class="in">  month_day[1].toString().padStart(2, "0")</span></span>
<span id="cb239-755"><a href="#cb239-755" aria-hidden="true" tabindex="-1"></a><span class="in">}`</span></span>
<span id="cb239-756"><a href="#cb239-756" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-757"><a href="#cb239-757" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-760"><a href="#cb239-760" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-761"><a href="#cb239-761" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Convert a year and a month to a Decalendar date`</span></span>
<span id="cb239-762"><a href="#cb239-762" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-763"><a href="#cb239-763" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-766"><a href="#cb239-766" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-767"><a href="#cb239-767" aria-hidden="true" tabindex="-1"></a><span class="in">`${</span></span>
<span id="cb239-768"><a href="#cb239-768" aria-hidden="true" tabindex="-1"></a><span class="in">  new Date().getUTCFullYear() - (month_day[0] &lt; 3)}+${</span></span>
<span id="cb239-769"><a href="#cb239-769" aria-hidden="true" tabindex="-1"></a><span class="in">  String(Math.floor((153 * (</span></span>
<span id="cb239-770"><a href="#cb239-770" aria-hidden="true" tabindex="-1"></a><span class="in">    month_day[0] &gt; 2 ? month_day[0] - 3 : month_day[0] + 9</span></span>
<span id="cb239-771"><a href="#cb239-771" aria-hidden="true" tabindex="-1"></a><span class="in">  ) + 2) / 5) + month_day[1] - 1).padStart(3, "0")}`</span></span>
<span id="cb239-772"><a href="#cb239-772" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-773"><a href="#cb239-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-776"><a href="#cb239-776" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-777"><a href="#cb239-777" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Solar Hijiri calendar`</span></span>
<span id="cb239-778"><a href="#cb239-778" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-779"><a href="#cb239-779" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-782"><a href="#cb239-782" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-783"><a href="#cb239-783" aria-hidden="true" tabindex="-1"></a><span class="in">md`Dec focuses on the Gregorian calendar, because it is by far the most widely used calendar system. Other than its ubiquity, another major strength of the Gregorian calender is an intercalation system that is easy to understand and quite accurate. The Gregorian calendar leap years are always divisible by 4, and thus are always even numbers, e.g. 2000, 2004, 2008, 2012, 2016, 2020, 2024, 2028, 2032, 2036, 2040, 2044, and 2048, and are grouped into cycles of 400 years.</span></span>
<span id="cb239-784"><a href="#cb239-784" aria-hidden="true" tabindex="-1"></a><span class="in">`</span></span>
<span id="cb239-785"><a href="#cb239-785" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-786"><a href="#cb239-786" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-789"><a href="#cb239-789" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-790"><a href="#cb239-790" aria-hidden="true" tabindex="-1"></a><span class="in">md`In contrast, the Solar Hijiri calendar is [‚Äúonly in official use in Iran‚Äù](https://en.wikipedia.org/wiki/Solar_Hijri_calendar#:~:text=solar%20hijri%20calendar%20itself%20remains%20only%20in%20official%20use%20in%20iran) and its [33-year cycle](http://aramis.obspm.fr/~heydari/divers/ir-cal-eng.html#:~:text=%20the%20first%20leap%20year%20of%20the%2033%2Dyear%20cycle%20is%20quinquennial%20and%20the%20seven%20others%20quadrennial) intercalation system does not yield instantly recognizable leap years. Within any cycle, Solar Hijiri leap years will be either all even or all odd, but this pattern flips with every cycle. Similarly, 33-year cycles are hard to recognize instantly because the start and end years also flip back and forth between event and odd every cycle, 0 to 32, 33 to 65, 66 to 98, etc.`</span></span>
<span id="cb239-791"><a href="#cb239-791" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-792"><a href="#cb239-792" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-795"><a href="#cb239-795" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-796"><a href="#cb239-796" aria-hidden="true" tabindex="-1"></a><span class="in">md`On the other hand, the Solar Hijiri calendar is much more accurate. A more accurate intercalation system means that the calendar can be used for longer before additional intercalation rules have to be created. The Solar Hijiri calendar also avoids the two major flaws of the Gregorian calendar: 1. Leap Day is not at the end of the year and 2. New Year Day is an arbitrary day that is not connected to any seasonal event like a [solstice](https://en.wikipedia.org/wiki/Solstice#:~:text=the%20time%20when%20the%20sun%20reaches%20its%20most%20northerly%20or%20southerly%20excursion%20relative%20to%20the%20celestial%20equator) or [equinox](https://en.wikipedia.org/wiki/Equinox#:~:text=a%20moment%20in%20time%20when%20the%20sun%20crosses%20the%20earth's%20equator). In the Solar Hijiri calendar, Leap Day is at [the end of the year](https://iran-times.com/persian-calendar-skips-leap-day-this-year-so-your-birthday-comes-a-day-early-the-next-12-months/#:~:text=iranians%20added%20their%20leap%20day%20three%20weeks%20later%20at%20the%20end%20of%20the%20month%20of%20esfand) (1) and New Year Day is the [Northward Equinox](https://en.wikipedia.org/wiki/March_equinox#:~:text=the%20equinox%20on%20the%20earth%20when%20the%20subsolar%20point%20appears%20to%20leave%20the%20southern%20hemisphere%20and%20cross%20the%20celestial%20equator) (2).`</span></span>
<span id="cb239-797"><a href="#cb239-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-798"><a href="#cb239-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-801"><a href="#cb239-801" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-802"><a href="#cb239-802" aria-hidden="true" tabindex="-1"></a><span class="in">md`Decalendar addresses the two major flaws of the Gregorian calendar by moving the start of the year to March 1. When Leap Day is the last day of the year, the day numbers (indexes) used by Decalendar remain constant year to year. Starting the year on March 1 also brings Decalendar in alignment with the [metereological seasons](https://en.wikipedia.org/wiki/Season#:~:text=meteorological%20seasons%20are%20reckoned%20by%20temperature%2C%20with%20summer%20being%20the%20hottest%20quarter%20of%20the%20year%20and%20winter%20the%20coldest%20quarter%20of%20the%20year). In contrast, the Solar Hijiri calendar starts its year on the Northward Equinox and is designed to match the [Northward Equinox year](https://en.wikipedia.org/wiki/Tropical_year#:~:text=between%20two%20march%20equinoxes) rather than the [mean tropical year](https://en.wikipedia.org/wiki/Tropical_year#:~:text=365.242740-,mean%20tropical%20year), and thus more closely matches the [astronomical seasons](https://en.wikipedia.org/wiki/Season#Astronomical).`</span></span>
<span id="cb239-803"><a href="#cb239-803" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-804"><a href="#cb239-804" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-807"><a href="#cb239-807" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-808"><a href="#cb239-808" aria-hidden="true" tabindex="-1"></a><span class="in">md`The Northward equinox in Year 621 was on Day 19 at Dot 90486 in Zone 0 (0621+0199.0486-0, 0621-03-20T21:43+00:00, March 20 621 CE at 9:43 PM) according to [data.giss.nasa.gov](https://data.giss.nasa.gov/modelE/ar5plots/srvernal.html). In Zone 5, the SH epoch deco is 0621+0200.0486-5.</span></span>
<span id="cb239-809"><a href="#cb239-809" aria-hidden="true" tabindex="-1"></a><span class="in">The SH epochal dote is therefore 226835. The UNIX epochal dote is 719468.</span></span>
<span id="cb239-810"><a href="#cb239-810" aria-hidden="true" tabindex="-1"></a><span class="in">The number of days that need to be added to UNIX time to more the epoch from Year 1969 Day 306 to Year 622 Day 20 is therefore 492633.`</span></span>
<span id="cb239-811"><a href="#cb239-811" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-812"><a href="#cb239-812" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-815"><a href="#cb239-815" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-816"><a href="#cb239-816" aria-hidden="true" tabindex="-1"></a><span class="in">sohiEpoch = doty2dote(621, 20)</span></span>
<span id="cb239-817"><a href="#cb239-817" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-818"><a href="#cb239-818" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-821"><a href="#cb239-821" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-822"><a href="#cb239-822" aria-hidden="true" tabindex="-1"></a><span class="in">md`[The modern northward equinox year length](https://en.wikipedia.org/wiki/Tropical_year#:~:text=365.242137%20days-,365.242374%20days,-Between%20two%20June) is 365.242374. The error with the 33-year cycle is ${((365+8/33)-365.242374)*1e6} microdays (millionths of a sol) per year, which is much better than the Gregorian calendar yearly error of ${(365.2425-365.242374)*1e6} microdays.`</span></span>
<span id="cb239-823"><a href="#cb239-823" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-824"><a href="#cb239-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-827"><a href="#cb239-827" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-828"><a href="#cb239-828" aria-hidden="true" tabindex="-1"></a><span class="in">719468 - 226835</span></span>
<span id="cb239-829"><a href="#cb239-829" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-830"><a href="#cb239-830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-833"><a href="#cb239-833" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-834"><a href="#cb239-834" aria-hidden="true" tabindex="-1"></a><span class="in">dote2greg(226835, 4)</span></span>
<span id="cb239-835"><a href="#cb239-835" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-836"><a href="#cb239-836" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-839"><a href="#cb239-839" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-840"><a href="#cb239-840" aria-hidden="true" tabindex="-1"></a><span class="in">zone0doteSH = unix / 86400000 + 492633</span></span>
<span id="cb239-841"><a href="#cb239-841" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-842"><a href="#cb239-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-845"><a href="#cb239-845" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-846"><a href="#cb239-846" aria-hidden="true" tabindex="-1"></a><span class="in">md`The Solar Hijiri calendar has 33-year cycles with 8 leap years and 25 common years. The total number of days in a cycle is 33 * 365 + 8 = 12053.`</span></span>
<span id="cb239-847"><a href="#cb239-847" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-848"><a href="#cb239-848" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-851"><a href="#cb239-851" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-852"><a href="#cb239-852" aria-hidden="true" tabindex="-1"></a><span class="in">33 * 365 + 8</span></span>
<span id="cb239-853"><a href="#cb239-853" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-854"><a href="#cb239-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-857"><a href="#cb239-857" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-858"><a href="#cb239-858" aria-hidden="true" tabindex="-1"></a><span class="in">socySH = Math.floor(zone0doteSH / 12053)</span></span>
<span id="cb239-859"><a href="#cb239-859" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-860"><a href="#cb239-860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-863"><a href="#cb239-863" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-864"><a href="#cb239-864" aria-hidden="true" tabindex="-1"></a><span class="in">dotcSH = zone0doteSH - socySH * 12053</span></span>
<span id="cb239-865"><a href="#cb239-865" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-866"><a href="#cb239-866" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-869"><a href="#cb239-869" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-870"><a href="#cb239-870" aria-hidden="true" tabindex="-1"></a><span class="in">yotcSH = Math.floor((dotcSH - Math.floor(dotcSH / 1460)) / 365)</span></span>
<span id="cb239-871"><a href="#cb239-871" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-872"><a href="#cb239-872" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-875"><a href="#cb239-875" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-876"><a href="#cb239-876" aria-hidden="true" tabindex="-1"></a><span class="in">yearSH = yotcSH + socySH * 33</span></span>
<span id="cb239-877"><a href="#cb239-877" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-878"><a href="#cb239-878" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-881"><a href="#cb239-881" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-882"><a href="#cb239-882" aria-hidden="true" tabindex="-1"></a><span class="in">zone0datetimeSH = dotcSH - yotcSH * 365 - Math.floor(yotcSH / 4)</span></span>
<span id="cb239-883"><a href="#cb239-883" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-884"><a href="#cb239-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-887"><a href="#cb239-887" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-888"><a href="#cb239-888" aria-hidden="true" tabindex="-1"></a><span class="in">zone0dotySH = ~~zone0datetimeSH</span></span>
<span id="cb239-889"><a href="#cb239-889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-890"><a href="#cb239-890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-893"><a href="#cb239-893" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-894"><a href="#cb239-894" aria-hidden="true" tabindex="-1"></a><span class="in">zone0timeSH = zone0datetimeSH % 1</span></span>
<span id="cb239-895"><a href="#cb239-895" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-896"><a href="#cb239-896" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-899"><a href="#cb239-899" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-900"><a href="#cb239-900" aria-hidden="true" tabindex="-1"></a><span class="in">719468 - 226835</span></span>
<span id="cb239-901"><a href="#cb239-901" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-902"><a href="#cb239-902" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-905"><a href="#cb239-905" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-906"><a href="#cb239-906" aria-hidden="true" tabindex="-1"></a><span class="in">md`The leap year rule below differs from [this Wikipedia table](https://en.wikipedia.org/wiki/Solar_Hijri_calendar#Comparison_with_Gregorian_calendar) by 18 years. I believe the table is based on [this paper](https://wwwold.astro.umk.pl/~kb/Papers/EMP/PersianC-EMP.htm). It also differs from the [`solar_hijiri.h`](https://github.com/HowardHinnant/date/blob/master/include/date/solar_hijri.h) file in Howard Hinnant's [date library](https://github.com/HowardHinnant/date#date). but I have instead implemented the leap year approach described on [this webpage](http://aramis.obspm.fr/~heydari/divers/ir-cal-eng.html), because I am convinced that it is not only far superior but also the best possible solar calendar design. I based the 22-year cycle of the Martian calendar below on the 33-year cycle of the Solar Hijiri calendar.`</span></span>
<span id="cb239-907"><a href="#cb239-907" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-908"><a href="#cb239-908" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-911"><a href="#cb239-911" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-912"><a href="#cb239-912" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2sohi(dote = 492633) {</span></span>
<span id="cb239-913"><a href="#cb239-913" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((dote &gt;= 0 ? dote : dote - 12052) / 12053),</span></span>
<span id="cb239-914"><a href="#cb239-914" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 12053, yotc = Math.floor((dotc - Math.floor(dotc / 1461)) / 365)</span></span>
<span id="cb239-915"><a href="#cb239-915" aria-hidden="true" tabindex="-1"></a><span class="in">  return [yotc + socy * 33, dotc - (yotc * 365 + Math.trunc((yotc - 1) / 4))]</span></span>
<span id="cb239-916"><a href="#cb239-916" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-917"><a href="#cb239-917" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-918"><a href="#cb239-918" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-921"><a href="#cb239-921" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-922"><a href="#cb239-922" aria-hidden="true" tabindex="-1"></a><span class="in">soHiDeco = doty2deco(...dote2sohi(unix / 86400000 + 492633), null, "0", true)</span></span>
<span id="cb239-923"><a href="#cb239-923" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-924"><a href="#cb239-924" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-927"><a href="#cb239-927" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-928"><a href="#cb239-928" aria-hidden="true" tabindex="-1"></a><span class="in">dote2sohi(unix / 86400000 + 492633)</span></span>
<span id="cb239-929"><a href="#cb239-929" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-930"><a href="#cb239-930" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-933"><a href="#cb239-933" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-934"><a href="#cb239-934" aria-hidden="true" tabindex="-1"></a><span class="in">md`- Solar Hijiri New Year Example:</span></span>
<span id="cb239-935"><a href="#cb239-935" aria-hidden="true" tabindex="-1"></a><span class="in">  - Gregorian Decalendar:</span></span>
<span id="cb239-936"><a href="#cb239-936" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 2024</span></span>
<span id="cb239-937"><a href="#cb239-937" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 019</span></span>
<span id="cb239-938"><a href="#cb239-938" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 739270</span></span>
<span id="cb239-939"><a href="#cb239-939" aria-hidden="true" tabindex="-1"></a><span class="in">  - Solar Hijiri Decalendar:</span></span>
<span id="cb239-940"><a href="#cb239-940" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 1403</span></span>
<span id="cb239-941"><a href="#cb239-941" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 0</span></span>
<span id="cb239-942"><a href="#cb239-942" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 512435`</span></span>
<span id="cb239-943"><a href="#cb239-943" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-944"><a href="#cb239-944" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-947"><a href="#cb239-947" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-948"><a href="#cb239-948" aria-hidden="true" tabindex="-1"></a><span class="in">doty2dote(2024, 19)</span></span>
<span id="cb239-949"><a href="#cb239-949" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-950"><a href="#cb239-950" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-953"><a href="#cb239-953" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-954"><a href="#cb239-954" aria-hidden="true" tabindex="-1"></a><span class="in">dote2sohi(512435)</span></span>
<span id="cb239-955"><a href="#cb239-955" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-956"><a href="#cb239-956" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-959"><a href="#cb239-959" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-960"><a href="#cb239-960" aria-hidden="true" tabindex="-1"></a><span class="in">dote2sohi(492633)</span></span>
<span id="cb239-961"><a href="#cb239-961" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-962"><a href="#cb239-962" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-965"><a href="#cb239-965" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-966"><a href="#cb239-966" aria-hidden="true" tabindex="-1"></a><span class="in">dote2greg(512435 + 226835)</span></span>
<span id="cb239-967"><a href="#cb239-967" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-968"><a href="#cb239-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-971"><a href="#cb239-971" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-972"><a href="#cb239-972" aria-hidden="true" tabindex="-1"></a><span class="in">719468 - 492633</span></span>
<span id="cb239-973"><a href="#cb239-973" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-974"><a href="#cb239-974" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-977"><a href="#cb239-977" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-978"><a href="#cb239-978" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Lunar Hijiri calendar</span></span>
<span id="cb239-979"><a href="#cb239-979" aria-hidden="true" tabindex="-1"></a><span class="in">The main difference between the Lunar Hijiri and other Decalendars is its year length, 354 or 355 days, which comes from following the Moon instead of the Sun. The Lunar and Solar Hijiri calendars should have the same epoch, but there is a difference of 485 days in the values needed to make the output match expectations. The difference between the UNIX epoch and the Solar Hijiri calendar epoch is 719468 - 226835 = 492633, while the difference between the UNIX epoch and the Lunar Hijiri epoch is 719468 - 227320 = 492148. The Lunar Hijiri calendar cycle is 30 years long and consists of 19 common years and 11 leap years.`</span></span>
<span id="cb239-980"><a href="#cb239-980" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-981"><a href="#cb239-981" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-984"><a href="#cb239-984" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-985"><a href="#cb239-985" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2luhi(dote = 492148) {</span></span>
<span id="cb239-986"><a href="#cb239-986" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((dote &gt;= 0 ? dote : dote - 10630) / 10631),</span></span>
<span id="cb239-987"><a href="#cb239-987" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 10631, yotc = Math.floor((30 * dotc + 10646) / 10631) - 1</span></span>
<span id="cb239-988"><a href="#cb239-988" aria-hidden="true" tabindex="-1"></a><span class="in">  return [yotc + socy * 30 + 1, dotc - (yotc * 354 + Math.floor((11 * (yotc + 1) + 3) / 30))]</span></span>
<span id="cb239-989"><a href="#cb239-989" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-990"><a href="#cb239-990" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-991"><a href="#cb239-991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-994"><a href="#cb239-994" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-995"><a href="#cb239-995" aria-hidden="true" tabindex="-1"></a><span class="in">luHiDeco = doty2deco(...dote2luhi(unix / 86400000 + 492148), null, "0", true)</span></span>
<span id="cb239-996"><a href="#cb239-996" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-997"><a href="#cb239-997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1000"><a href="#cb239-1000" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1001"><a href="#cb239-1001" aria-hidden="true" tabindex="-1"></a><span class="in">dote2luhi(unix / 86400000 + 492148)</span></span>
<span id="cb239-1002"><a href="#cb239-1002" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1003"><a href="#cb239-1003" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1006"><a href="#cb239-1006" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1007"><a href="#cb239-1007" aria-hidden="true" tabindex="-1"></a><span class="in">luhiEpoch = doty2dote(622, 140)</span></span>
<span id="cb239-1008"><a href="#cb239-1008" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1009"><a href="#cb239-1009" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1012"><a href="#cb239-1012" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1013"><a href="#cb239-1013" aria-hidden="true" tabindex="-1"></a><span class="in">dote2doty(227320)</span></span>
<span id="cb239-1014"><a href="#cb239-1014" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1015"><a href="#cb239-1015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1018"><a href="#cb239-1018" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1019"><a href="#cb239-1019" aria-hidden="true" tabindex="-1"></a><span class="in">md`- Lunar Hijiri New Year Example:</span></span>
<span id="cb239-1020"><a href="#cb239-1020" aria-hidden="true" tabindex="-1"></a><span class="in">  - Gregorian Decalendar:</span></span>
<span id="cb239-1021"><a href="#cb239-1021" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 2023</span></span>
<span id="cb239-1022"><a href="#cb239-1022" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 140</span></span>
<span id="cb239-1023"><a href="#cb239-1023" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 739025</span></span>
<span id="cb239-1024"><a href="#cb239-1024" aria-hidden="true" tabindex="-1"></a><span class="in">  - Lunar Hijiri Decalendar:</span></span>
<span id="cb239-1025"><a href="#cb239-1025" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 1445</span></span>
<span id="cb239-1026"><a href="#cb239-1026" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 0</span></span>
<span id="cb239-1027"><a href="#cb239-1027" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 511705`</span></span>
<span id="cb239-1028"><a href="#cb239-1028" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1029"><a href="#cb239-1029" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1032"><a href="#cb239-1032" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1033"><a href="#cb239-1033" aria-hidden="true" tabindex="-1"></a><span class="in">doty2dote(2023, 140)</span></span>
<span id="cb239-1034"><a href="#cb239-1034" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1035"><a href="#cb239-1035" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1038"><a href="#cb239-1038" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1039"><a href="#cb239-1039" aria-hidden="true" tabindex="-1"></a><span class="in">doty2dote(2023, 140)</span></span>
<span id="cb239-1040"><a href="#cb239-1040" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1041"><a href="#cb239-1041" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1044"><a href="#cb239-1044" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1045"><a href="#cb239-1045" aria-hidden="true" tabindex="-1"></a><span class="in">dote2luhi(511705)</span></span>
<span id="cb239-1046"><a href="#cb239-1046" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1047"><a href="#cb239-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1050"><a href="#cb239-1050" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1051"><a href="#cb239-1051" aria-hidden="true" tabindex="-1"></a><span class="in">dote2luhi(739025 - 227320)</span></span>
<span id="cb239-1052"><a href="#cb239-1052" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1053"><a href="#cb239-1053" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1056"><a href="#cb239-1056" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1057"><a href="#cb239-1057" aria-hidden="true" tabindex="-1"></a><span class="in">739025 - 227320</span></span>
<span id="cb239-1058"><a href="#cb239-1058" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1059"><a href="#cb239-1059" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1062"><a href="#cb239-1062" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1063"><a href="#cb239-1063" aria-hidden="true" tabindex="-1"></a><span class="in">dote2greg(511705 + 227320)</span></span>
<span id="cb239-1064"><a href="#cb239-1064" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1065"><a href="#cb239-1065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1068"><a href="#cb239-1068" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1069"><a href="#cb239-1069" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Calendars synchronized to the Gregorian calendar</span></span>
<span id="cb239-1070"><a href="#cb239-1070" aria-hidden="true" tabindex="-1"></a><span class="in">The Bengali, Indian National, Japanese, Nepali, North Korean, Taiwanese (Minguo), and Thai decalendars only differ from the Gregorian decalendar in their epochs. The dates of all of these calendars can be obtained by entering the correct offset to the `unix2dote` function. These other decalendars will not have the same Leap Day and New Year Day as the main Decalendar and thus the conversion of their day of the year numbers to Gregorian calendar dates will differ between common and leap years. In every decalendar, Leap Day is always followed by New Year Day and all days begin at midnight.`</span></span>
<span id="cb239-1071"><a href="#cb239-1071" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1072"><a href="#cb239-1072" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1075"><a href="#cb239-1075" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1076"><a href="#cb239-1076" aria-hidden="true" tabindex="-1"></a><span class="in">bengEpoch = doty2dote(593, 44)</span></span>
<span id="cb239-1077"><a href="#cb239-1077" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1078"><a href="#cb239-1078" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1081"><a href="#cb239-1081" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1082"><a href="#cb239-1082" aria-hidden="true" tabindex="-1"></a><span class="in">bengDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - bengEpoch)), null, "0", true)</span></span>
<span id="cb239-1083"><a href="#cb239-1083" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1084"><a href="#cb239-1084" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1087"><a href="#cb239-1087" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1088"><a href="#cb239-1088" aria-hidden="true" tabindex="-1"></a><span class="in">indiEpoch = doty2dote(78, 20)</span></span>
<span id="cb239-1089"><a href="#cb239-1089" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1090"><a href="#cb239-1090" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1093"><a href="#cb239-1093" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1094"><a href="#cb239-1094" aria-hidden="true" tabindex="-1"></a><span class="in">indiDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - indiEpoch)), null, "0", true)</span></span>
<span id="cb239-1095"><a href="#cb239-1095" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1096"><a href="#cb239-1096" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1099"><a href="#cb239-1099" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1100"><a href="#cb239-1100" aria-hidden="true" tabindex="-1"></a><span class="in">thaiEpoch = doty2dote(-543, 19)</span></span>
<span id="cb239-1101"><a href="#cb239-1101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1102"><a href="#cb239-1102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1105"><a href="#cb239-1105" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1106"><a href="#cb239-1106" aria-hidden="true" tabindex="-1"></a><span class="in">thaiDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - thaiEpoch)), null, "0", true)</span></span>
<span id="cb239-1107"><a href="#cb239-1107" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1108"><a href="#cb239-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1111"><a href="#cb239-1111" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1112"><a href="#cb239-1112" aria-hidden="true" tabindex="-1"></a><span class="in">mingEpoch = doty2dote(1910, 306)</span></span>
<span id="cb239-1113"><a href="#cb239-1113" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1114"><a href="#cb239-1114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1117"><a href="#cb239-1117" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1118"><a href="#cb239-1118" aria-hidden="true" tabindex="-1"></a><span class="in">mingDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - mingEpoch)), null, "0", true)</span></span>
<span id="cb239-1119"><a href="#cb239-1119" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1120"><a href="#cb239-1120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1123"><a href="#cb239-1123" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1124"><a href="#cb239-1124" aria-hidden="true" tabindex="-1"></a><span class="in">nepaEpoch = doty2dote(-57, 44)</span></span>
<span id="cb239-1125"><a href="#cb239-1125" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1126"><a href="#cb239-1126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1129"><a href="#cb239-1129" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1130"><a href="#cb239-1130" aria-hidden="true" tabindex="-1"></a><span class="in">nepaDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - nepaEpoch)), null, "0", true)</span></span>
<span id="cb239-1131"><a href="#cb239-1131" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1132"><a href="#cb239-1132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1135"><a href="#cb239-1135" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1136"><a href="#cb239-1136" aria-hidden="true" tabindex="-1"></a><span class="in">japaEpoch = doty2dote(2018, 306)</span></span>
<span id="cb239-1137"><a href="#cb239-1137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1138"><a href="#cb239-1138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1141"><a href="#cb239-1141" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1142"><a href="#cb239-1142" aria-hidden="true" tabindex="-1"></a><span class="in">japaDeco = doty2deco(...dote2greg(...unix2dote(unix, 0, unixEpoch - japaEpoch)), null, "0", true)</span></span>
<span id="cb239-1143"><a href="#cb239-1143" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1144"><a href="#cb239-1144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1147"><a href="#cb239-1147" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1148"><a href="#cb239-1148" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Julian calendar`</span></span>
<span id="cb239-1149"><a href="#cb239-1149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1150"><a href="#cb239-1150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1153"><a href="#cb239-1153" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1154"><a href="#cb239-1154" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2juli(days) {</span></span>
<span id="cb239-1155"><a href="#cb239-1155" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((days &gt;= 0 ? days : days - 1460) / 1461);</span></span>
<span id="cb239-1156"><a href="#cb239-1156" aria-hidden="true" tabindex="-1"></a><span class="in">  const dotc = days - socy * 1461;                                  // [0, 1460]</span></span>
<span id="cb239-1157"><a href="#cb239-1157" aria-hidden="true" tabindex="-1"></a><span class="in">  const yotc = Math.floor((dotc - Math.floor(dotc / 1460)) / 365);  // [0, 3]</span></span>
<span id="cb239-1158"><a href="#cb239-1158" aria-hidden="true" tabindex="-1"></a><span class="in">  const year = yotc + socy * 4;</span></span>
<span id="cb239-1159"><a href="#cb239-1159" aria-hidden="true" tabindex="-1"></a><span class="in">  const doty = dotc - 365 * yotc;                                   // [0, 365]</span></span>
<span id="cb239-1160"><a href="#cb239-1160" aria-hidden="true" tabindex="-1"></a><span class="in">  return [year, doty]</span></span>
<span id="cb239-1161"><a href="#cb239-1161" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1162"><a href="#cb239-1162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1163"><a href="#cb239-1163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1166"><a href="#cb239-1166" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1167"><a href="#cb239-1167" aria-hidden="true" tabindex="-1"></a><span class="in">dote2juli(unix / 86400000 + 719470)</span></span>
<span id="cb239-1168"><a href="#cb239-1168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1169"><a href="#cb239-1169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1172"><a href="#cb239-1172" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1173"><a href="#cb239-1173" aria-hidden="true" tabindex="-1"></a><span class="in">md`The [Ethiopian calendar](https://en.wikipedia.org/wiki/Ethiopian_calendar#:~:text=the%20official%20state%20civil%20calendar%20of%20Ethiopia) follows the same rules as the Julian calendar, but have a different [epoch](https://en.wikipedia.org/wiki/Ethiopian_calendar#:~:text=months%20earlier%20on-,29%20August%20AD%208,-.%20Meanwhile%2C%20Europeans%20eventually).`</span></span>
<span id="cb239-1174"><a href="#cb239-1174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1175"><a href="#cb239-1175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1178"><a href="#cb239-1178" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1179"><a href="#cb239-1179" aria-hidden="true" tabindex="-1"></a><span class="in">ethiEpoch = doty2dote(7, 181)</span></span>
<span id="cb239-1180"><a href="#cb239-1180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1181"><a href="#cb239-1181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1184"><a href="#cb239-1184" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1185"><a href="#cb239-1185" aria-hidden="true" tabindex="-1"></a><span class="in">dote2juli(2737)</span></span>
<span id="cb239-1186"><a href="#cb239-1186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1187"><a href="#cb239-1187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1190"><a href="#cb239-1190" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1191"><a href="#cb239-1191" aria-hidden="true" tabindex="-1"></a><span class="in">ethiDeco = doty2deco(...dote2juli(unix / 86400000 + 719470 - 2737), null, "0", true)</span></span>
<span id="cb239-1192"><a href="#cb239-1192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1193"><a href="#cb239-1193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1196"><a href="#cb239-1196" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1197"><a href="#cb239-1197" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Julian date`</span></span>
<span id="cb239-1198"><a href="#cb239-1198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1199"><a href="#cb239-1199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1202"><a href="#cb239-1202" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1203"><a href="#cb239-1203" aria-hidden="true" tabindex="-1"></a><span class="in">md`Add 1721119.5 (2440587.5 - 719468) to the dote to get [Universal Time](https://en.wikipedia.org/wiki/Universal_Time#:~:text=a%20time%20standard%20based%20on%20Earth%27s%20rotation) (UT) [Julian Date](https://en.wikipedia.org/wiki/Julian_day#:~:text=any%20instant%20is%20the%20Julian%20day%20number%20plus%20the%20fraction%20of%20a%20day%20since%20the%20preceding%20noon%20in%20Universal%20Time) (JD).`</span></span>
<span id="cb239-1204"><a href="#cb239-1204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1205"><a href="#cb239-1205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1208"><a href="#cb239-1208" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1209"><a href="#cb239-1209" aria-hidden="true" tabindex="-1"></a><span class="in">2440587.5 - 719468</span></span>
<span id="cb239-1210"><a href="#cb239-1210" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1211"><a href="#cb239-1211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1214"><a href="#cb239-1214" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1215"><a href="#cb239-1215" aria-hidden="true" tabindex="-1"></a><span class="in">JDut = zone0dote + 1721119.5</span></span>
<span id="cb239-1216"><a href="#cb239-1216" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1217"><a href="#cb239-1217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1220"><a href="#cb239-1220" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1221"><a href="#cb239-1221" aria-hidden="true" tabindex="-1"></a><span class="in">md`Subtract 1721119.5 (2440587.5 - 719468) from the UT JD to get the dote`</span></span>
<span id="cb239-1222"><a href="#cb239-1222" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1223"><a href="#cb239-1223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1226"><a href="#cb239-1226" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1227"><a href="#cb239-1227" aria-hidden="true" tabindex="-1"></a><span class="in">JDut - 1721119.5</span></span>
<span id="cb239-1228"><a href="#cb239-1228" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1229"><a href="#cb239-1229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1232"><a href="#cb239-1232" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1233"><a href="#cb239-1233" aria-hidden="true" tabindex="-1"></a><span class="in">md`Add 69.184 seconds to UNIX time, divide by 86400 seconds, and add 2440587.5 days to get Terrestrial Time (TT) JD.`</span></span>
<span id="cb239-1234"><a href="#cb239-1234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1235"><a href="#cb239-1235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1238"><a href="#cb239-1238" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1239"><a href="#cb239-1239" aria-hidden="true" tabindex="-1"></a><span class="in">JDtt = (unix + 69184) / 86400000 + 2440587.5</span></span>
<span id="cb239-1240"><a href="#cb239-1240" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1241"><a href="#cb239-1241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1244"><a href="#cb239-1244" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1245"><a href="#cb239-1245" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Mars`</span></span>
<span id="cb239-1246"><a href="#cb239-1246" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1247"><a href="#cb239-1247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1250"><a href="#cb239-1250" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1251"><a href="#cb239-1251" aria-hidden="true" tabindex="-1"></a><span class="in">md`Adapting Decalendar to measure time on Mars can illustrate how Decalendar works. We want the Martian Decalendar time to match the [Martian Sol Date](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Mars_Sol_Date). Sol is the word for a [Martian solar day](https://en.wikipedia.org/wiki/Mars_sol). The Martian Sol Date is [calculated from the Julian Date](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Formulas_to_compute_MSD_and_MTC).`</span></span>
<span id="cb239-1252"><a href="#cb239-1252" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1253"><a href="#cb239-1253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1256"><a href="#cb239-1256" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1257"><a href="#cb239-1257" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Martian Sol Date`</span></span>
<span id="cb239-1258"><a href="#cb239-1258" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1259"><a href="#cb239-1259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1262"><a href="#cb239-1262" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1263"><a href="#cb239-1263" aria-hidden="true" tabindex="-1"></a><span class="in">md`${</span></span>
<span id="cb239-1264"><a href="#cb239-1264" aria-hidden="true" tabindex="-1"></a><span class="in">tex`</span></span>
<span id="cb239-1265"><a href="#cb239-1265" aria-hidden="true" tabindex="-1"></a><span class="in">MSD = (JDTT ‚àí 2451549.5) / 1.0274912517 + 44796.0 ‚àí 0.0009626</span></span>
<span id="cb239-1266"><a href="#cb239-1266" aria-hidden="true" tabindex="-1"></a><span class="in">\\</span></span>
<span id="cb239-1267"><a href="#cb239-1267" aria-hidden="true" tabindex="-1"></a><span class="in">MSD = (JDTT ‚àí 2451549.5 + (44796.0 - 0.0009626) * 1.0274912517) / 1.0274912517 + 44796.0 ‚àí 0.0009626</span></span>
<span id="cb239-1268"><a href="#cb239-1268" aria-hidden="true" tabindex="-1"></a><span class="in">\\</span></span>
<span id="cb239-1269"><a href="#cb239-1269" aria-hidden="true" tabindex="-1"></a><span class="in">MSD = (JDTT ‚àí 2405522.0028779097) / 1.0274912517</span></span>
<span id="cb239-1270"><a href="#cb239-1270" aria-hidden="true" tabindex="-1"></a><span class="in">`}`</span></span>
<span id="cb239-1271"><a href="#cb239-1271" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1272"><a href="#cb239-1272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1275"><a href="#cb239-1275" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1276"><a href="#cb239-1276" aria-hidden="true" tabindex="-1"></a><span class="in">2451549.5 - (44796.0 - 0.0009626) * 1.0274912517</span></span>
<span id="cb239-1277"><a href="#cb239-1277" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1278"><a href="#cb239-1278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1281"><a href="#cb239-1281" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1282"><a href="#cb239-1282" aria-hidden="true" tabindex="-1"></a><span class="in">msd = (JDtt - 2405522.0028779097) / 1.0274912517</span></span>
<span id="cb239-1283"><a href="#cb239-1283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1284"><a href="#cb239-1284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1287"><a href="#cb239-1287" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1288"><a href="#cb239-1288" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Sol of the era</span></span>
<span id="cb239-1289"><a href="#cb239-1289" aria-hidden="true" tabindex="-1"></a><span class="in">The Mars Sol Date and is similar to Julian Date in that we have to adjust their respective epochs to calculate dates. To calculate the Earth year and day of the year (doty) from the Julian Date, we first have to subtract 1721119.5 from the Julian Date to get the day of the era (dote). Similarly, to calculate the Mars year and sol of the year (soty) from the Mars Sol Date, we first have to subtract 28224 from the Martian Sol Date to get the sol of the era (sote).`</span></span>
<span id="cb239-1290"><a href="#cb239-1290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1291"><a href="#cb239-1291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1294"><a href="#cb239-1294" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1295"><a href="#cb239-1295" aria-hidden="true" tabindex="-1"></a><span class="in">msd - 28224 </span></span>
<span id="cb239-1296"><a href="#cb239-1296" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1297"><a href="#cb239-1297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1300"><a href="#cb239-1300" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1301"><a href="#cb239-1301" aria-hidden="true" tabindex="-1"></a><span class="in">md`We can also calculate the sote from UNIX time and the dote. To calculate the sote from UNIX time, we first have to shift the UNIX epoch (`1969+3060.0000-4`) to the Mars Epoch (`1953+0844.1516515-4`) by adding 6065.58483485 days to UNIX time and dividing by 1.0274912517 to convert days to sols.`</span></span>
<span id="cb239-1302"><a href="#cb239-1302" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1303"><a href="#cb239-1303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1306"><a href="#cb239-1306" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1307"><a href="#cb239-1307" aria-hidden="true" tabindex="-1"></a><span class="in">(unix / 86400000 + 6065.58483485) / 1.0274912517</span></span>
<span id="cb239-1308"><a href="#cb239-1308" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1309"><a href="#cb239-1309" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1312"><a href="#cb239-1312" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1313"><a href="#cb239-1313" aria-hidden="true" tabindex="-1"></a><span class="in">md`Likewise, to calculate the sote from the dote, we first have to shift the Decalendar epoch (0000+0000.0000-4) to the Mars Epoch (1953+0844.1516515-4) by subtracting 713402.41516515 days from the dote and dividing by 1.0274912517 to convert days to sols.`</span></span>
<span id="cb239-1314"><a href="#cb239-1314" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1315"><a href="#cb239-1315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1318"><a href="#cb239-1318" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1319"><a href="#cb239-1319" aria-hidden="true" tabindex="-1"></a><span class="in">sote = (zone0dote - 713402.41516515) / 1.0274912517</span></span>
<span id="cb239-1320"><a href="#cb239-1320" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1321"><a href="#cb239-1321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1324"><a href="#cb239-1324" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1325"><a href="#cb239-1325" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Mars epoch`</span></span>
<span id="cb239-1326"><a href="#cb239-1326" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1327"><a href="#cb239-1327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1330"><a href="#cb239-1330" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1331"><a href="#cb239-1331" aria-hidden="true" tabindex="-1"></a><span class="in">marsEpochDote = 719468 - 6065.58483485</span></span>
<span id="cb239-1332"><a href="#cb239-1332" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1333"><a href="#cb239-1333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1336"><a href="#cb239-1336" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1337"><a href="#cb239-1337" aria-hidden="true" tabindex="-1"></a><span class="in">marsEpochJD = marsEpochDote + 1721119.5</span></span>
<span id="cb239-1338"><a href="#cb239-1338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1339"><a href="#cb239-1339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1342"><a href="#cb239-1342" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1343"><a href="#cb239-1343" aria-hidden="true" tabindex="-1"></a><span class="in">marsEpochDoty = dote2greg(marsEpochDote)</span></span>
<span id="cb239-1344"><a href="#cb239-1344" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1345"><a href="#cb239-1345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1348"><a href="#cb239-1348" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1349"><a href="#cb239-1349" aria-hidden="true" tabindex="-1"></a><span class="in">md`The Mars epoch (Year 0 Sol 0) is `2434521.91516515` as a Julian Date, `1953-05-24T09:57:50.3+00:00` in ISO8601 calendar date format, and `1953+0844.1516515-4` in Decalendar. This epoch yields matching numbers after the decimal (fractional day time) in the sol of the era (sote), sol of the year (soty), and Martian Sol Date (msd). In other words, the difference between sote time and msd time is negligible.`</span></span>
<span id="cb239-1350"><a href="#cb239-1350" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1351"><a href="#cb239-1351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1354"><a href="#cb239-1354" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1355"><a href="#cb239-1355" aria-hidden="true" tabindex="-1"></a><span class="in">(sote - msd) % 1 * 1e18</span></span>
<span id="cb239-1356"><a href="#cb239-1356" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1357"><a href="#cb239-1357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1360"><a href="#cb239-1360" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1361"><a href="#cb239-1361" aria-hidden="true" tabindex="-1"></a><span class="in">md`The Mars epoch is also the beginning of the Northward Spring Equinox ([Solar longitude (Ls) = 0](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Definition_of_year_and_seasons)) in [Martian Year 0](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#Year_numbering), a fact I confirmed using [an online Martian time calculator](https://www-mars.lmd.jussieu.fr/mars/time/martian_time.html), as shown in the screenshot below:</span></span>
<span id="cb239-1362"><a href="#cb239-1362" aria-hidden="true" tabindex="-1"></a><span class="in">![image.png](${await FileAttachment("image.png").url()})`</span></span>
<span id="cb239-1363"><a href="#cb239-1363" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1364"><a href="#cb239-1364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1367"><a href="#cb239-1367" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1368"><a href="#cb239-1368" aria-hidden="true" tabindex="-1"></a><span class="in">md`The calculations for Ls are described on the following webpages:</span></span>
<span id="cb239-1369"><a href="#cb239-1369" aria-hidden="true" tabindex="-1"></a><span class="in">- https://marsclock.com</span></span>
<span id="cb239-1370"><a href="#cb239-1370" aria-hidden="true" tabindex="-1"></a><span class="in">- https://www.giss.nasa.gov/tools/mars24/help/algorithm.html</span></span>
<span id="cb239-1371"><a href="#cb239-1371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1372"><a href="#cb239-1372" aria-hidden="true" tabindex="-1"></a><span class="in">I decided not to recreate these calculations here. Ls is great at marking the seasons, but not useful for timekeeping because it ["does not increase linearly with time"](https://en.wikipedia.org/wiki/Solar_longitude#:~:text=does%20not%20increase%20linearly%20with%20time).`</span></span>
<span id="cb239-1373"><a href="#cb239-1373" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1374"><a href="#cb239-1374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1377"><a href="#cb239-1377" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1378"><a href="#cb239-1378" aria-hidden="true" tabindex="-1"></a><span class="in">md`Instead of the exact Mars epoch, it may be easier to work with Julian Date ${tex`2434521.91\overline6`}, which is 1953-05-24T10:00:00+00:00 in ISO8601 calendar date format and ${tex`1953{+}0844.1\overline6{-}4`} in Decalendar. This number is only 1.5 mils (2.16 minutes) more than the exact Mars epoch and thus should be sufficient for situations that do not require a high level of precision.`</span></span>
<span id="cb239-1379"><a href="#cb239-1379" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1380"><a href="#cb239-1380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1383"><a href="#cb239-1383" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1384"><a href="#cb239-1384" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Martian years`</span></span>
<span id="cb239-1385"><a href="#cb239-1385" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1386"><a href="#cb239-1386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1389"><a href="#cb239-1389" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1390"><a href="#cb239-1390" aria-hidden="true" tabindex="-1"></a><span class="in">md`Martian years are grouped in cycles of 22 years (14709 sols). In a cycle, there are 9 short years that have 668 sols and 13 long years that have 669 sols. Years that are not evenly divisible by 2 always have 669 sols. This is easy to remember because odd years have an odd number of sols. In addition, there are two even years with 669 sols every cycle that  are always 10 years apart within a cycle and 12 years apart between cycles, e.g. 10, 20, 32, 42, 54, 64, etc.`</span></span>
<span id="cb239-1391"><a href="#cb239-1391" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1392"><a href="#cb239-1392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1395"><a href="#cb239-1395" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1396"><a href="#cb239-1396" aria-hidden="true" tabindex="-1"></a><span class="in">668 * 22 + 13</span></span>
<span id="cb239-1397"><a href="#cb239-1397" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1398"><a href="#cb239-1398" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1401"><a href="#cb239-1401" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1402"><a href="#cb239-1402" aria-hidden="true" tabindex="-1"></a><span class="in">(668 * 9 + 13 * 669) / 22</span></span>
<span id="cb239-1403"><a href="#cb239-1403" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1404"><a href="#cb239-1404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1407"><a href="#cb239-1407" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1408"><a href="#cb239-1408" aria-hidden="true" tabindex="-1"></a><span class="in">md`Martian year length averaged over a cycle is 668.5909 sols which is more than the [time between northward spring equinoxes on Mars](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#:~:text=northward%20equinox%20year%20is%20668.5907%20sols) (668.5907), but will eventually be too short as the Martian year grows longer over the course of thousands of years. The error with the 22-year cycle is ${((668*22+13)/22-668.5907)*1e6} microsols (millionths of a sol) per year. This error rate will eventually be overtaken by the increase in the length of the Martian year. After 10000 years with a Martian year length increase of .07% per Martian millenium, 6685911.68 days will pass instead of 6685909.09 according to 22-year cycle.`</span></span>
<span id="cb239-1409"><a href="#cb239-1409" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1410"><a href="#cb239-1410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1413"><a href="#cb239-1413" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1414"><a href="#cb239-1414" aria-hidden="true" tabindex="-1"></a><span class="in">668.5907 * 10000 * 1.0000007</span></span>
<span id="cb239-1415"><a href="#cb239-1415" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1416"><a href="#cb239-1416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1419"><a href="#cb239-1419" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1420"><a href="#cb239-1420" aria-hidden="true" tabindex="-1"></a><span class="in">668.590909090909 * 10000</span></span>
<span id="cb239-1421"><a href="#cb239-1421" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1422"><a href="#cb239-1422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1425"><a href="#cb239-1425" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1426"><a href="#cb239-1426" aria-hidden="true" tabindex="-1"></a><span class="in">md`After 3862.158321 years based on a Martian year length increase of .07% per Martian millenium, an additional day will be needed to account for the lengthening of the Martian year.`</span></span>
<span id="cb239-1427"><a href="#cb239-1427" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1428"><a href="#cb239-1428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1431"><a href="#cb239-1431" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1432"><a href="#cb239-1432" aria-hidden="true" tabindex="-1"></a><span class="in">668.5907 * 3862.158321 * 1.0000007 - (668 + 13 / 22) * 3862.158321</span></span>
<span id="cb239-1433"><a href="#cb239-1433" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1434"><a href="#cb239-1434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1437"><a href="#cb239-1437" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1438"><a href="#cb239-1438" aria-hidden="true" tabindex="-1"></a><span class="in">md`Instead of decreasing the cycle length to adjust to the fact that the Martian year is getting longer and an extra day will be needed sooner, we can introduce the concept of a supercycle. Based on the calculations above a supercycle can consist of 111 cycles of 33 Martian years each. This supercycle will add a day at the end of Year 3663, a year which would otherwise 668. The length of the (super)cycle only affects the timing of the bonus day that is added as the last day of the (super)cycle.`</span></span>
<span id="cb239-1439"><a href="#cb239-1439" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1440"><a href="#cb239-1440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1443"><a href="#cb239-1443" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1444"><a href="#cb239-1444" aria-hidden="true" tabindex="-1"></a><span class="in">3682 / 33</span></span>
<span id="cb239-1445"><a href="#cb239-1445" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1446"><a href="#cb239-1446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1449"><a href="#cb239-1449" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1450"><a href="#cb239-1450" aria-hidden="true" tabindex="-1"></a><span class="in">md`People living on Mars in the future may decide to change the epoch from 1953+0844.1516514995601-4, which is [arbitrary](https://en.wikipedia.org/wiki/Timekeeping_on_Mars#:~:text=the%20choice%20as-,%22arbitrary%22,-%2C%20the%20great%20dust), to a more meaningful moment like the first human landing on Mars or the first seed planted in Martian soil. Regardless of the epoch, the calculations below should keep the northward spring equinox stable as Sol 0 without adjustment for thousands of years. The implementation of a supercycle (or some other mechanism of adding another day) will eventually be needed to maintain the start of Martian spring in the Northern Hemisphere as Sol 0. In the future, we may learn something new about Mar‚Äôs orbit around the Sun that informs the decision of how best to add extra days to the Martian Decalendar.`</span></span>
<span id="cb239-1451"><a href="#cb239-1451" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1452"><a href="#cb239-1452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1455"><a href="#cb239-1455" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1456"><a href="#cb239-1456" aria-hidden="true" tabindex="-1"></a><span class="in">marsSocy = Math.floor(sote / 14709)</span></span>
<span id="cb239-1457"><a href="#cb239-1457" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1458"><a href="#cb239-1458" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1461"><a href="#cb239-1461" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1462"><a href="#cb239-1462" aria-hidden="true" tabindex="-1"></a><span class="in">sotc = sote - marsSocy * 14709</span></span>
<span id="cb239-1463"><a href="#cb239-1463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1464"><a href="#cb239-1464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1467"><a href="#cb239-1467" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1468"><a href="#cb239-1468" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2sote(dote = 719468) {</span></span>
<span id="cb239-1469"><a href="#cb239-1469" aria-hidden="true" tabindex="-1"></a><span class="in">    return (dote - 713402.41516515) / 1.0274912517</span></span>
<span id="cb239-1470"><a href="#cb239-1470" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1471"><a href="#cb239-1471" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1472"><a href="#cb239-1472" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1475"><a href="#cb239-1475" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1476"><a href="#cb239-1476" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2soty(dote = 719468) {</span></span>
<span id="cb239-1477"><a href="#cb239-1477" aria-hidden="true" tabindex="-1"></a><span class="in">    return sote2soty(dote2sote(dote))</span></span>
<span id="cb239-1478"><a href="#cb239-1478" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1479"><a href="#cb239-1479" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1480"><a href="#cb239-1480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1483"><a href="#cb239-1483" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1484"><a href="#cb239-1484" aria-hidden="true" tabindex="-1"></a><span class="in">function sote2soty(sote = 719468) {</span></span>
<span id="cb239-1485"><a href="#cb239-1485" aria-hidden="true" tabindex="-1"></a><span class="in">    const socy = Math.floor((sote &gt;= 0 ? sote : sote - 14708) / 14709), sotc = sote - socy * 14709,</span></span>
<span id="cb239-1486"><a href="#cb239-1486" aria-hidden="true" tabindex="-1"></a><span class="in">    yotc = Math.floor((sotc - Math.floor(sotc / 1336) - Math.floor(sotc / 6686)) / 668);</span></span>
<span id="cb239-1487"><a href="#cb239-1487" aria-hidden="true" tabindex="-1"></a><span class="in">    return [yotc + socy * 22, sotc - (yotc * 668 + Math.floor(yotc / 2) + Math.trunc((yotc - 1) / 10))]</span></span>
<span id="cb239-1488"><a href="#cb239-1488" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1489"><a href="#cb239-1489" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1490"><a href="#cb239-1490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1493"><a href="#cb239-1493" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1494"><a href="#cb239-1494" aria-hidden="true" tabindex="-1"></a><span class="in">md`- Mars Epoch Example:</span></span>
<span id="cb239-1495"><a href="#cb239-1495" aria-hidden="true" tabindex="-1"></a><span class="in">  - Gregorian Decalendar:</span></span>
<span id="cb239-1496"><a href="#cb239-1496" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 1953</span></span>
<span id="cb239-1497"><a href="#cb239-1497" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 84.41516515</span></span>
<span id="cb239-1498"><a href="#cb239-1498" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 713402.41516515</span></span>
<span id="cb239-1499"><a href="#cb239-1499" aria-hidden="true" tabindex="-1"></a><span class="in">  - Mars Decalendar:</span></span>
<span id="cb239-1500"><a href="#cb239-1500" aria-hidden="true" tabindex="-1"></a><span class="in">    - year: 0</span></span>
<span id="cb239-1501"><a href="#cb239-1501" aria-hidden="true" tabindex="-1"></a><span class="in">    - doty: 0</span></span>
<span id="cb239-1502"><a href="#cb239-1502" aria-hidden="true" tabindex="-1"></a><span class="in">    - dote: 0`</span></span>
<span id="cb239-1503"><a href="#cb239-1503" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1504"><a href="#cb239-1504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1507"><a href="#cb239-1507" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1508"><a href="#cb239-1508" aria-hidden="true" tabindex="-1"></a><span class="in">doty2dote(1953, 84.41516515)</span></span>
<span id="cb239-1509"><a href="#cb239-1509" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1510"><a href="#cb239-1510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1513"><a href="#cb239-1513" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1514"><a href="#cb239-1514" aria-hidden="true" tabindex="-1"></a><span class="in">dote2soty(713402.41516515)</span></span>
<span id="cb239-1515"><a href="#cb239-1515" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1516"><a href="#cb239-1516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1519"><a href="#cb239-1519" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1520"><a href="#cb239-1520" aria-hidden="true" tabindex="-1"></a><span class="in">mars = dote2soty(unix / 86400000 + 719468)</span></span>
<span id="cb239-1521"><a href="#cb239-1521" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1522"><a href="#cb239-1522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1525"><a href="#cb239-1525" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1526"><a href="#cb239-1526" aria-hidden="true" tabindex="-1"></a><span class="in">marsDeco = `üóìÔ∏èÔ∏è${mars[0].toString().padStart(4, "0")}+${Math.floor(mars[1]).toString().padStart(3, "0")}üï∞${(mars[1] % 1 * 10).toFixed(4)}`</span></span>
<span id="cb239-1527"><a href="#cb239-1527" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1528"><a href="#cb239-1528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1531"><a href="#cb239-1531" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1532"><a href="#cb239-1532" aria-hidden="true" tabindex="-1"></a><span class="in">md`For a direct calculation of Martian and Earth time, check out the [Declock notebook](/@dec/declock).`</span></span>
<span id="cb239-1533"><a href="#cb239-1533" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1534"><a href="#cb239-1534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1537"><a href="#cb239-1537" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1538"><a href="#cb239-1538" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Moon</span></span>
<span id="cb239-1539"><a href="#cb239-1539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1540"><a href="#cb239-1540" aria-hidden="true" tabindex="-1"></a><span class="in">In the future, the Moon and its</span></span>
<span id="cb239-1541"><a href="#cb239-1541" aria-hidden="true" tabindex="-1"></a><span class="in">[Lagrange points](https://en.wikipedia.org/wiki/Lagrange_point#:~:text=points%20of%20equilibrium%20for%20small%2Dmass%20objects%20under%20the%20gravitational%20influence%20of%20two%20massive%20orbiting%20bodies)</span></span>
<span id="cb239-1542"><a href="#cb239-1542" aria-hidden="true" tabindex="-1"></a><span class="in">could be important staging areas for space travel. Humans living on the surface</span></span>
<span id="cb239-1543"><a href="#cb239-1543" aria-hidden="true" tabindex="-1"></a><span class="in">of the Moon will need a time system that relates to their environment.</span></span>
<span id="cb239-1544"><a href="#cb239-1544" aria-hidden="true" tabindex="-1"></a><span class="in">Decalendar measures time on the Moon in lunar years and lunar days. Just as a Martian solar day can be called a sol, a lunar day can be called a tel, which comes from the ancient Roman name [Tellus](https://en.wikipedia.org/wiki/Terra_%28mythology%29#Tellus_and_Terra_in_science_fiction:~:text=the%20name%20of%20the%20original%20earth%20goddess%20in%20the%20religious%20practices%20of%20the%20Republic) and is short for [tellurian or telluric](https://en.wikipedia.org/wiki/List_of_adjectivals_and_demonyms_of_astronomical_bodies#:~:text=Tellurian%2C%5B3%5D%20Telluric). A lunar year in Decalendar is a turn of the Moon around the Earth, which has the same duration as a turn of the Moon on its axis, because the Moon is [tidally locked](https://en.wikipedia.org/wiki/Tidal_locking#:~:text=the%20objects%20reaches-,a%20state%20where%20there%20is%20no%20longer%20any%20net%20change%20in%20its%20rotation%20rate%20over%20the%20course%20of%20a%20complete%20orbit,-.%20In%20the%20case) to the Earth.</span></span>
<span id="cb239-1545"><a href="#cb239-1545" aria-hidden="true" tabindex="-1"></a><span class="in">The animation below shows how tidal locking synchronizes the Moon's turns on its axis and around the Earth.`</span></span>
<span id="cb239-1546"><a href="#cb239-1546" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1547"><a href="#cb239-1547" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1550"><a href="#cb239-1550" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1551"><a href="#cb239-1551" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@jhhamer/moon-earth-system</span></span>
<span id="cb239-1552"><a href="#cb239-1552" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@jhhamer/tides-in-hot-jupiter-systems</span></span>
<span id="cb239-1553"><a href="#cb239-1553" aria-hidden="true" tabindex="-1"></a><span class="in">{</span></span>
<span id="cb239-1554"><a href="#cb239-1554" aria-hidden="true" tabindex="-1"></a><span class="in">  const h = w;</span></span>
<span id="cb239-1555"><a href="#cb239-1555" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb239-1556"><a href="#cb239-1556" aria-hidden="true" tabindex="-1"></a><span class="in">  const svg = d3.select(DOM.svg(w, h));</span></span>
<span id="cb239-1557"><a href="#cb239-1557" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1558"><a href="#cb239-1558" aria-hidden="true" tabindex="-1"></a><span class="in">  svg.append("rect")</span></span>
<span id="cb239-1559"><a href="#cb239-1559" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("width", "100%")</span></span>
<span id="cb239-1560"><a href="#cb239-1560" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("height", "100%")</span></span>
<span id="cb239-1561"><a href="#cb239-1561" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", "black");</span></span>
<span id="cb239-1562"><a href="#cb239-1562" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1563"><a href="#cb239-1563" aria-hidden="true" tabindex="-1"></a><span class="in">  //Earth</span></span>
<span id="cb239-1564"><a href="#cb239-1564" aria-hidden="true" tabindex="-1"></a><span class="in">  var earth = svg.append("ellipse")</span></span>
<span id="cb239-1565"><a href="#cb239-1565" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("rx", earth_radius*scale)</span></span>
<span id="cb239-1566"><a href="#cb239-1566" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("ry", earth_radius*scale)</span></span>
<span id="cb239-1567"><a href="#cb239-1567" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", d3.color("steelblue"))</span></span>
<span id="cb239-1568"><a href="#cb239-1568" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cx", w/2)</span></span>
<span id="cb239-1569"><a href="#cb239-1569" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cy", h/2)</span></span>
<span id="cb239-1570"><a href="#cb239-1570" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("id", "earth");</span></span>
<span id="cb239-1571"><a href="#cb239-1571" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1572"><a href="#cb239-1572" aria-hidden="true" tabindex="-1"></a><span class="in">  var earth_midline = svg.append("line")</span></span>
<span id="cb239-1573"><a href="#cb239-1573" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("x1", w/2-earth_radius*scale)</span></span>
<span id="cb239-1574"><a href="#cb239-1574" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("y1", h/2)</span></span>
<span id="cb239-1575"><a href="#cb239-1575" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("x2", w/2+earth_radius*scale)</span></span>
<span id="cb239-1576"><a href="#cb239-1576" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("y2", h/2)</span></span>
<span id="cb239-1577"><a href="#cb239-1577" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke-width", 5)</span></span>
<span id="cb239-1578"><a href="#cb239-1578" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke", "black");</span></span>
<span id="cb239-1579"><a href="#cb239-1579" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1580"><a href="#cb239-1580" aria-hidden="true" tabindex="-1"></a><span class="in">  //Moon</span></span>
<span id="cb239-1581"><a href="#cb239-1581" aria-hidden="true" tabindex="-1"></a><span class="in">  var moonOrbit = svg.append("g")</span></span>
<span id="cb239-1582"><a href="#cb239-1582" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("x", w/2)</span></span>
<span id="cb239-1583"><a href="#cb239-1583" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("y", h/2)</span></span>
<span id="cb239-1584"><a href="#cb239-1584" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1585"><a href="#cb239-1585" aria-hidden="true" tabindex="-1"></a><span class="in">  var moonorbitpath = svg.append("circle")</span></span>
<span id="cb239-1586"><a href="#cb239-1586" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("cx", w/2)</span></span>
<span id="cb239-1587"><a href="#cb239-1587" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("cy", h/2)</span></span>
<span id="cb239-1588"><a href="#cb239-1588" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("r", earth_moon_dist)</span></span>
<span id="cb239-1589"><a href="#cb239-1589" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("id", "moon")</span></span>
<span id="cb239-1590"><a href="#cb239-1590" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("fill", "None")</span></span>
<span id="cb239-1591"><a href="#cb239-1591" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("stroke", d3.color('white'))</span></span>
<span id="cb239-1592"><a href="#cb239-1592" aria-hidden="true" tabindex="-1"></a><span class="in">   .attr("stroke-width", 1);</span></span>
<span id="cb239-1593"><a href="#cb239-1593" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb239-1594"><a href="#cb239-1594" aria-hidden="true" tabindex="-1"></a><span class="in">  var moon = moonOrbit.append("circle")</span></span>
<span id="cb239-1595"><a href="#cb239-1595" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("r", moon_radius*scale)</span></span>
<span id="cb239-1596"><a href="#cb239-1596" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cx", w/2 - earth_moon_dist)</span></span>
<span id="cb239-1597"><a href="#cb239-1597" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("cy", h/2)</span></span>
<span id="cb239-1598"><a href="#cb239-1598" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("fill", d3.color("lightgray"));</span></span>
<span id="cb239-1599"><a href="#cb239-1599" aria-hidden="true" tabindex="-1"></a><span class="in">  var tidal_midline = svg.append("line")</span></span>
<span id="cb239-1600"><a href="#cb239-1600" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("x1", w/2-earth_moon_dist)</span></span>
<span id="cb239-1601"><a href="#cb239-1601" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("y1", h/2)</span></span>
<span id="cb239-1602"><a href="#cb239-1602" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("x2", w/2+earth_moon_dist-50+(width &lt; 800)*10+(width &lt; 400)*3)</span></span>
<span id="cb239-1603"><a href="#cb239-1603" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("y2", h/2)</span></span>
<span id="cb239-1604"><a href="#cb239-1604" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke-width", 5)</span></span>
<span id="cb239-1605"><a href="#cb239-1605" aria-hidden="true" tabindex="-1"></a><span class="in">    .attr("stroke", "white");</span></span>
<span id="cb239-1606"><a href="#cb239-1606" aria-hidden="true" tabindex="-1"></a><span class="in">  // var moon_midline = svg.append("line")</span></span>
<span id="cb239-1607"><a href="#cb239-1607" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("x1", w/2-earth_moon_dist)</span></span>
<span id="cb239-1608"><a href="#cb239-1608" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("y1", h/2)</span></span>
<span id="cb239-1609"><a href="#cb239-1609" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("x2", w/2+earth_moon_dist-943)</span></span>
<span id="cb239-1610"><a href="#cb239-1610" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("y2", h/2)</span></span>
<span id="cb239-1611"><a href="#cb239-1611" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("stroke-width", 4)</span></span>
<span id="cb239-1612"><a href="#cb239-1612" aria-hidden="true" tabindex="-1"></a><span class="in">  //   .attr("stroke", "black");</span></span>
<span id="cb239-1613"><a href="#cb239-1613" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1614"><a href="#cb239-1614" aria-hidden="true" tabindex="-1"></a><span class="in">  d3.timer(animate);</span></span>
<span id="cb239-1615"><a href="#cb239-1615" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1616"><a href="#cb239-1616" aria-hidden="true" tabindex="-1"></a><span class="in">  function animate(elapsed){</span></span>
<span id="cb239-1617"><a href="#cb239-1617" aria-hidden="true" tabindex="-1"></a><span class="in">    var moondegrees = ((elapsed/16.2)*.0365)%360;</span></span>
<span id="cb239-1618"><a href="#cb239-1618" aria-hidden="true" tabindex="-1"></a><span class="in">    var earthdegrees = (elapsed/16.2)%360;</span></span>
<span id="cb239-1619"><a href="#cb239-1619" aria-hidden="true" tabindex="-1"></a><span class="in">    moon</span></span>
<span id="cb239-1620"><a href="#cb239-1620" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", `rotate(-${moondegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb239-1621"><a href="#cb239-1621" aria-hidden="true" tabindex="-1"></a><span class="in">    earth</span></span>
<span id="cb239-1622"><a href="#cb239-1622" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", `rotate(-${moondegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb239-1623"><a href="#cb239-1623" aria-hidden="true" tabindex="-1"></a><span class="in">    earth_midline</span></span>
<span id="cb239-1624"><a href="#cb239-1624" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", `rotate(-${earthdegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb239-1625"><a href="#cb239-1625" aria-hidden="true" tabindex="-1"></a><span class="in">    tidal_midline</span></span>
<span id="cb239-1626"><a href="#cb239-1626" aria-hidden="true" tabindex="-1"></a><span class="in">      .attr("transform", `rotate(-${moondegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb239-1627"><a href="#cb239-1627" aria-hidden="true" tabindex="-1"></a><span class="in">    // moon_midline</span></span>
<span id="cb239-1628"><a href="#cb239-1628" aria-hidden="true" tabindex="-1"></a><span class="in">    //   .attr("transform", `rotate(-${moondegrees} ${w/2} ${h/2})`);</span></span>
<span id="cb239-1629"><a href="#cb239-1629" aria-hidden="true" tabindex="-1"></a><span class="in">    </span></span>
<span id="cb239-1630"><a href="#cb239-1630" aria-hidden="true" tabindex="-1"></a><span class="in">  };</span></span>
<span id="cb239-1631"><a href="#cb239-1631" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1632"><a href="#cb239-1632" aria-hidden="true" tabindex="-1"></a><span class="in">  return svg.node();</span></span>
<span id="cb239-1633"><a href="#cb239-1633" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1634"><a href="#cb239-1634" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1635"><a href="#cb239-1635" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1638"><a href="#cb239-1638" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1639"><a href="#cb239-1639" aria-hidden="true" tabindex="-1"></a><span class="in">md`Tidal locking also affects the length of a tel (`d`), which is defined in terms of the duration of the lunar year (`y`): ${tex`d = 1 + 1 \div y`}. The average lunar year length in a time period from the new moon on 1999+311 to the new moon 2500+325 is 29.53023507695045 days according to [astropixels.com](https://astropixels.com/ephemeris/moon/synodicmonth2001.html) data. Based on this lunar year length, the length of a tel is ${1+1/29.53023507695045} days, which is [the time it takes the Moon to return to the same location above the Earth](https://en.wikipedia.org/wiki/Lunar_day#:~:text=the%20period%20between%20moonrises%20or%20high%20moon%20in%20a%20particular%20location%20on%20Earth). The number of tels in a lunar year is therefore ${29.53023507695045/1.0338635976785888} days. Decimal tels provide the time on the Moon. The [center of Zone 0 on the Moon](https://en.wikipedia.org/wiki/Selenographic_coordinate_system#:~:text=the%20midpoint%20of%20the%20visible%20moon%20as%20seen%20from%20the%20earth) is a [Meridian](https://en.wikipedia.org/wiki/Meridian_%28geography%28#:~:text=the%20locus%20connecting%20points%20of%20equal%20longitude) 05, a line that separates the [near side of the Moon](https://en.wikipedia.org/wiki/Near_side_of_the_Moon#:~:text=the%20lunar%20hemisphere%20that%20always%20faces%20towards%20Earth) into two equal West and East halves.`</span></span>
<span id="cb239-1640"><a href="#cb239-1640" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1641"><a href="#cb239-1641" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1644"><a href="#cb239-1644" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1645"><a href="#cb239-1645" aria-hidden="true" tabindex="-1"></a><span class="in">md`Decalendar years typically start with the [Northward Equinox](https://en.wikipedia.org/wiki/March_equinox#:~:text=the%20equinox%20on%20the%20earth%20when%20the%20subsolar%20point%20appears%20to%20leave%20the%20southern%20hemisphere%20and%20cross%20the%20celestial%20equator%2C%20heading%20northward), but the Moon does</span></span>
<span id="cb239-1646"><a href="#cb239-1646" aria-hidden="true" tabindex="-1"></a><span class="in">not have noticeable seasons because it is</span></span>
<span id="cb239-1647"><a href="#cb239-1647" aria-hidden="true" tabindex="-1"></a><span class="in">[tilted by only about ${tex`4.1\overline6`} microturns on it axis](https://www.space.com/55-earths-moon-formation-composition-and-orbit.html#:~:text=tilted%20by%20only%20about%201.5%20degrees), which is more than 10000 times smaller than the Earth‚Äôs ${tex`65.\overline1`} milliturn [tilt](https://en.wikipedia.org/wiki/Axial_tilt#:~:text=axial%20tilt%20of-,about%2023.44%C2%B0,-.%5B7%5D%20This%20value%20remains). Therefore,</span></span>
<span id="cb239-1648"><a href="#cb239-1648" aria-hidden="true" tabindex="-1"></a><span class="in">instead of following the seasons, we should follow the [Moon phases](https://en.wikipedia.org/wiki/Lunar_phase#:~:text=the%20apparent%20shape%20of%20the%20Moon%27s%20directly%20sunlit%20portion%20as%20viewed%20from%20the%20Earth).</span></span>
<span id="cb239-1649"><a href="#cb239-1649" aria-hidden="true" tabindex="-1"></a><span class="in">Decalendar defines the lunar epoch to be</span></span>
<span id="cb239-1650"><a href="#cb239-1650" aria-hidden="true" tabindex="-1"></a><span class="in">[1999+311.75972-0](https://en.wikipedia.org/wiki/New_moon#:~:text=18%3A14%20UTC%2C%206%20January%202000),</span></span>
<span id="cb239-1651"><a href="#cb239-1651" aria-hidden="true" tabindex="-1"></a><span class="in">the first new moon after</span></span>
<span id="cb239-1652"><a href="#cb239-1652" aria-hidden="true" tabindex="-1"></a><span class="in">[J2000](https://en.wikipedia.org/wiki/Epoch_%28astronomy%29#:~:text=currently%20used%20standard%20epoch%20%22J2000%22).</span></span>
<span id="cb239-1653"><a href="#cb239-1653" aria-hidden="true" tabindex="-1"></a><span class="in">The number of days after this epoch is the lunar day of the era (dote). To obtain the current lunar year and tel of the year (toty), we first divide the lunar dote by 1.0338635976785888 to get the tel of</span></span>
<span id="cb239-1654"><a href="#cb239-1654" aria-hidden="true" tabindex="-1"></a><span class="in">the era (tote). Then, after we split up the tote into lunar years, we can convert the remainder into the toty or a decimal lunar year,  which provides the Moon phase as shown by visualization and slider below.`</span></span>
<span id="cb239-1655"><a href="#cb239-1655" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1656"><a href="#cb239-1656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1659"><a href="#cb239-1659" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1660"><a href="#cb239-1660" aria-hidden="true" tabindex="-1"></a><span class="in">moon(universe(width / 4000 + (width &lt; 400) * .9, "black"), moonFraction / 100, "white", "black")</span></span>
<span id="cb239-1661"><a href="#cb239-1661" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1662"><a href="#cb239-1662" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1665"><a href="#cb239-1665" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1666"><a href="#cb239-1666" aria-hidden="true" tabindex="-1"></a><span class="in">viewof moonFraction = Scrubber(d3.range(101), {</span></span>
<span id="cb239-1667"><a href="#cb239-1667" aria-hidden="true" tabindex="-1"></a><span class="in">  delay: 86.4</span></span>
<span id="cb239-1668"><a href="#cb239-1668" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb239-1669"><a href="#cb239-1669" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1670"><a href="#cb239-1670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1673"><a href="#cb239-1673" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1674"><a href="#cb239-1674" aria-hidden="true" tabindex="-1"></a><span class="in">md`The lunar leap cycle is determined by the</span></span>
<span id="cb239-1675"><a href="#cb239-1675" aria-hidden="true" tabindex="-1"></a><span class="in">[fractional part](https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part)</span></span>
<span id="cb239-1676"><a href="#cb239-1676" aria-hidden="true" tabindex="-1"></a><span class="in">of the lunar year length, which is close to the fraction ${tex`9/16=.5625`}. The</span></span>
<span id="cb239-1677"><a href="#cb239-1677" aria-hidden="true" tabindex="-1"></a><span class="in">numerator in this fraction is the number of 29-tel long lunar years in the</span></span>
<span id="cb239-1678"><a href="#cb239-1678" aria-hidden="true" tabindex="-1"></a><span class="in">cycle, while the denominator is the leap cycle length in lunar years. Inside a</span></span>
<span id="cb239-1679"><a href="#cb239-1679" aria-hidden="true" tabindex="-1"></a><span class="in">lunar leap cycle, lunar years are numbered 0 through 15. Even-numbered lunar</span></span>
<span id="cb239-1680"><a href="#cb239-1680" aria-hidden="true" tabindex="-1"></a><span class="in">years except for Year 10 have 28 tels. Year 10 and all odd-numbered years have</span></span>
<span id="cb239-1681"><a href="#cb239-1681" aria-hidden="true" tabindex="-1"></a><span class="in">29 tels. This is easy to remember because with the exception of Year 10 in the</span></span>
<span id="cb239-1682"><a href="#cb239-1682" aria-hidden="true" tabindex="-1"></a><span class="in">cycle, even-numbered years have an even number of tels (28) and odd-numbered</span></span>
<span id="cb239-1683"><a href="#cb239-1683" aria-hidden="true" tabindex="-1"></a><span class="in">years have an odd number of tels (29).</span></span>
<span id="cb239-1684"><a href="#cb239-1684" aria-hidden="true" tabindex="-1"></a><span class="in">`</span></span>
<span id="cb239-1685"><a href="#cb239-1685" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1686"><a href="#cb239-1686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1689"><a href="#cb239-1689" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1690"><a href="#cb239-1690" aria-hidden="true" tabindex="-1"></a><span class="in">md`The lunar leap cycle is designed to follow the lunar day-night cycle and the</span></span>
<span id="cb239-1691"><a href="#cb239-1691" aria-hidden="true" tabindex="-1"></a><span class="in">Moon</span></span>
<span id="cb239-1692"><a href="#cb239-1692" aria-hidden="true" tabindex="-1"></a><span class="in">and</span></span>
<span id="cb239-1693"><a href="#cb239-1693" aria-hidden="true" tabindex="-1"></a><span class="in">[Earth</span></span>
<span id="cb239-1694"><a href="#cb239-1694" aria-hidden="true" tabindex="-1"></a><span class="in">phases](https://en.wikipedia.org/wiki/Earth_phase#:~:text=the%20shape%20of%20the%20directly%20sunlit%20portion%20of%20Earth%20as%20viewed%20from%20the%20Moon), keeping the new moon close to Tel 0 and full moon close to Tel 14. The</span></span>
<span id="cb239-1695"><a href="#cb239-1695" aria-hidden="true" tabindex="-1"></a><span class="in">error rate of the lunar leap cycle is -0.0004894922859186579 tels per lunar</span></span>
<span id="cb239-1696"><a href="#cb239-1696" aria-hidden="true" tabindex="-1"></a><span class="in">year, which means we will have to add a tel before the Year 2042 to avoid</span></span>
<span id="cb239-1697"><a href="#cb239-1697" aria-hidden="true" tabindex="-1"></a><span class="in">falling a tel behind the start of the lunar year.</span></span>
<span id="cb239-1698"><a href="#cb239-1698" aria-hidden="true" tabindex="-1"></a><span class="in">A nice potential intercalation</span></span>
<span id="cb239-1699"><a href="#cb239-1699" aria-hidden="true" tabindex="-1"></a><span class="in">point for this additional tel may be the Year 2000 which has 28 tels and is the</span></span>
<span id="cb239-1700"><a href="#cb239-1700" aria-hidden="true" tabindex="-1"></a><span class="in">first year in Cycle 125.</span></span>
<span id="cb239-1701"><a href="#cb239-1701" aria-hidden="true" tabindex="-1"></a><span class="in">Altogether in one cycle, there are 457 tels, which are numbered 0 to 456,</span></span>
<span id="cb239-1702"><a href="#cb239-1702" aria-hidden="true" tabindex="-1"></a><span class="in">but Cycle 125 could be the first cycle to have 458 days, numbered 0 to 457.`</span></span>
<span id="cb239-1703"><a href="#cb239-1703" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1704"><a href="#cb239-1704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1707"><a href="#cb239-1707" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1708"><a href="#cb239-1708" aria-hidden="true" tabindex="-1"></a><span class="in">moonDote = zone0dote - doty2dote(1999, 311.75+14/60/24)</span></span>
<span id="cb239-1709"><a href="#cb239-1709" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1710"><a href="#cb239-1710" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1713"><a href="#cb239-1713" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1714"><a href="#cb239-1714" aria-hidden="true" tabindex="-1"></a><span class="in">moonTote = moonDote / 1.0338635976785888</span></span>
<span id="cb239-1715"><a href="#cb239-1715" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1716"><a href="#cb239-1716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1719"><a href="#cb239-1719" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1720"><a href="#cb239-1720" aria-hidden="true" tabindex="-1"></a><span class="in">moonEpoch = doty2dote(1999, 311.75+14/60/24)</span></span>
<span id="cb239-1721"><a href="#cb239-1721" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1722"><a href="#cb239-1722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1725"><a href="#cb239-1725" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1726"><a href="#cb239-1726" aria-hidden="true" tabindex="-1"></a><span class="in">daysSinceJ2000 = JDtt - 2451545</span></span>
<span id="cb239-1727"><a href="#cb239-1727" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1728"><a href="#cb239-1728" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1731"><a href="#cb239-1731" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1732"><a href="#cb239-1732" aria-hidden="true" tabindex="-1"></a><span class="in">function tote2toty(tote = 719468) {</span></span>
<span id="cb239-1733"><a href="#cb239-1733" aria-hidden="true" tabindex="-1"></a><span class="in">    const socy = Math.floor((tote &gt;= 0 ? tote : tote - 456) / 457), totc = tote - socy * 457,</span></span>
<span id="cb239-1734"><a href="#cb239-1734" aria-hidden="true" tabindex="-1"></a><span class="in">    yotc = Math.floor((totc - Math.floor(totc / 56) - Math.floor(totc / 286)) / 28);</span></span>
<span id="cb239-1735"><a href="#cb239-1735" aria-hidden="true" tabindex="-1"></a><span class="in">    return [yotc + socy * 16, totc - (yotc * 28 + Math.floor(yotc / 2) + Math.trunc((yotc - 1) / 10))]</span></span>
<span id="cb239-1736"><a href="#cb239-1736" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1737"><a href="#cb239-1737" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1738"><a href="#cb239-1738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1741"><a href="#cb239-1741" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1742"><a href="#cb239-1742" aria-hidden="true" tabindex="-1"></a><span class="in">yt = tote2toty(moonTote)</span></span>
<span id="cb239-1743"><a href="#cb239-1743" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1744"><a href="#cb239-1744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1747"><a href="#cb239-1747" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1748"><a href="#cb239-1748" aria-hidden="true" tabindex="-1"></a><span class="in">moonYear = yt[0]</span></span>
<span id="cb239-1749"><a href="#cb239-1749" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1750"><a href="#cb239-1750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1753"><a href="#cb239-1753" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1754"><a href="#cb239-1754" aria-hidden="true" tabindex="-1"></a><span class="in">moonToty = yt[1]</span></span>
<span id="cb239-1755"><a href="#cb239-1755" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1756"><a href="#cb239-1756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1759"><a href="#cb239-1759" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1760"><a href="#cb239-1760" aria-hidden="true" tabindex="-1"></a><span class="in">moonTime = moonToty % 1 * 10</span></span>
<span id="cb239-1761"><a href="#cb239-1761" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1762"><a href="#cb239-1762" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1765"><a href="#cb239-1765" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1766"><a href="#cb239-1766" aria-hidden="true" tabindex="-1"></a><span class="in">moonDeco = `üóì${String(moonYear).padStart(5, "0")}+${String(Math.floor(moonToty)).padStart(2, "0")}üï∞${moonTime.toFixed(4)}`</span></span>
<span id="cb239-1767"><a href="#cb239-1767" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1768"><a href="#cb239-1768" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1771"><a href="#cb239-1771" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1772"><a href="#cb239-1772" aria-hidden="true" tabindex="-1"></a><span class="in">md`## Appendix`</span></span>
<span id="cb239-1773"><a href="#cb239-1773" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1774"><a href="#cb239-1774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1777"><a href="#cb239-1777" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1778"><a href="#cb239-1778" aria-hidden="true" tabindex="-1"></a><span class="in">md`Gravity is far lower on the Moon, which slightly speeds up the passage</span></span>
<span id="cb239-1779"><a href="#cb239-1779" aria-hidden="true" tabindex="-1"></a><span class="in">of time. The increase in speed is about 648</span></span>
<span id="cb239-1780"><a href="#cb239-1780" aria-hidden="true" tabindex="-1"></a><span class="in">(${tex`56.0199 \div .0864 = 648.37847\overline2`}) picodays (${tex`10^{-12}`}</span></span>
<span id="cb239-1781"><a href="#cb239-1781" aria-hidden="true" tabindex="-1"></a><span class="in">days) per day (pdpd)</span></span>
<span id="cb239-1782"><a href="#cb239-1782" aria-hidden="true" tabindex="-1"></a><span class="in">[faster on the Moon than on Earth](https://arxiv.org/html/2402.11150v1#:~:text=a%20time%20difference%20per%20day).</span></span>
<span id="cb239-1783"><a href="#cb239-1783" aria-hidden="true" tabindex="-1"></a><span class="in">This difference is</span></span>
<span id="cb239-1784"><a href="#cb239-1784" aria-hidden="true" tabindex="-1"></a><span class="in">[even greater](https://arxiv.org/html/2402.11150v1#:~:text=computed%20rates%20for%20various%20points%20of%20interest)</span></span>
<span id="cb239-1785"><a href="#cb239-1785" aria-hidden="true" tabindex="-1"></a><span class="in">at the Moon's Lagrange points in the</span></span>
<span id="cb239-1786"><a href="#cb239-1786" aria-hidden="true" tabindex="-1"></a><span class="in">[microgravity](https://www.nasa.gov/centers-and-facilities/glenn/what-is-microgravity)</span></span>
<span id="cb239-1787"><a href="#cb239-1787" aria-hidden="true" tabindex="-1"></a><span class="in">of lunar orbit. To account for faster time on the Moon, we multiply time by the [fold change](https://en.wikipedia.org/wiki/Fold_change#:~:text=the%20ratio%20between%20the%20two%20quantities) (${tex`1+\frac{56.0199}{864\times10^{8}}`}) in the speed of time when moving from one place to another. I decided to not include this correction in the calculations above. The faster rate of time on the Moon slightly decreases the lunar year duration on the Moon. A shorter lunar year will slightly decrease the error rate in the Lunar leap year scheme. In contrast, the error rate will increase more significantly with time as the Moon drifts further from the Earth, causing its orbital velocity to decrease and the lunar year to become longer.`</span></span>
<span id="cb239-1788"><a href="#cb239-1788" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1789"><a href="#cb239-1789" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1792"><a href="#cb239-1792" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1793"><a href="#cb239-1793" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Solar Hijiri Leap Cycle</span></span>
<span id="cb239-1794"><a href="#cb239-1794" aria-hidden="true" tabindex="-1"></a><span class="in">| Yotc | Start | Stop  | N-365 |</span></span>
<span id="cb239-1795"><a href="#cb239-1795" aria-hidden="true" tabindex="-1"></a><span class="in">| ---- | ----- | ----- | ----- |</span></span>
<span id="cb239-1796"><a href="#cb239-1796" aria-hidden="true" tabindex="-1"></a><span class="in">| 0    | 0     | 365   | 0     |</span></span>
<span id="cb239-1797"><a href="#cb239-1797" aria-hidden="true" tabindex="-1"></a><span class="in">| 1    | 365   | 730   | 0     |</span></span>
<span id="cb239-1798"><a href="#cb239-1798" aria-hidden="true" tabindex="-1"></a><span class="in">| 2    | 730   | 1095  | 0     |</span></span>
<span id="cb239-1799"><a href="#cb239-1799" aria-hidden="true" tabindex="-1"></a><span class="in">| 3    | 1095  | 1460  | 0     |</span></span>
<span id="cb239-1800"><a href="#cb239-1800" aria-hidden="true" tabindex="-1"></a><span class="in">| 4    | 1460  | 1826  | 1     |</span></span>
<span id="cb239-1801"><a href="#cb239-1801" aria-hidden="true" tabindex="-1"></a><span class="in">| 5    | 1826  | 2191  | 0     |</span></span>
<span id="cb239-1802"><a href="#cb239-1802" aria-hidden="true" tabindex="-1"></a><span class="in">| 6    | 2191  | 2556  | 0     |</span></span>
<span id="cb239-1803"><a href="#cb239-1803" aria-hidden="true" tabindex="-1"></a><span class="in">| 7    | 2556  | 2921  | 0     |</span></span>
<span id="cb239-1804"><a href="#cb239-1804" aria-hidden="true" tabindex="-1"></a><span class="in">| 8    | 2921  | 3287  | 1     |</span></span>
<span id="cb239-1805"><a href="#cb239-1805" aria-hidden="true" tabindex="-1"></a><span class="in">| 9    | 3287  | 3652  | 0     |</span></span>
<span id="cb239-1806"><a href="#cb239-1806" aria-hidden="true" tabindex="-1"></a><span class="in">| 10   | 3652  | 4017  | 0     |</span></span>
<span id="cb239-1807"><a href="#cb239-1807" aria-hidden="true" tabindex="-1"></a><span class="in">| 11   | 4017  | 4382  | 0     |</span></span>
<span id="cb239-1808"><a href="#cb239-1808" aria-hidden="true" tabindex="-1"></a><span class="in">| 12   | 4382  | 4748  | 1     |</span></span>
<span id="cb239-1809"><a href="#cb239-1809" aria-hidden="true" tabindex="-1"></a><span class="in">| 13   | 4748  | 5113  | 0     |</span></span>
<span id="cb239-1810"><a href="#cb239-1810" aria-hidden="true" tabindex="-1"></a><span class="in">| 14   | 5113  | 5478  | 0     |</span></span>
<span id="cb239-1811"><a href="#cb239-1811" aria-hidden="true" tabindex="-1"></a><span class="in">| 15   | 5478  | 5843  | 0     |</span></span>
<span id="cb239-1812"><a href="#cb239-1812" aria-hidden="true" tabindex="-1"></a><span class="in">| 16   | 5843  | 6209  | 1     |</span></span>
<span id="cb239-1813"><a href="#cb239-1813" aria-hidden="true" tabindex="-1"></a><span class="in">| 17   | 6209  | 6574  | 0     |</span></span>
<span id="cb239-1814"><a href="#cb239-1814" aria-hidden="true" tabindex="-1"></a><span class="in">| 18   | 6574  | 6939  | 0     |</span></span>
<span id="cb239-1815"><a href="#cb239-1815" aria-hidden="true" tabindex="-1"></a><span class="in">| 19   | 6939  | 7304  | 0     |</span></span>
<span id="cb239-1816"><a href="#cb239-1816" aria-hidden="true" tabindex="-1"></a><span class="in">| 20   | 7304  | 7670  | 1     |</span></span>
<span id="cb239-1817"><a href="#cb239-1817" aria-hidden="true" tabindex="-1"></a><span class="in">| 21   | 7670  | 8035  | 0     |</span></span>
<span id="cb239-1818"><a href="#cb239-1818" aria-hidden="true" tabindex="-1"></a><span class="in">| 22   | 8035  | 8400  | 0     |</span></span>
<span id="cb239-1819"><a href="#cb239-1819" aria-hidden="true" tabindex="-1"></a><span class="in">| 23   | 8400  | 8765  | 0     |</span></span>
<span id="cb239-1820"><a href="#cb239-1820" aria-hidden="true" tabindex="-1"></a><span class="in">| 24   | 8765  | 9131  | 1     |</span></span>
<span id="cb239-1821"><a href="#cb239-1821" aria-hidden="true" tabindex="-1"></a><span class="in">| 25   | 9131  | 9496  | 0     |</span></span>
<span id="cb239-1822"><a href="#cb239-1822" aria-hidden="true" tabindex="-1"></a><span class="in">| 26   | 9496  | 9861  | 0     |</span></span>
<span id="cb239-1823"><a href="#cb239-1823" aria-hidden="true" tabindex="-1"></a><span class="in">| 27   | 9861  | 10226 | 0     |</span></span>
<span id="cb239-1824"><a href="#cb239-1824" aria-hidden="true" tabindex="-1"></a><span class="in">| 28   | 10226 | 10592 | 1     |</span></span>
<span id="cb239-1825"><a href="#cb239-1825" aria-hidden="true" tabindex="-1"></a><span class="in">| 29   | 10592 | 10957 | 0     |</span></span>
<span id="cb239-1826"><a href="#cb239-1826" aria-hidden="true" tabindex="-1"></a><span class="in">| 30   | 10957 | 11322 | 0     |</span></span>
<span id="cb239-1827"><a href="#cb239-1827" aria-hidden="true" tabindex="-1"></a><span class="in">| 31   | 11322 | 11687 | 0     |</span></span>
<span id="cb239-1828"><a href="#cb239-1828" aria-hidden="true" tabindex="-1"></a><span class="in">| 32   | 11687 | 12053 | 1     |`</span></span>
<span id="cb239-1829"><a href="#cb239-1829" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1830"><a href="#cb239-1830" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1833"><a href="#cb239-1833" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1834"><a href="#cb239-1834" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Mars Leap Cycle</span></span>
<span id="cb239-1835"><a href="#cb239-1835" aria-hidden="true" tabindex="-1"></a><span class="in">| Yotc | Start | Stop  | N-668 |</span></span>
<span id="cb239-1836"><a href="#cb239-1836" aria-hidden="true" tabindex="-1"></a><span class="in">| ---- | ----- | ----- | ----- |</span></span>
<span id="cb239-1837"><a href="#cb239-1837" aria-hidden="true" tabindex="-1"></a><span class="in">| 0    | 0     | 668   | 0     |</span></span>
<span id="cb239-1838"><a href="#cb239-1838" aria-hidden="true" tabindex="-1"></a><span class="in">| 1    | 668   | 1337  | 1     |</span></span>
<span id="cb239-1839"><a href="#cb239-1839" aria-hidden="true" tabindex="-1"></a><span class="in">| 2    | 1337  | 2005  | 0     |</span></span>
<span id="cb239-1840"><a href="#cb239-1840" aria-hidden="true" tabindex="-1"></a><span class="in">| 3    | 2005  | 2674  | 1     |</span></span>
<span id="cb239-1841"><a href="#cb239-1841" aria-hidden="true" tabindex="-1"></a><span class="in">| 4    | 2674  | 3342  | 0     |</span></span>
<span id="cb239-1842"><a href="#cb239-1842" aria-hidden="true" tabindex="-1"></a><span class="in">| 5    | 3342  | 4011  | 1     |</span></span>
<span id="cb239-1843"><a href="#cb239-1843" aria-hidden="true" tabindex="-1"></a><span class="in">| 6    | 4011  | 4679  | 0     |</span></span>
<span id="cb239-1844"><a href="#cb239-1844" aria-hidden="true" tabindex="-1"></a><span class="in">| 7    | 4679  | 5348  | 1     |</span></span>
<span id="cb239-1845"><a href="#cb239-1845" aria-hidden="true" tabindex="-1"></a><span class="in">| 8    | 5348  | 6016  | 0     |</span></span>
<span id="cb239-1846"><a href="#cb239-1846" aria-hidden="true" tabindex="-1"></a><span class="in">| 9    | 6016  | 6685  | 1     |</span></span>
<span id="cb239-1847"><a href="#cb239-1847" aria-hidden="true" tabindex="-1"></a><span class="in">| 10   | 6685  | 7354  | 1     |</span></span>
<span id="cb239-1848"><a href="#cb239-1848" aria-hidden="true" tabindex="-1"></a><span class="in">| 11   | 7354  | 8023  | 1     |</span></span>
<span id="cb239-1849"><a href="#cb239-1849" aria-hidden="true" tabindex="-1"></a><span class="in">| 12   | 8023  | 8691  | 0     |</span></span>
<span id="cb239-1850"><a href="#cb239-1850" aria-hidden="true" tabindex="-1"></a><span class="in">| 13   | 8691  | 9360  | 1     |</span></span>
<span id="cb239-1851"><a href="#cb239-1851" aria-hidden="true" tabindex="-1"></a><span class="in">| 14   | 9360  | 10028 | 0     |</span></span>
<span id="cb239-1852"><a href="#cb239-1852" aria-hidden="true" tabindex="-1"></a><span class="in">| 15   | 10028 | 10697 | 1     |</span></span>
<span id="cb239-1853"><a href="#cb239-1853" aria-hidden="true" tabindex="-1"></a><span class="in">| 16   | 10697 | 11365 | 0     |</span></span>
<span id="cb239-1854"><a href="#cb239-1854" aria-hidden="true" tabindex="-1"></a><span class="in">| 17   | 11365 | 12034 | 1     |</span></span>
<span id="cb239-1855"><a href="#cb239-1855" aria-hidden="true" tabindex="-1"></a><span class="in">| 18   | 12034 | 12702 | 0     |</span></span>
<span id="cb239-1856"><a href="#cb239-1856" aria-hidden="true" tabindex="-1"></a><span class="in">| 19   | 12702 | 13371 | 1     |</span></span>
<span id="cb239-1857"><a href="#cb239-1857" aria-hidden="true" tabindex="-1"></a><span class="in">| 20   | 13371 | 14040 | 1     |</span></span>
<span id="cb239-1858"><a href="#cb239-1858" aria-hidden="true" tabindex="-1"></a><span class="in">| 21   | 14040 | 14709 | 1     |`</span></span>
<span id="cb239-1859"><a href="#cb239-1859" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1860"><a href="#cb239-1860" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1863"><a href="#cb239-1863" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1864"><a href="#cb239-1864" aria-hidden="true" tabindex="-1"></a><span class="in">md`### Moon Leap Cycle</span></span>
<span id="cb239-1865"><a href="#cb239-1865" aria-hidden="true" tabindex="-1"></a><span class="in">| Yotc | Start | Stop | N-28 |</span></span>
<span id="cb239-1866"><a href="#cb239-1866" aria-hidden="true" tabindex="-1"></a><span class="in">| ---- | ----- | ---- |----- |</span></span>
<span id="cb239-1867"><a href="#cb239-1867" aria-hidden="true" tabindex="-1"></a><span class="in">| 0    | 0     | 28   | 0    |</span></span>
<span id="cb239-1868"><a href="#cb239-1868" aria-hidden="true" tabindex="-1"></a><span class="in">| 1    | 28    | 57   | 1    |</span></span>
<span id="cb239-1869"><a href="#cb239-1869" aria-hidden="true" tabindex="-1"></a><span class="in">| 2    | 57    | 85   | 0    |</span></span>
<span id="cb239-1870"><a href="#cb239-1870" aria-hidden="true" tabindex="-1"></a><span class="in">| 3    | 85    | 114  | 1    |</span></span>
<span id="cb239-1871"><a href="#cb239-1871" aria-hidden="true" tabindex="-1"></a><span class="in">| 4    | 114   | 142  | 0    |</span></span>
<span id="cb239-1872"><a href="#cb239-1872" aria-hidden="true" tabindex="-1"></a><span class="in">| 5    | 142   | 171  | 1    |</span></span>
<span id="cb239-1873"><a href="#cb239-1873" aria-hidden="true" tabindex="-1"></a><span class="in">| 6    | 171   | 199  | 0    |</span></span>
<span id="cb239-1874"><a href="#cb239-1874" aria-hidden="true" tabindex="-1"></a><span class="in">| 7    | 199   | 228  | 1    |</span></span>
<span id="cb239-1875"><a href="#cb239-1875" aria-hidden="true" tabindex="-1"></a><span class="in">| 8    | 228   | 256  | 0    |</span></span>
<span id="cb239-1876"><a href="#cb239-1876" aria-hidden="true" tabindex="-1"></a><span class="in">| 9    | 256   | 285  | 1    |</span></span>
<span id="cb239-1877"><a href="#cb239-1877" aria-hidden="true" tabindex="-1"></a><span class="in">| 10   | 285   | 314  | 1    |</span></span>
<span id="cb239-1878"><a href="#cb239-1878" aria-hidden="true" tabindex="-1"></a><span class="in">| 11   | 314   | 343  | 1    |</span></span>
<span id="cb239-1879"><a href="#cb239-1879" aria-hidden="true" tabindex="-1"></a><span class="in">| 12   | 343   | 371  | 0    |</span></span>
<span id="cb239-1880"><a href="#cb239-1880" aria-hidden="true" tabindex="-1"></a><span class="in">| 13   | 371   | 400  | 1    |</span></span>
<span id="cb239-1881"><a href="#cb239-1881" aria-hidden="true" tabindex="-1"></a><span class="in">| 14   | 400   | 428  | 0    |</span></span>
<span id="cb239-1882"><a href="#cb239-1882" aria-hidden="true" tabindex="-1"></a><span class="in">| 15   | 428   | 457  | 1    |`</span></span>
<span id="cb239-1883"><a href="#cb239-1883" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1884"><a href="#cb239-1884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1887"><a href="#cb239-1887" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1888"><a href="#cb239-1888" aria-hidden="true" tabindex="-1"></a><span class="in">import {slider} from "@jashkenas/inputs"</span></span>
<span id="cb239-1889"><a href="#cb239-1889" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1890"><a href="#cb239-1890" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1893"><a href="#cb239-1893" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1894"><a href="#cb239-1894" aria-hidden="true" tabindex="-1"></a><span class="in">function moon(canvas, fraction, colorOfTheSun, colorOfTheDarkness) {</span></span>
<span id="cb239-1895"><a href="#cb239-1895" aria-hidden="true" tabindex="-1"></a><span class="in">  const       moonPhase = Math.trunc(fraction * 4) % 4; // %4 so fraction == 1 results in phase == 0</span></span>
<span id="cb239-1896"><a href="#cb239-1896" aria-hidden="true" tabindex="-1"></a><span class="in">  const          waxing = moonPhase &lt; 2; // implies waning = !waxing</span></span>
<span id="cb239-1897"><a href="#cb239-1897" aria-hidden="true" tabindex="-1"></a><span class="in">  const        crescent = moonPhase % 2 == 0;</span></span>
<span id="cb239-1898"><a href="#cb239-1898" aria-hidden="true" tabindex="-1"></a><span class="in">  const         gibbous = !crescent;</span></span>
<span id="cb239-1899"><a href="#cb239-1899" aria-hidden="true" tabindex="-1"></a><span class="in">  const backgroundColor = waxing ? colorOfTheDarkness : colorOfTheSun;</span></span>
<span id="cb239-1900"><a href="#cb239-1900" aria-hidden="true" tabindex="-1"></a><span class="in">  const      coverColor = (moonPhase == 0 || moonPhase == 3) ? colorOfTheDarkness : colorOfTheSun;</span></span>
<span id="cb239-1901"><a href="#cb239-1901" aria-hidden="true" tabindex="-1"></a><span class="in">  const     revealColor = waxing ? colorOfTheSun : colorOfTheDarkness;</span></span>
<span id="cb239-1902"><a href="#cb239-1902" aria-hidden="true" tabindex="-1"></a><span class="in">  const quarterFraction = 4 * (fraction % .25);</span></span>
<span id="cb239-1903"><a href="#cb239-1903" aria-hidden="true" tabindex="-1"></a><span class="in">  const snakeEyeClosing = gibbous  ? 0 : 1 - quarterFraction;</span></span>
<span id="cb239-1904"><a href="#cb239-1904" aria-hidden="true" tabindex="-1"></a><span class="in">  const snakeEyeOpening = crescent ? 0 :     quarterFraction;</span></span>
<span id="cb239-1905"><a href="#cb239-1905" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1906"><a href="#cb239-1906" aria-hidden="true" tabindex="-1"></a><span class="in">  // set up clipping rectangle for the crescent (right) half</span></span>
<span id="cb239-1907"><a href="#cb239-1907" aria-hidden="true" tabindex="-1"></a><span class="in">  const defs = canvas.appendChild(DOM.element("svg:defs"));</span></span>
<span id="cb239-1908"><a href="#cb239-1908" aria-hidden="true" tabindex="-1"></a><span class="in">  const showRightHalf = DOM.uid("showRightHalf"); // to ensure uid is unique across all cells and notebooks</span></span>
<span id="cb239-1909"><a href="#cb239-1909" aria-hidden="true" tabindex="-1"></a><span class="in">  const clipper = defs.appendChild(DOM.element("svg:clipPath", {id: showRightHalf.id}));  </span></span>
<span id="cb239-1910"><a href="#cb239-1910" aria-hidden="true" tabindex="-1"></a><span class="in">  clipper.appendChild(DOM.element("svg:rect",   { y: -1, width: "50%", height: "100%"}));</span></span>
<span id="cb239-1911"><a href="#cb239-1911" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1912"><a href="#cb239-1912" aria-hidden="true" tabindex="-1"></a><span class="in">  // bottom layer; shows when nothing is painted on top</span></span>
<span id="cb239-1913"><a href="#cb239-1913" aria-hidden="true" tabindex="-1"></a><span class="in">  canvas.appendChild(DOM.element("svg:circle",  { fill: backgroundColor, r: 1}));</span></span>
<span id="cb239-1914"><a href="#cb239-1914" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1915"><a href="#cb239-1915" aria-hidden="true" tabindex="-1"></a><span class="in">  // paint the next layer: the waxing crescent and waning gibbous</span></span>
<span id="cb239-1916"><a href="#cb239-1916" aria-hidden="true" tabindex="-1"></a><span class="in">  const group = canvas.appendChild(DOM.element("svg:g", { 'clip-path': showRightHalf }));</span></span>
<span id="cb239-1917"><a href="#cb239-1917" aria-hidden="true" tabindex="-1"></a><span class="in">  group.appendChild(DOM.element("svg:circle",   { fill: revealColor,  r: 1 }));</span></span>
<span id="cb239-1918"><a href="#cb239-1918" aria-hidden="true" tabindex="-1"></a><span class="in">  group.appendChild(DOM.element("svg:ellipse",  { fill: coverColor,  ry: 1, rx: snakeEyeClosing }));</span></span>
<span id="cb239-1919"><a href="#cb239-1919" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1920"><a href="#cb239-1920" aria-hidden="true" tabindex="-1"></a><span class="in">  // finally, top it off with the gibbous half</span></span>
<span id="cb239-1921"><a href="#cb239-1921" aria-hidden="true" tabindex="-1"></a><span class="in">  canvas.appendChild(DOM.element("svg:ellipse", { fill: revealColor, ry: 1, rx: snakeEyeOpening }));</span></span>
<span id="cb239-1922"><a href="#cb239-1922" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-1923"><a href="#cb239-1923" aria-hidden="true" tabindex="-1"></a><span class="in">  return canvas;</span></span>
<span id="cb239-1924"><a href="#cb239-1924" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1925"><a href="#cb239-1925" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1926"><a href="#cb239-1926" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1929"><a href="#cb239-1929" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1930"><a href="#cb239-1930" aria-hidden="true" tabindex="-1"></a><span class="in">function universe(w, colorOfTheUniverse) {</span></span>
<span id="cb239-1931"><a href="#cb239-1931" aria-hidden="true" tabindex="-1"></a><span class="in">  return DOM.element("svg:svg", {</span></span>
<span id="cb239-1932"><a href="#cb239-1932" aria-hidden="true" tabindex="-1"></a><span class="in">    viewBox: "-1 -1 2 2", </span></span>
<span id="cb239-1933"><a href="#cb239-1933" aria-hidden="true" tabindex="-1"></a><span class="in">    width: 100 * w + "%", </span></span>
<span id="cb239-1934"><a href="#cb239-1934" aria-hidden="true" tabindex="-1"></a><span class="in">    style: "background-color: " + colorOfTheUniverse + ";"</span></span>
<span id="cb239-1935"><a href="#cb239-1935" aria-hidden="true" tabindex="-1"></a><span class="in">  });</span></span>
<span id="cb239-1936"><a href="#cb239-1936" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-1937"><a href="#cb239-1937" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1938"><a href="#cb239-1938" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1941"><a href="#cb239-1941" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1942"><a href="#cb239-1942" aria-hidden="true" tabindex="-1"></a><span class="in">solar_system = [</span></span>
<span id="cb239-1943"><a href="#cb239-1943" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Sun",     symbol: "‚äô", R: 0,                r: 4, speed: 0, phi0:  0, moons: []},                           // Sun</span></span>
<span id="cb239-1944"><a href="#cb239-1944" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Mercury", symbol: "‚òø", R: 40*factor_size,   r: 3, speed: -8, phi0:  -120, moons: []},                       // Mercury</span></span>
<span id="cb239-1945"><a href="#cb239-1945" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Venus",   symbol: "‚ôÄ", R: 70*factor_size,   r: 3, speed: -3, phi0: -50, moons: []},                         // Venus</span></span>
<span id="cb239-1946"><a href="#cb239-1946" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Earth",   symbol: "üú®", R: 100*factor_size,  r: 12 - (width &lt; 400) * 6, speed: -Earth_speed, phi0: angle_90, // Earth</span></span>
<span id="cb239-1947"><a href="#cb239-1947" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [ { name: "Moon", symbol: "‚òæ",  R: 25*factor_size, r:   6 - (width &lt; 400) * 3, speed: -20, phi0: 40 },      // the Moon</span></span>
<span id="cb239-1948"><a href="#cb239-1948" aria-hidden="true" tabindex="-1"></a><span class="in">             { name: "Sun_path",  R: 100*factor_size,  r: 0, speed: 0, phi0: 0} ]},                                    // Earth-Sun orbit</span></span>
<span id="cb239-1949"><a href="#cb239-1949" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Mars", symbol: "‚ôÇ",    R: 150*factor_size,  r: 6, speed: -1.13, phi0: 20,                                   // Mars</span></span>
<span id="cb239-1950"><a href="#cb239-1950" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [ { R:   12*factor_size + (width&lt;400) * 6,  r: 1, speed: -200, phi0:  25 },                                 // Phobos</span></span>
<span id="cb239-1951"><a href="#cb239-1951" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:   20*factor_size + (width&lt;400) * 10, r: 1, speed: -100, phi0: 100 } ]},                              // Deimos   </span></span>
<span id="cb239-1952"><a href="#cb239-1952" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Jupiter", symbol: "‚ôÉ", R: 280*factor_size,  r: 15 - (width &lt; 400) * 9, speed: -0.5, phi0: 60,               // Jupiter</span></span>
<span id="cb239-1953"><a href="#cb239-1953" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [ { R:  20*factor_size, r: 1,   speed: -100, phi0: 0 },                                                     // Io</span></span>
<span id="cb239-1954"><a href="#cb239-1954" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  32*factor_size, r: 1,   speed: -50, phi0:  15 },                                                    // Europa</span></span>
<span id="cb239-1955"><a href="#cb239-1955" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  48*factor_size, r: 1,   speed: -25, phi0: 100 },                                                    // Ganymede</span></span>
<span id="cb239-1956"><a href="#cb239-1956" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  80*factor_size, r: 1,   speed: -10, phi0: 300 } ]},                                                 // Callisto  </span></span>
<span id="cb239-1957"><a href="#cb239-1957" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Saturn", symbol: "‚ôÑ",  R: 380*factor_size,  r: 9 - (width &lt; 400) * 4, speed: -0.2, phi0: 160,               // Saturn</span></span>
<span id="cb239-1958"><a href="#cb239-1958" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [ { R:  28*factor_size, r: 0.5, speed: -500, phi0:  0 },                                                    // Saturn rings</span></span>
<span id="cb239-1959"><a href="#cb239-1959" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  30*factor_size, r: 0.5, speed: -400, phi0:  0 },</span></span>
<span id="cb239-1960"><a href="#cb239-1960" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  36*factor_size, r: 0.5, speed: -400, phi0:  0 },</span></span>
<span id="cb239-1961"><a href="#cb239-1961" aria-hidden="true" tabindex="-1"></a><span class="in">             { R:  38*factor_size, r: 0.5, speed: -400, phi0:  0 },</span></span>
<span id="cb239-1962"><a href="#cb239-1962" aria-hidden="true" tabindex="-1"></a><span class="in">             ]},        </span></span>
<span id="cb239-1963"><a href="#cb239-1963" aria-hidden="true" tabindex="-1"></a><span class="in">];</span></span>
<span id="cb239-1964"><a href="#cb239-1964" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1965"><a href="#cb239-1965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1968"><a href="#cb239-1968" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1969"><a href="#cb239-1969" aria-hidden="true" tabindex="-1"></a><span class="in">tychnonic_model = [ </span></span>
<span id="cb239-1970"><a href="#cb239-1970" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Earth",   symbol: "üú®", R: 0,               r: 8,  speed: 0, phi0: 0,                            // Earth</span></span>
<span id="cb239-1971"><a href="#cb239-1971" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [  </span></span>
<span id="cb239-1972"><a href="#cb239-1972" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Moon",    symbol: "‚òæ", R: 10*factor_size,  r: 4,  speed: -25, phi0: 40+angle_90 },              // the Moon </span></span>
<span id="cb239-1973"><a href="#cb239-1973" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Sun_path",             R: 100*factor_size, r: 0,  speed: 0, phi0: 0},                           // Earth-Sun orbit</span></span>
<span id="cb239-1974"><a href="#cb239-1974" aria-hidden="true" tabindex="-1"></a><span class="in">          ]},    </span></span>
<span id="cb239-1975"><a href="#cb239-1975" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Sun",     symbol: "‚äô", R: 100*factor_size, r: 10, speed: -Earth_speed, phi0:  -angle_90,        // Sun </span></span>
<span id="cb239-1976"><a href="#cb239-1976" aria-hidden="true" tabindex="-1"></a><span class="in">    moons: [ </span></span>
<span id="cb239-1977"><a href="#cb239-1977" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Earth_path",           R: 100*factor_size, r: 0,  speed: -2+Earth_speed, phi0: 0},              // Earth-Sun orbit           </span></span>
<span id="cb239-1978"><a href="#cb239-1978" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Mercury", symbol: "‚òø", R: 40*factor_size,  r: 3,  speed: -8+Earth_speed, phi0: -120+angle_90},  // Mercury    </span></span>
<span id="cb239-1979"><a href="#cb239-1979" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Venus",   symbol: "‚ôÄ", R: 70*factor_size,  r: 3,  speed: -3+Earth_speed, phi0: -50+angle_90},   // Venus</span></span>
<span id="cb239-1980"><a href="#cb239-1980" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Mars",    symbol: "‚ôÇ", R: 150*factor_size, r: 6,  speed: -1.13+Earth_speed, phi0: 20+angle_90}, // Mars</span></span>
<span id="cb239-1981"><a href="#cb239-1981" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Jupiter", symbol: "‚ôÉ", R: 280*factor_size, r: 3,  speed: -0.5+Earth_speed, phi0: 60+angle_90},  // Jupiter</span></span>
<span id="cb239-1982"><a href="#cb239-1982" aria-hidden="true" tabindex="-1"></a><span class="in">  { name: "Saturn",  symbol: "‚ôÑ", R: 380*factor_size, r: 3,  speed: -0.2+Earth_speed, phi0: 160+angle_90}, // Saturn</span></span>
<span id="cb239-1983"><a href="#cb239-1983" aria-hidden="true" tabindex="-1"></a><span class="in">]}];</span></span>
<span id="cb239-1984"><a href="#cb239-1984" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1985"><a href="#cb239-1985" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1988"><a href="#cb239-1988" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1989"><a href="#cb239-1989" aria-hidden="true" tabindex="-1"></a><span class="in">Earth_speed = 2</span></span>
<span id="cb239-1990"><a href="#cb239-1990" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1991"><a href="#cb239-1991" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-1994"><a href="#cb239-1994" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-1995"><a href="#cb239-1995" aria-hidden="true" tabindex="-1"></a><span class="in">angle_90 = 90</span></span>
<span id="cb239-1996"><a href="#cb239-1996" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-1997"><a href="#cb239-1997" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2000"><a href="#cb239-2000" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2001"><a href="#cb239-2001" aria-hidden="true" tabindex="-1"></a><span class="in">viewof heliocentric_options = columns({</span></span>
<span id="cb239-2002"><a href="#cb239-2002" aria-hidden="true" tabindex="-1"></a><span class="in">  Sun_path: Inputs.toggle({label: '"Sun path" inherited from Tychonic model', value: false}),  </span></span>
<span id="cb239-2003"><a href="#cb239-2003" aria-hidden="true" tabindex="-1"></a><span class="in">  display_moons: Inputs.toggle({label: "Display the moons of other planets", value: true}),</span></span>
<span id="cb239-2004"><a href="#cb239-2004" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb239-2005"><a href="#cb239-2005" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2006"><a href="#cb239-2006" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2009"><a href="#cb239-2009" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2010"><a href="#cb239-2010" aria-hidden="true" tabindex="-1"></a><span class="in">html`&lt;style&gt;</span></span>
<span id="cb239-2011"><a href="#cb239-2011" aria-hidden="true" tabindex="-1"></a><span class="in">  #Sun {</span></span>
<span id="cb239-2012"><a href="#cb239-2012" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #666;</span></span>
<span id="cb239-2013"><a href="#cb239-2013" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #f2ba42;</span></span>
<span id="cb239-2014"><a href="#cb239-2014" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb239-2015"><a href="#cb239-2015" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2016"><a href="#cb239-2016" aria-hidden="true" tabindex="-1"></a><span class="in">  #Moon {</span></span>
<span id="cb239-2017"><a href="#cb239-2017" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #ccc;</span></span>
<span id="cb239-2018"><a href="#cb239-2018" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #f2e4d6;</span></span>
<span id="cb239-2019"><a href="#cb239-2019" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb239-2020"><a href="#cb239-2020" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2021"><a href="#cb239-2021" aria-hidden="true" tabindex="-1"></a><span class="in">  #Mars {</span></span>
<span id="cb239-2022"><a href="#cb239-2022" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #ff7700;</span></span>
<span id="cb239-2023"><a href="#cb239-2023" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2024"><a href="#cb239-2024" aria-hidden="true" tabindex="-1"></a><span class="in">  #Jupiter {</span></span>
<span id="cb239-2025"><a href="#cb239-2025" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #ffa500;</span></span>
<span id="cb239-2026"><a href="#cb239-2026" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2027"><a href="#cb239-2027" aria-hidden="true" tabindex="-1"></a><span class="in">  #Saturn {</span></span>
<span id="cb239-2028"><a href="#cb239-2028" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #cc9966;</span></span>
<span id="cb239-2029"><a href="#cb239-2029" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2030"><a href="#cb239-2030" aria-hidden="true" tabindex="-1"></a><span class="in">  #Earth {</span></span>
<span id="cb239-2031"><a href="#cb239-2031" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #00a5ff;</span></span>
<span id="cb239-2032"><a href="#cb239-2032" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2033"><a href="#cb239-2033" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2034"><a href="#cb239-2034" aria-hidden="true" tabindex="-1"></a><span class="in">  .planet {</span></span>
<span id="cb239-2035"><a href="#cb239-2035" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #aac;</span></span>
<span id="cb239-2036"><a href="#cb239-2036" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #85b6c5;</span></span>
<span id="cb239-2037"><a href="#cb239-2037" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb239-2038"><a href="#cb239-2038" aria-hidden="true" tabindex="-1"></a><span class="in">  .moon {</span></span>
<span id="cb239-2039"><a href="#cb239-2039" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #aac;</span></span>
<span id="cb239-2040"><a href="#cb239-2040" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: #fff;</span></span>
<span id="cb239-2041"><a href="#cb239-2041" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb239-2042"><a href="#cb239-2042" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2043"><a href="#cb239-2043" aria-hidden="true" tabindex="-1"></a><span class="in">  .orbit {</span></span>
<span id="cb239-2044"><a href="#cb239-2044" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #aac;</span></span>
<span id="cb239-2045"><a href="#cb239-2045" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke-opacity: 0.8;</span></span>
<span id="cb239-2046"><a href="#cb239-2046" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: transparent;</span></span>
<span id="cb239-2047"><a href="#cb239-2047" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb239-2048"><a href="#cb239-2048" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2049"><a href="#cb239-2049" aria-hidden="true" tabindex="-1"></a><span class="in">  .orbit_moon {</span></span>
<span id="cb239-2050"><a href="#cb239-2050" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke: #aaa;</span></span>
<span id="cb239-2051"><a href="#cb239-2051" aria-hidden="true" tabindex="-1"></a><span class="in">        stroke-opacity: 0.5;</span></span>
<span id="cb239-2052"><a href="#cb239-2052" aria-hidden="true" tabindex="-1"></a><span class="in">        fill: transparent;</span></span>
<span id="cb239-2053"><a href="#cb239-2053" aria-hidden="true" tabindex="-1"></a><span class="in">      }  </span></span>
<span id="cb239-2054"><a href="#cb239-2054" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2055"><a href="#cb239-2055" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;`</span></span>
<span id="cb239-2056"><a href="#cb239-2056" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2057"><a href="#cb239-2057" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2060"><a href="#cb239-2060" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2061"><a href="#cb239-2061" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@bcardiff/observable-columns</span></span>
<span id="cb239-2062"><a href="#cb239-2062" aria-hidden="true" tabindex="-1"></a><span class="in">columns = (args) =&gt; {</span></span>
<span id="cb239-2063"><a href="#cb239-2063" aria-hidden="true" tabindex="-1"></a><span class="in">  const form = html`&lt;form&gt;&lt;/form&gt;`</span></span>
<span id="cb239-2064"><a href="#cb239-2064" aria-hidden="true" tabindex="-1"></a><span class="in">  form.value = {}</span></span>
<span id="cb239-2065"><a href="#cb239-2065" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2066"><a href="#cb239-2066" aria-hidden="true" tabindex="-1"></a><span class="in">  let cols = 0</span></span>
<span id="cb239-2067"><a href="#cb239-2067" aria-hidden="true" tabindex="-1"></a><span class="in">  for (const key in args) {</span></span>
<span id="cb239-2068"><a href="#cb239-2068" aria-hidden="true" tabindex="-1"></a><span class="in">    form.appendChild(args[key])</span></span>
<span id="cb239-2069"><a href="#cb239-2069" aria-hidden="true" tabindex="-1"></a><span class="in">    cols++</span></span>
<span id="cb239-2070"><a href="#cb239-2070" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2071"><a href="#cb239-2071" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2072"><a href="#cb239-2072" aria-hidden="true" tabindex="-1"></a><span class="in">  form.style = `width:200px; display: grid; grid-gap: 10px 100px; grid-template-columns: repeat(${cols}, auto); grid-auto-flow: row;`</span></span>
<span id="cb239-2073"><a href="#cb239-2073" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2074"><a href="#cb239-2074" aria-hidden="true" tabindex="-1"></a><span class="in">  form.oninput = () =&gt; {</span></span>
<span id="cb239-2075"><a href="#cb239-2075" aria-hidden="true" tabindex="-1"></a><span class="in">    form.value = Object.keys(args).reduce((result, key) =&gt; {</span></span>
<span id="cb239-2076"><a href="#cb239-2076" aria-hidden="true" tabindex="-1"></a><span class="in">      result[key] = args[key].value</span></span>
<span id="cb239-2077"><a href="#cb239-2077" aria-hidden="true" tabindex="-1"></a><span class="in">      return result</span></span>
<span id="cb239-2078"><a href="#cb239-2078" aria-hidden="true" tabindex="-1"></a><span class="in">    }, Array.isArray(args) ? [] : {})</span></span>
<span id="cb239-2079"><a href="#cb239-2079" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2080"><a href="#cb239-2080" aria-hidden="true" tabindex="-1"></a><span class="in">  form.oninput()</span></span>
<span id="cb239-2081"><a href="#cb239-2081" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2082"><a href="#cb239-2082" aria-hidden="true" tabindex="-1"></a><span class="in">  return form</span></span>
<span id="cb239-2083"><a href="#cb239-2083" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2084"><a href="#cb239-2084" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2085"><a href="#cb239-2085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2088"><a href="#cb239-2088" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2089"><a href="#cb239-2089" aria-hidden="true" tabindex="-1"></a><span class="in">factor_size = system_width / initial_width</span></span>
<span id="cb239-2090"><a href="#cb239-2090" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2091"><a href="#cb239-2091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2094"><a href="#cb239-2094" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2095"><a href="#cb239-2095" aria-hidden="true" tabindex="-1"></a><span class="in">height = width</span></span>
<span id="cb239-2096"><a href="#cb239-2096" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2097"><a href="#cb239-2097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2100"><a href="#cb239-2100" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2101"><a href="#cb239-2101" aria-hidden="true" tabindex="-1"></a><span class="in">system_width = Math.min(initial_width,Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0)-20);</span></span>
<span id="cb239-2102"><a href="#cb239-2102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2103"><a href="#cb239-2103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2106"><a href="#cb239-2106" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2107"><a href="#cb239-2107" aria-hidden="true" tabindex="-1"></a><span class="in">initial_width = 800;</span></span>
<span id="cb239-2108"><a href="#cb239-2108" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2109"><a href="#cb239-2109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2112"><a href="#cb239-2112" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2113"><a href="#cb239-2113" aria-hidden="true" tabindex="-1"></a><span class="in">display_checkbox = {</span></span>
<span id="cb239-2114"><a href="#cb239-2114" aria-hidden="true" tabindex="-1"></a><span class="in">  const html = system_model? htl.html`${viewof heliocentric_options}`: htl.html`&lt;div style="height:40.5px;"&gt;&lt;/div&gt;`;</span></span>
<span id="cb239-2115"><a href="#cb239-2115" aria-hidden="true" tabindex="-1"></a><span class="in">  yield html</span></span>
<span id="cb239-2116"><a href="#cb239-2116" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2117"><a href="#cb239-2117" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2118"><a href="#cb239-2118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2121"><a href="#cb239-2121" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2122"><a href="#cb239-2122" aria-hidden="true" tabindex="-1"></a><span class="in">viewof system_model  = Inputs.radio(new Map([["Heliocentric model", 1], ["Tychonic model (geo-heliocentric)", 0]]), {value: 1, label: "System"})</span></span>
<span id="cb239-2123"><a href="#cb239-2123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2124"><a href="#cb239-2124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2127"><a href="#cb239-2127" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2128"><a href="#cb239-2128" aria-hidden="true" tabindex="-1"></a><span class="in">viewof speed_factor = slider({</span></span>
<span id="cb239-2129"><a href="#cb239-2129" aria-hidden="true" tabindex="-1"></a><span class="in">  title: "Animation speed",</span></span>
<span id="cb239-2130"><a href="#cb239-2130" aria-hidden="true" tabindex="-1"></a><span class="in">  min: 0,</span></span>
<span id="cb239-2131"><a href="#cb239-2131" aria-hidden="true" tabindex="-1"></a><span class="in">  max: 100,</span></span>
<span id="cb239-2132"><a href="#cb239-2132" aria-hidden="true" tabindex="-1"></a><span class="in">  step: 1,</span></span>
<span id="cb239-2133"><a href="#cb239-2133" aria-hidden="true" tabindex="-1"></a><span class="in">  value: 15,</span></span>
<span id="cb239-2134"><a href="#cb239-2134" aria-hidden="true" tabindex="-1"></a><span class="in">  format: v =&gt; html`${v == 0? 'Stopped' : (v &lt; 20? 'Slow ' : (v &lt; 60? 'Medium' : 'Fast' ) )} (${v}%)&lt;br/&gt;`,</span></span>
<span id="cb239-2135"><a href="#cb239-2135" aria-hidden="true" tabindex="-1"></a><span class="in">});</span></span>
<span id="cb239-2136"><a href="#cb239-2136" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2137"><a href="#cb239-2137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2140"><a href="#cb239-2140" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2141"><a href="#cb239-2141" aria-hidden="true" tabindex="-1"></a><span class="in">viewof scale = slider({</span></span>
<span id="cb239-2142"><a href="#cb239-2142" aria-hidden="true" tabindex="-1"></a><span class="in">  min: 1, </span></span>
<span id="cb239-2143"><a href="#cb239-2143" aria-hidden="true" tabindex="-1"></a><span class="in">  max: 100, </span></span>
<span id="cb239-2144"><a href="#cb239-2144" aria-hidden="true" tabindex="-1"></a><span class="in">  step: 1, </span></span>
<span id="cb239-2145"><a href="#cb239-2145" aria-hidden="true" tabindex="-1"></a><span class="in">  value: 90, </span></span>
<span id="cb239-2146"><a href="#cb239-2146" aria-hidden="true" tabindex="-1"></a><span class="in">  title: "Scale", </span></span>
<span id="cb239-2147"><a href="#cb239-2147" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb239-2148"><a href="#cb239-2148" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2149"><a href="#cb239-2149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2152"><a href="#cb239-2152" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2153"><a href="#cb239-2153" aria-hidden="true" tabindex="-1"></a><span class="in">// w  = window.innerWidth / 2 + (width &lt; 400) * 165</span></span>
<span id="cb239-2154"><a href="#cb239-2154" aria-hidden="true" tabindex="-1"></a><span class="in">w  = width / 2 + (width &lt; 400) * 165</span></span>
<span id="cb239-2155"><a href="#cb239-2155" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2156"><a href="#cb239-2156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2159"><a href="#cb239-2159" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2160"><a href="#cb239-2160" aria-hidden="true" tabindex="-1"></a><span class="in">fontsize = {</span></span>
<span id="cb239-2161"><a href="#cb239-2161" aria-hidden="true" tabindex="-1"></a><span class="in">  if (width&gt;450){</span></span>
<span id="cb239-2162"><a href="#cb239-2162" aria-hidden="true" tabindex="-1"></a><span class="in">  return 18;</span></span>
<span id="cb239-2163"><a href="#cb239-2163" aria-hidden="true" tabindex="-1"></a><span class="in">};</span></span>
<span id="cb239-2164"><a href="#cb239-2164" aria-hidden="true" tabindex="-1"></a><span class="in">if (width&lt;451){</span></span>
<span id="cb239-2165"><a href="#cb239-2165" aria-hidden="true" tabindex="-1"></a><span class="in">  return 14;</span></span>
<span id="cb239-2166"><a href="#cb239-2166" aria-hidden="true" tabindex="-1"></a><span class="in">};</span></span>
<span id="cb239-2167"><a href="#cb239-2167" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2168"><a href="#cb239-2168" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2169"><a href="#cb239-2169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2172"><a href="#cb239-2172" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2173"><a href="#cb239-2173" aria-hidden="true" tabindex="-1"></a><span class="in">moon_orbit = width/2-width/13+(width &lt; 400)*135;</span></span>
<span id="cb239-2174"><a href="#cb239-2174" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2175"><a href="#cb239-2175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2178"><a href="#cb239-2178" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2179"><a href="#cb239-2179" aria-hidden="true" tabindex="-1"></a><span class="in">earth_moon_dist = moon_orbit/2;</span></span>
<span id="cb239-2180"><a href="#cb239-2180" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2181"><a href="#cb239-2181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2184"><a href="#cb239-2184" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2185"><a href="#cb239-2185" aria-hidden="true" tabindex="-1"></a><span class="in">earth_radius = earth_moon_dist/120.75;</span></span>
<span id="cb239-2186"><a href="#cb239-2186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2187"><a href="#cb239-2187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2190"><a href="#cb239-2190" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2191"><a href="#cb239-2191" aria-hidden="true" tabindex="-1"></a><span class="in">moon_radius = earth_radius/3.667;</span></span>
<span id="cb239-2192"><a href="#cb239-2192" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2193"><a href="#cb239-2193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2196"><a href="#cb239-2196" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2197"><a href="#cb239-2197" aria-hidden="true" tabindex="-1"></a><span class="in">html`&lt;style&gt;</span></span>
<span id="cb239-2198"><a href="#cb239-2198" aria-hidden="true" tabindex="-1"></a><span class="in">#SVGchart {</span></span>
<span id="cb239-2199"><a href="#cb239-2199" aria-hidden="true" tabindex="-1"></a><span class="in">  margin:  ${-10 - Number(width &lt; 400) * 3}px 0px ${-80 + Number(width &lt; 400) * 56}px ${Number(width &lt; 400) * 5}px;</span></span>
<span id="cb239-2200"><a href="#cb239-2200" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2201"><a href="#cb239-2201" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;`</span></span>
<span id="cb239-2202"><a href="#cb239-2202" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2203"><a href="#cb239-2203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2206"><a href="#cb239-2206" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2207"><a href="#cb239-2207" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dark_background = Inputs.toggle({label: "Dark background", value: false})</span></span>
<span id="cb239-2208"><a href="#cb239-2208" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2209"><a href="#cb239-2209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2212"><a href="#cb239-2212" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2213"><a href="#cb239-2213" aria-hidden="true" tabindex="-1"></a><span class="in">{</span></span>
<span id="cb239-2214"><a href="#cb239-2214" aria-hidden="true" tabindex="-1"></a><span class="in">  // Full screen mode not successfully tested with Firefox v. 125 (April 2024)</span></span>
<span id="cb239-2215"><a href="#cb239-2215" aria-hidden="true" tabindex="-1"></a><span class="in">  let firefoxAgent = navigator.userAgent.indexOf("Firefox") &gt; -1; </span></span>
<span id="cb239-2216"><a href="#cb239-2216" aria-hidden="true" tabindex="-1"></a><span class="in">  if(!firefoxAgent) {</span></span>
<span id="cb239-2217"><a href="#cb239-2217" aria-hidden="true" tabindex="-1"></a><span class="in">    // See also: https://observablehq.com/@mbostock/fullscreen-canvas</span></span>
<span id="cb239-2218"><a href="#cb239-2218" aria-hidden="true" tabindex="-1"></a><span class="in">      return htl.html`&lt;button onclick=${({currentTarget}) =&gt; {</span></span>
<span id="cb239-2219"><a href="#cb239-2219" aria-hidden="true" tabindex="-1"></a><span class="in">      const currentCell = currentTarget.parentElement;</span></span>
<span id="cb239-2220"><a href="#cb239-2220" aria-hidden="true" tabindex="-1"></a><span class="in">      const previousCell = currentCell.previousElementSibling;</span></span>
<span id="cb239-2221"><a href="#cb239-2221" aria-hidden="true" tabindex="-1"></a><span class="in">      previousCell.requestFullscreen ? previousCell.requestFullscreen()</span></span>
<span id="cb239-2222"><a href="#cb239-2222" aria-hidden="true" tabindex="-1"></a><span class="in">        : previousCell.webkitRequestFullscreen ? previousCell.webkitRequestFullscreen()</span></span>
<span id="cb239-2223"><a href="#cb239-2223" aria-hidden="true" tabindex="-1"></a><span class="in">        : (() =&gt; { throw new Error("Fullscreen API not supported"); });</span></span>
<span id="cb239-2224"><a href="#cb239-2224" aria-hidden="true" tabindex="-1"></a><span class="in">    }}&gt;Full screen&lt;/button&gt;`</span></span>
<span id="cb239-2225"><a href="#cb239-2225" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2226"><a href="#cb239-2226" aria-hidden="true" tabindex="-1"></a><span class="in">  else</span></span>
<span id="cb239-2227"><a href="#cb239-2227" aria-hidden="true" tabindex="-1"></a><span class="in">    return htl.html`&lt;br/&gt;`</span></span>
<span id="cb239-2228"><a href="#cb239-2228" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2229"><a href="#cb239-2229" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2230"><a href="#cb239-2230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2233"><a href="#cb239-2233" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2234"><a href="#cb239-2234" aria-hidden="true" tabindex="-1"></a><span class="in">import { Scrubber } from "@mbostock/scrubber"</span></span>
<span id="cb239-2235"><a href="#cb239-2235" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2236"><a href="#cb239-2236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2239"><a href="#cb239-2239" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2240"><a href="#cb239-2240" aria-hidden="true" tabindex="-1"></a><span class="in">projection = d3.geoOrthographic().fitSize([width, width], { type: "Sphere" }).rotate([-54, -36])</span></span>
<span id="cb239-2241"><a href="#cb239-2241" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2242"><a href="#cb239-2242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2245"><a href="#cb239-2245" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2246"><a href="#cb239-2246" aria-hidden="true" tabindex="-1"></a><span class="in">disputed = await FileAttachment("disputed-territories-1.geojson").json()</span></span>
<span id="cb239-2247"><a href="#cb239-2247" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2248"><a href="#cb239-2248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2251"><a href="#cb239-2251" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2252"><a href="#cb239-2252" aria-hidden="true" tabindex="-1"></a><span class="in">viewof showDisputed = html`&lt;input type=checkbox&gt;`</span></span>
<span id="cb239-2253"><a href="#cb239-2253" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2254"><a href="#cb239-2254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2257"><a href="#cb239-2257" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2258"><a href="#cb239-2258" aria-hidden="true" tabindex="-1"></a><span class="in">function drag(projection) {</span></span>
<span id="cb239-2259"><a href="#cb239-2259" aria-hidden="true" tabindex="-1"></a><span class="in">  let v0, q0, r0;</span></span>
<span id="cb239-2260"><a href="#cb239-2260" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2261"><a href="#cb239-2261" aria-hidden="true" tabindex="-1"></a><span class="in">  function dragstarted() {</span></span>
<span id="cb239-2262"><a href="#cb239-2262" aria-hidden="true" tabindex="-1"></a><span class="in">    v0 = versor.cartesian(projection.invert([d3.event.x, d3.event.y]));</span></span>
<span id="cb239-2263"><a href="#cb239-2263" aria-hidden="true" tabindex="-1"></a><span class="in">    q0 = versor(r0 = projection.rotate());</span></span>
<span id="cb239-2264"><a href="#cb239-2264" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2265"><a href="#cb239-2265" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2266"><a href="#cb239-2266" aria-hidden="true" tabindex="-1"></a><span class="in">  function dragged() {</span></span>
<span id="cb239-2267"><a href="#cb239-2267" aria-hidden="true" tabindex="-1"></a><span class="in">    const v1 = versor.cartesian(projection.rotate(r0).invert([d3.event.x, d3.event.y]));</span></span>
<span id="cb239-2268"><a href="#cb239-2268" aria-hidden="true" tabindex="-1"></a><span class="in">    const q1 = versor.multiply(q0, versor.delta(v0, v1));</span></span>
<span id="cb239-2269"><a href="#cb239-2269" aria-hidden="true" tabindex="-1"></a><span class="in">    projection.rotate(versor.rotation(q1));</span></span>
<span id="cb239-2270"><a href="#cb239-2270" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2271"><a href="#cb239-2271" aria-hidden="true" tabindex="-1"></a><span class="in">  </span></span>
<span id="cb239-2272"><a href="#cb239-2272" aria-hidden="true" tabindex="-1"></a><span class="in">  return d3.drag()</span></span>
<span id="cb239-2273"><a href="#cb239-2273" aria-hidden="true" tabindex="-1"></a><span class="in">      .on("start", dragstarted)</span></span>
<span id="cb239-2274"><a href="#cb239-2274" aria-hidden="true" tabindex="-1"></a><span class="in">      .on("drag", dragged);</span></span>
<span id="cb239-2275"><a href="#cb239-2275" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2276"><a href="#cb239-2276" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2277"><a href="#cb239-2277" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2280"><a href="#cb239-2280" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2281"><a href="#cb239-2281" aria-hidden="true" tabindex="-1"></a><span class="in">graticule = d3.geoGraticule().stepMinor([36,36]).stepMajor([36,36])()</span></span>
<span id="cb239-2282"><a href="#cb239-2282" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2283"><a href="#cb239-2283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2286"><a href="#cb239-2286" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2287"><a href="#cb239-2287" aria-hidden="true" tabindex="-1"></a><span class="in">graticule.coordinates = graticule.coordinates.map(</span></span>
<span id="cb239-2288"><a href="#cb239-2288" aria-hidden="true" tabindex="-1"></a><span class="in">  i =&gt; i.map(j =&gt; j.map((k, index, arr) =&gt; i.length === 3 &amp;&amp; index === 0 ? k - 18 : k))</span></span>
<span id="cb239-2289"><a href="#cb239-2289" aria-hidden="true" tabindex="-1"></a><span class="in">)</span></span>
<span id="cb239-2290"><a href="#cb239-2290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2291"><a href="#cb239-2291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2294"><a href="#cb239-2294" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2295"><a href="#cb239-2295" aria-hidden="true" tabindex="-1"></a><span class="in">countries = fetch(</span></span>
<span id="cb239-2296"><a href="#cb239-2296" aria-hidden="true" tabindex="-1"></a><span class="in">  "https://unpkg.com/visionscarto-world-atlas@0.0.6/world/50m_countries.geojson"</span></span>
<span id="cb239-2297"><a href="#cb239-2297" aria-hidden="true" tabindex="-1"></a><span class="in">).then(d =&gt; d.json())</span></span>
<span id="cb239-2298"><a href="#cb239-2298" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2299"><a href="#cb239-2299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2302"><a href="#cb239-2302" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2303"><a href="#cb239-2303" aria-hidden="true" tabindex="-1"></a><span class="in">world = fetch(</span></span>
<span id="cb239-2304"><a href="#cb239-2304" aria-hidden="true" tabindex="-1"></a><span class="in">  "https://unpkg.com/visionscarto-world-atlas@0.0.6/world/50m.json"</span></span>
<span id="cb239-2305"><a href="#cb239-2305" aria-hidden="true" tabindex="-1"></a><span class="in">).then(d =&gt; d.json())</span></span>
<span id="cb239-2306"><a href="#cb239-2306" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2307"><a href="#cb239-2307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2310"><a href="#cb239-2310" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2311"><a href="#cb239-2311" aria-hidden="true" tabindex="-1"></a><span class="in">versor = require("versor@0.0.3")</span></span>
<span id="cb239-2312"><a href="#cb239-2312" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2313"><a href="#cb239-2313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2316"><a href="#cb239-2316" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2317"><a href="#cb239-2317" aria-hidden="true" tabindex="-1"></a><span class="in">d3 = require("d3@5", "d3-geo@1", "d3-geo-projection@2")</span></span>
<span id="cb239-2318"><a href="#cb239-2318" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb239-2319"><a href="#cb239-2319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2322"><a href="#cb239-2322" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb239-2323"><a href="#cb239-2323" aria-hidden="true" tabindex="-1"></a><span class="in">// Copyright 2021, Observable Inc.</span></span>
<span id="cb239-2324"><a href="#cb239-2324" aria-hidden="true" tabindex="-1"></a><span class="in">// Released under the ISC license.</span></span>
<span id="cb239-2325"><a href="#cb239-2325" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@d3/color-legend</span></span>
<span id="cb239-2326"><a href="#cb239-2326" aria-hidden="true" tabindex="-1"></a><span class="in">function Swatches(color, {</span></span>
<span id="cb239-2327"><a href="#cb239-2327" aria-hidden="true" tabindex="-1"></a><span class="in">  columns = null,</span></span>
<span id="cb239-2328"><a href="#cb239-2328" aria-hidden="true" tabindex="-1"></a><span class="in">  format,</span></span>
<span id="cb239-2329"><a href="#cb239-2329" aria-hidden="true" tabindex="-1"></a><span class="in">  unknown: formatUnknown,</span></span>
<span id="cb239-2330"><a href="#cb239-2330" aria-hidden="true" tabindex="-1"></a><span class="in">  swatchSize = 15,</span></span>
<span id="cb239-2331"><a href="#cb239-2331" aria-hidden="true" tabindex="-1"></a><span class="in">  swatchWidth = swatchSize,</span></span>
<span id="cb239-2332"><a href="#cb239-2332" aria-hidden="true" tabindex="-1"></a><span class="in">  swatchHeight = swatchSize,</span></span>
<span id="cb239-2333"><a href="#cb239-2333" aria-hidden="true" tabindex="-1"></a><span class="in">  marginLeft = 0</span></span>
<span id="cb239-2334"><a href="#cb239-2334" aria-hidden="true" tabindex="-1"></a><span class="in">} = {}) {</span></span>
<span id="cb239-2335"><a href="#cb239-2335" aria-hidden="true" tabindex="-1"></a><span class="in">  const id = `-swatches-${Math.random().toString(16).slice(2)}`;</span></span>
<span id="cb239-2336"><a href="#cb239-2336" aria-hidden="true" tabindex="-1"></a><span class="in">  const unknown = formatUnknown == null ? undefined : color.unknown();</span></span>
<span id="cb239-2337"><a href="#cb239-2337" aria-hidden="true" tabindex="-1"></a><span class="in">  const unknowns = unknown == null || unknown === d3.scaleImplicit ? [] : [unknown];</span></span>
<span id="cb239-2338"><a href="#cb239-2338" aria-hidden="true" tabindex="-1"></a><span class="in">  const domain = color.domain().concat(unknowns);</span></span>
<span id="cb239-2339"><a href="#cb239-2339" aria-hidden="true" tabindex="-1"></a><span class="in">  if (format === undefined) format = x =&gt; x === unknown ? formatUnknown : x;</span></span>
<span id="cb239-2340"><a href="#cb239-2340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2341"><a href="#cb239-2341" aria-hidden="true" tabindex="-1"></a><span class="in">  function entity(character) {</span></span>
<span id="cb239-2342"><a href="#cb239-2342" aria-hidden="true" tabindex="-1"></a><span class="in">    return `&amp;#${character.charCodeAt(0).toString()};`;</span></span>
<span id="cb239-2343"><a href="#cb239-2343" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb239-2344"><a href="#cb239-2344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2345"><a href="#cb239-2345" aria-hidden="true" tabindex="-1"></a><span class="in">  if (columns !== null) return htl.html`&lt;div style="display: flex; align-items: center; margin-left: ${+marginLeft}px; min-height: 33px; font: 10px sans-serif;"&gt;</span></span>
<span id="cb239-2346"><a href="#cb239-2346" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;style&gt;</span></span>
<span id="cb239-2347"><a href="#cb239-2347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2348"><a href="#cb239-2348" aria-hidden="true" tabindex="-1"></a><span class="in">.${id}-item {</span></span>
<span id="cb239-2349"><a href="#cb239-2349" aria-hidden="true" tabindex="-1"></a><span class="in">  break-inside: avoid;</span></span>
<span id="cb239-2350"><a href="#cb239-2350" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb239-2351"><a href="#cb239-2351" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb239-2352"><a href="#cb239-2352" aria-hidden="true" tabindex="-1"></a><span class="in">  padding-bottom: 1px;</span></span>
<span id="cb239-2353"><a href="#cb239-2353" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2354"><a href="#cb239-2354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2355"><a href="#cb239-2355" aria-hidden="true" tabindex="-1"></a><span class="in">.${id}-label {</span></span>
<span id="cb239-2356"><a href="#cb239-2356" aria-hidden="true" tabindex="-1"></a><span class="in">  white-space: nowrap;</span></span>
<span id="cb239-2357"><a href="#cb239-2357" aria-hidden="true" tabindex="-1"></a><span class="in">  overflow: hidden;</span></span>
<span id="cb239-2358"><a href="#cb239-2358" aria-hidden="true" tabindex="-1"></a><span class="in">  text-overflow: ellipsis;</span></span>
<span id="cb239-2359"><a href="#cb239-2359" aria-hidden="true" tabindex="-1"></a><span class="in">  max-width: calc(100% - ${+swatchWidth}px - 0.5em);</span></span>
<span id="cb239-2360"><a href="#cb239-2360" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2361"><a href="#cb239-2361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2362"><a href="#cb239-2362" aria-hidden="true" tabindex="-1"></a><span class="in">.${id}-swatch {</span></span>
<span id="cb239-2363"><a href="#cb239-2363" aria-hidden="true" tabindex="-1"></a><span class="in">  width: ${+swatchWidth}px;</span></span>
<span id="cb239-2364"><a href="#cb239-2364" aria-hidden="true" tabindex="-1"></a><span class="in">  height: ${+swatchHeight}px;</span></span>
<span id="cb239-2365"><a href="#cb239-2365" aria-hidden="true" tabindex="-1"></a><span class="in">  margin: 0 0.5em 0 0;</span></span>
<span id="cb239-2366"><a href="#cb239-2366" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2367"><a href="#cb239-2367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2368"><a href="#cb239-2368" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;/style&gt;</span></span>
<span id="cb239-2369"><a href="#cb239-2369" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;div style=${{width: "100%", columns}}&gt;${domain.map(value =&gt; {</span></span>
<span id="cb239-2370"><a href="#cb239-2370" aria-hidden="true" tabindex="-1"></a><span class="in">    const label = `${format(value)}`;</span></span>
<span id="cb239-2371"><a href="#cb239-2371" aria-hidden="true" tabindex="-1"></a><span class="in">    return htl.html`&lt;div class=${id}-item&gt;</span></span>
<span id="cb239-2372"><a href="#cb239-2372" aria-hidden="true" tabindex="-1"></a><span class="in">      &lt;div class=${id}-swatch style=${{background: color(value)}}&gt;&lt;/div&gt;</span></span>
<span id="cb239-2373"><a href="#cb239-2373" aria-hidden="true" tabindex="-1"></a><span class="in">      &lt;div class=${id}-label title=${label}&gt;${label}&lt;/div&gt;</span></span>
<span id="cb239-2374"><a href="#cb239-2374" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;/div&gt;`;</span></span>
<span id="cb239-2375"><a href="#cb239-2375" aria-hidden="true" tabindex="-1"></a><span class="in">  })}</span></span>
<span id="cb239-2376"><a href="#cb239-2376" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;/div&gt;</span></span>
<span id="cb239-2377"><a href="#cb239-2377" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/div&gt;`;</span></span>
<span id="cb239-2378"><a href="#cb239-2378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2379"><a href="#cb239-2379" aria-hidden="true" tabindex="-1"></a><span class="in">  return htl.html`&lt;div style="display: flex; align-items: center; min-height: 33px; margin-left: ${+marginLeft}px; font: 10px sans-serif;"&gt;</span></span>
<span id="cb239-2380"><a href="#cb239-2380" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;style&gt;</span></span>
<span id="cb239-2381"><a href="#cb239-2381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2382"><a href="#cb239-2382" aria-hidden="true" tabindex="-1"></a><span class="in">.${id} {</span></span>
<span id="cb239-2383"><a href="#cb239-2383" aria-hidden="true" tabindex="-1"></a><span class="in">  display: inline-flex;</span></span>
<span id="cb239-2384"><a href="#cb239-2384" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb239-2385"><a href="#cb239-2385" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-right: 1em;</span></span>
<span id="cb239-2386"><a href="#cb239-2386" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2387"><a href="#cb239-2387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2388"><a href="#cb239-2388" aria-hidden="true" tabindex="-1"></a><span class="in">.${id}::before {</span></span>
<span id="cb239-2389"><a href="#cb239-2389" aria-hidden="true" tabindex="-1"></a><span class="in">  content: "";</span></span>
<span id="cb239-2390"><a href="#cb239-2390" aria-hidden="true" tabindex="-1"></a><span class="in">  width: ${+swatchWidth}px;</span></span>
<span id="cb239-2391"><a href="#cb239-2391" aria-hidden="true" tabindex="-1"></a><span class="in">  height: ${+swatchHeight}px;</span></span>
<span id="cb239-2392"><a href="#cb239-2392" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-right: 0.5em;</span></span>
<span id="cb239-2393"><a href="#cb239-2393" aria-hidden="true" tabindex="-1"></a><span class="in">  background: var(--color);</span></span>
<span id="cb239-2394"><a href="#cb239-2394" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2395"><a href="#cb239-2395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-2396"><a href="#cb239-2396" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;/style&gt;</span></span>
<span id="cb239-2397"><a href="#cb239-2397" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;div&gt;${domain.map(value =&gt; htl.html`&lt;span class="${id}" style="--color: ${color(value)}"&gt;${format(value)}&lt;/span&gt;`)}&lt;/div&gt;`;</span></span>
<span id="cb239-2398"><a href="#cb239-2398" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb239-2399"><a href="#cb239-2399" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2024, Martin Laptev</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/maptv/maptv.github.io/blob/main/blog/dec/al/al.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maptv" target="_blank">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/maptv" target="_blank">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link active" href="mailto:maptv@engineer.com" aria-current="page">
      <i class="bi bi-envelope-at" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>