<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Laptev">

<title>Martin Laptev</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../iso/date/index.html" rel="next">
<link href="../../dec/index.html" rel="prev">
<link href="../../asset/deidek.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "/",
    "?",
    "h",
    "f",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="quarto:status" content="draft">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../asset/style.css">
<meta name="twitter:title" content="Martin Laptev">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://maptv.github.io/asset/deidek.svg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../asset/deidek.svg" alt="Decagon made up of 100 triangles" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Martin Laptev</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../dec/index.html">Measurement</a></li><li class="breadcrumb-item"><a href="../../dec/date/index.html">Dec Date</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.github.com/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-linkedin"></i></a>
    <a href="mailto:maptv@engineer.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope-at"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../about/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-info-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../cv/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-earmark-person" role="img">
</i> 
 <span class="menu-text">CV/R√©sum√©</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../list/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-grid-3x3-gap" role="img">
</i> 
 <span class="menu-text">Listing</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-brush" role="img">
</i> 
 <span class="menu-text">Art</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-cloud" role="img">
</i> 
 <span class="menu-text">Cloud</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true"><i class="bi bi-hourglass-split" role="img">
</i> 
 <span class="menu-text">History</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../history/ww2/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-2-square" role="img">
</i> 
 <span class="menu-text">World War 2</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true"><i class="bi bi-robot" role="img">
</i> 
 <span class="menu-text">Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ml/prob/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-dice-5" role="img">
</i> 
 <span class="menu-text">Probablity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ml/llm/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-translate" role="img">
</i> 
 <span class="menu-text">Language Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../dec/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-rulers" role="img">
</i> 
 <span class="menu-text">Measurement</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/date/index.html" class="sidebar-item-text sidebar-link active"><i class="bi bi-calendar-date" role="img">
</i> 
 <span class="menu-text">Dec Date</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../iso/date/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-calendar-month" role="img">
</i> 
 <span class="menu-text">ISO Date</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/time/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-clock" role="img">
</i> 
 <span class="menu-text">Time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/geo/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-geo" role="img">
</i> 
 <span class="menu-text">Geoposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/day/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-sun" role="img">
</i> 
 <span class="menu-text">Daylight duration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/span/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-calendar-range" role="img">
</i> 
 <span class="menu-text">Time span</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/nav/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-compass" role="img">
</i> 
 <span class="menu-text">Navigation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/move/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-arrows-move" role="img">
</i> 
 <span class="menu-text">Movement</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/size/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-bounding-box-circles" role="img">
</i> 
 <span class="menu-text">Size</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-stars" role="img">
</i> 
 <span class="menu-text">Science</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true"><i class="bi bi-laptop" role="img">
</i> 
 <span class="menu-text">Software</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
    <i class="bi bi-gear" role="img">
</i> 
 <span class="menu-text">Setup</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/git/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-git" role="img">
</i> 
 <span class="menu-text">Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/positron/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-p-square" role="img">
</i> 
 <span class="menu-text">Positron</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/jupyter/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-journal-richtext" role="img">
</i> 
 <span class="menu-text">Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/quarto/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-markdown" role="img">
</i> 
 <span class="menu-text">Quarto Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/observable/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-0-circle" role="img">
</i> 
 <span class="menu-text">Observable</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../dec/index.html">Measurement</a></li><li class="breadcrumb-item"><a href="../../dec/date/index.html">Dec Date</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Dec Date</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://maptv.github.io">Martin Laptev</a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2024+237</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>My website serves as a demonstration of both the <a href="https://quarto.org">Quarto</a> publishing system and the <a href="../../dec">Dec</a> measurement system. I use several clever hacks to get Quarto to display all of the dates on my website in the Dec <code>year+day</code> format. Knowing the basics of Dec dates will help you to understand the Quarto <a href="https://quarto.org/docs/extensions/filters.html">filter</a>, <a href="https://quarto.org/docs/projects/scripts.html#pre-and-post-render">render script</a>, and <a href="https://quarto.org/docs/output-formats/html-basics.html#includes">include file</a> examples in my <a href="../../software/quarto">Quarto article</a>.</p>
<p>The <code>year+day</code> format is based on the Dec date equation: <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}{\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}\)</span>, where <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}\)</span> is the Dec date, <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> is the year obtained by <a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=the%20greatest%20integer%20less%20than%20or%20equal%20to%20x">flooring</a> <span class="math inline">\(\colorbox{yellow}{y}\)</span>, the <a href="https://en.wikipedia.org/wiki/Decimal#:~:text=denoting%20integer%20and-,non%2Dinteger%20numbers,-.%20It%20is%20the">decimal</a> years that have passed since the Dec <a href="https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era">epoch</a> (<span class="blue" data-bs-toggle="tooltip" data-bs-title="1 BC"><u>Year 0</u></span> <span class="blue" data-bs-toggle="tooltip" data-bs-title="March 1"><u>Day 0</u></span> <span class="blue" data-bs-toggle="tooltip" data-bs-title="midnight"><u>Dot 0</u></span>), <span class="math inline">\(\colorbox{cyan}{d}\)</span> is the <a href="https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00">zero-based</a> day of the year, and <span class="math inline">\(\colorbox{orange}{n}\)</span> is the number of days in <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span>. The Dec date equation for today is <span><span id="ojs-element-id-1"></span>.</span></p>
<p>Dec dates only include the first two terms from the <a href="https://en.wikipedia.org/wiki/Sides_of_an_equation#:~:text=the%20expression%20on%20the%20left%20of%20the%20%22%3D%22%20is%20the%20left%20side%20of%20the%20equation">left-hand side</a> of the Dec date equation: <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> and <span class="math inline">\(\colorbox{cyan}{d}\)</span>. The right-hand side of the equation, <span class="math inline">\(\colorbox{yellow}{y}\)</span>, can also be used as a date. We need <span class="math inline">\(\colorbox{orange}{n}\)</span> to calculate <span class="math inline">\(\colorbox{yellow}{y}\)</span> via the Dec date equation above and to obtain <span class="math inline">\(\colorbox{cyan}{d}\)</span> using the Dec day of the year equation: <span class="math inline">\(\colorbox{cyan}{d}{=}\colorbox{yellow}{y}\vcenter{\text{\%}}1{\times}\colorbox{orange}{n}\)</span>. In simple terms, <span class="math inline">\(\colorbox{cyan}{d}\)</span> is the <a href="https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part">decimal part</a> of <span class="math inline">\(\colorbox{yellow}{y}\)</span> multiplied by <span class="math inline">\(\colorbox{orange}{n}\)</span>.</p>
<p>To find <span class="math inline">\(\colorbox{orange}{n}\)</span>, we plug <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> into the Dec year length equation below, where <span class="math inline">\(\vcenter{\text\%}\)</span> is the <a href="https://en.wikipedia.org/wiki/Modulo#:~:text=returns%20the%20remainder">modulo</a> operator, <span class="math inline">\(\land\)</span> is the logical <a href="https://en.wikipedia.org/wiki/Logical_conjunction">conjunction</a> operator (and), and <span class="math inline">\(\lor\)</span> is the logical <a href="https://en.wikipedia.org/wiki/Logical_disjunction">disjunction</a> operator (or). According to this equation, <span class="math inline">\(\colorbox{orange}{n}\)</span> is 366 if the subsequent year <span class="nowrap">(Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span>)</span> is a <a href="https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world">Gregorian calendar</a> <a href="https://en.wikipedia.org/wiki/Leap_year#:~:text=Every%20year%20that%20is%20exactly%20divisible%20by%20four%20is%20a%20leap%20year%2C%20except%20for%20years%20that%20are%20exactly%20divisible%20by%20100%2C%20but%20these%20centurial%20years%20are%20leap%20years%20if%20they%20are%20exactly%20divisible%20by%20400">leap year</a> and 365 if Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span> is a Gregorian calendar <a href="https://en.wikipedia.org/wiki/Common_year#:~:text=a%20calendar%20year%20with%20365%20days">common year</a>.</p>
<p><span class="math display">\[\colorbox{orange}{n}=\begin{cases}
  366&amp;{\begin{align}\text{if } (\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}4=0\\
  \land(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}100\neq0\\
  \lor(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}400=0\end{align}}\\\\
  365&amp;{\text{otherwise.}}\end{cases}\]</span></p>
<p>In addition to calculating <span class="math inline">\(\colorbox{yellow}{y}\)</span>, <span class="math inline">\(\colorbox{orange}{n}\)</span> is needed to convert between <code>year+day</code> and <code>year-day</code> Dec dates. The <code>year-day</code> version of the Dec date equation is <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1{-}(\colorbox{cyan}{d}{-}\colorbox{orange}{n}){\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}\)</span>. In essence, <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> is a <a href="https://en.wikipedia.org/wiki/Countdown#:~:text=backward%20counting%20to%20indicate%20the%20time%20remaining%20before%20an%20event">‚ÄúT-minus‚Äù countdown</a> of the days until the start of Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span>. The current <code>year-day</code> date, <span><span id="ojs-element-id-2"></span>,</span> tells us that Year <span><span id="ojs-element-id-3"></span></span> will begin in <span><span id="ojs-element-id-4"></span></span> days.</p>
<p>The difference between <span class="math inline">\(\colorbox{cyan}{d}\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> can also be explained in terms of computer programming. If we think of years as <a href="https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=a%20data%20structure%20consisting%20of%20a%20collection%20of%20elements%20(values%20or%20variables)%2C%20of%20same%20memory%20size%2C%20each%20identified%20by%20at%20least%20one%20array%20index">arrays</a>, <span class="math inline">\(\colorbox{cyan}{d}\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> are like array <a href="https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=individual%20objects%20are%20selected%20by%20an%20index">indexes</a> that can be used to identify array elements or combine them via <a href="https://en.wikipedia.org/wiki/Array_slicing#:~:text=an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array">slicing</a>. In this analogy, <span class="math inline">\(\colorbox{cyan}{d}\)</span> is a <a href="https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00">positive index</a> with a range of <span class="math inline">\(0\)</span> to <span class="math inline">\(\colorbox{orange}{n}{-}1\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> is a <a href="https://en.wikipedia.org/wiki/Array_slicing#:~:text=specify%20an%20offset%20from%20the%20end%20of%20the%20array">negative index</a> that ranges from <span class="math inline">\({-}\colorbox{orange}{n}\)</span> to <span class="math inline">\({-}1\)</span>.</p>
<p>We can express the <a href="https://en.wikipedia.org/wiki/Upper_and_lower_bounds#:~:text=an%20upper%20bound%20or%20majorant%5B1%5D%20of%20a%20subset%20S%20of%20some%20preordered%20set%20(K%2C%20%E2%89%A4)%20is%20an%20element%20of%20K%20that%20is%20greater%20than%20or%20equal%20to%20every%20element%20of%20S.%5B2%5D%5B3%5D%20Dually%2C%20a%20lower%20bound%20or%20minorant%20of%20S%20is%20defined%20to%20be%20an%20element%20of%20K%20that%20is%20less%20than%20or%20equal%20to%20every%20element%20of%20S">bounds</a> for <span class="math inline">\(\colorbox{cyan}{d}\)</span> values with the <a href="https://en.wikipedia.org/wiki/Interval_(mathematics)#:~:text=the%20set%20of%20all%20real%20numbers%20lying%20between%20two%20fixed%20endpoints">interval</a> <span class="math inline">\(\left [0,\colorbox{orange}{n} \right )\)</span>, the <a href="https://en.wikipedia.org/wiki/Inequality_(mathematics)#:~:text=a%20non%2Dequal%20comparison">inequality</a> <span class="math inline">\(0{\le}\colorbox{cyan}{d}{\lt} \colorbox{orange}{n}\)</span>, or the Dec range <span class="math inline">\(0{=}\)</span>. Similarly, the analogous interval, inequality, and Dec range for <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> are <span class="math inline">\([{-}\colorbox{orange}{n},0)\)</span>, <span class="math inline">\({-}\colorbox{orange}{n}{\le}\colorbox{cyan}{d}{-}\colorbox{orange}{n}{\lt}0\)</span>, and <span class="math inline">\({-}\colorbox{orange}{n}{=}\)</span>, respectively. Use the <a href="https://observablehq.com/">Observable</a> <a href="https://observablehq.com/@observablehq/input-range">rangeüéöÔ∏èinputs</a> below to chose which day is surrounded by a redüü•box in the <a href="https://observablehq.com/@observablehq/plot-calendar">calendarüóìÔ∏èplot</a> beneath the inputs.</p>
<p>The Play‚ñ∂Ô∏èbutton above the plot cyclesüîÑthrough every <span class="math inline">\(\colorbox{cyan}{d}\)</span>, <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span>, month, and day of the month value so that each day gets its turn to be inside the redüü•box. The <a href="https://observablehq.com/framework/inputs/toggle#:~:text=choose%20one%20of%20two%20values">toggle‚úÖinput</a> next to the button determines whether the plot shows a leap (<span class="math inline">\(\colorbox{orange}{n}{=}366\)</span>) or a common (<span class="math inline">\(\colorbox{orange}{n}{=}365\)</span>) year. The <a href="https://observablehq.com/framework/inputs/radio#:~:text=choose%20one%20of%20a%20given%20set%20of%20values">radioüîòinput</a> beneath the toggle input sets the day of the week that starts the year.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="48" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 47;"><span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>viewof dotyInput <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">364</span> <span class="op">+</span> leapInput]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">306</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="fu">tex</span><span class="vs">`</span><span class="sc">\c</span><span class="vs">olorbox{cyan}{d}`</span>})<span class="op">;</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>viewof monthInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Month"</span>})<span class="op">,</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2month<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> month2doty}</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>viewof dotyInput1 <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">365</span> <span class="op">-</span> leapInput<span class="op">,</span> <span class="op">-</span><span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="fu">tex</span><span class="vs">`</span><span class="sc">\c</span><span class="vs">olorbox{cyan}{d}{-}</span><span class="sc">\c</span><span class="vs">olorbox{orange}{n}`</span>})<span class="op">,</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> subN<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> addN}</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>viewof dotmInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">31</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Day of the month"</span>})<span class="op">,</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2dotm<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(( <span class="dv">153</span> <span class="op">*</span> (</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> x <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>))})<span class="op">;</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>viewof leapscrub <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> y <span class="kw">=&gt;</span> <span class="st">""</span><span class="op">,</span> <span class="dt">inputStyle</span><span class="op">:</span> <span class="st">"display:none;"</span>})<span class="op">,</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Leap year"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})<span class="op">,</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-1-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<section id="first-day-of-the-week-of-the-year" class="level6 relative">
<h6 class="relative anchored" data-anchor-id="first-day-of-the-week-of-the-year">First day of the week of the year</h6>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="75" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 74;"><span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>viewof dotwInput <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([</span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sunday"</span><span class="op">,</span> <span class="st">"Monday"</span><span class="op">,</span> <span class="st">"Tuesday"</span><span class="op">,</span> <span class="st">"Wednesday"</span><span class="op">,</span> <span class="st">"Thursday"</span><span class="op">,</span> <span class="st">"Friday"</span><span class="op">,</span> <span class="st">"Saturday"</span><span class="op">,</span></span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">"Sunday"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="82" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 81;"><span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>calPlot0 <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>  <span class="dt">className</span><span class="op">:</span> <span class="st">"calplot"</span><span class="op">,</span></span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">36</span><span class="op">,</span></span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">48</span><span class="op">,</span></span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">tickFormat</span><span class="op">:</span> Plot<span class="op">.</span><span class="fu">formatWeekday</span>(<span class="st">"en"</span><span class="op">,</span> <span class="st">"short"</span>)<span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ticks</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb3-92"><a href="#cb3-92" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb3-93"><a href="#cb3-93" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb3-94"><a href="#cb3-94" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">interval</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Week"</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"band"</span><span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">36</span>}<span class="op">,</span></span>
<span id="cb3-95"><a href="#cb3-95" aria-hidden="true" tabindex="-1"></a>  <span class="co">//fx: {tickFormat: ""},</span></span>
<span id="cb3-96"><a href="#cb3-96" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span> }<span class="op">,</span></span>
<span id="cb3-97"><a href="#cb3-97" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb3-98"><a href="#cb3-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> d3<span class="op">.</span><span class="at">schemePastel1</span><span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemePastel2</span>)<span class="op">,</span></span>
<span id="cb3-99"><a href="#cb3-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> months<span class="op">,</span></span>
<span id="cb3-100"><a href="#cb3-100" aria-hidden="true" tabindex="-1"></a>    <span class="dt">className</span><span class="op">:</span> <span class="st">"cal"</span><span class="op">,</span></span>
<span id="cb3-101"><a href="#cb3-101" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb3-102"><a href="#cb3-102" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb3-103"><a href="#cb3-103" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(datesCal0<span class="op">,</span> {</span>
<span id="cb3-104"><a href="#cb3-104" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb3-105"><a href="#cb3-105" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb3-106"><a href="#cb3-106" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb3-107"><a href="#cb3-107" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()]<span class="op">,</span></span>
<span id="cb3-108"><a href="#cb3-108" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"red"</span> <span class="op">:</span> <span class="st">"none"</span><span class="op">,</span></span>
<span id="cb3-109"><a href="#cb3-109" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb3-110"><a href="#cb3-110" aria-hidden="true" tabindex="-1"></a>      <span class="dt">inset</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb3-111"><a href="#cb3-111" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb3-112"><a href="#cb3-112" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal0<span class="op">,</span> {</span>
<span id="cb3-113"><a href="#cb3-113" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb3-114"><a href="#cb3-114" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb3-115"><a href="#cb3-115" aria-hidden="true" tabindex="-1"></a>    <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb3-116"><a href="#cb3-116" aria-hidden="true" tabindex="-1"></a>    <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>() <span class="op">===</span> <span class="dv">8</span> <span class="op">?</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()] <span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb3-117"><a href="#cb3-117" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb3-118"><a href="#cb3-118" aria-hidden="true" tabindex="-1"></a>      <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span></span>
<span id="cb3-119"><a href="#cb3-119" aria-hidden="true" tabindex="-1"></a>    <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-120"><a href="#cb3-120" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span>})<span class="op">,</span></span>
<span id="cb3-121"><a href="#cb3-121" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal0<span class="op">,</span> {</span>
<span id="cb3-122"><a href="#cb3-122" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb3-123"><a href="#cb3-123" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb3-124"><a href="#cb3-124" aria-hidden="true" tabindex="-1"></a>    <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb3-125"><a href="#cb3-125" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb3-126"><a href="#cb3-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">//stroke: "white",</span></span>
<span id="cb3-127"><a href="#cb3-127" aria-hidden="true" tabindex="-1"></a>    <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>()<span class="op">,</span> <span class="co">//Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb3-128"><a href="#cb3-128" aria-hidden="true" tabindex="-1"></a>    <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb3-129"><a href="#cb3-129" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span>})</span>
<span id="cb3-130"><a href="#cb3-130" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb3-131"><a href="#cb3-131" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="136" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 135;"><span id="cb4-136"><a href="#cb4-136" aria-hidden="true" tabindex="-1"></a>calPlot1 <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb4-137"><a href="#cb4-137" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb4-138"><a href="#cb4-138" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb4-139"><a href="#cb4-139" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">300</span><span class="op">,</span></span>
<span id="cb4-140"><a href="#cb4-140" aria-hidden="true" tabindex="-1"></a>  <span class="dt">className</span><span class="op">:</span> <span class="st">"calplot"</span><span class="op">,</span></span>
<span id="cb4-141"><a href="#cb4-141" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">36</span><span class="op">,</span></span>
<span id="cb4-142"><a href="#cb4-142" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">48</span><span class="op">,</span></span>
<span id="cb4-143"><a href="#cb4-143" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">tickFormat</span><span class="op">:</span> Plot<span class="op">.</span><span class="fu">formatWeekday</span>(<span class="st">"en"</span><span class="op">,</span> <span class="st">"short"</span>)<span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb4-144"><a href="#cb4-144" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb4-145"><a href="#cb4-145" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ticks</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb4-146"><a href="#cb4-146" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb4-147"><a href="#cb4-147" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-148"><a href="#cb4-148" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">interval</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Week"</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"band"</span><span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span> <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">36</span>}<span class="op">,</span></span>
<span id="cb4-149"><a href="#cb4-149" aria-hidden="true" tabindex="-1"></a>  <span class="co">//fx: {tickFormat: ""},</span></span>
<span id="cb4-150"><a href="#cb4-150" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span> }<span class="op">,</span></span>
<span id="cb4-151"><a href="#cb4-151" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb4-152"><a href="#cb4-152" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> d3<span class="op">.</span><span class="at">schemePastel1</span><span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemePastel2</span>)<span class="op">,</span></span>
<span id="cb4-153"><a href="#cb4-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> months<span class="op">,</span></span>
<span id="cb4-154"><a href="#cb4-154" aria-hidden="true" tabindex="-1"></a>    <span class="dt">className</span><span class="op">:</span> <span class="st">"cal"</span><span class="op">,</span></span>
<span id="cb4-155"><a href="#cb4-155" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb4-156"><a href="#cb4-156" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb4-157"><a href="#cb4-157" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(datesCal1<span class="op">,</span> {</span>
<span id="cb4-158"><a href="#cb4-158" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb4-159"><a href="#cb4-159" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()]<span class="op">,</span></span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"red"</span> <span class="op">:</span> <span class="st">"none"</span><span class="op">,</span></span>
<span id="cb4-163"><a href="#cb4-163" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb4-164"><a href="#cb4-164" aria-hidden="true" tabindex="-1"></a>      <span class="dt">inset</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb4-165"><a href="#cb4-165" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb4-166"><a href="#cb4-166" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal1<span class="op">,</span> {</span>
<span id="cb4-167"><a href="#cb4-167" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb4-168"><a href="#cb4-168" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb4-169"><a href="#cb4-169" aria-hidden="true" tabindex="-1"></a>    <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb4-170"><a href="#cb4-170" aria-hidden="true" tabindex="-1"></a>    <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>() <span class="op">===</span> <span class="dv">8</span> <span class="op">?</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()] <span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb4-171"><a href="#cb4-171" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb4-172"><a href="#cb4-172" aria-hidden="true" tabindex="-1"></a>      <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span></span>
<span id="cb4-173"><a href="#cb4-173" aria-hidden="true" tabindex="-1"></a>    <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-174"><a href="#cb4-174" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span>})<span class="op">,</span></span>
<span id="cb4-175"><a href="#cb4-175" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal1<span class="op">,</span> {</span>
<span id="cb4-176"><a href="#cb4-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb4-177"><a href="#cb4-177" aria-hidden="true" tabindex="-1"></a>    <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb4-178"><a href="#cb4-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb4-179"><a href="#cb4-179" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fill</span><span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb4-180"><a href="#cb4-180" aria-hidden="true" tabindex="-1"></a>    <span class="co">//stroke: "white",</span></span>
<span id="cb4-181"><a href="#cb4-181" aria-hidden="true" tabindex="-1"></a>    <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>()<span class="op">,</span> <span class="co">//Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb4-182"><a href="#cb4-182" aria-hidden="true" tabindex="-1"></a>    <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb4-183"><a href="#cb4-183" aria-hidden="true" tabindex="-1"></a>    <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"22px"</span>})</span>
<span id="cb4-184"><a href="#cb4-184" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb4-185"><a href="#cb4-185" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>Even though it only uses years and days, Dec can display dates based on months or weeks by modifying <span class="math inline">\(\colorbox{cyan}{d}\)</span>. The equation for Dec week dates is <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}7{\times}\colorbox{pink}{U}{+}\text{\textcolor{blue}{w}}{-}\text{\textcolor{blue}{w}}_
\text{\textcolor{blue}{d=0}}{=}\colorbox{yellow}{y}\)</span>, where <span class="math inline">\(\colorbox{pink}{U}\)</span> is the week number, <span class="math inline">\(\text{\textcolor{blue}{w}}\)</span> is the day of the week number, and <span class="math inline">\(\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}\)</span> is <span class="math inline">\(\text{\textcolor{blue}{w}}\)</span> on the first day of the year (<span class="math inline">\(\colorbox{cyan}{d}{=}0\)</span>). The Dec week date equation for today is .</p>
<p>We can truncate the Dec week date equation to remove <span class="math inline">\(\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}\)</span>, which can be determined from <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> and is not needed to identify a date. The truncated Dec week date equation for today is .</p>
<p>If we ever need to convert between a doty and a Gregorian calendar month and day of the month without any conversion tools, we can use the Dec finger mnemonic, which is similar to the <a href="https://en.wikipedia.org/wiki/Knuckle_mnemonic#:~:text=a%20mnemonic%20device%20for%20remembering%20the%20number%20of%20days%20in%20the%20months%20of%20the%20Julian%20and%20Gregorian%20calendars">knuckle mnemonic</a>. The numbers above the fingers in the image below indicate the doty of the last day of each Gregorian calendar month. The thumb, middle finger, and pinky represent months with 31 days, whereas the index and ring fingers stand for 30-day months.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../asset/finger.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Dec finger mnemonic"><img src="../../asset/finger.svg" class="knitr img-fluid figure-img" alt="Dec finger mnemonic"></a></p>
<figcaption>Dec finger mnemonic</figcaption>
</figure>
</div>
<p>The <a href="https://en.wikipedia.org/wiki/September_equinox#:~:text=the%20moment%20when%20the%20Sun%20appears%20to%20cross%20the%20celestial%20equator%2C%20heading%20southward">southward equinox</a> falls on Day 205 in Year 2024, 2025, 2028, and 2029. We can determine that Day 205 is September 22 by subtracting the Dec date of the last day of August (Day 183), the month preceding September, from the southward equinox doty: <span class="math inline">\(205{-}183{=}22\)</span>. To convert in the other direction, we would sum the doty and the day of the month: <span class="math inline">\(183{+}22{=}205\)</span>.</p>
<p>The finger mnemonic highlights a major difference between Dec and the Gregorian calendar: the Dec year starts on <span class="blue" data-bs-toggle="tooltip" data-bs-title="March 1"><u>Day 0</u></span> just like the <a href="https://en.wikipedia.org/wiki/Roman_calendar#:~:text=the%20calendar%20used%20by%20the%20Roman%20Kingdom%20and%20Roman%20Republic">Roman calendar</a>, the predecessor of the Gregorian and Julian calendars. For this reason, the Latin <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=prefixes%20derived%20from%20numerals">numeral prefixes</a> in the names of the months of <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=7-,septem,-%2D%2C%20septi%2D%5B">Septem</a>ber, <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=8-,octo,-%2D%5Bu">Octo</a>ber, <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=9-,novem,-%2D%5Bx">Novem</a>ber, and <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=10-,decem,-%2D%2C%20dec%2D%5B">Decem</a>ber match their one-based indexes (7, 8, 9, and 10) in Dec and the Roman calendar, but not in the Julian or Gregorian calendars.</p>
<p>The knuckle and finger mnemonics attempt to make sense of the irregular pattern of month lengths in the Gregorian calendar. Rather than replace variable-length months with <a href="https://en.wikipedia.org/wiki/Calendar_reform#13-month_calendars">fixed-length months</a>, Dec forgoes the use of months entirely and instead uses groups of ten days called deks.</p>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="209" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 208;"><span id="cb5-209"><a href="#cb5-209" aria-hidden="true" tabindex="-1"></a>unix <span class="op">=</span> {</span>
<span id="cb5-210"><a href="#cb5-210" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb5-211"><a href="#cb5-211" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb5-212"><a href="#cb5-212" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-213"><a href="#cb5-213" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-214"><a href="#cb5-214" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb5-215"><a href="#cb5-215" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2dote</span>(unix<span class="op">,</span> zone) {</span>
<span id="cb5-216"><a href="#cb5-216" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [</span>
<span id="cb5-217"><a href="#cb5-217" aria-hidden="true" tabindex="-1"></a>    (unix <span class="op">??</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()) <span class="op">/</span> <span class="dv">86400000</span></span>
<span id="cb5-218"><a href="#cb5-218" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> (zone <span class="op">=</span> zone <span class="op">??</span> (</span>
<span id="cb5-219"><a href="#cb5-219" aria-hidden="true" tabindex="-1"></a>      <span class="dv">10</span> <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((<span class="kw">new</span> <span class="bu">Date</span>)</span>
<span id="cb5-220"><a href="#cb5-220" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">/</span> <span class="dv">144</span>)</span>
<span id="cb5-221"><a href="#cb5-221" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">%</span> <span class="dv">10</span>) <span class="op">/</span> <span class="dv">10</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span> zone]}</span>
<span id="cb5-222"><a href="#cb5-222" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2doty</span>(dote<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-223"><a href="#cb5-223" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((</span>
<span id="cb5-224"><a href="#cb5-224" aria-hidden="true" tabindex="-1"></a>      dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote</span>
<span id="cb5-225"><a href="#cb5-225" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> dote <span class="op">-</span> <span class="dv">146096</span></span>
<span id="cb5-226"><a href="#cb5-226" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb5-227"><a href="#cb5-227" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb5-228"><a href="#cb5-228" aria-hidden="true" tabindex="-1"></a>  yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc</span>
<span id="cb5-229"><a href="#cb5-229" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)</span>
<span id="cb5-230"><a href="#cb5-230" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>)</span>
<span id="cb5-231"><a href="#cb5-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)</span>
<span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [</span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a>    yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a>    dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">365</span></span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a>      <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)</span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a>  )<span class="op">,</span> zone]}</span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco0</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-240"><a href="#cb5-240" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span><span class="bu">String</span>(doty <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="dv">10</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">6</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span>zone<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb5-241"><a href="#cb5-241" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-242"><a href="#cb5-242" aria-hidden="true" tabindex="-1"></a>ydz <span class="op">=</span> <span class="fu">dote2doty</span>(<span class="op">...</span><span class="fu">unix2dote</span>(unix))</span>
<span id="cb5-243"><a href="#cb5-243" aria-hidden="true" tabindex="-1"></a>deco <span class="op">=</span> <span class="fu">doty2deco0</span>(<span class="op">...</span>ydz)</span>
<span id="cb5-244"><a href="#cb5-244" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb5-245"><a href="#cb5-245" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setStyle</span>(content<span class="op">,</span> style <span class="op">=</span> {}) {</span>
<span id="cb5-246"><a href="#cb5-246" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">yiq</span>(color) {</span>
<span id="cb5-247"><a href="#cb5-247" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> {r<span class="op">,</span> g<span class="op">,</span> b} <span class="op">=</span> d3<span class="op">.</span><span class="fu">rgb</span>(color)<span class="op">;</span></span>
<span id="cb5-248"><a href="#cb5-248" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (r <span class="op">*</span> <span class="dv">299</span> <span class="op">+</span> g <span class="op">*</span> <span class="dv">587</span> <span class="op">+</span> b <span class="op">*</span> <span class="dv">114</span>) <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">255</span><span class="op">;</span> <span class="co">// returns values between 0 and 1</span></span>
<span id="cb5-249"><a href="#cb5-249" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-250"><a href="#cb5-250" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb5-251"><a href="#cb5-251" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-252"><a href="#cb5-252" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="fu">yiq</span>(background) <span class="op">&gt;=</span> <span class="fl">0.6</span> <span class="op">?</span> <span class="st">"#111"</span> <span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb5-253"><a href="#cb5-253" aria-hidden="true" tabindex="-1"></a>    padding <span class="op">=</span> <span class="st">"0 1px"</span><span class="op">,</span></span>
<span id="cb5-254"><a href="#cb5-254" aria-hidden="true" tabindex="-1"></a>    borderRadius <span class="op">=</span> <span class="st">"4px"</span><span class="op">,</span></span>
<span id="cb5-255"><a href="#cb5-255" aria-hidden="true" tabindex="-1"></a>    fontWeight <span class="op">=</span> <span class="dv">900</span><span class="op">,</span></span>
<span id="cb5-256"><a href="#cb5-256" aria-hidden="true" tabindex="-1"></a>    fontSize <span class="op">=</span> <span class="st">"1em"</span><span class="op">,</span></span>
<span id="cb5-257"><a href="#cb5-257" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-258"><a href="#cb5-258" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> <span class="kw">typeof</span> style <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> {<span class="dt">background</span><span class="op">:</span> style} <span class="op">:</span> style<span class="op">;</span></span>
<span id="cb5-259"><a href="#cb5-259" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;span style=</span><span class="sc">${</span>{</span>
<span id="cb5-260"><a href="#cb5-260" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-261"><a href="#cb5-261" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb5-262"><a href="#cb5-262" aria-hidden="true" tabindex="-1"></a>    padding<span class="op">,</span></span>
<span id="cb5-263"><a href="#cb5-263" aria-hidden="true" tabindex="-1"></a>    borderRadius<span class="op">,</span></span>
<span id="cb5-264"><a href="#cb5-264" aria-hidden="true" tabindex="-1"></a>    fontWeight<span class="op">,</span></span>
<span id="cb5-265"><a href="#cb5-265" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-266"><a href="#cb5-266" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>content<span class="sc">}</span><span class="vs">&lt;/span&gt;`</span><span class="op">;</span></span>
<span id="cb5-267"><a href="#cb5-267" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-268"><a href="#cb5-268" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">year2leap</span>(year <span class="op">=</span> <span class="dv">1970</span>) {</span>
<span id="cb5-269"><a href="#cb5-269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-270"><a href="#cb5-270" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-271"><a href="#cb5-271" aria-hidden="true" tabindex="-1"></a>decoYear <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>)</span>
<span id="cb5-272"><a href="#cb5-272" aria-hidden="true" tabindex="-1"></a>nextYear <span class="op">=</span> <span class="pp">parseInt</span>(decoYear) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb5-273"><a href="#cb5-273" aria-hidden="true" tabindex="-1"></a>decoDoty <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb5-274"><a href="#cb5-274" aria-hidden="true" tabindex="-1"></a>nDaysInYear <span class="op">=</span> <span class="dv">365</span> <span class="op">+</span> <span class="fu">year2leap</span>(ydz[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb5-275"><a href="#cb5-275" aria-hidden="true" tabindex="-1"></a>Tminus <span class="op">=</span> nDaysInYear <span class="op">-</span> decoDoty</span>
<span id="cb5-276"><a href="#cb5-276" aria-hidden="true" tabindex="-1"></a>fracYear <span class="op">=</span> (ydz[<span class="dv">0</span>] <span class="op">+</span> (ydz[<span class="dv">1</span>] <span class="op">-</span> ydz[<span class="dv">2</span>]) <span class="op">/</span> nDaysInYear)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)</span>
<span id="cb5-277"><a href="#cb5-277" aria-hidden="true" tabindex="-1"></a>styledDecoYear <span class="op">=</span> <span class="fu">setStyle</span>(decoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-278"><a href="#cb5-278" aria-hidden="true" tabindex="-1"></a>styledNextYear <span class="op">=</span> <span class="fu">setStyle</span>(nextYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-279"><a href="#cb5-279" aria-hidden="true" tabindex="-1"></a>styledFracYear <span class="op">=</span> <span class="fu">setStyle</span>(fracYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-280"><a href="#cb5-280" aria-hidden="true" tabindex="-1"></a>styledDecoDoty <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-281"><a href="#cb5-281" aria-hidden="true" tabindex="-1"></a>styledDecoDoty1 <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-282"><a href="#cb5-282" aria-hidden="true" tabindex="-1"></a>styledDecoTminus <span class="op">=</span> <span class="fu">setStyle</span>(Tminus<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"pink"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-283"><a href="#cb5-283" aria-hidden="true" tabindex="-1"></a>styledDecoDek <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-284"><a href="#cb5-284" aria-hidden="true" tabindex="-1"></a>styledDecoDotd <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty[<span class="dv">2</span>]<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-285"><a href="#cb5-285" aria-hidden="true" tabindex="-1"></a>styledNdays <span class="op">=</span> <span class="fu">setStyle</span>(nDaysInYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb5-286"><a href="#cb5-286" aria-hidden="true" tabindex="-1"></a>styledNdays1 <span class="op">=</span> <span class="fu">setStyle</span>(nDaysInYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb5-287"><a href="#cb5-287" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb5-288"><a href="#cb5-288" aria-hidden="true" tabindex="-1"></a>transformInput <span class="op">=</span> <span class="kw">function</span>(target<span class="op">,</span> {<span class="dt">bind</span><span class="op">:</span> source<span class="op">,</span> transform <span class="op">=</span> identity<span class="op">,</span> involutory <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> invert <span class="op">=</span> involutory <span class="op">?</span> transform <span class="op">:</span> <span class="fu">inverse</span>(transform)} <span class="op">=</span> {}){</span>
<span id="cb5-289"><a href="#cb5-289" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (source <span class="op">===</span> <span class="kw">undefined</span>) {</span>
<span id="cb5-290"><a href="#cb5-290" aria-hidden="true" tabindex="-1"></a>    source <span class="op">=</span> target<span class="op">;</span></span>
<span id="cb5-291"><a href="#cb5-291" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>source<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb5-292"><a href="#cb5-292" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-293"><a href="#cb5-293" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">sourceInputHandler</span>() {</span>
<span id="cb5-294"><a href="#cb5-294" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-295"><a href="#cb5-295" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(target)<span class="op">.</span><span class="fu">to</span>(<span class="fu">transform</span>(source<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">targetInputHandler</span>() {</span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(source)<span class="op">.</span><span class="fu">to</span>(<span class="fu">invert</span>(target<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a>  source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a>  target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-307"><a href="#cb5-307" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-308"><a href="#cb5-308" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-309"><a href="#cb5-309" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sourceInputHandler</span>()<span class="op">;</span></span>
<span id="cb5-310"><a href="#cb5-310" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> target<span class="op">;</span></span>
<span id="cb5-311"><a href="#cb5-311" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-312"><a href="#cb5-312" aria-hidden="true" tabindex="-1"></a>setTransform <span class="op">=</span> (input) <span class="kw">=&gt;</span> ({<span class="dt">to</span><span class="op">:</span> (value) <span class="kw">=&gt;</span> (input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">,</span> {<span class="dt">andDispatchEvent</span><span class="op">:</span> (<span class="bu">event</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span>)) <span class="kw">=&gt;</span> input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="bu">event</span>)})})<span class="op">;</span></span>
<span id="cb5-313"><a href="#cb5-313" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">inverse</span>(f) {</span>
<span id="cb5-314"><a href="#cb5-314" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (f) {</span>
<span id="cb5-315"><a href="#cb5-315" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">identity</span><span class="op">:</span>  <span class="cf">return</span> identity<span class="op">;</span></span>
<span id="cb5-316"><a href="#cb5-316" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span><span class="op">:</span> <span class="cf">return</span> square<span class="op">;</span></span>
<span id="cb5-317"><a href="#cb5-317" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">;</span></span>
<span id="cb5-318"><a href="#cb5-318" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">;</span></span>
<span id="cb5-319"><a href="#cb5-319" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span>        <span class="cf">return</span> (x <span class="kw">=&gt;</span> <span class="fu">solve</span>(f<span class="op">,</span> x<span class="op">,</span> x))<span class="op">;</span></span>
<span id="cb5-320"><a href="#cb5-320" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-321"><a href="#cb5-321" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">solve</span>(f<span class="op">,</span> y<span class="op">,</span> x <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-322"><a href="#cb5-322" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dx <span class="op">=</span> <span class="fl">1e-6</span><span class="op">;</span></span>
<span id="cb5-323"><a href="#cb5-323" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> steps <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> deltax<span class="op">,</span> fx<span class="op">,</span> dfx<span class="op">;</span></span>
<span id="cb5-324"><a href="#cb5-324" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> {</span>
<span id="cb5-325"><a href="#cb5-325" aria-hidden="true" tabindex="-1"></a>      fx <span class="op">=</span> <span class="fu">f</span>(x)</span>
<span id="cb5-326"><a href="#cb5-326" aria-hidden="true" tabindex="-1"></a>      dfx <span class="op">=</span> (<span class="fu">f</span>(x <span class="op">+</span> dx) <span class="op">-</span> fx) <span class="op">||</span> dx<span class="op">;</span></span>
<span id="cb5-327"><a href="#cb5-327" aria-hidden="true" tabindex="-1"></a>      deltax <span class="op">=</span> dx <span class="op">*</span> (fx <span class="op">-</span> y)<span class="op">/</span>dfx</span>
<span id="cb5-328"><a href="#cb5-328" aria-hidden="true" tabindex="-1"></a>      x <span class="op">-=</span> deltax<span class="op">;</span></span>
<span id="cb5-329"><a href="#cb5-329" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">while</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(deltax) <span class="op">&gt;</span> dx <span class="op">&amp;&amp;</span> <span class="op">--</span>steps <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb5-330"><a href="#cb5-330" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> <span class="kw">NaN</span> <span class="op">:</span> x<span class="op">;</span></span>
<span id="cb5-331"><a href="#cb5-331" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-332"><a href="#cb5-332" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square</span>(x) {</span>
<span id="cb5-333"><a href="#cb5-333" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span></span>
<span id="cb5-334"><a href="#cb5-334" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-335"><a href="#cb5-335" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-336"><a href="#cb5-336" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">identity</span>(x) {</span>
<span id="cb5-337"><a href="#cb5-337" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb5-338"><a href="#cb5-338" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-339"><a href="#cb5-339" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2month</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-340"><a href="#cb5-340" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-341"><a href="#cb5-341" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb5-342"><a href="#cb5-342" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-343"><a href="#cb5-343" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">month2doty</span>(month <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb5-344"><a href="#cb5-344" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb5-345"><a href="#cb5-345" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span></span>
<span id="cb5-346"><a href="#cb5-346" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb5-347"><a href="#cb5-347" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dotm</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-348"><a href="#cb5-348" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-349"><a href="#cb5-349" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i)</span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof dotyInput<span class="op">,</span> leapscrub[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-23" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-25" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-27" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-28" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-29" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-30" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-31" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-32" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-33" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="354" data-source-offset="-5008"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 353;"><span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">set</span>(input<span class="op">,</span> value) {</span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Scrubber</span>(values<span class="op">,</span> {</span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>  format <span class="op">=</span> value <span class="kw">=&gt;</span> value<span class="op">,</span></span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>  initial <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a>  direction <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb6-363"><a href="#cb6-363" aria-hidden="true" tabindex="-1"></a>  delay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>  autoplay <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a>  loop <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-366"><a href="#cb6-366" aria-hidden="true" tabindex="-1"></a>  loopDelay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-367"><a href="#cb6-367" aria-hidden="true" tabindex="-1"></a>  alternate <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a>  inputStyle <span class="op">=</span> <span class="st">""</span></span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(values)<span class="op">;</span></span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;form style="font: 18px var(--monospace); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;button name=b type=button style="margin-right: 0.4em; width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;input name=i type=range min=0 max=</span><span class="sc">${</span>values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> value=</span><span class="sc">${</span>initial<span class="sc">}</span><span class="vs"> step=1 style=</span><span class="sc">${</span>inputStyle<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;output name=o style="margin-left: 0.4em;"&gt;&lt;/output&gt;</span></span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/label&gt;</span></span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/form&gt;`</span><span class="op">;</span></span>
<span id="cb6-378"><a href="#cb6-378" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-379"><a href="#cb6-379" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-380"><a href="#cb6-380" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-381"><a href="#cb6-381" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">start</span>() {</span>
<span id="cb6-382"><a href="#cb6-382" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Stop"</span><span class="op">;</span></span>
<span id="cb6-383"><a href="#cb6-383" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb6-384"><a href="#cb6-384" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> interval <span class="op">=</span> <span class="pp">setInterval</span>(tick<span class="op">,</span> delay)<span class="op">;</span></span>
<span id="cb6-385"><a href="#cb6-385" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-386"><a href="#cb6-386" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">stop</span>() {</span>
<span id="cb6-387"><a href="#cb6-387" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Play"</span><span class="op">;</span></span>
<span id="cb6-388"><a href="#cb6-388" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-389"><a href="#cb6-389" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (timer <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearTimeout</span>(timer)<span class="op">,</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-390"><a href="#cb6-390" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-391"><a href="#cb6-391" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-392"><a href="#cb6-392" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">running</span>() {</span>
<span id="cb6-393"><a href="#cb6-393" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> frame <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> timer <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> interval <span class="op">!==</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-394"><a href="#cb6-394" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-395"><a href="#cb6-395" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">tick</span>() {</span>
<span id="cb6-396"><a href="#cb6-396" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> (direction <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span> direction <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="kw">NaN</span>)) {</span>
<span id="cb6-397"><a href="#cb6-397" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>loop) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-398"><a href="#cb6-398" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (alternate) direction <span class="op">=</span> <span class="op">-</span>direction<span class="op">;</span></span>
<span id="cb6-399"><a href="#cb6-399" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (loopDelay <span class="op">!==</span> <span class="kw">null</span>) {</span>
<span id="cb6-400"><a href="#cb6-400" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-401"><a href="#cb6-401" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-402"><a href="#cb6-402" aria-hidden="true" tabindex="-1"></a>        timer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> (<span class="fu">step</span>()<span class="op">,</span> <span class="fu">start</span>())<span class="op">,</span> loopDelay)<span class="op">;</span></span>
<span id="cb6-403"><a href="#cb6-403" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb6-404"><a href="#cb6-404" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb6-405"><a href="#cb6-405" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-406"><a href="#cb6-406" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb6-407"><a href="#cb6-407" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step</span>()<span class="op">;</span></span>
<span id="cb6-408"><a href="#cb6-408" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-409"><a href="#cb6-409" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">step</span>() {</span>
<span id="cb6-410"><a href="#cb6-410" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction <span class="op">+</span> values<span class="op">.</span><span class="at">length</span>) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb6-411"><a href="#cb6-411" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-412"><a href="#cb6-412" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-413"><a href="#cb6-413" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> <span class="bu">event</span> <span class="kw">=&gt;</span> {</span>
<span id="cb6-414"><a href="#cb6-414" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span> <span class="op">&amp;&amp;</span> <span class="bu">event</span><span class="op">.</span><span class="at">isTrusted</span> <span class="op">&amp;&amp;</span> <span class="fu">running</span>()) <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-415"><a href="#cb6-415" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> values[form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span>]<span class="op">;</span></span>
<span id="cb6-416"><a href="#cb6-416" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">o</span><span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="fu">format</span>(form<span class="op">.</span><span class="at">value</span><span class="op">,</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span><span class="op">,</span> values)<span class="op">;</span></span>
<span id="cb6-417"><a href="#cb6-417" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb6-418"><a href="#cb6-418" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb6-419"><a href="#cb6-419" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">running</span>()) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-420"><a href="#cb6-420" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> alternate <span class="op">&amp;&amp;</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb6-421"><a href="#cb6-421" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb6-422"><a href="#cb6-422" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-423"><a href="#cb6-423" aria-hidden="true" tabindex="-1"></a>    <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb6-424"><a href="#cb6-424" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb6-425"><a href="#cb6-425" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">oninput</span>()<span class="op">;</span></span>
<span id="cb6-426"><a href="#cb6-426" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (autoplay) <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb6-427"><a href="#cb6-427" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-428"><a href="#cb6-428" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">disposal</span>(form)<span class="op">.</span><span class="fu">then</span>(stop)<span class="op">;</span></span>
<span id="cb6-429"><a href="#cb6-429" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form<span class="op">;</span></span>
<span id="cb6-430"><a href="#cb6-430" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-431"><a href="#cb6-431" aria-hidden="true" tabindex="-1"></a>calYear <span class="op">=</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Monday"</span> <span class="op">?</span> <span class="dv">6</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Tuesday"</span> <span class="op">?</span> <span class="dv">7</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Wednesday"</span> <span class="op">?</span> <span class="dv">2</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Thursday"</span> <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Friday"</span> <span class="op">?</span> <span class="dv">9</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Saturday"</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Sunday"</span> <span class="op">?</span> <span class="dv">11</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Monday"</span> <span class="op">?</span> <span class="dv">12</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Tuesday"</span> <span class="op">?</span> <span class="dv">24</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Wednesday"</span> <span class="op">?</span> <span class="dv">8</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Thursday"</span> <span class="op">?</span> <span class="dv">20</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Friday"</span> <span class="op">?</span> <span class="dv">4</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Saturday"</span> <span class="op">?</span> <span class="dv">16</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Sunday"</span> <span class="op">?</span> <span class="dv">28</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-432"><a href="#cb6-432" aria-hidden="true" tabindex="-1"></a>startCal0 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(calYear<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb6-433"><a href="#cb6-433" aria-hidden="true" tabindex="-1"></a>startCal1 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(calYear<span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb6-434"><a href="#cb6-434" aria-hidden="true" tabindex="-1"></a>startCal2 <span class="op">=</span> <span class="kw">new</span> <span class="bu">Date</span>(calYear<span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb6-435"><a href="#cb6-435" aria-hidden="true" tabindex="-1"></a>datesCal0 <span class="op">=</span> d3<span class="op">.</span><span class="fu">utcDays</span>(startCal0<span class="op">,</span> startCal1)<span class="op">;</span></span>
<span id="cb6-436"><a href="#cb6-436" aria-hidden="true" tabindex="-1"></a>datesCal1 <span class="op">=</span> d3<span class="op">.</span><span class="fu">utcDays</span>(startCal1<span class="op">,</span> startCal2)<span class="op">;</span></span>
<span id="cb6-437"><a href="#cb6-437" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">"January"</span><span class="op">,</span> <span class="st">"February"</span><span class="op">,</span> <span class="st">"March"</span><span class="op">,</span> <span class="st">"April"</span><span class="op">,</span> <span class="st">"May"</span><span class="op">,</span> <span class="st">"June"</span><span class="op">,</span> <span class="st">"July"</span><span class="op">,</span> <span class="st">"August"</span><span class="op">,</span> <span class="st">"September"</span><span class="op">,</span> <span class="st">"October"</span><span class="op">,</span> <span class="st">"November"</span><span class="op">,</span> <span class="st">"December"</span>]<span class="op">;</span></span>
<span id="cb6-438"><a href="#cb6-438" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(unix) {</span>
<span id="cb6-439"><a href="#cb6-439" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dote <span class="op">=</span> (</span>
<span id="cb6-440"><a href="#cb6-440" aria-hidden="true" tabindex="-1"></a>    unix <span class="op">??</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()</span>
<span id="cb6-441"><a href="#cb6-441" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span></span>
<span id="cb6-442"><a href="#cb6-442" aria-hidden="true" tabindex="-1"></a>    socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((</span>
<span id="cb6-443"><a href="#cb6-443" aria-hidden="true" tabindex="-1"></a>      dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote</span>
<span id="cb6-444"><a href="#cb6-444" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> dote <span class="op">-</span> <span class="dv">146096</span></span>
<span id="cb6-445"><a href="#cb6-445" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb6-446"><a href="#cb6-446" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb6-447"><a href="#cb6-447" aria-hidden="true" tabindex="-1"></a>  yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc</span>
<span id="cb6-448"><a href="#cb6-448" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)</span>
<span id="cb6-449"><a href="#cb6-449" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>)</span>
<span id="cb6-450"><a href="#cb6-450" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)</span>
<span id="cb6-451"><a href="#cb6-451" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb6-452"><a href="#cb6-452" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">365</span></span>
<span id="cb6-453"><a href="#cb6-453" aria-hidden="true" tabindex="-1"></a>      <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)</span>
<span id="cb6-454"><a href="#cb6-454" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb6-455"><a href="#cb6-455" aria-hidden="true" tabindex="-1"></a>  )}</span>
<span id="cb6-456"><a href="#cb6-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-457"><a href="#cb6-457" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-458"><a href="#cb6-458" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> cycle <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((year <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> year <span class="op">:</span> year <span class="op">-</span> <span class="dv">399</span>) <span class="op">/</span> <span class="dv">400</span>)<span class="op">,</span></span>
<span id="cb6-459"><a href="#cb6-459" aria-hidden="true" tabindex="-1"></a>    yote <span class="op">=</span> year <span class="op">-</span> cycle <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb6-460"><a href="#cb6-460" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> cycle <span class="op">*</span> <span class="dv">146097</span> <span class="op">+</span> yote <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> doty <span class="op">-</span> zone</span>
<span id="cb6-461"><a href="#cb6-461" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-462"><a href="#cb6-462" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(yearDoty <span class="op">=</span> [<span class="dv">1969</span><span class="op">,</span> <span class="dv">306</span>]<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-463"><a href="#cb6-463" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yd <span class="op">=</span> <span class="fu">dote2doty</span>(<span class="fu">doty2dote</span>(yearDoty[<span class="dv">0</span>]<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yearDoty[<span class="dv">1</span>])))<span class="op">;</span></span>
<span id="cb6-464"><a href="#cb6-464" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>yd[<span class="dv">0</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>yd[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span></span>
<span id="cb6-465"><a href="#cb6-465" aria-hidden="true" tabindex="-1"></a>        yearDoty[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">includes</span>(<span class="st">"."</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">+</span> (</span>
<span id="cb6-466"><a href="#cb6-466" aria-hidden="true" tabindex="-1"></a>            (yearDoty[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> (yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()</span>
<span id="cb6-467"><a href="#cb6-467" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="op">...</span>(yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()]<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb6-468"><a href="#cb6-468" aria-hidden="true" tabindex="-1"></a>                (e<span class="op">,</span> i<span class="op">,</span> a) <span class="kw">=&gt;</span> (i <span class="op">+</span> <span class="dv">1</span> <span class="op">===</span> a<span class="op">.</span><span class="at">length</span>) <span class="op">?</span> <span class="dv">10</span> <span class="op">-</span> e <span class="op">:</span> <span class="dv">9</span> <span class="op">-</span> e</span>
<span id="cb6-469"><a href="#cb6-469" aria-hidden="true" tabindex="-1"></a>            )<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)</span>
<span id="cb6-470"><a href="#cb6-470" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb6-471"><a href="#cb6-471" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-472"><a href="#cb6-472" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-473"><a href="#cb6-473" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2doty</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb6-474"><a href="#cb6-474" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> arr <span class="op">=</span> timestamp<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">[+-]|[a-zA-Z])</span><span class="ss">/</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb6-475"><a href="#cb6-475" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (arr<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb6-476"><a href="#cb6-476" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-477"><a href="#cb6-477" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> (<span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">1</span>]))</span>
<span id="cb6-478"><a href="#cb6-478" aria-hidden="true" tabindex="-1"></a>            <span class="op">?</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="fu">zone2hour</span>(arr[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">24</span>]</span>
<span id="cb6-479"><a href="#cb6-479" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-480"><a href="#cb6-480" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb6-481"><a href="#cb6-481" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">2</span>])</span>
<span id="cb6-482"><a href="#cb6-482" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">zone2hour</span>(arr[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">24</span></span>
<span id="cb6-483"><a href="#cb6-483" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="pp">parseFloat</span>(arr[<span class="dv">2</span>]<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">([+-])</span><span class="ss">/</span><span class="op">,</span> <span class="st">"$1</span><span class="sc">\.</span><span class="st">"</span>))]<span class="op">;</span></span>
<span id="cb6-484"><a href="#cb6-484" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-485"><a href="#cb6-485" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone <span class="op">=</span> <span class="st">"Z"</span>) {</span>
<span id="cb6-486"><a href="#cb6-486" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (zone <span class="op">=</span> zone<span class="op">.</span><span class="fu">toUpperCase</span>()) <span class="op">==</span> <span class="st">"Z"</span> <span class="op">?</span> <span class="dv">0</span></span>
<span id="cb6-487"><a href="#cb6-487" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">64</span></span>
<span id="cb6-488"><a href="#cb6-488" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">65</span></span>
<span id="cb6-489"><a href="#cb6-489" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> <span class="op">?</span> <span class="op">-</span>(zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">77</span>)</span>
<span id="cb6-490"><a href="#cb6-490" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone<span class="op">;</span></span>
<span id="cb6-491"><a href="#cb6-491" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-492"><a href="#cb6-492" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2unix</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-493"><a href="#cb6-493" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fu">doty2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone) <span class="op">-</span> <span class="dv">719468</span>) <span class="op">*</span> <span class="dv">86400000</span><span class="op">;</span></span>
<span id="cb6-494"><a href="#cb6-494" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-495"><a href="#cb6-495" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(yd) {</span>
<span id="cb6-496"><a href="#cb6-496" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="fu">doty2unix</span>(<span class="op">...</span>yd))</span>
<span id="cb6-497"><a href="#cb6-497" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-498"><a href="#cb6-498" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb6-499"><a href="#cb6-499" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb6-500"><a href="#cb6-500" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [</span>
<span id="cb6-501"><a href="#cb6-501" aria-hidden="true" tabindex="-1"></a>      <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span></span>
<span id="cb6-502"><a href="#cb6-502" aria-hidden="true" tabindex="-1"></a>      <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty <span class="op">-</span> (<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> <span class="dv">2</span>)</span>
<span id="cb6-503"><a href="#cb6-503" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb6-504"><a href="#cb6-504" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-505"><a href="#cb6-505" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb6-506"><a href="#cb6-506" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb6-507"><a href="#cb6-507" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb6-508"><a href="#cb6-508" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb6-509"><a href="#cb6-509" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2year</span>(year <span class="op">=</span> <span class="dv">1970</span><span class="op">,</span> month <span class="op">=</span> <span class="dv">1</span>) { <span class="cf">return</span> year <span class="op">-</span> (month <span class="op">&lt;</span> <span class="dv">3</span>) }</span>
<span id="cb6-510"><a href="#cb6-510" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoc2doty</span>(isoc) {</span>
<span id="cb6-511"><a href="#cb6-511" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [<span class="fu">greg2year</span>(isoc<span class="op">.</span><span class="fu">getFullYear</span>()<span class="op">,</span> isoc<span class="op">.</span><span class="fu">getUTCMonth</span>() <span class="op">+</span> <span class="dv">1</span>)<span class="op">,</span> <span class="fu">greg2doty</span>(isoc<span class="op">.</span><span class="fu">getUTCMonth</span>() <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> isoc<span class="op">.</span><span class="fu">getUTCDate</span>())]<span class="op">;</span></span>
<span id="cb6-512"><a href="#cb6-512" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-513"><a href="#cb6-513" aria-hidden="true" tabindex="-1"></a>leapInput <span class="op">=</span> leapscrub[<span class="dv">1</span>]</span>
<span id="cb6-514"><a href="#cb6-514" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">addN</span>(d) { <span class="cf">return</span> d <span class="op">+</span> <span class="dv">365</span> <span class="op">+</span> leapInput }</span>
<span id="cb6-515"><a href="#cb6-515" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">subN</span>(d) { <span class="cf">return</span> d <span class="op">-</span> <span class="dv">365</span> <span class="op">-</span> leapInput }</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-34" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-37" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-38" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-40" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-42" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-43" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-44" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-46" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-47" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-48" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-49" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-50" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-51" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-52" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-53" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-54" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-55" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-56" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<style>
h6.relative.anchored {
  margin-top: -25px;
  margin-bottom: -2px;
  text-align: center;
}
<!-- .calplot { -->
<!--   margin-top: -15px; -->
<!--   margin-bottom: -15px; -->
<!-- } -->
#decalendar > g.cluster-label {
  transform: translate(305px, 50px) !important;
}
span.cal-swatch {
  font-size: 14px !important;
}
form.oi-3a86ea-checkbox {
  max-width: 700px;
}
div.cell:has(form.oi-3a86ea-toggle) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}
div.observablehq > div:has(form.oi-3a86ea-toggle) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}
form.oi-3a86ea-toggle {
  max-width: 50% !important;
  --label-width: 90px;
}
form.oi-3a86ea {
  --input-width: 200px;
  padding-right: 9px;
}
form.oi-3a86ea-toggle > label {
  width: 78px;
}
div > form > label {
  --label-width: 130px;
}
#ojs-cell-1-1 > div:nth-child(1) > form:nth-child(1) > label {
  --label-width: 60px;
}
#ojs-cell-1-3 > div:nth-child(1) > form:nth-child(1) > label {
  --label-width: 60px;
}
</style>


<!-- -->

<div class="ojs-auto-generated hidden">
<script type="ojs-module-contents">
eyJjb250ZW50cyI6WyAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7c3R5bGVkRGVjb1llYXJ9KyR7c3R5bGVkRGVjb0RvdHl9w7cke3N0eWxlZE5kYXlzfT0ke3N0eWxlZEZyYWNZZWFyfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMSJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7c3R5bGVkTmV4dFllYXJ9LSR7c3R5bGVkRGVjb1RtaW51c308L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTIifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke25leHRZZWFyfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMyJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7VG1pbnVzfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtNCJ9XX0=
</script>
</div>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{laptev2024,
  author = {Laptev, Martin},
  title = {Dec {Date}},
  date = {2024},
  urldate = {2024},
  url = {https://maptv.github.io/dec/date},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-laptev2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Laptev, Martin. 2024. <span>‚ÄúDec Date.‚Äù</span> 2024. <a href="https://maptv.github.io/dec/date">https://maptv.github.io/dec/date</a>.
</div></div></section></div></main> <!-- /main -->
<script src="../../asset/cite.js"></script>
<style>
#title-block-header > div.quarto-title-banner.page-columns.page-full { margin: 0px; padding: 0px; }
#title-block-header { margin: 0px; }
main#quarto-document-content { margin: 0px; padding: 0px; }
ul.navbar-nav.navbar-nav-scroll { -webkit-flex-direction: row; }
#quarto-sidebar { padding: 0px; overflow-x: hidden !important; }
#quarto-sidebar > * { padding: 0px; }
div.quarto-title-meta { padding-bottom: 8px; }
g.node.clickable.flowchart-label:hover { rect.basic.label-container { stroke: green!important; stroke-width:5px!important; } }
h2, h3 { margin: 0px !important; }
h3 { margin-top: 17px !important; }
div.cell.page-columns.page-full { height: 0px !important; }
@media only screen and (max-width: 991px) { #quarto-search { display: none !important; } #quarto-sidebar { padding: 0px 9px 0px 9px !important; } }
@media only screen and (max-width: 767px) { div.cell.page-columns.page-full { display: none !important; } }
</style>
<script src="../../asset/stamp.js"></script>
<script>
const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBkb3R5SW5wdXQgPSBJbnB1dHMucmFuZ2UoWzAsIDM2NCArIGxlYXBJbnB1dF0sIHt2YWx1ZTogMzA2LCBzdGVwOiAxLCBsYWJlbDogdGV4YFxcY29sb3Jib3h7Y3lhbn17ZH1gfSk7XG52aWV3b2YgbW9udGhJbnB1dCA9IHRyYW5zZm9ybUlucHV0KFxuICBJbnB1dHMucmFuZ2UoWzEsIDEyXSwge3N0ZXA6IDEsIGxhYmVsOiBcIk1vbnRoXCJ9KSxcbiAge2JpbmQ6IHZpZXdvZiBkb3R5SW5wdXQsIHRyYW5zZm9ybTogZG90eTJtb250aCwgaW52ZXJ0OiBtb250aDJkb3R5fVxuKTtcbnZpZXdvZiBkb3R5SW5wdXQxID0gdHJhbnNmb3JtSW5wdXQoXG4gIElucHV0cy5yYW5nZShbLTM2NSAtIGxlYXBJbnB1dCwgLTFdLCB7c3RlcDogMSwgbGFiZWw6IHRleGBcXGNvbG9yYm94e2N5YW59e2R9ey19XFxjb2xvcmJveHtvcmFuZ2V9e259YH0pLFxuICB7YmluZDogdmlld29mIGRvdHlJbnB1dCwgdHJhbnNmb3JtOiBzdWJOLCBpbnZlcnQ6IGFkZE59XG4pO1xudmlld29mIGRvdG1JbnB1dCA9IHRyYW5zZm9ybUlucHV0KFxuICBJbnB1dHMucmFuZ2UoWzEsIDMxXSwge3N0ZXA6IDEsIGxhYmVsOiBcIkRheSBvZiB0aGUgbW9udGhcIn0pLFxuICB7YmluZDogdmlld29mIGRvdHlJbnB1dCwgdHJhbnNmb3JtOiBkb3R5MmRvdG0sIGludmVydDogKHggPT4gTWF0aC5mbG9vcigoIDE1MyAqIChcbiAgICB2aWV3b2YgbW9udGhJbnB1dC52YWx1ZSA+IDJcbiAgICA/IHZpZXdvZiBtb250aElucHV0LnZhbHVlIC0gM1xuICAgIDogdmlld29mIG1vbnRoSW5wdXQudmFsdWUgKyA5KSArIDJcbiAgKSAvIDUgKyB4IC0gMVxuKSl9KTtcbnZpZXdvZiBsZWFwc2NydWIgPSBJbnB1dHMuZm9ybShbXG4gIFNjcnViYmVyKG51bWJlcnMsIHthdXRvcGxheTogZmFsc2UsIGFsdGVybmF0ZTogdHJ1ZSwgZGVsYXk6IDg2LjQsIGxvb3BEZWxheTogODY0LCBmb3JtYXQ6IHkgPT4gXCJcIiwgaW5wdXRTdHlsZTogXCJkaXNwbGF5Om5vbmU7XCJ9KSxcbiAgSW5wdXRzLnRvZ2dsZSh7bGFiZWw6IFwiTGVhcCB5ZWFyXCIsIHZhbHVlOiBmYWxzZX0pLFxuXSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMiIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InZpZXdvZiBkb3R3SW5wdXQgPSBJbnB1dHMucmFkaW8oW1xuICBcIlN1bmRheVwiLCBcIk1vbmRheVwiLCBcIlR1ZXNkYXlcIiwgXCJXZWRuZXNkYXlcIiwgXCJUaHVyc2RheVwiLCBcIkZyaWRheVwiLCBcIlNhdHVyZGF5XCIsXG4gIF0sIHt2YWx1ZTogXCJTdW5kYXlcIn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTMiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjYWxQbG90MCA9IFBsb3QucGxvdCh7XG4gIHBhZGRpbmc6IDAsXG4gIHdpZHRoOiAxMDAwLFxuICBoZWlnaHQ6IDMwMCxcbiAgY2xhc3NOYW1lOiBcImNhbHBsb3RcIixcbiAgbWFyZ2luQm90dG9tOiAzNixcbiAgbWFyZ2luTGVmdDogNDgsXG4gIHk6IHt0aWNrRm9ybWF0OiBQbG90LmZvcm1hdFdlZWtkYXkoXCJlblwiLCBcInNob3J0XCIpLCB0aWNrU2l6ZTogMCxcbiAgICAgIGRvbWFpbjogWy0xLCAwLCAxLCAyLCAzLCA0LCA1LCA2XSxcbiAgICAgIHRpY2tzOiBbMCwgMSwgMiwgMywgNCwgNSwgNl0sXG4gICAgICB0aWNrUGFkZGluZzogMixcbiAgfSxcbiAgeDoge2ludGVydmFsOiAxLCBsYWJlbDogXCJXZWVrXCIsIHR5cGU6IFwiYmFuZFwiLCB0aWNrU2l6ZTogMCwgdGlja1BhZGRpbmc6IDIsIGxhYmVsT2Zmc2V0OiAzNn0sXG4gIC8vZng6IHt0aWNrRm9ybWF0OiBcIlwifSxcbiAgc3R5bGU6IHsgZm9udFNpemU6IFwiMjJweFwiIH0sXG4gIGNvbG9yOiB7XG4gICAgcmFuZ2U6IGQzLnNjaGVtZVBhc3RlbDEuY29uY2F0KGQzLnNjaGVtZVBhc3RlbDIpLFxuICAgIGRvbWFpbjogbW9udGhzLFxuICAgIGNsYXNzTmFtZTogXCJjYWxcIixcbiAgfSxcbiAgbWFya3M6IFtcbiAgICBQbG90LmNlbGwoZGF0ZXNDYWwwLCB7XG4gICAgICB4OiBkID0+IGQzLnV0Y1dlZWsuY291bnQoZDMudXRjWWVhcihkKSwgZCksXG4gICAgICB5OiBkID0+IGQuZ2V0VVRDRGF5KCksXG4gICAgICAvL2Z4OiBkID0+IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIGZpbGw6IGQgPT4gbW9udGhzW2QuZ2V0VVRDTW9udGgoKV0sXG4gICAgICBzdHJva2U6IGQgPT4gTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKSA9PT0gZG90eUlucHV0ID8gXCJyZWRcIiA6IFwibm9uZVwiLFxuICAgICAgc3Ryb2tlV2lkdGg6IDMsXG4gICAgICBpbnNldDogMC41LFxuICAgIH0pLFxuICAgIFBsb3QudGV4dChkYXRlc0NhbDAsIHtcbiAgICB4OiBkID0+IGQzLnV0Y1dlZWsuY291bnQoZDMudXRjWWVhcihkKSwgZCksXG4gICAgeTogZCA9PiBkLmdldFVUQ0RheSgpLFxuICAgIC8vZng6IGQgPT4gZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIHRleHQ6IGQgPT4gZC5nZXRVVENEYXRlKCkgPT09IDggPyBtb250aHNbZC5nZXRVVENNb250aCgpXSA6IFwiXCIsXG4gICAgICB5OiAtMSxcbiAgICAgIGZyYW1lQW5jaG9yOiBcImxlZnRcIixcbiAgICBtb25vc3BhY2U6IHRydWUsXG4gICAgZm9udFNpemU6IFwiMjJweFwifSksXG4gICAgUGxvdC50ZXh0KGRhdGVzQ2FsMCwge1xuICAgIHg6IGQgPT4gZDMudXRjV2Vlay5jb3VudChkMy51dGNZZWFyKGQpLCBkKSxcbiAgICB5OiBkID0+IGQuZ2V0VVRDRGF5KCksXG4gICAgLy9meDogZCA9PiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgZmlsbDogXCJibGFja1wiLFxuICAgIC8vc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgdGV4dDogZCA9PiBkLmdldFVUQ0RhdGUoKSwgLy9NYXRoLmZsb29yKHVuaXgyZG90eShkLmdldFRpbWUoKSkpLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpLFxuICAgIG1vbm9zcGFjZTogdHJ1ZSxcbiAgICBmb250U2l6ZTogXCIyMnB4XCJ9KVxuICBdXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC00IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoiY2FsUGxvdDEgPSBQbG90LnBsb3Qoe1xuICBwYWRkaW5nOiAwLFxuICB3aWR0aDogMTAwMCxcbiAgaGVpZ2h0OiAzMDAsXG4gIGNsYXNzTmFtZTogXCJjYWxwbG90XCIsXG4gIG1hcmdpbkJvdHRvbTogMzYsXG4gIG1hcmdpbkxlZnQ6IDQ4LFxuICB5OiB7dGlja0Zvcm1hdDogUGxvdC5mb3JtYXRXZWVrZGF5KFwiZW5cIiwgXCJzaG9ydFwiKSwgdGlja1NpemU6IDAsXG4gICAgICBkb21haW46IFstMSwgMCwgMSwgMiwgMywgNCwgNSwgNl0sXG4gICAgICB0aWNrczogWzAsIDEsIDIsIDMsIDQsIDUsIDZdLFxuICAgICAgdGlja1BhZGRpbmc6IDIsXG4gIH0sXG4gIHg6IHtpbnRlcnZhbDogMSwgbGFiZWw6IFwiV2Vla1wiLCB0eXBlOiBcImJhbmRcIiwgdGlja1NpemU6IDAsIHRpY2tQYWRkaW5nOiAyLCBsYWJlbE9mZnNldDogMzZ9LFxuICAvL2Z4OiB7dGlja0Zvcm1hdDogXCJcIn0sXG4gIHN0eWxlOiB7IGZvbnRTaXplOiBcIjIycHhcIiB9LFxuICBjb2xvcjoge1xuICAgIHJhbmdlOiBkMy5zY2hlbWVQYXN0ZWwxLmNvbmNhdChkMy5zY2hlbWVQYXN0ZWwyKSxcbiAgICBkb21haW46IG1vbnRocyxcbiAgICBjbGFzc05hbWU6IFwiY2FsXCIsXG4gIH0sXG4gIG1hcmtzOiBbXG4gICAgUGxvdC5jZWxsKGRhdGVzQ2FsMSwge1xuICAgICAgeDogZCA9PiBkMy51dGNXZWVrLmNvdW50KGQzLnV0Y1llYXIoZCksIGQpLFxuICAgICAgeTogZCA9PiBkLmdldFVUQ0RheSgpLFxuICAgICAgLy9meDogZCA9PiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBmaWxsOiBkID0+IG1vbnRoc1tkLmdldFVUQ01vbnRoKCldLFxuICAgICAgc3Ryb2tlOiBkID0+IE1hdGguZmxvb3IodW5peDJkb3R5KGQuZ2V0VGltZSgpKSkgPT09IGRvdHlJbnB1dCA/IFwicmVkXCIgOiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZVdpZHRoOiAzLFxuICAgICAgaW5zZXQ6IDAuNSxcbiAgICB9KSxcbiAgICBQbG90LnRleHQoZGF0ZXNDYWwxLCB7XG4gICAgeDogZCA9PiBkMy51dGNXZWVrLmNvdW50KGQzLnV0Y1llYXIoZCksIGQpLFxuICAgIHk6IGQgPT4gZC5nZXRVVENEYXkoKSxcbiAgICAvL2Z4OiBkID0+IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICB0ZXh0OiBkID0+IGQuZ2V0VVRDRGF0ZSgpID09PSA4ID8gbW9udGhzW2QuZ2V0VVRDTW9udGgoKV0gOiBcIlwiLFxuICAgICAgeTogLTEsXG4gICAgICBmcmFtZUFuY2hvcjogXCJsZWZ0XCIsXG4gICAgbW9ub3NwYWNlOiB0cnVlLFxuICAgIGZvbnRTaXplOiBcIjIycHhcIn0pLFxuICAgIFBsb3QudGV4dChkYXRlc0NhbDEsIHtcbiAgICB4OiBkID0+IGQzLnV0Y1dlZWsuY291bnQoZDMudXRjWWVhcihkKSwgZCksXG4gICAgeTogZCA9PiBkLmdldFVUQ0RheSgpLFxuICAgIC8vZng6IGQgPT4gZC5nZXRVVENGdWxsWWVhcigpLFxuICAgIGZpbGw6IFwiYmxhY2tcIixcbiAgICAvL3N0cm9rZTogXCJ3aGl0ZVwiLFxuICAgIHRleHQ6IGQgPT4gZC5nZXRVVENEYXRlKCksIC8vTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKS50b1N0cmluZygpLnBhZFN0YXJ0KDMsIFwiMFwiKSxcbiAgICBtb25vc3BhY2U6IHRydWUsXG4gICAgZm9udFNpemU6IFwiMjJweFwifSlcbiAgXVxufSlcbiJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtNSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6InVuaXggPSB7XG4gIHdoaWxlKHRydWUpIHtcbiAgICB5aWVsZCBEYXRlLm5vdygpO1xuICB9XG59XG4vLyBodHRwOi8vaG93YXJkaGlubmFudC5naXRodWIuaW8vZGF0ZV9hbGdvcml0aG1zLmh0bWwjY2l2aWxfZnJvbV9kYXlzXG5mdW5jdGlvbiB1bml4MmRvdGUodW5peCwgem9uZSkge1xuICByZXR1cm4gW1xuICAgICh1bml4ID8/IERhdGUubm93KCkpIC8gODY0MDAwMDBcbiAgICArICh6b25lID0gem9uZSA/PyAoXG4gICAgICAxMCAtIE1hdGgucm91bmQoKG5ldyBEYXRlKVxuICAgICAgICAuZ2V0VGltZXpvbmVPZmZzZXQoKSAvIDE0NClcbiAgICApICUgMTApIC8gMTAgKyA3MTk0NjgsIHpvbmVdfVxuZnVuY3Rpb24gZG90ZTJkb3R5KGRvdGUsIHpvbmUgPSAwKSB7XG4gIGNvbnN0IHNvY3kgPSBNYXRoLmZsb29yKChcbiAgICAgIGRvdGUgPj0gMCA/IGRvdGVcbiAgICAgIDogZG90ZSAtIDE0NjA5NlxuICAgICkgLyAxNDYwOTcpLFxuICBkb3RjID0gZG90ZSAtIHNvY3kgKiAxNDYwOTcsXG4gIHlvdGMgPSBNYXRoLmZsb29yKChkb3RjXG4gICAgLSBNYXRoLmZsb29yKGRvdGMgLyAxNDYwKVxuICAgICsgTWF0aC5mbG9vcihkb3RjIC8gMzY1MjQpXG4gICAgLSBNYXRoLmZsb29yKGRvdGMgLyAxNDYwOTYpXG4gICkgLyAzNjUpO1xuICByZXR1cm4gW1xuICAgIHlvdGMgKyBzb2N5ICogNDAwLFxuICAgIGRvdGMgLSAoeW90YyAqIDM2NVxuICAgICAgKyBNYXRoLmZsb29yKHlvdGMgLyA0KVxuICAgICAgLSBNYXRoLmZsb29yKHlvdGMgLyAxMDApXG4gICksIHpvbmVdfVxuZnVuY3Rpb24gZG90eTJkZWNvMCh5ZWFyID0gMTk2OSwgZG90eSA9IDMwNiwgem9uZSA9IDApIHtcbiAgcmV0dXJuIGAke3llYXIudG9TdHJpbmcoKS5wYWRTdGFydCg0LCBcIjBcIil9KyR7TWF0aC5mbG9vcihkb3R5KS50b1N0cmluZygpLnBhZFN0YXJ0KDMsIFwiMFwiKX0ke1N0cmluZyhkb3R5ICUgMSAqIDEwKS5zbGljZSgwLCA2KX0tJHt6b25lfWBcbn1cbnlkeiA9IGRvdGUyZG90eSguLi51bml4MmRvdGUodW5peCkpXG5kZWNvID0gZG90eTJkZWNvMCguLi55ZHopXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQG9ic2VydmFibGVocS90ZXh0LWNvbG9yLWFubm90YXRpb25zLWluLW1hcmtkb3duI3RleHRjb2xvclxuZnVuY3Rpb24gc2V0U3R5bGUoY29udGVudCwgc3R5bGUgPSB7fSkge1xuICBmdW5jdGlvbiB5aXEoY29sb3IpIHtcbiAgICBjb25zdCB7ciwgZywgYn0gPSBkMy5yZ2IoY29sb3IpO1xuICAgIHJldHVybiAociAqIDI5OSArIGcgKiA1ODcgKyBiICogMTE0KSAvIDEwMDAgLyAyNTU7IC8vIHJldHVybnMgdmFsdWVzIGJldHdlZW4gMCBhbmQgMVxuICB9XG4gIGNvbnN0IHtcbiAgICBiYWNrZ3JvdW5kLFxuICAgIGNvbG9yID0geWlxKGJhY2tncm91bmQpID49IDAuNiA/IFwiIzExMVwiIDogXCJ3aGl0ZVwiLFxuICAgIHBhZGRpbmcgPSBcIjAgMXB4XCIsXG4gICAgYm9yZGVyUmFkaXVzID0gXCI0cHhcIixcbiAgICBmb250V2VpZ2h0ID0gOTAwLFxuICAgIGZvbnRTaXplID0gXCIxZW1cIixcbiAgICAuLi5yZXN0XG4gIH0gPSB0eXBlb2Ygc3R5bGUgPT09IFwic3RyaW5nXCIgPyB7YmFja2dyb3VuZDogc3R5bGV9IDogc3R5bGU7XG4gIHJldHVybiBodGwuaHRtbGA8c3BhbiBzdHlsZT0ke3tcbiAgICBiYWNrZ3JvdW5kLFxuICAgIGNvbG9yLFxuICAgIHBhZGRpbmcsXG4gICAgYm9yZGVyUmFkaXVzLFxuICAgIGZvbnRXZWlnaHQsXG4gICAgLi4ucmVzdFxuICB9fT4ke2NvbnRlbnR9PC9zcGFuPmA7XG59XG5mdW5jdGlvbiB5ZWFyMmxlYXAoeWVhciA9IDE5NzApIHtcbiAgICByZXR1cm4geWVhciAlIDQgPT0gMCAmJiB5ZWFyICUgMTAwICE9IDAgfHwgeWVhciAlIDQwMCA9PSAwO1xufVxuZGVjb1llYXIgPSBkZWNvLnNsaWNlKDAsIDQpXG5uZXh0WWVhciA9IHBhcnNlSW50KGRlY29ZZWFyKSArIDFcbmRlY29Eb3R5ID0gZGVjby5zbGljZSg1LCA4KVxubkRheXNJblllYXIgPSAzNjUgKyB5ZWFyMmxlYXAoeWR6WzBdICsgMSlcblRtaW51cyA9IG5EYXlzSW5ZZWFyIC0gZGVjb0RvdHlcbmZyYWNZZWFyID0gKHlkelswXSArICh5ZHpbMV0gLSB5ZHpbMl0pIC8gbkRheXNJblllYXIpLnRvRml4ZWQoMylcbnN0eWxlZERlY29ZZWFyID0gc2V0U3R5bGUoZGVjb1llYXIsIGQzLnNjaGVtZVBhaXJlZFsxMF0pXG5zdHlsZWROZXh0WWVhciA9IHNldFN0eWxlKG5leHRZZWFyLCBkMy5zY2hlbWVQYWlyZWRbMTBdKVxuc3R5bGVkRnJhY1llYXIgPSBzZXRTdHlsZShmcmFjWWVhciwgZDMuc2NoZW1lUGFpcmVkWzEwXSlcbnN0eWxlZERlY29Eb3R5ID0gc2V0U3R5bGUoZGVjb0RvdHksIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERlY29Eb3R5MSA9IHNldFN0eWxlKGRlY29Eb3R5LCBkMy5jb2xvcihcImN5YW5cIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREZWNvVG1pbnVzID0gc2V0U3R5bGUoVG1pbnVzLCBkMy5jb2xvcihcInBpbmtcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREZWNvRGVrID0gc2V0U3R5bGUoZGVjb0RvdHkuc2xpY2UoMCwgMiksIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERlY29Eb3RkID0gc2V0U3R5bGUoZGVjb0RvdHlbMl0sIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZE5kYXlzID0gc2V0U3R5bGUobkRheXNJblllYXIsIGQzLnNjaGVtZVBhaXJlZFs2XSlcbnN0eWxlZE5kYXlzMSA9IHNldFN0eWxlKG5EYXlzSW5ZZWFyLCBkMy5zY2hlbWVQYWlyZWRbNl0pXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQGp1YW5nMTc0NC90cmFuc2Zvcm0taW5wdXQvMVxudHJhbnNmb3JtSW5wdXQgPSBmdW5jdGlvbih0YXJnZXQsIHtiaW5kOiBzb3VyY2UsIHRyYW5zZm9ybSA9IGlkZW50aXR5LCBpbnZvbHV0b3J5ID0gZmFsc2UsIGludmVydCA9IGludm9sdXRvcnkgPyB0cmFuc2Zvcm0gOiBpbnZlcnNlKHRyYW5zZm9ybSl9ID0ge30pe1xuICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICBzb3VyY2UgPSB0YXJnZXQ7XG4gICAgdGFyZ2V0ID0gaHRtbGA8ZGl2PiR7c291cmNlfTwvZGl2PmA7XG4gIH1cbiAgZnVuY3Rpb24gc291cmNlSW5wdXRIYW5kbGVyKCkge1xuICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGFyZ2V0SW5wdXRIYW5kbGVyKTtcbiAgICBzZXRUcmFuc2Zvcm0odGFyZ2V0KS50byh0cmFuc2Zvcm0oc291cmNlLnZhbHVlKSkuYW5kRGlzcGF0Y2hFdmVudCgpO1xuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGFyZ2V0SW5wdXRIYW5kbGVyKTtcbiAgfVxuICBmdW5jdGlvbiB0YXJnZXRJbnB1dEhhbmRsZXIoKSB7XG4gICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzb3VyY2VJbnB1dEhhbmRsZXIpO1xuICAgIHNldFRyYW5zZm9ybShzb3VyY2UpLnRvKGludmVydCh0YXJnZXQudmFsdWUpKS5hbmREaXNwYXRjaEV2ZW50KCk7XG4gICAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzb3VyY2VJbnB1dEhhbmRsZXIpO1xuICB9XG4gIHNvdXJjZS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgc291cmNlSW5wdXRIYW5kbGVyKTtcbiAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0YXJnZXRJbnB1dEhhbmRsZXIpO1xuICBpbnZhbGlkYXRpb24udGhlbigoKSA9PiB7XG4gICAgc291cmNlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzb3VyY2VJbnB1dEhhbmRsZXIpO1xuICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgdGFyZ2V0SW5wdXRIYW5kbGVyKTtcbiAgfSk7XG4gIHNvdXJjZUlucHV0SGFuZGxlcigpO1xuICByZXR1cm4gdGFyZ2V0O1xufVxuc2V0VHJhbnNmb3JtID0gKGlucHV0KSA9PiAoe3RvOiAodmFsdWUpID0+IChpbnB1dC52YWx1ZSA9IHZhbHVlLCB7YW5kRGlzcGF0Y2hFdmVudDogKGV2ZW50ID0gbmV3IEV2ZW50KFwiaW5wdXRcIikpID0+IGlucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpfSl9KTtcbmZ1bmN0aW9uIGludmVyc2UoZikge1xuICBzd2l0Y2ggKGYpIHtcbiAgICBjYXNlIGlkZW50aXR5OiAgcmV0dXJuIGlkZW50aXR5O1xuICAgIGNhc2UgTWF0aC5zcXJ0OiByZXR1cm4gc3F1YXJlO1xuICAgIGNhc2UgTWF0aC5sb2c6ICByZXR1cm4gTWF0aC5leHA7XG4gICAgY2FzZSBNYXRoLmV4cDogIHJldHVybiBNYXRoLmxvZztcbiAgICBkZWZhdWx0OiAgICAgICAgcmV0dXJuICh4ID0+IHNvbHZlKGYsIHgsIHgpKTtcbiAgfVxuICBmdW5jdGlvbiBzb2x2ZShmLCB5LCB4ID0gMCkge1xuICAgIGNvbnN0IGR4ID0gMWUtNjtcbiAgICBsZXQgc3RlcHMgPSAxMDAsIGRlbHRheCwgZngsIGRmeDtcbiAgICBkbyB7XG4gICAgICBmeCA9IGYoeClcbiAgICAgIGRmeCA9IChmKHggKyBkeCkgLSBmeCkgfHwgZHg7XG4gICAgICBkZWx0YXggPSBkeCAqIChmeCAtIHkpL2RmeFxuICAgICAgeCAtPSBkZWx0YXg7XG4gICAgfSB3aGlsZSAoTWF0aC5hYnMoZGVsdGF4KSA+IGR4ICYmIC0tc3RlcHMgPiAwKTtcbiAgICByZXR1cm4gc3RlcHMgPT09IDAgPyBOYU4gOiB4O1xuICB9XG5mdW5jdGlvbiBzcXVhcmUoeCkge1xuICAgIHJldHVybiB4ICogeDtcbiAgfVxufVxuZnVuY3Rpb24gaWRlbnRpdHkoeCkge1xuICByZXR1cm4geDtcbn1cbmZ1bmN0aW9uIGRvdHkybW9udGgoZG90eSA9IDApIHtcbiAgICBjb25zdCBtID0gTWF0aC5mbG9vcigoNSAqIGRvdHkgKyAyKSAvIDE1Myk7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IobSA8IDEwID8gbSArIDMgOiBtIC0gOSk7XG59XG5mdW5jdGlvbiBtb250aDJkb3R5KG1vbnRoID0gMSkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgICAoMTUzICogKG1vbnRoID4gMiA/IG1vbnRoIC0gMyA6IG1vbnRoICsgOSkgKyAyKSAvIDVcbil9XG5mdW5jdGlvbiBkb3R5MmRvdG0oZG90eSA9IDApIHtcbiAgICBjb25zdCBtID0gTWF0aC5mbG9vcigoNSAqIGRvdHkgKyAyKSAvIDE1Myk7XG4gICAgcmV0dXJuIGRvdHkgLSBNYXRoLmZsb29yKCgxNTMgKiBtICsgMikgLyA1KSArIDE7XG59XG5udW1iZXJzID0gQXJyYXkuZnJvbSh7bGVuZ3RoOiAzNjZ9LCAoXywgaSkgPT4gaSlcbnNldCh2aWV3b2YgZG90eUlucHV0LCBsZWFwc2NydWJbMF0pXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQG9ic2VydmFibGVocS9zeW5jaHJvbml6ZWQtaW5wdXRzXG5mdW5jdGlvbiBzZXQoaW5wdXQsIHZhbHVlKSB7XG4gIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gIGlucHV0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWV9KSk7XG59XG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQG1ib3N0b2NrL3NjcnViYmVyXG5mdW5jdGlvbiBTY3J1YmJlcih2YWx1ZXMsIHtcbiAgZm9ybWF0ID0gdmFsdWUgPT4gdmFsdWUsXG4gIGluaXRpYWwgPSAwLFxuICBkaXJlY3Rpb24gPSAxLFxuICBkZWxheSA9IG51bGwsXG4gIGF1dG9wbGF5ID0gdHJ1ZSxcbiAgbG9vcCA9IHRydWUsXG4gIGxvb3BEZWxheSA9IG51bGwsXG4gIGFsdGVybmF0ZSA9IGZhbHNlLFxuICBpbnB1dFN0eWxlID0gXCJcIlxufSA9IHt9KSB7XG4gIHZhbHVlcyA9IEFycmF5LmZyb20odmFsdWVzKTtcbiAgY29uc3QgZm9ybSA9IGh0bWxgPGZvcm0gc3R5bGU9XCJmb250OiAxOHB4IHZhcigtLW1vbm9zcGFjZSk7IGZvbnQtdmFyaWFudC1udW1lcmljOiB0YWJ1bGFyLW51bXM7IGRpc3BsYXk6IGZsZXg7IGhlaWdodDogMzNweDsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIj5cbiAgPGJ1dHRvbiBuYW1lPWIgdHlwZT1idXR0b24gc3R5bGU9XCJtYXJnaW4tcmlnaHQ6IDAuNGVtOyB3aWR0aDogNWVtO1wiPjwvYnV0dG9uPlxuICA8bGFiZWwgc3R5bGU9XCJkaXNwbGF5OiBmbGV4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICAgIDxpbnB1dCBuYW1lPWkgdHlwZT1yYW5nZSBtaW49MCBtYXg9JHt2YWx1ZXMubGVuZ3RoIC0gMX0gdmFsdWU9JHtpbml0aWFsfSBzdGVwPTEgc3R5bGU9JHtpbnB1dFN0eWxlfT5cbiAgICA8b3V0cHV0IG5hbWU9byBzdHlsZT1cIm1hcmdpbi1sZWZ0OiAwLjRlbTtcIj48L291dHB1dD5cbiAgPC9sYWJlbD5cbjwvZm9ybT5gO1xuICBsZXQgZnJhbWUgPSBudWxsO1xuICBsZXQgdGltZXIgPSBudWxsO1xuICBsZXQgaW50ZXJ2YWwgPSBudWxsO1xuICBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICBmb3JtLmIudGV4dENvbnRlbnQgPSBcIlN0b3BcIjtcbiAgICBpZiAoZGVsYXkgPT09IG51bGwpIGZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuICAgIGVsc2UgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aWNrLCBkZWxheSk7XG4gIH1cbiAgZnVuY3Rpb24gc3RvcCgpIHtcbiAgICBmb3JtLmIudGV4dENvbnRlbnQgPSBcIlBsYXlcIjtcbiAgICBpZiAoZnJhbWUgIT09IG51bGwpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lKSwgZnJhbWUgPSBudWxsO1xuICAgIGlmICh0aW1lciAhPT0gbnVsbCkgY2xlYXJUaW1lb3V0KHRpbWVyKSwgdGltZXIgPSBudWxsO1xuICAgIGlmIChpbnRlcnZhbCAhPT0gbnVsbCkgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCksIGludGVydmFsID0gbnVsbDtcbiAgfVxuICBmdW5jdGlvbiBydW5uaW5nKCkge1xuICAgIHJldHVybiBmcmFtZSAhPT0gbnVsbCB8fCB0aW1lciAhPT0gbnVsbCB8fCBpbnRlcnZhbCAhPT0gbnVsbDtcbiAgfVxuICBmdW5jdGlvbiB0aWNrKCkge1xuICAgIGlmIChmb3JtLmkudmFsdWVBc051bWJlciA9PT0gKGRpcmVjdGlvbiA+IDAgPyB2YWx1ZXMubGVuZ3RoIC0gMSA6IGRpcmVjdGlvbiA8IDAgPyAwIDogTmFOKSkge1xuICAgICAgaWYgKCFsb29wKSByZXR1cm4gc3RvcCgpO1xuICAgICAgaWYgKGFsdGVybmF0ZSkgZGlyZWN0aW9uID0gLWRpcmVjdGlvbjtcbiAgICAgIGlmIChsb29wRGVsYXkgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKGZyYW1lICE9PSBudWxsKSBjYW5jZWxBbmltYXRpb25GcmFtZShmcmFtZSksIGZyYW1lID0gbnVsbDtcbiAgICAgICAgaWYgKGludGVydmFsICE9PSBudWxsKSBjbGVhckludGVydmFsKGludGVydmFsKSwgaW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aW1lciA9IHNldFRpbWVvdXQoKCkgPT4gKHN0ZXAoKSwgc3RhcnQoKSksIGxvb3BEZWxheSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlbGF5ID09PSBudWxsKSBmcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aWNrKTtcbiAgICBzdGVwKCk7XG4gIH1cbiAgZnVuY3Rpb24gc3RlcCgpIHtcbiAgICBmb3JtLmkudmFsdWVBc051bWJlciA9IChmb3JtLmkudmFsdWVBc051bWJlciArIGRpcmVjdGlvbiArIHZhbHVlcy5sZW5ndGgpICUgdmFsdWVzLmxlbmd0aDtcbiAgICBmb3JtLmkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKTtcbiAgfVxuICBmb3JtLmkub25pbnB1dCA9IGV2ZW50ID0+IHtcbiAgICBpZiAoZXZlbnQgJiYgZXZlbnQuaXNUcnVzdGVkICYmIHJ1bm5pbmcoKSkgc3RvcCgpO1xuICAgIGZvcm0udmFsdWUgPSB2YWx1ZXNbZm9ybS5pLnZhbHVlQXNOdW1iZXJdO1xuICAgIGZvcm0uby52YWx1ZSA9IGZvcm1hdChmb3JtLnZhbHVlLCBmb3JtLmkudmFsdWVBc051bWJlciwgdmFsdWVzKTtcbiAgfTtcbiAgZm9ybS5iLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgaWYgKHJ1bm5pbmcoKSkgcmV0dXJuIHN0b3AoKTtcbiAgICBkaXJlY3Rpb24gPSBhbHRlcm5hdGUgJiYgZm9ybS5pLnZhbHVlQXNOdW1iZXIgPT09IHZhbHVlcy5sZW5ndGggLSAxID8gLTEgOiAxO1xuICAgIGZvcm0uaS52YWx1ZUFzTnVtYmVyID0gKGZvcm0uaS52YWx1ZUFzTnVtYmVyICsgZGlyZWN0aW9uKSAlIHZhbHVlcy5sZW5ndGg7XG4gICAgZm9ybS5pLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiaW5wdXRcIiwge2J1YmJsZXM6IHRydWV9KSk7XG4gICAgc3RhcnQoKTtcbiAgfTtcbiAgZm9ybS5pLm9uaW5wdXQoKTtcbiAgaWYgKGF1dG9wbGF5KSBzdGFydCgpO1xuICBlbHNlIHN0b3AoKTtcbiAgSW5wdXRzLmRpc3Bvc2FsKGZvcm0pLnRoZW4oc3RvcCk7XG4gIHJldHVybiBmb3JtO1xufVxuY2FsWWVhciA9ICFsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiTW9uZGF5XCIgPyA2IDogIWxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJUdWVzZGF5XCIgPyA3IDogIWxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJXZWRuZXNkYXlcIiA/IDIgOiAhbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlRodXJzZGF5XCIgPyAzIDogIWxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJGcmlkYXlcIiA/IDkgOiAhbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlNhdHVyZGF5XCIgPyAxMCA6ICFsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiU3VuZGF5XCIgPyAxMSA6IGxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJNb25kYXlcIiA/IDEyIDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlR1ZXNkYXlcIiA/IDI0IDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIldlZG5lc2RheVwiID8gOCA6IGxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJUaHVyc2RheVwiID8gMjAgOiBsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiRnJpZGF5XCIgPyA0IDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlNhdHVyZGF5XCIgPyAxNiA6IGxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJTdW5kYXlcIiA/IDI4IDogMDtcbnN0YXJ0Q2FsMCA9IG5ldyBEYXRlKGNhbFllYXIsIDAsIDApO1xuc3RhcnRDYWwxID0gbmV3IERhdGUoY2FsWWVhciwgNiwgMCk7XG5zdGFydENhbDIgPSBuZXcgRGF0ZShjYWxZZWFyLCAxMiwgMCk7XG5kYXRlc0NhbDAgPSBkMy51dGNEYXlzKHN0YXJ0Q2FsMCwgc3RhcnRDYWwxKTtcbmRhdGVzQ2FsMSA9IGQzLnV0Y0RheXMoc3RhcnRDYWwxLCBzdGFydENhbDIpO1xubW9udGhzID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG5mdW5jdGlvbiB1bml4MmRvdHkodW5peCkge1xuICBjb25zdCBkb3RlID0gKFxuICAgIHVuaXggPz8gRGF0ZS5ub3coKVxuICApIC8gODY0MDAwMDAgKyA3MTk0NjgsXG4gICAgc29jeSA9IE1hdGguZmxvb3IoKFxuICAgICAgZG90ZSA+PSAwID8gZG90ZVxuICAgICAgOiBkb3RlIC0gMTQ2MDk2XG4gICAgKSAvIDE0NjA5NyksXG4gIGRvdGMgPSBkb3RlIC0gc29jeSAqIDE0NjA5NyxcbiAgeW90YyA9IE1hdGguZmxvb3IoKGRvdGNcbiAgICAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjApXG4gICAgKyBNYXRoLmZsb29yKGRvdGMgLyAzNjUyNClcbiAgICAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjA5NilcbiAgKSAvIDM2NSk7XG4gIHJldHVybiBkb3RjIC0gKHlvdGMgKiAzNjVcbiAgICAgICsgTWF0aC5mbG9vcih5b3RjIC8gNClcbiAgICAgIC0gTWF0aC5mbG9vcih5b3RjIC8gMTAwKVxuICApfVxuXG5mdW5jdGlvbiBkb3R5MmRvdGUoeWVhciA9IDE5NjksIGRvdHkgPSAwLCB6b25lID0gMCkge1xuICAgIGNvbnN0IGN5Y2xlID0gTWF0aC5mbG9vcigoeWVhciA+PSAwID8geWVhciA6IHllYXIgLSAzOTkpIC8gNDAwKSxcbiAgICB5b3RlID0geWVhciAtIGN5Y2xlICogNDAwO1xuICAgIHJldHVybiBjeWNsZSAqIDE0NjA5NyArIHlvdGUgKiAzNjUgKyBNYXRoLmZsb29yKHlvdGUgLyA0KSAtIE1hdGguZmxvb3IoeW90ZSAvIDEwMCkgKyBkb3R5IC0gem9uZVxufVxuZnVuY3Rpb24gZG90eTJkZWNvKHllYXJEb3R5ID0gWzE5NjksIDMwNl0sIHpvbmUgPSAwKSB7XG4gICAgY29uc3QgeWQgPSBkb3RlMmRvdHkoZG90eTJkb3RlKHllYXJEb3R5WzBdLCBNYXRoLmZsb29yKHllYXJEb3R5WzFdKSkpO1xuICAgIHJldHVybiBgJHt5ZFswXS50b1N0cmluZygpLnBhZFN0YXJ0KDQsIFwiMFwiKX0rJHt5ZFsxXS50b1N0cmluZygpLnBhZFN0YXJ0KDMsIFwiMFwiKX0ke1xuICAgICAgICB5ZWFyRG90eVsxXS50b1N0cmluZygpLmluY2x1ZGVzKFwiLlwiKSA/IFwiLlwiICsgKFxuICAgICAgICAgICAgKHllYXJEb3R5WzFdID4gMCkgPyAoeWVhckRvdHlbMV0gLSB6b25lKS50b1N0cmluZygpLnNwbGl0KFwiLlwiKS5wb3AoKVxuICAgICAgICAgICAgOiBbLi4uKHllYXJEb3R5WzFdIC0gem9uZSkudG9TdHJpbmcoKS5zcGxpdChcIi5cIikucG9wKCldLm1hcChcbiAgICAgICAgICAgICAgICAoZSwgaSwgYSkgPT4gKGkgKyAxID09PSBhLmxlbmd0aCkgPyAxMCAtIGUgOiA5IC0gZVxuICAgICAgICAgICAgKS5qb2luKFwiXCIpXG4gICAgICAgICkgOiBcIlwiXG4gICAgfWBcbn1cbmZ1bmN0aW9uIGRlY28yZG90eSh0aW1lc3RhbXAgPSBcIjE5NjkrMzA2LjAwMDAwWlwiKSB7XG4gICAgY29uc3QgYXJyID0gdGltZXN0YW1wLnRvU3RyaW5nKCkuc3BsaXQoLyg/PVsrLV18W2EtekEtWl0pLywgMyk7XG4gICAgc3dpdGNoIChhcnIubGVuZ3RoKSB7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuIFt1bml4MmRvdHkoRGF0ZS5ub3coKSlbMF0sIHBhcnNlRmxvYXQoYXJyWzBdKSwgMF07XG4gICAgICAgIGNhc2UgMjogcmV0dXJuICgvXlthLXpBLVpdKyQvLnRlc3QoYXJyWzFdKSlcbiAgICAgICAgICAgID8gW3VuaXgyZG90eShEYXRlLm5vdygpKVswXSwgcGFyc2VGbG9hdChhcnJbMF0pLCB6b25lMmhvdXIoYXJyWzFdKSAvIDI0XVxuICAgICAgICAgICAgOiBbcGFyc2VGbG9hdChhcnJbMF0pLCBwYXJzZUZsb2F0KGFyclsxXSksIDBdO1xuICAgIH07XG4gICAgcmV0dXJuIFtwYXJzZUZsb2F0KGFyclswXSksIHBhcnNlRmxvYXQoYXJyWzFdKSwgL15bYS16QS1aXSskLy50ZXN0KGFyclsyXSlcbiAgICAgICAgPyB6b25lMmhvdXIoYXJyWzJdKSAvIDI0XG4gICAgICAgIDogcGFyc2VGbG9hdChhcnJbMl0ucmVwbGFjZSgvKFsrLV0pLywgXCIkMVxcLlwiKSldO1xufVxuZnVuY3Rpb24gem9uZTJob3VyKHpvbmUgPSBcIlpcIikge1xuICAgIHJldHVybiAoem9uZSA9IHpvbmUudG9VcHBlckNhc2UoKSkgPT0gXCJaXCIgPyAwXG4gICAgICAgIDogem9uZSA+IFwiQFwiICYmIHpvbmUgPCBcIkpcIiA/IHpvbmUuY2hhckNvZGVBdCgpIC0gNjRcbiAgICAgICAgOiB6b25lID4gXCJKXCIgJiYgem9uZSA8IFwiTlwiID8gem9uZS5jaGFyQ29kZUF0KCkgLSA2NVxuICAgICAgICA6IHpvbmUgPCBcIlpcIiAmJiB6b25lID4gXCJNXCIgPyAtKHpvbmUuY2hhckNvZGVBdCgpIC0gNzcpXG4gICAgICAgIDogem9uZTtcbn1cbmZ1bmN0aW9uIGRvdHkydW5peCh5ZWFyID0gMTk2OSwgZG90eSA9IDMwNiwgem9uZSA9IDApIHtcbiAgICByZXR1cm4gKGRvdHkyZG90ZSh5ZWFyLCBkb3R5LCB6b25lKSAtIDcxOTQ2OCkgKiA4NjQwMDAwMDtcbn1cbmZ1bmN0aW9uIGRvdHkyaXNvYyh5ZCkge1xuICAgIHJldHVybiBuZXcgRGF0ZShkb3R5MnVuaXgoLi4ueWQpKVxufVxuZnVuY3Rpb24gZG90eTJncmVnKGRvdHkgPSAzMDYpIHtcbiAgICBjb25zdCBtID0gTWF0aC5mbG9vcigoNSAqIGRvdHkgKyAyKSAvIDE1Myk7XG4gICAgcmV0dXJuIFtcbiAgICAgIE1hdGguZmxvb3IobSA8IDEwID8gbSArIDMgOiBtIC0gOSksXG4gICAgICBNYXRoLmZsb29yKGRvdHkgLSAoMTUzICogbSArIDIpIC8gNSArIDIpXG4gICAgXTtcbn1cbmZ1bmN0aW9uIGdyZWcyZG90eShtb250aCA9IDEsIGRheSA9IDEpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihcbiAgICAgICAgKDE1MyAqIChtb250aCA+IDIgPyBtb250aCAtIDMgOiBtb250aCArIDkpICsgMikgLyA1ICsgZGF5IC0gMVxuKX1cbmZ1bmN0aW9uIGdyZWcyeWVhcih5ZWFyID0gMTk3MCwgbW9udGggPSAxKSB7IHJldHVybiB5ZWFyIC0gKG1vbnRoIDwgMykgfVxuZnVuY3Rpb24gaXNvYzJkb3R5KGlzb2MpIHtcbiAgcmV0dXJuIFtncmVnMnllYXIoaXNvYy5nZXRGdWxsWWVhcigpLCBpc29jLmdldFVUQ01vbnRoKCkgKyAxKSwgZ3JlZzJkb3R5KGlzb2MuZ2V0VVRDTW9udGgoKSArIDEsIGlzb2MuZ2V0VVRDRGF0ZSgpKV07XG59XG5sZWFwSW5wdXQgPSBsZWFwc2NydWJbMV1cbmZ1bmN0aW9uIGFkZE4oZCkgeyByZXR1cm4gZCArIDM2NSArIGxlYXBJbnB1dCB9XG5mdW5jdGlvbiBzdWJOKGQpIHsgcmV0dXJuIGQgLSAzNjUgLSBsZWFwSW5wdXQgfVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdkb3R5SW5wdXQnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnbW9udGhJbnB1dCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdkb3R5SW5wdXQxJykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2RvdG1JbnB1dCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdsZWFwc2NydWInKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnZG90d0lucHV0JykifV19
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../dec/date";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/maptv\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../../dec/index.html" class="pagination-link" aria-label="Measurement">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Measurement</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../iso/date/index.html" class="pagination-link" aria-label="ISO Date">
        <span class="nav-page-text">ISO Date</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb7" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Dec Date</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> /asset/deidek.svg</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> true</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">  url: https://maptv.github.io/dec/date</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    shift-heading-level-by: 2</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">    include-after-body:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/cite.html</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/style.html</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/stamp.html</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/tooltip.html</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">  commonmark: default</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="an">filters:</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">  - ../../asset/date.lua</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">  - include-code-files</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>My website serves as a demonstration of both the <span class="co">[</span><span class="ot">Quarto</span><span class="co">](https://quarto.org)</span> publishing system and the <span class="co">[</span><span class="ot">Dec</span><span class="co">](/dec)</span> measurement system. I use several clever hacks to get Quarto to display all of the dates on my website in the Dec <span class="in">`year+day`</span> format. Knowing the basics of Dec dates will help you to understand the Quarto <span class="co">[</span><span class="ot">filter</span><span class="co">](https://quarto.org/docs/extensions/filters.html)</span>, <span class="co">[</span><span class="ot">render script</span><span class="co">](https://quarto.org/docs/projects/scripts.html#pre-and-post-render)</span>, and <span class="co">[</span><span class="ot">include file</span><span class="co">](https://quarto.org/docs/output-formats/html-basics.html#includes)</span> examples in my <span class="co">[</span><span class="ot">Quarto article</span><span class="co">](/software/quarto)</span>.</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>The <span class="in">`year+day`</span> format is based on the Dec date equation: $\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}{\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}$, where $\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}$ is the Dec date, $\lfloor\colorbox{yellow}{y}\rfloor$ is the year obtained by <span class="co">[</span><span class="ot">flooring</span><span class="co">](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=the%20greatest%20integer%20less%20than%20or%20equal%20to%20x)</span> $\colorbox{yellow}{y}$, the <span class="co">[</span><span class="ot">decimal</span><span class="co">](https://en.wikipedia.org/wiki/Decimal#:~:text=denoting%20integer%20and-,non%2Dinteger%20numbers,-.%20It%20is%20the)</span> years that have passed since the Dec <span class="co">[</span><span class="ot">epoch</span><span class="co">](https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era)</span> (<span class="co">[</span><span class="ot">Year 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="1 BC"} <span class="co">[</span><span class="ot">Day 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="March 1"} <span class="co">[</span><span class="ot">Dot 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="midnight"}), $\colorbox{cyan}{d}$ is the <span class="co">[</span><span class="ot">zero-based</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00)</span> day of the year, and $\colorbox{orange}{n}$ is the number of days in $\lfloor\colorbox{yellow}{y}\rfloor$. The Dec date equation for today is \${styledDecoYear}+\${styledDecoDoty}√∑\${styledNdays}=\${styledFracYear}.</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>Dec dates only include the first two terms from the <span class="co">[</span><span class="ot">left-hand side</span><span class="co">](https://en.wikipedia.org/wiki/Sides_of_an_equation#:~:text=the%20expression%20on%20the%20left%20of%20the%20%22%3D%22%20is%20the%20left%20side%20of%20the%20equation)</span> of the Dec date equation: $\lfloor\colorbox{yellow}{y}\rfloor$ and $\colorbox{cyan}{d}$. The right-hand side of the equation, $\colorbox{yellow}{y}$, can also be used as a date. We need $\colorbox{orange}{n}$ to calculate $\colorbox{yellow}{y}$ via the Dec date equation above and to obtain $\colorbox{cyan}{d}$ using the Dec day of the year equation: $\colorbox{cyan}{d}{=}\colorbox{yellow}{y}\vcenter{\text{\%}}1{\times}\colorbox{orange}{n}$. In simple terms, $\colorbox{cyan}{d}$ is the <span class="co">[</span><span class="ot">decimal part</span><span class="co">](https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part)</span> of $\colorbox{yellow}{y}$ multiplied by $\colorbox{orange}{n}$.</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>To find $\colorbox{orange}{n}$, we plug $\lfloor\colorbox{yellow}{y}\rfloor$ into the Dec year length equation below, where</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>$\vcenter{\text\%}$ is the <span class="co">[</span><span class="ot">modulo</span><span class="co">](https://en.wikipedia.org/wiki/Modulo#:~:text=returns%20the%20remainder)</span> operator, $\land$ is the logical <span class="co">[</span><span class="ot">conjunction</span><span class="co">](https://en.wikipedia.org/wiki/Logical_conjunction)</span> operator (and), and $\lor$ is the logical <span class="co">[</span><span class="ot">disjunction</span><span class="co">](https://en.wikipedia.org/wiki/Logical_disjunction)</span> operator (or). According to this equation, $\colorbox{orange}{n}$ is 366 if the subsequent year <span class="co">[</span><span class="ot">(Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$)</span><span class="co">]</span>{.nowrap} is a <span class="co">[</span><span class="ot">Gregorian calendar</span><span class="co">](https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world)</span> <span class="co">[</span><span class="ot">leap year</span><span class="co">](https://en.wikipedia.org/wiki/Leap_year#:~:text=Every%20year%20that%20is%20exactly%20divisible%20by%20four%20is%20a%20leap%20year%2C%20except%20for%20years%20that%20are%20exactly%20divisible%20by%20100%2C%20but%20these%20centurial%20years%20are%20leap%20years%20if%20they%20are%20exactly%20divisible%20by%20400)</span> and 365 if Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$ is a Gregorian calendar <span class="co">[</span><span class="ot">common year</span><span class="co">](https://en.wikipedia.org/wiki/Common_year#:~:text=a%20calendar%20year%20with%20365%20days)</span>.</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>$$\colorbox{orange}{n}=\begin{cases}</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  366&amp;{\begin{align}\text{if } (\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}4=0<span class="sc">\\</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  \land(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}100\neq0<span class="sc">\\</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  \lor(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}400=0\end{align}}<span class="sc">\\\\</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  365&amp;{\text{otherwise.}}\end{cases}$$</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>In addition to calculating $\colorbox{yellow}{y}$, $\colorbox{orange}{n}$ is needed to convert between <span class="in">`year+day`</span> and <span class="in">`year-day`</span> Dec dates. The <span class="in">`year-day`</span> version of the Dec date equation is $\lfloor\colorbox{yellow}{y}\rfloor{+}1{-}(\colorbox{cyan}{d}{-}\colorbox{orange}{n}){\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}$. In essence, $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ is a <span class="co">[</span><span class="ot">"T-minus" countdown</span><span class="co">](https://en.wikipedia.org/wiki/Countdown#:~:text=backward%20counting%20to%20indicate%20the%20time%20remaining%20before%20an%20event)</span> of the days until the start of Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$. The current <span class="in">`year-day`</span> date, \${styledNextYear}-\${styledDecoTminus}, tells us that Year \${nextYear} will begin in \${Tminus} days.</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>The difference between $\colorbox{cyan}{d}$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ can also be explained in terms of computer programming. If we think of years as <span class="co">[</span><span class="ot">arrays</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=a%20data%20structure%20consisting%20of%20a%20collection%20of%20elements%20(values%20or%20variables)%2C%20of%20same%20memory%20size%2C%20each%20identified%20by%20at%20least%20one%20array%20index), $\colorbox{cyan}{d}$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ are like array <span class="co">[</span><span class="ot">indexes</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=individual%20objects%20are%20selected%20by%20an%20index) that can be used to identify array elements or combine them via <span class="co">[</span><span class="ot">slicing</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing#:~:text=an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array)</span>. In this analogy, $\colorbox{cyan}{d}$ is a <span class="co">[</span><span class="ot">positive index</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00)</span> with a range of $0$ to $\colorbox{orange}{n}{-}1$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ is a <span class="co">[</span><span class="ot">negative index</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing#:~:text=specify%20an%20offset%20from%20the%20end%20of%20the%20array)</span> that ranges from ${-}\colorbox{orange}{n}$ to ${-}1$.</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>We can express the <span class="co">[</span><span class="ot">bounds</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Upper_and_lower_bounds#:~:text=an%20upper%20bound%20or%20majorant%5B1%5D%20of%20a%20subset%20S%20of%20some%20preordered%20set%20(K%2C%20%E2%89%A4)%20is%20an%20element%20of%20K%20that%20is%20greater%20than%20or%20equal%20to%20every%20element%20of%20S.%5B2%5D%5B3%5D%20Dually%2C%20a%20lower%20bound%20or%20minorant%20of%20S%20is%20defined%20to%20be%20an%20element%20of%20K%20that%20is%20less%20than%20or%20equal%20to%20every%20element%20of%20S) for $\colorbox{cyan}{d}$ values with the <span class="co">[</span><span class="ot">interval</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Interval_(mathematics)#:~:text=the%20set%20of%20all%20real%20numbers%20lying%20between%20two%20fixed%20endpoints) $\left <span class="co">[</span><span class="ot">0,\colorbox{orange}{n} \right )$, the [inequality</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Inequality_(mathematics)#:~:text=a%20non%2Dequal%20comparison) $0{\le}\colorbox{cyan}{d}{\lt} \colorbox{orange}{n}$, or the Dec range $0{=}$. Similarly, the analogous interval, inequality, and Dec range for $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ are $<span class="co">[</span><span class="ot">{-}\colorbox{orange}{n},0)$, ${-}\colorbox{orange}{n}{\le}\colorbox{cyan}{d}{-}\colorbox{orange}{n}{\lt}0$, and ${-}\colorbox{orange}{n}{=}$, respectively. Use the [Observable</span><span class="co">](https://observablehq.com/)</span> <span class="co">[</span><span class="ot">rangeüéöÔ∏èinputs</span><span class="co">](https://observablehq.com/@observablehq/input-range)</span> below to chose which day is surrounded by a redüü•box in the <span class="co">[</span><span class="ot">calendarüóìÔ∏èplot</span><span class="co">](https://observablehq.com/@observablehq/plot-calendar)</span> beneath the inputs.</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>The Play‚ñ∂Ô∏èbutton above the plot cyclesüîÑthrough</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>every $\colorbox{cyan}{d}$, $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$, month, and day of the month value so that each day gets its turn to be inside the redüü•box. The <span class="co">[</span><span class="ot">toggle‚úÖinput</span><span class="co">](https://observablehq.com/framework/inputs/toggle#:~:text=choose%20one%20of%20two%20values)</span> next to the button determines whether the plot shows a leap ($\colorbox{orange}{n}{=}366$) or a common ($\colorbox{orange}{n}{=}365$) year. The <span class="co">[</span><span class="ot">radioüîòinput</span><span class="co">](https://observablehq.com/framework/inputs/radio#:~:text=choose%20one%20of%20a%20given%20set%20of%20values)</span> beneath the toggle input sets the day of the week that starts the year.</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotyInput = Inputs.range([0, 364 + leapInput], {value: 306, step: 1, label: tex`\colorbox{cyan}{d}`});</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a><span class="in">viewof monthInput = transformInput(</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([1, 12], {step: 1, label: "Month"}),</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: doty2month, invert: month2doty}</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a><span class="in">);</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotyInput1 = transformInput(</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([-365 - leapInput, -1], {step: 1, label: tex`\colorbox{cyan}{d}{-}\colorbox{orange}{n}`}),</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: subN, invert: addN}</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="in">);</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotmInput = transformInput(</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([1, 31], {step: 1, label: "Day of the month"}),</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: doty2dotm, invert: (x =&gt; Math.floor(( 153 * (</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="in">    viewof monthInput.value &gt; 2</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a><span class="in">    ? viewof monthInput.value - 3</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="in">    : viewof monthInput.value + 9) + 2</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 5 + x - 1</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a><span class="in">))});</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="in">viewof leapscrub = Inputs.form([</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="in">  Scrubber(numbers, {autoplay: false, alternate: true, delay: 86.4, loopDelay: 864, format: y =&gt; "", inputStyle: "display:none;"}),</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.toggle({label: "Leap year", value: false}),</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a><span class="in">])</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a><span class="fu">#### First day of the week of the year{.relative}</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotwInput = Inputs.radio([</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a><span class="in">  "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a><span class="in">  ], {value: "Sunday"})</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="in">calPlot0 = Plot.plot({</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 0,</span></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 1000,</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a><span class="in">  height: 300,</span></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a><span class="in">  className: "calplot",</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a><span class="in">  marginBottom: 36,</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a><span class="in">  marginLeft: 48,</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a><span class="in">  y: {tickFormat: Plot.formatWeekday("en", "short"), tickSize: 0,</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a><span class="in">      domain: [-1, 0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a><span class="in">      ticks: [0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="in">      tickPadding: 2,</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a><span class="in">  x: {interval: 1, label: "Week", type: "band", tickSize: 0, tickPadding: 2, labelOffset: 36},</span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="in">  //fx: {tickFormat: ""},</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="in">  style: { fontSize: "22px" },</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a><span class="in">  color: {</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a><span class="in">    range: d3.schemePastel1.concat(d3.schemePastel2),</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="in">    domain: months,</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a><span class="in">    className: "cal",</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a><span class="in">  marks: [</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.cell(datesCal0, {</span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a><span class="in">      x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a><span class="in">      y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; months[d.getUTCMonth()],</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a><span class="in">      stroke: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "red" : "none",</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="in">      strokeWidth: 3,</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a><span class="in">      inset: 0.5,</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a><span class="in">    }),</span></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal0, {</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a><span class="in">    x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a><span class="in">    y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a><span class="in">    //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a><span class="in">    text: d =&gt; d.getUTCDate() === 8 ? months[d.getUTCMonth()] : "",</span></span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a><span class="in">      y: -1,</span></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a><span class="in">      frameAnchor: "left",</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a><span class="in">    monospace: true,</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize: "22px"}),</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal0, {</span></span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a><span class="in">    x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a><span class="in">    y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a><span class="in">    //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a><span class="in">    fill: "black",</span></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a><span class="in">    //stroke: "white",</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a><span class="in">    text: d =&gt; d.getUTCDate(), //Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a><span class="in">    monospace: true,</span></span>
<span id="cb7-136"><a href="#cb7-136" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize: "22px"})</span></span>
<span id="cb7-137"><a href="#cb7-137" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a><span class="in">calPlot1 = Plot.plot({</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 0,</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 1000,</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a><span class="in">  height: 300,</span></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a><span class="in">  className: "calplot",</span></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a><span class="in">  marginBottom: 36,</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a><span class="in">  marginLeft: 48,</span></span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a><span class="in">  y: {tickFormat: Plot.formatWeekday("en", "short"), tickSize: 0,</span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a><span class="in">      domain: [-1, 0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a><span class="in">      ticks: [0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a><span class="in">      tickPadding: 2,</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a><span class="in">  x: {interval: 1, label: "Week", type: "band", tickSize: 0, tickPadding: 2, labelOffset: 36},</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a><span class="in">  //fx: {tickFormat: ""},</span></span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a><span class="in">  style: { fontSize: "22px" },</span></span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a><span class="in">  color: {</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a><span class="in">    range: d3.schemePastel1.concat(d3.schemePastel2),</span></span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a><span class="in">    domain: months,</span></span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a><span class="in">    className: "cal",</span></span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-165"><a href="#cb7-165" aria-hidden="true" tabindex="-1"></a><span class="in">  marks: [</span></span>
<span id="cb7-166"><a href="#cb7-166" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.cell(datesCal1, {</span></span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a><span class="in">      x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a><span class="in">      y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; months[d.getUTCMonth()],</span></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a><span class="in">      stroke: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "red" : "none",</span></span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a><span class="in">      strokeWidth: 3,</span></span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a><span class="in">      inset: 0.5,</span></span>
<span id="cb7-174"><a href="#cb7-174" aria-hidden="true" tabindex="-1"></a><span class="in">    }),</span></span>
<span id="cb7-175"><a href="#cb7-175" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal1, {</span></span>
<span id="cb7-176"><a href="#cb7-176" aria-hidden="true" tabindex="-1"></a><span class="in">    x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-177"><a href="#cb7-177" aria-hidden="true" tabindex="-1"></a><span class="in">    y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-178"><a href="#cb7-178" aria-hidden="true" tabindex="-1"></a><span class="in">    //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-179"><a href="#cb7-179" aria-hidden="true" tabindex="-1"></a><span class="in">    text: d =&gt; d.getUTCDate() === 8 ? months[d.getUTCMonth()] : "",</span></span>
<span id="cb7-180"><a href="#cb7-180" aria-hidden="true" tabindex="-1"></a><span class="in">      y: -1,</span></span>
<span id="cb7-181"><a href="#cb7-181" aria-hidden="true" tabindex="-1"></a><span class="in">      frameAnchor: "left",</span></span>
<span id="cb7-182"><a href="#cb7-182" aria-hidden="true" tabindex="-1"></a><span class="in">    monospace: true,</span></span>
<span id="cb7-183"><a href="#cb7-183" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize: "22px"}),</span></span>
<span id="cb7-184"><a href="#cb7-184" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal1, {</span></span>
<span id="cb7-185"><a href="#cb7-185" aria-hidden="true" tabindex="-1"></a><span class="in">    x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a><span class="in">    y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a><span class="in">    //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a><span class="in">    fill: "black",</span></span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a><span class="in">    //stroke: "white",</span></span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a><span class="in">    text: d =&gt; d.getUTCDate(), //Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a><span class="in">    monospace: true,</span></span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize: "22px"})</span></span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-196"><a href="#cb7-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-197"><a href="#cb7-197" aria-hidden="true" tabindex="-1"></a>Even though it only uses years and days, Dec can display dates based on months or weeks by modifying $\colorbox{cyan}{d}$.</span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a>The equation for Dec week dates is $\lfloor\colorbox{yellow}{y}\rfloor{+}7{\times}\colorbox{pink}{U}{+}\text{\textcolor{blue}{w}}{-}\text{\textcolor{blue}{w}}_</span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a>\text{\textcolor{blue}{d=0}}{=}\colorbox{yellow}{y}$, where $\colorbox{pink}{U}$ is the week number, $\text{\textcolor{blue}{w}}$ is the day of the week number, and $\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}$ is $\text{\textcolor{blue}{w}}$ on the first day of the year ($\colorbox{cyan}{d}{=}0$). The Dec week date equation for today is .</span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a>We can truncate the Dec week date equation to remove $\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}$, which can be determined from $\lfloor\colorbox{yellow}{y}\rfloor$ and is not needed to identify a date. The truncated Dec week date equation for today is .</span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a>If we ever need to convert between a doty and a Gregorian calendar month and day of the month without any conversion tools, we can use the Dec finger mnemonic, which is similar to the <span class="co">[</span><span class="ot">knuckle mnemonic</span><span class="co">](https://en.wikipedia.org/wiki/Knuckle_mnemonic#:~:text=a%20mnemonic%20device%20for%20remembering%20the%20number%20of%20days%20in%20the%20months%20of%20the%20Julian%20and%20Gregorian%20calendars)</span>. The numbers above the fingers in the image below indicate the doty of the last day of each Gregorian calendar month. The thumb, middle finger, and pinky represent months with 31 days, whereas the index and ring fingers stand for 30-day months.</span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a><span class="al">![Dec finger mnemonic](/asset/finger.svg)</span>{.knitr}</span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a>The <span class="co">[</span><span class="ot">southward equinox</span><span class="co">](https://en.wikipedia.org/wiki/September_equinox#:~:text=the%20moment%20when%20the%20Sun%20appears%20to%20cross%20the%20celestial%20equator%2C%20heading%20southward)</span> falls on Day 205 in Year 2024, 2025, 2028, and 2029. We can determine that Day 205 is September 22 by subtracting the Dec date of the last day of August (Day 183), the month preceding September, from the southward equinox doty: $205{-}183{=}22$. To convert in the other direction, we would sum the doty and the day of the month: $183{+}22{=}205$.</span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a>The finger mnemonic highlights a major difference between Dec and the Gregorian calendar: the Dec year starts on <span class="co">[</span><span class="ot">Day 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="March 1"} just like the <span class="co">[</span><span class="ot">Roman calendar</span><span class="co">](https://en.wikipedia.org/wiki/Roman_calendar#:~:text=the%20calendar%20used%20by%20the%20Roman%20Kingdom%20and%20Roman%20Republic)</span>, the predecessor of the Gregorian and Julian calendars. For this reason, the Latin <span class="co">[</span><span class="ot">numeral prefixes</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=prefixes%20derived%20from%20numerals)</span> in the names of the months of <span class="co">[</span><span class="ot">Septem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=7-,septem,-%2D%2C%20septi%2D%5B)</span>ber, <span class="co">[</span><span class="ot">Octo</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=8-,octo,-%2D%5Bu)</span>ber, <span class="co">[</span><span class="ot">Novem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=9-,novem,-%2D%5Bx)</span>ber, and <span class="co">[</span><span class="ot">Decem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=10-,decem,-%2D%2C%20dec%2D%5B)</span>ber match their one-based indexes (7, 8, 9, and 10) in Dec and the Roman calendar, but not in the Julian or Gregorian calendars.</span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a>The knuckle and finger mnemonics attempt to make sense of the irregular pattern of month lengths in the Gregorian calendar. Rather than replace variable-length months with <span class="co">[</span><span class="ot">fixed-length months</span><span class="co">](https://en.wikipedia.org/wiki/Calendar_reform#13-month_calendars)</span>, Dec forgoes the use of months entirely and instead uses groups of ten days called deks.</span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a><span class="in">//| output: false</span></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a><span class="in">unix = {</span></span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a><span class="in">  while(true) {</span></span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a><span class="in">    yield Date.now();</span></span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a><span class="in">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2dote(unix, zone) {</span></span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a><span class="in">  return [</span></span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a><span class="in">    (unix ?? Date.now()) / 86400000</span></span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a><span class="in">    + (zone = zone ?? (</span></span>
<span id="cb7-229"><a href="#cb7-229" aria-hidden="true" tabindex="-1"></a><span class="in">      10 - Math.round((new Date)</span></span>
<span id="cb7-230"><a href="#cb7-230" aria-hidden="true" tabindex="-1"></a><span class="in">        .getTimezoneOffset() / 144)</span></span>
<span id="cb7-231"><a href="#cb7-231" aria-hidden="true" tabindex="-1"></a><span class="in">    ) % 10) / 10 + 719468, zone]}</span></span>
<span id="cb7-232"><a href="#cb7-232" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2doty(dote, zone = 0) {</span></span>
<span id="cb7-233"><a href="#cb7-233" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((</span></span>
<span id="cb7-234"><a href="#cb7-234" aria-hidden="true" tabindex="-1"></a><span class="in">      dote &gt;= 0 ? dote</span></span>
<span id="cb7-235"><a href="#cb7-235" aria-hidden="true" tabindex="-1"></a><span class="in">      : dote - 146096</span></span>
<span id="cb7-236"><a href="#cb7-236" aria-hidden="true" tabindex="-1"></a><span class="in">    ) / 146097),</span></span>
<span id="cb7-237"><a href="#cb7-237" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 146097,</span></span>
<span id="cb7-238"><a href="#cb7-238" aria-hidden="true" tabindex="-1"></a><span class="in">  yotc = Math.floor((dotc</span></span>
<span id="cb7-239"><a href="#cb7-239" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 1460)</span></span>
<span id="cb7-240"><a href="#cb7-240" aria-hidden="true" tabindex="-1"></a><span class="in">    + Math.floor(dotc / 36524)</span></span>
<span id="cb7-241"><a href="#cb7-241" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 146096)</span></span>
<span id="cb7-242"><a href="#cb7-242" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 365);</span></span>
<span id="cb7-243"><a href="#cb7-243" aria-hidden="true" tabindex="-1"></a><span class="in">  return [</span></span>
<span id="cb7-244"><a href="#cb7-244" aria-hidden="true" tabindex="-1"></a><span class="in">    yotc + socy * 400,</span></span>
<span id="cb7-245"><a href="#cb7-245" aria-hidden="true" tabindex="-1"></a><span class="in">    dotc - (yotc * 365</span></span>
<span id="cb7-246"><a href="#cb7-246" aria-hidden="true" tabindex="-1"></a><span class="in">      + Math.floor(yotc / 4)</span></span>
<span id="cb7-247"><a href="#cb7-247" aria-hidden="true" tabindex="-1"></a><span class="in">      - Math.floor(yotc / 100)</span></span>
<span id="cb7-248"><a href="#cb7-248" aria-hidden="true" tabindex="-1"></a><span class="in">  ), zone]}</span></span>
<span id="cb7-249"><a href="#cb7-249" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2deco0(year = 1969, doty = 306, zone = 0) {</span></span>
<span id="cb7-250"><a href="#cb7-250" aria-hidden="true" tabindex="-1"></a><span class="in">  return `${year.toString().padStart(4, "0")}+${Math.floor(doty).toString().padStart(3, "0")}${String(doty % 1 * 10).slice(0, 6)}-${zone}`</span></span>
<span id="cb7-251"><a href="#cb7-251" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a><span class="in">ydz = dote2doty(...unix2dote(unix))</span></span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a><span class="in">deco = doty2deco0(...ydz)</span></span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a><span class="in">function setStyle(content, style = {}) {</span></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a><span class="in">  function yiq(color) {</span></span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a><span class="in">    const {r, g, b} = d3.rgb(color);</span></span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a><span class="in">    return (r * 299 + g * 587 + b * 114) / 1000 / 255; // returns values between 0 and 1</span></span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-260"><a href="#cb7-260" aria-hidden="true" tabindex="-1"></a><span class="in">  const {</span></span>
<span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a><span class="in">    background,</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a><span class="in">    color = yiq(background) &gt;= 0.6 ? "#111" : "white",</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a><span class="in">    padding = "0 1px",</span></span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a><span class="in">    borderRadius = "4px",</span></span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a><span class="in">    fontWeight = 900,</span></span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize = "1em",</span></span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a><span class="in">    ...rest</span></span>
<span id="cb7-268"><a href="#cb7-268" aria-hidden="true" tabindex="-1"></a><span class="in">  } = typeof style === "string" ? {background: style} : style;</span></span>
<span id="cb7-269"><a href="#cb7-269" aria-hidden="true" tabindex="-1"></a><span class="in">  return htl.html`&lt;span style=${{</span></span>
<span id="cb7-270"><a href="#cb7-270" aria-hidden="true" tabindex="-1"></a><span class="in">    background,</span></span>
<span id="cb7-271"><a href="#cb7-271" aria-hidden="true" tabindex="-1"></a><span class="in">    color,</span></span>
<span id="cb7-272"><a href="#cb7-272" aria-hidden="true" tabindex="-1"></a><span class="in">    padding,</span></span>
<span id="cb7-273"><a href="#cb7-273" aria-hidden="true" tabindex="-1"></a><span class="in">    borderRadius,</span></span>
<span id="cb7-274"><a href="#cb7-274" aria-hidden="true" tabindex="-1"></a><span class="in">    fontWeight,</span></span>
<span id="cb7-275"><a href="#cb7-275" aria-hidden="true" tabindex="-1"></a><span class="in">    ...rest</span></span>
<span id="cb7-276"><a href="#cb7-276" aria-hidden="true" tabindex="-1"></a><span class="in">  }}&gt;${content}&lt;/span&gt;`;</span></span>
<span id="cb7-277"><a href="#cb7-277" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-278"><a href="#cb7-278" aria-hidden="true" tabindex="-1"></a><span class="in">function year2leap(year = 1970) {</span></span>
<span id="cb7-279"><a href="#cb7-279" aria-hidden="true" tabindex="-1"></a><span class="in">    return year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0;</span></span>
<span id="cb7-280"><a href="#cb7-280" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-281"><a href="#cb7-281" aria-hidden="true" tabindex="-1"></a><span class="in">decoYear = deco.slice(0, 4)</span></span>
<span id="cb7-282"><a href="#cb7-282" aria-hidden="true" tabindex="-1"></a><span class="in">nextYear = parseInt(decoYear) + 1</span></span>
<span id="cb7-283"><a href="#cb7-283" aria-hidden="true" tabindex="-1"></a><span class="in">decoDoty = deco.slice(5, 8)</span></span>
<span id="cb7-284"><a href="#cb7-284" aria-hidden="true" tabindex="-1"></a><span class="in">nDaysInYear = 365 + year2leap(ydz[0] + 1)</span></span>
<span id="cb7-285"><a href="#cb7-285" aria-hidden="true" tabindex="-1"></a><span class="in">Tminus = nDaysInYear - decoDoty</span></span>
<span id="cb7-286"><a href="#cb7-286" aria-hidden="true" tabindex="-1"></a><span class="in">fracYear = (ydz[0] + (ydz[1] - ydz[2]) / nDaysInYear).toFixed(3)</span></span>
<span id="cb7-287"><a href="#cb7-287" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoYear = setStyle(decoYear, d3.schemePaired[10])</span></span>
<span id="cb7-288"><a href="#cb7-288" aria-hidden="true" tabindex="-1"></a><span class="in">styledNextYear = setStyle(nextYear, d3.schemePaired[10])</span></span>
<span id="cb7-289"><a href="#cb7-289" aria-hidden="true" tabindex="-1"></a><span class="in">styledFracYear = setStyle(fracYear, d3.schemePaired[10])</span></span>
<span id="cb7-290"><a href="#cb7-290" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-291"><a href="#cb7-291" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty1 = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-292"><a href="#cb7-292" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoTminus = setStyle(Tminus, d3.color("pink").formatHex())</span></span>
<span id="cb7-293"><a href="#cb7-293" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDek = setStyle(decoDoty.slice(0, 2), d3.color("cyan").formatHex())</span></span>
<span id="cb7-294"><a href="#cb7-294" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDotd = setStyle(decoDoty[2], d3.color("cyan").formatHex())</span></span>
<span id="cb7-295"><a href="#cb7-295" aria-hidden="true" tabindex="-1"></a><span class="in">styledNdays = setStyle(nDaysInYear, d3.schemePaired[6])</span></span>
<span id="cb7-296"><a href="#cb7-296" aria-hidden="true" tabindex="-1"></a><span class="in">styledNdays1 = setStyle(nDaysInYear, d3.schemePaired[6])</span></span>
<span id="cb7-297"><a href="#cb7-297" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb7-298"><a href="#cb7-298" aria-hidden="true" tabindex="-1"></a><span class="in">transformInput = function(target, {bind: source, transform = identity, involutory = false, invert = involutory ? transform : inverse(transform)} = {}){</span></span>
<span id="cb7-299"><a href="#cb7-299" aria-hidden="true" tabindex="-1"></a><span class="in">  if (source === undefined) {</span></span>
<span id="cb7-300"><a href="#cb7-300" aria-hidden="true" tabindex="-1"></a><span class="in">    source = target;</span></span>
<span id="cb7-301"><a href="#cb7-301" aria-hidden="true" tabindex="-1"></a><span class="in">    target = html`&lt;div&gt;${source}&lt;/div&gt;`;</span></span>
<span id="cb7-302"><a href="#cb7-302" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-303"><a href="#cb7-303" aria-hidden="true" tabindex="-1"></a><span class="in">  function sourceInputHandler() {</span></span>
<span id="cb7-304"><a href="#cb7-304" aria-hidden="true" tabindex="-1"></a><span class="in">    target.removeEventListener("input", targetInputHandler);</span></span>
<span id="cb7-305"><a href="#cb7-305" aria-hidden="true" tabindex="-1"></a><span class="in">    setTransform(target).to(transform(source.value)).andDispatchEvent();</span></span>
<span id="cb7-306"><a href="#cb7-306" aria-hidden="true" tabindex="-1"></a><span class="in">    target.addEventListener("input", targetInputHandler);</span></span>
<span id="cb7-307"><a href="#cb7-307" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-308"><a href="#cb7-308" aria-hidden="true" tabindex="-1"></a><span class="in">  function targetInputHandler() {</span></span>
<span id="cb7-309"><a href="#cb7-309" aria-hidden="true" tabindex="-1"></a><span class="in">    source.removeEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-310"><a href="#cb7-310" aria-hidden="true" tabindex="-1"></a><span class="in">    setTransform(source).to(invert(target.value)).andDispatchEvent();</span></span>
<span id="cb7-311"><a href="#cb7-311" aria-hidden="true" tabindex="-1"></a><span class="in">    source.addEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-312"><a href="#cb7-312" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-313"><a href="#cb7-313" aria-hidden="true" tabindex="-1"></a><span class="in">  source.addEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-314"><a href="#cb7-314" aria-hidden="true" tabindex="-1"></a><span class="in">  target.addEventListener("input", targetInputHandler);</span></span>
<span id="cb7-315"><a href="#cb7-315" aria-hidden="true" tabindex="-1"></a><span class="in">  invalidation.then(() =&gt; {</span></span>
<span id="cb7-316"><a href="#cb7-316" aria-hidden="true" tabindex="-1"></a><span class="in">    source.removeEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-317"><a href="#cb7-317" aria-hidden="true" tabindex="-1"></a><span class="in">    target.removeEventListener("input", targetInputHandler);</span></span>
<span id="cb7-318"><a href="#cb7-318" aria-hidden="true" tabindex="-1"></a><span class="in">  });</span></span>
<span id="cb7-319"><a href="#cb7-319" aria-hidden="true" tabindex="-1"></a><span class="in">  sourceInputHandler();</span></span>
<span id="cb7-320"><a href="#cb7-320" aria-hidden="true" tabindex="-1"></a><span class="in">  return target;</span></span>
<span id="cb7-321"><a href="#cb7-321" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-322"><a href="#cb7-322" aria-hidden="true" tabindex="-1"></a><span class="in">setTransform = (input) =&gt; ({to: (value) =&gt; (input.value = value, {andDispatchEvent: (event = new Event("input")) =&gt; input.dispatchEvent(event)})});</span></span>
<span id="cb7-323"><a href="#cb7-323" aria-hidden="true" tabindex="-1"></a><span class="in">function inverse(f) {</span></span>
<span id="cb7-324"><a href="#cb7-324" aria-hidden="true" tabindex="-1"></a><span class="in">  switch (f) {</span></span>
<span id="cb7-325"><a href="#cb7-325" aria-hidden="true" tabindex="-1"></a><span class="in">    case identity:  return identity;</span></span>
<span id="cb7-326"><a href="#cb7-326" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.sqrt: return square;</span></span>
<span id="cb7-327"><a href="#cb7-327" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.log:  return Math.exp;</span></span>
<span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.exp:  return Math.log;</span></span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a><span class="in">    default:        return (x =&gt; solve(f, x, x));</span></span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a><span class="in">  function solve(f, y, x = 0) {</span></span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a><span class="in">    const dx = 1e-6;</span></span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a><span class="in">    let steps = 100, deltax, fx, dfx;</span></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a><span class="in">    do {</span></span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a><span class="in">      fx = f(x)</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a><span class="in">      dfx = (f(x + dx) - fx) || dx;</span></span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a><span class="in">      deltax = dx * (fx - y)/dfx</span></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a><span class="in">      x -= deltax;</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a><span class="in">    } while (Math.abs(deltax) &gt; dx &amp;&amp; --steps &gt; 0);</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a><span class="in">    return steps === 0 ? NaN : x;</span></span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a><span class="in">function square(x) {</span></span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a><span class="in">    return x * x;</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-346"><a href="#cb7-346" aria-hidden="true" tabindex="-1"></a><span class="in">function identity(x) {</span></span>
<span id="cb7-347"><a href="#cb7-347" aria-hidden="true" tabindex="-1"></a><span class="in">  return x;</span></span>
<span id="cb7-348"><a href="#cb7-348" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-349"><a href="#cb7-349" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2month(doty = 0) {</span></span>
<span id="cb7-350"><a href="#cb7-350" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-351"><a href="#cb7-351" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(m &lt; 10 ? m + 3 : m - 9);</span></span>
<span id="cb7-352"><a href="#cb7-352" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-353"><a href="#cb7-353" aria-hidden="true" tabindex="-1"></a><span class="in">function month2doty(month = 1) {</span></span>
<span id="cb7-354"><a href="#cb7-354" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(</span></span>
<span id="cb7-355"><a href="#cb7-355" aria-hidden="true" tabindex="-1"></a><span class="in">        (153 * (month &gt; 2 ? month - 3 : month + 9) + 2) / 5</span></span>
<span id="cb7-356"><a href="#cb7-356" aria-hidden="true" tabindex="-1"></a><span class="in">)}</span></span>
<span id="cb7-357"><a href="#cb7-357" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2dotm(doty = 0) {</span></span>
<span id="cb7-358"><a href="#cb7-358" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-359"><a href="#cb7-359" aria-hidden="true" tabindex="-1"></a><span class="in">    return doty - Math.floor((153 * m + 2) / 5) + 1;</span></span>
<span id="cb7-360"><a href="#cb7-360" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-361"><a href="#cb7-361" aria-hidden="true" tabindex="-1"></a><span class="in">numbers = Array.from({length: 366}, (_, i) =&gt; i)</span></span>
<span id="cb7-362"><a href="#cb7-362" aria-hidden="true" tabindex="-1"></a><span class="in">set(viewof dotyInput, leapscrub[0])</span></span>
<span id="cb7-363"><a href="#cb7-363" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@observablehq/synchronized-inputs</span></span>
<span id="cb7-364"><a href="#cb7-364" aria-hidden="true" tabindex="-1"></a><span class="in">function set(input, value) {</span></span>
<span id="cb7-365"><a href="#cb7-365" aria-hidden="true" tabindex="-1"></a><span class="in">  input.value = value;</span></span>
<span id="cb7-366"><a href="#cb7-366" aria-hidden="true" tabindex="-1"></a><span class="in">  input.dispatchEvent(new Event("input", {bubbles: true}));</span></span>
<span id="cb7-367"><a href="#cb7-367" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-368"><a href="#cb7-368" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb7-369"><a href="#cb7-369" aria-hidden="true" tabindex="-1"></a><span class="in">function Scrubber(values, {</span></span>
<span id="cb7-370"><a href="#cb7-370" aria-hidden="true" tabindex="-1"></a><span class="in">  format = value =&gt; value,</span></span>
<span id="cb7-371"><a href="#cb7-371" aria-hidden="true" tabindex="-1"></a><span class="in">  initial = 0,</span></span>
<span id="cb7-372"><a href="#cb7-372" aria-hidden="true" tabindex="-1"></a><span class="in">  direction = 1,</span></span>
<span id="cb7-373"><a href="#cb7-373" aria-hidden="true" tabindex="-1"></a><span class="in">  delay = null,</span></span>
<span id="cb7-374"><a href="#cb7-374" aria-hidden="true" tabindex="-1"></a><span class="in">  autoplay = true,</span></span>
<span id="cb7-375"><a href="#cb7-375" aria-hidden="true" tabindex="-1"></a><span class="in">  loop = true,</span></span>
<span id="cb7-376"><a href="#cb7-376" aria-hidden="true" tabindex="-1"></a><span class="in">  loopDelay = null,</span></span>
<span id="cb7-377"><a href="#cb7-377" aria-hidden="true" tabindex="-1"></a><span class="in">  alternate = false,</span></span>
<span id="cb7-378"><a href="#cb7-378" aria-hidden="true" tabindex="-1"></a><span class="in">  inputStyle = ""</span></span>
<span id="cb7-379"><a href="#cb7-379" aria-hidden="true" tabindex="-1"></a><span class="in">} = {}) {</span></span>
<span id="cb7-380"><a href="#cb7-380" aria-hidden="true" tabindex="-1"></a><span class="in">  values = Array.from(values);</span></span>
<span id="cb7-381"><a href="#cb7-381" aria-hidden="true" tabindex="-1"></a><span class="in">  const form = html`&lt;form style="font: 18px var(--monospace); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb7-382"><a href="#cb7-382" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;button name=b type=button style="margin-right: 0.4em; width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb7-383"><a href="#cb7-383" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb7-384"><a href="#cb7-384" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;input name=i type=range min=0 max=${values.length - 1} value=${initial} step=1 style=${inputStyle}&gt;</span></span>
<span id="cb7-385"><a href="#cb7-385" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;output name=o style="margin-left: 0.4em;"&gt;&lt;/output&gt;</span></span>
<span id="cb7-386"><a href="#cb7-386" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;/label&gt;</span></span>
<span id="cb7-387"><a href="#cb7-387" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/form&gt;`;</span></span>
<span id="cb7-388"><a href="#cb7-388" aria-hidden="true" tabindex="-1"></a><span class="in">  let frame = null;</span></span>
<span id="cb7-389"><a href="#cb7-389" aria-hidden="true" tabindex="-1"></a><span class="in">  let timer = null;</span></span>
<span id="cb7-390"><a href="#cb7-390" aria-hidden="true" tabindex="-1"></a><span class="in">  let interval = null;</span></span>
<span id="cb7-391"><a href="#cb7-391" aria-hidden="true" tabindex="-1"></a><span class="in">  function start() {</span></span>
<span id="cb7-392"><a href="#cb7-392" aria-hidden="true" tabindex="-1"></a><span class="in">    form.b.textContent = "Stop";</span></span>
<span id="cb7-393"><a href="#cb7-393" aria-hidden="true" tabindex="-1"></a><span class="in">    if (delay === null) frame = requestAnimationFrame(tick);</span></span>
<span id="cb7-394"><a href="#cb7-394" aria-hidden="true" tabindex="-1"></a><span class="in">    else interval = setInterval(tick, delay);</span></span>
<span id="cb7-395"><a href="#cb7-395" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-396"><a href="#cb7-396" aria-hidden="true" tabindex="-1"></a><span class="in">  function stop() {</span></span>
<span id="cb7-397"><a href="#cb7-397" aria-hidden="true" tabindex="-1"></a><span class="in">    form.b.textContent = "Play";</span></span>
<span id="cb7-398"><a href="#cb7-398" aria-hidden="true" tabindex="-1"></a><span class="in">    if (frame !== null) cancelAnimationFrame(frame), frame = null;</span></span>
<span id="cb7-399"><a href="#cb7-399" aria-hidden="true" tabindex="-1"></a><span class="in">    if (timer !== null) clearTimeout(timer), timer = null;</span></span>
<span id="cb7-400"><a href="#cb7-400" aria-hidden="true" tabindex="-1"></a><span class="in">    if (interval !== null) clearInterval(interval), interval = null;</span></span>
<span id="cb7-401"><a href="#cb7-401" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-402"><a href="#cb7-402" aria-hidden="true" tabindex="-1"></a><span class="in">  function running() {</span></span>
<span id="cb7-403"><a href="#cb7-403" aria-hidden="true" tabindex="-1"></a><span class="in">    return frame !== null || timer !== null || interval !== null;</span></span>
<span id="cb7-404"><a href="#cb7-404" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-405"><a href="#cb7-405" aria-hidden="true" tabindex="-1"></a><span class="in">  function tick() {</span></span>
<span id="cb7-406"><a href="#cb7-406" aria-hidden="true" tabindex="-1"></a><span class="in">    if (form.i.valueAsNumber === (direction &gt; 0 ? values.length - 1 : direction &lt; 0 ? 0 : NaN)) {</span></span>
<span id="cb7-407"><a href="#cb7-407" aria-hidden="true" tabindex="-1"></a><span class="in">      if (!loop) return stop();</span></span>
<span id="cb7-408"><a href="#cb7-408" aria-hidden="true" tabindex="-1"></a><span class="in">      if (alternate) direction = -direction;</span></span>
<span id="cb7-409"><a href="#cb7-409" aria-hidden="true" tabindex="-1"></a><span class="in">      if (loopDelay !== null) {</span></span>
<span id="cb7-410"><a href="#cb7-410" aria-hidden="true" tabindex="-1"></a><span class="in">        if (frame !== null) cancelAnimationFrame(frame), frame = null;</span></span>
<span id="cb7-411"><a href="#cb7-411" aria-hidden="true" tabindex="-1"></a><span class="in">        if (interval !== null) clearInterval(interval), interval = null;</span></span>
<span id="cb7-412"><a href="#cb7-412" aria-hidden="true" tabindex="-1"></a><span class="in">        timer = setTimeout(() =&gt; (step(), start()), loopDelay);</span></span>
<span id="cb7-413"><a href="#cb7-413" aria-hidden="true" tabindex="-1"></a><span class="in">        return;</span></span>
<span id="cb7-414"><a href="#cb7-414" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb7-415"><a href="#cb7-415" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb7-416"><a href="#cb7-416" aria-hidden="true" tabindex="-1"></a><span class="in">    if (delay === null) frame = requestAnimationFrame(tick);</span></span>
<span id="cb7-417"><a href="#cb7-417" aria-hidden="true" tabindex="-1"></a><span class="in">    step();</span></span>
<span id="cb7-418"><a href="#cb7-418" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-419"><a href="#cb7-419" aria-hidden="true" tabindex="-1"></a><span class="in">  function step() {</span></span>
<span id="cb7-420"><a href="#cb7-420" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.valueAsNumber = (form.i.valueAsNumber + direction + values.length) % values.length;</span></span>
<span id="cb7-421"><a href="#cb7-421" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.dispatchEvent(new CustomEvent("input", {bubbles: true}));</span></span>
<span id="cb7-422"><a href="#cb7-422" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-423"><a href="#cb7-423" aria-hidden="true" tabindex="-1"></a><span class="in">  form.i.oninput = event =&gt; {</span></span>
<span id="cb7-424"><a href="#cb7-424" aria-hidden="true" tabindex="-1"></a><span class="in">    if (event &amp;&amp; event.isTrusted &amp;&amp; running()) stop();</span></span>
<span id="cb7-425"><a href="#cb7-425" aria-hidden="true" tabindex="-1"></a><span class="in">    form.value = values[form.i.valueAsNumber];</span></span>
<span id="cb7-426"><a href="#cb7-426" aria-hidden="true" tabindex="-1"></a><span class="in">    form.o.value = format(form.value, form.i.valueAsNumber, values);</span></span>
<span id="cb7-427"><a href="#cb7-427" aria-hidden="true" tabindex="-1"></a><span class="in">  };</span></span>
<span id="cb7-428"><a href="#cb7-428" aria-hidden="true" tabindex="-1"></a><span class="in">  form.b.onclick = () =&gt; {</span></span>
<span id="cb7-429"><a href="#cb7-429" aria-hidden="true" tabindex="-1"></a><span class="in">    if (running()) return stop();</span></span>
<span id="cb7-430"><a href="#cb7-430" aria-hidden="true" tabindex="-1"></a><span class="in">    direction = alternate &amp;&amp; form.i.valueAsNumber === values.length - 1 ? -1 : 1;</span></span>
<span id="cb7-431"><a href="#cb7-431" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.valueAsNumber = (form.i.valueAsNumber + direction) % values.length;</span></span>
<span id="cb7-432"><a href="#cb7-432" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.dispatchEvent(new CustomEvent("input", {bubbles: true}));</span></span>
<span id="cb7-433"><a href="#cb7-433" aria-hidden="true" tabindex="-1"></a><span class="in">    start();</span></span>
<span id="cb7-434"><a href="#cb7-434" aria-hidden="true" tabindex="-1"></a><span class="in">  };</span></span>
<span id="cb7-435"><a href="#cb7-435" aria-hidden="true" tabindex="-1"></a><span class="in">  form.i.oninput();</span></span>
<span id="cb7-436"><a href="#cb7-436" aria-hidden="true" tabindex="-1"></a><span class="in">  if (autoplay) start();</span></span>
<span id="cb7-437"><a href="#cb7-437" aria-hidden="true" tabindex="-1"></a><span class="in">  else stop();</span></span>
<span id="cb7-438"><a href="#cb7-438" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.disposal(form).then(stop);</span></span>
<span id="cb7-439"><a href="#cb7-439" aria-hidden="true" tabindex="-1"></a><span class="in">  return form;</span></span>
<span id="cb7-440"><a href="#cb7-440" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-441"><a href="#cb7-441" aria-hidden="true" tabindex="-1"></a><span class="in">calYear = !leapInput &amp;&amp; dotwInput == "Monday" ? 6 : !leapInput &amp;&amp; dotwInput == "Tuesday" ? 7 : !leapInput &amp;&amp; dotwInput == "Wednesday" ? 2 : !leapInput &amp;&amp; dotwInput == "Thursday" ? 3 : !leapInput &amp;&amp; dotwInput == "Friday" ? 9 : !leapInput &amp;&amp; dotwInput == "Saturday" ? 10 : !leapInput &amp;&amp; dotwInput == "Sunday" ? 11 : leapInput &amp;&amp; dotwInput == "Monday" ? 12 : leapInput &amp;&amp; dotwInput == "Tuesday" ? 24 : leapInput &amp;&amp; dotwInput == "Wednesday" ? 8 : leapInput &amp;&amp; dotwInput == "Thursday" ? 20 : leapInput &amp;&amp; dotwInput == "Friday" ? 4 : leapInput &amp;&amp; dotwInput == "Saturday" ? 16 : leapInput &amp;&amp; dotwInput == "Sunday" ? 28 : 0;</span></span>
<span id="cb7-442"><a href="#cb7-442" aria-hidden="true" tabindex="-1"></a><span class="in">startCal0 = new Date(calYear, 0, 0);</span></span>
<span id="cb7-443"><a href="#cb7-443" aria-hidden="true" tabindex="-1"></a><span class="in">startCal1 = new Date(calYear, 6, 0);</span></span>
<span id="cb7-444"><a href="#cb7-444" aria-hidden="true" tabindex="-1"></a><span class="in">startCal2 = new Date(calYear, 12, 0);</span></span>
<span id="cb7-445"><a href="#cb7-445" aria-hidden="true" tabindex="-1"></a><span class="in">datesCal0 = d3.utcDays(startCal0, startCal1);</span></span>
<span id="cb7-446"><a href="#cb7-446" aria-hidden="true" tabindex="-1"></a><span class="in">datesCal1 = d3.utcDays(startCal1, startCal2);</span></span>
<span id="cb7-447"><a href="#cb7-447" aria-hidden="true" tabindex="-1"></a><span class="in">months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];</span></span>
<span id="cb7-448"><a href="#cb7-448" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2doty(unix) {</span></span>
<span id="cb7-449"><a href="#cb7-449" aria-hidden="true" tabindex="-1"></a><span class="in">  const dote = (</span></span>
<span id="cb7-450"><a href="#cb7-450" aria-hidden="true" tabindex="-1"></a><span class="in">    unix ?? Date.now()</span></span>
<span id="cb7-451"><a href="#cb7-451" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 86400000 + 719468,</span></span>
<span id="cb7-452"><a href="#cb7-452" aria-hidden="true" tabindex="-1"></a><span class="in">    socy = Math.floor((</span></span>
<span id="cb7-453"><a href="#cb7-453" aria-hidden="true" tabindex="-1"></a><span class="in">      dote &gt;= 0 ? dote</span></span>
<span id="cb7-454"><a href="#cb7-454" aria-hidden="true" tabindex="-1"></a><span class="in">      : dote - 146096</span></span>
<span id="cb7-455"><a href="#cb7-455" aria-hidden="true" tabindex="-1"></a><span class="in">    ) / 146097),</span></span>
<span id="cb7-456"><a href="#cb7-456" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 146097,</span></span>
<span id="cb7-457"><a href="#cb7-457" aria-hidden="true" tabindex="-1"></a><span class="in">  yotc = Math.floor((dotc</span></span>
<span id="cb7-458"><a href="#cb7-458" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 1460)</span></span>
<span id="cb7-459"><a href="#cb7-459" aria-hidden="true" tabindex="-1"></a><span class="in">    + Math.floor(dotc / 36524)</span></span>
<span id="cb7-460"><a href="#cb7-460" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 146096)</span></span>
<span id="cb7-461"><a href="#cb7-461" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 365);</span></span>
<span id="cb7-462"><a href="#cb7-462" aria-hidden="true" tabindex="-1"></a><span class="in">  return dotc - (yotc * 365</span></span>
<span id="cb7-463"><a href="#cb7-463" aria-hidden="true" tabindex="-1"></a><span class="in">      + Math.floor(yotc / 4)</span></span>
<span id="cb7-464"><a href="#cb7-464" aria-hidden="true" tabindex="-1"></a><span class="in">      - Math.floor(yotc / 100)</span></span>
<span id="cb7-465"><a href="#cb7-465" aria-hidden="true" tabindex="-1"></a><span class="in">  )}</span></span>
<span id="cb7-466"><a href="#cb7-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-467"><a href="#cb7-467" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2dote(year = 1969, doty = 0, zone = 0) {</span></span>
<span id="cb7-468"><a href="#cb7-468" aria-hidden="true" tabindex="-1"></a><span class="in">    const cycle = Math.floor((year &gt;= 0 ? year : year - 399) / 400),</span></span>
<span id="cb7-469"><a href="#cb7-469" aria-hidden="true" tabindex="-1"></a><span class="in">    yote = year - cycle * 400;</span></span>
<span id="cb7-470"><a href="#cb7-470" aria-hidden="true" tabindex="-1"></a><span class="in">    return cycle * 146097 + yote * 365 + Math.floor(yote / 4) - Math.floor(yote / 100) + doty - zone</span></span>
<span id="cb7-471"><a href="#cb7-471" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-472"><a href="#cb7-472" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2deco(yearDoty = [1969, 306], zone = 0) {</span></span>
<span id="cb7-473"><a href="#cb7-473" aria-hidden="true" tabindex="-1"></a><span class="in">    const yd = dote2doty(doty2dote(yearDoty[0], Math.floor(yearDoty[1])));</span></span>
<span id="cb7-474"><a href="#cb7-474" aria-hidden="true" tabindex="-1"></a><span class="in">    return `${yd[0].toString().padStart(4, "0")}+${yd[1].toString().padStart(3, "0")}${</span></span>
<span id="cb7-475"><a href="#cb7-475" aria-hidden="true" tabindex="-1"></a><span class="in">        yearDoty[1].toString().includes(".") ? "." + (</span></span>
<span id="cb7-476"><a href="#cb7-476" aria-hidden="true" tabindex="-1"></a><span class="in">            (yearDoty[1] &gt; 0) ? (yearDoty[1] - zone).toString().split(".").pop()</span></span>
<span id="cb7-477"><a href="#cb7-477" aria-hidden="true" tabindex="-1"></a><span class="in">            : [...(yearDoty[1] - zone).toString().split(".").pop()].map(</span></span>
<span id="cb7-478"><a href="#cb7-478" aria-hidden="true" tabindex="-1"></a><span class="in">                (e, i, a) =&gt; (i + 1 === a.length) ? 10 - e : 9 - e</span></span>
<span id="cb7-479"><a href="#cb7-479" aria-hidden="true" tabindex="-1"></a><span class="in">            ).join("")</span></span>
<span id="cb7-480"><a href="#cb7-480" aria-hidden="true" tabindex="-1"></a><span class="in">        ) : ""</span></span>
<span id="cb7-481"><a href="#cb7-481" aria-hidden="true" tabindex="-1"></a><span class="in">    }`</span></span>
<span id="cb7-482"><a href="#cb7-482" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-483"><a href="#cb7-483" aria-hidden="true" tabindex="-1"></a><span class="in">function deco2doty(timestamp = "1969+306.00000Z") {</span></span>
<span id="cb7-484"><a href="#cb7-484" aria-hidden="true" tabindex="-1"></a><span class="in">    const arr = timestamp.toString().split(/(?=[+-]|[a-zA-Z])/, 3);</span></span>
<span id="cb7-485"><a href="#cb7-485" aria-hidden="true" tabindex="-1"></a><span class="in">    switch (arr.length) {</span></span>
<span id="cb7-486"><a href="#cb7-486" aria-hidden="true" tabindex="-1"></a><span class="in">        case 1: return [unix2doty(Date.now())[0], parseFloat(arr[0]), 0];</span></span>
<span id="cb7-487"><a href="#cb7-487" aria-hidden="true" tabindex="-1"></a><span class="in">        case 2: return (/^[a-zA-Z]+$/.test(arr[1]))</span></span>
<span id="cb7-488"><a href="#cb7-488" aria-hidden="true" tabindex="-1"></a><span class="in">            ? [unix2doty(Date.now())[0], parseFloat(arr[0]), zone2hour(arr[1]) / 24]</span></span>
<span id="cb7-489"><a href="#cb7-489" aria-hidden="true" tabindex="-1"></a><span class="in">            : [parseFloat(arr[0]), parseFloat(arr[1]), 0];</span></span>
<span id="cb7-490"><a href="#cb7-490" aria-hidden="true" tabindex="-1"></a><span class="in">    };</span></span>
<span id="cb7-491"><a href="#cb7-491" aria-hidden="true" tabindex="-1"></a><span class="in">    return [parseFloat(arr[0]), parseFloat(arr[1]), /^[a-zA-Z]+$/.test(arr[2])</span></span>
<span id="cb7-492"><a href="#cb7-492" aria-hidden="true" tabindex="-1"></a><span class="in">        ? zone2hour(arr[2]) / 24</span></span>
<span id="cb7-493"><a href="#cb7-493" aria-hidden="true" tabindex="-1"></a><span class="in">        : parseFloat(arr[2].replace(/([+-])/, "$1\."))];</span></span>
<span id="cb7-494"><a href="#cb7-494" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-495"><a href="#cb7-495" aria-hidden="true" tabindex="-1"></a><span class="in">function zone2hour(zone = "Z") {</span></span>
<span id="cb7-496"><a href="#cb7-496" aria-hidden="true" tabindex="-1"></a><span class="in">    return (zone = zone.toUpperCase()) == "Z" ? 0</span></span>
<span id="cb7-497"><a href="#cb7-497" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &gt; "@" &amp;&amp; zone &lt; "J" ? zone.charCodeAt() - 64</span></span>
<span id="cb7-498"><a href="#cb7-498" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &gt; "J" &amp;&amp; zone &lt; "N" ? zone.charCodeAt() - 65</span></span>
<span id="cb7-499"><a href="#cb7-499" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &lt; "Z" &amp;&amp; zone &gt; "M" ? -(zone.charCodeAt() - 77)</span></span>
<span id="cb7-500"><a href="#cb7-500" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone;</span></span>
<span id="cb7-501"><a href="#cb7-501" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-502"><a href="#cb7-502" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2unix(year = 1969, doty = 306, zone = 0) {</span></span>
<span id="cb7-503"><a href="#cb7-503" aria-hidden="true" tabindex="-1"></a><span class="in">    return (doty2dote(year, doty, zone) - 719468) * 86400000;</span></span>
<span id="cb7-504"><a href="#cb7-504" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-505"><a href="#cb7-505" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2isoc(yd) {</span></span>
<span id="cb7-506"><a href="#cb7-506" aria-hidden="true" tabindex="-1"></a><span class="in">    return new Date(doty2unix(...yd))</span></span>
<span id="cb7-507"><a href="#cb7-507" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-508"><a href="#cb7-508" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2greg(doty = 306) {</span></span>
<span id="cb7-509"><a href="#cb7-509" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-510"><a href="#cb7-510" aria-hidden="true" tabindex="-1"></a><span class="in">    return [</span></span>
<span id="cb7-511"><a href="#cb7-511" aria-hidden="true" tabindex="-1"></a><span class="in">      Math.floor(m &lt; 10 ? m + 3 : m - 9),</span></span>
<span id="cb7-512"><a href="#cb7-512" aria-hidden="true" tabindex="-1"></a><span class="in">      Math.floor(doty - (153 * m + 2) / 5 + 2)</span></span>
<span id="cb7-513"><a href="#cb7-513" aria-hidden="true" tabindex="-1"></a><span class="in">    ];</span></span>
<span id="cb7-514"><a href="#cb7-514" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-515"><a href="#cb7-515" aria-hidden="true" tabindex="-1"></a><span class="in">function greg2doty(month = 1, day = 1) {</span></span>
<span id="cb7-516"><a href="#cb7-516" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(</span></span>
<span id="cb7-517"><a href="#cb7-517" aria-hidden="true" tabindex="-1"></a><span class="in">        (153 * (month &gt; 2 ? month - 3 : month + 9) + 2) / 5 + day - 1</span></span>
<span id="cb7-518"><a href="#cb7-518" aria-hidden="true" tabindex="-1"></a><span class="in">)}</span></span>
<span id="cb7-519"><a href="#cb7-519" aria-hidden="true" tabindex="-1"></a><span class="in">function greg2year(year = 1970, month = 1) { return year - (month &lt; 3) }</span></span>
<span id="cb7-520"><a href="#cb7-520" aria-hidden="true" tabindex="-1"></a><span class="in">function isoc2doty(isoc) {</span></span>
<span id="cb7-521"><a href="#cb7-521" aria-hidden="true" tabindex="-1"></a><span class="in">  return [greg2year(isoc.getFullYear(), isoc.getUTCMonth() + 1), greg2doty(isoc.getUTCMonth() + 1, isoc.getUTCDate())];</span></span>
<span id="cb7-522"><a href="#cb7-522" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-523"><a href="#cb7-523" aria-hidden="true" tabindex="-1"></a><span class="in">leapInput = leapscrub[1]</span></span>
<span id="cb7-524"><a href="#cb7-524" aria-hidden="true" tabindex="-1"></a><span class="in">function addN(d) { return d + 365 + leapInput }</span></span>
<span id="cb7-525"><a href="#cb7-525" aria-hidden="true" tabindex="-1"></a><span class="in">function subN(d) { return d - 365 - leapInput }</span></span>
<span id="cb7-526"><a href="#cb7-526" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-527"><a href="#cb7-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-528"><a href="#cb7-528" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb7-529"><a href="#cb7-529" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style&gt;</span></span>
<span id="cb7-530"><a href="#cb7-530" aria-hidden="true" tabindex="-1"></a><span class="in">h6.relative.anchored {</span></span>
<span id="cb7-531"><a href="#cb7-531" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-top: -25px;</span></span>
<span id="cb7-532"><a href="#cb7-532" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-bottom: -2px;</span></span>
<span id="cb7-533"><a href="#cb7-533" aria-hidden="true" tabindex="-1"></a><span class="in">  text-align: center;</span></span>
<span id="cb7-534"><a href="#cb7-534" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-535"><a href="#cb7-535" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- .calplot { --&gt;</span></span>
<span id="cb7-536"><a href="#cb7-536" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!--   margin-top: -15px; --&gt;</span></span>
<span id="cb7-537"><a href="#cb7-537" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!--   margin-bottom: -15px; --&gt;</span></span>
<span id="cb7-538"><a href="#cb7-538" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- } --&gt;</span></span>
<span id="cb7-539"><a href="#cb7-539" aria-hidden="true" tabindex="-1"></a><span class="in">#decalendar &gt; g.cluster-label {</span></span>
<span id="cb7-540"><a href="#cb7-540" aria-hidden="true" tabindex="-1"></a><span class="in">  transform: translate(305px, 50px) !important;</span></span>
<span id="cb7-541"><a href="#cb7-541" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-542"><a href="#cb7-542" aria-hidden="true" tabindex="-1"></a><span class="in">span.cal-swatch {</span></span>
<span id="cb7-543"><a href="#cb7-543" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 14px !important;</span></span>
<span id="cb7-544"><a href="#cb7-544" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-545"><a href="#cb7-545" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-checkbox {</span></span>
<span id="cb7-546"><a href="#cb7-546" aria-hidden="true" tabindex="-1"></a><span class="in">  max-width: 700px;</span></span>
<span id="cb7-547"><a href="#cb7-547" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-548"><a href="#cb7-548" aria-hidden="true" tabindex="-1"></a><span class="in">div.cell:has(form.oi-3a86ea-toggle) {</span></span>
<span id="cb7-549"><a href="#cb7-549" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb7-550"><a href="#cb7-550" aria-hidden="true" tabindex="-1"></a><span class="in">  flex-wrap: wrap;</span></span>
<span id="cb7-551"><a href="#cb7-551" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb7-552"><a href="#cb7-552" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-553"><a href="#cb7-553" aria-hidden="true" tabindex="-1"></a><span class="in">div.observablehq &gt; div:has(form.oi-3a86ea-toggle) {</span></span>
<span id="cb7-554"><a href="#cb7-554" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb7-555"><a href="#cb7-555" aria-hidden="true" tabindex="-1"></a><span class="in">  flex-wrap: wrap;</span></span>
<span id="cb7-556"><a href="#cb7-556" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb7-557"><a href="#cb7-557" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-558"><a href="#cb7-558" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-toggle {</span></span>
<span id="cb7-559"><a href="#cb7-559" aria-hidden="true" tabindex="-1"></a><span class="in">  max-width: 50% !important;</span></span>
<span id="cb7-560"><a href="#cb7-560" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 90px;</span></span>
<span id="cb7-561"><a href="#cb7-561" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-562"><a href="#cb7-562" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea {</span></span>
<span id="cb7-563"><a href="#cb7-563" aria-hidden="true" tabindex="-1"></a><span class="in">  --input-width: 200px;</span></span>
<span id="cb7-564"><a href="#cb7-564" aria-hidden="true" tabindex="-1"></a><span class="in">  padding-right: 9px;</span></span>
<span id="cb7-565"><a href="#cb7-565" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-566"><a href="#cb7-566" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-toggle &gt; label {</span></span>
<span id="cb7-567"><a href="#cb7-567" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 78px;</span></span>
<span id="cb7-568"><a href="#cb7-568" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-569"><a href="#cb7-569" aria-hidden="true" tabindex="-1"></a><span class="in">div &gt; form &gt; label {</span></span>
<span id="cb7-570"><a href="#cb7-570" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 130px;</span></span>
<span id="cb7-571"><a href="#cb7-571" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-572"><a href="#cb7-572" aria-hidden="true" tabindex="-1"></a><span class="in">#ojs-cell-1-1 &gt; div:nth-child(1) &gt; form:nth-child(1) &gt; label {</span></span>
<span id="cb7-573"><a href="#cb7-573" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 60px;</span></span>
<span id="cb7-574"><a href="#cb7-574" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-575"><a href="#cb7-575" aria-hidden="true" tabindex="-1"></a><span class="in">#ojs-cell-1-3 &gt; div:nth-child(1) &gt; form:nth-child(1) &gt; label {</span></span>
<span id="cb7-576"><a href="#cb7-576" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 60px;</span></span>
<span id="cb7-577"><a href="#cb7-577" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-578"><a href="#cb7-578" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb7-579"><a href="#cb7-579" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>¬© Copyright 2024, Martin Laptev</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/maptv/maptv.github.io/blob/main/dec/date/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maptv" target="_blank">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/maptv" target="_blank">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link active" href="mailto:maptv@engineer.com" aria-current="page">
      <i class="bi bi-envelope-at" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","selector":".lightbox","loop":false,"descPosition":"bottom","openEffect":"zoom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>