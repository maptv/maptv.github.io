<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Martin Laptev">

<title>Martin Laptev</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../iso/date/index.html" rel="next">
<link href="../../dec/index.html" rel="prev">
<link href="../../asset/deidek.svg" rel="icon" type="image/svg+xml">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="../../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "/",
    "?",
    "h",
    "f",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<meta name="quarto:status" content="draft">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../asset/style.css">
<meta name="twitter:title" content="Martin Laptev">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://maptv.github.io/asset/deidek.svg">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><div id="quarto-draft-alert" class="alert alert-warning"><i class="bi bi-pencil-square"></i>Draft</div>
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../asset/deidek.svg" alt="Decagon made up of 100 triangles" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Martin Laptev</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../dec/index.html">Measurement</a></li><li class="breadcrumb-item"><a href="../../dec/date/index.html">Dec Date</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
        <div class="sidebar-tools-main tools-wide">
    <a href="https://www.github.com/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/maptv" title="" class="quarto-navigation-tool px-1" aria-label="" target="_blank"><i class="bi bi-linkedin"></i></a>
    <a href="mailto:maptv@engineer.com" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-envelope-at"></i></a>
    <div id="quarto-search" class="quarto-navigation-tool px-1" title="Search"></div>
</div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-house-door" role="img">
</i> 
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../about/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-info-circle" role="img">
</i> 
 <span class="menu-text">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../cv/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-earmark-person" role="img">
</i> 
 <span class="menu-text">CV/Résumé</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../list/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-grid-3x3-gap" role="img">
</i> 
 <span class="menu-text">Listing</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-brush" role="img">
</i> 
 <span class="menu-text">Art</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-cloud" role="img">
</i> 
 <span class="menu-text">Cloud</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true"><i class="bi bi-hourglass-split" role="img">
</i> 
 <span class="menu-text">History</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../history/ww2/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-2-square" role="img">
</i> 
 <span class="menu-text">World War 2</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true"><i class="bi bi-robot" role="img">
</i> 
 <span class="menu-text">Machine Learning</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ml/prob/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-dice-5" role="img">
</i> 
 <span class="menu-text">Probablity</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../ml/llm/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-translate" role="img">
</i> 
 <span class="menu-text">Language Models</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../dec/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-rulers" role="img">
</i> 
 <span class="menu-text">Measurement</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/date/index.html" class="sidebar-item-text sidebar-link active"><i class="bi bi-calendar-date" role="img">
</i> 
 <span class="menu-text">Dec Date</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../iso/date/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-calendar-month" role="img">
</i> 
 <span class="menu-text">ISO Date</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/time/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-clock" role="img">
</i> 
 <span class="menu-text">Time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/geo/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-geo" role="img">
</i> 
 <span class="menu-text">Geoposition</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/day/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-sun" role="img">
</i> 
 <span class="menu-text">Daylight duration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/span/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-calendar-range" role="img">
</i> 
 <span class="menu-text">Time span</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/nav/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-compass" role="img">
</i> 
 <span class="menu-text">Navigation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/move/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-arrows-move" role="img">
</i> 
 <span class="menu-text">Movement</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../dec/size/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-bounding-box-circles" role="img">
</i> 
 <span class="menu-text">Size</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start"><i class="bi bi-stars" role="img">
</i> 
 <span class="menu-text">Science</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true"><i class="bi bi-laptop" role="img">
</i> 
 <span class="menu-text">Software</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
    <i class="bi bi-gear" role="img">
</i> 
 <span class="menu-text">Setup</span>
  </li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/git/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-git" role="img">
</i> 
 <span class="menu-text">Git</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/positron/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-p-square" role="img">
</i> 
 <span class="menu-text">Positron</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/jupyter/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-journal-richtext" role="img">
</i> 
 <span class="menu-text">Jupyter</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/quarto/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-markdown" role="img">
</i> 
 <span class="menu-text">Quarto Markdown</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../software/observable/index.html" class="sidebar-item-text sidebar-link"><i class="bi bi-0-circle" role="img">
</i> 
 <span class="menu-text">Observable</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="index.md"><i class="bi bi-file-code"></i>CommonMark</a></li></ul></div></div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../dec/index.html">Measurement</a></li><li class="breadcrumb-item"><a href="../../dec/date/index.html">Dec Date</a></li></ol></nav>
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Dec Date</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://maptv.github.io">Martin Laptev</a> </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">2024+243</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>My website serves as a demonstration of both the <a href="https://quarto.org">Quarto</a> publishing system and the <a href="../../dec">Dec</a> measurement system. I use several clever hacks to get Quarto to display all of the dates on my website in the Dec <span class="yellow">year</span>+<span class="cyan">day</span> format. Knowing the basics of Dec dates will help you to understand the Quarto <a href="https://quarto.org/docs/extensions/filters.html">filter</a>, <a href="https://quarto.org/docs/projects/scripts.html#pre-and-post-render">render script</a>, and <a href="https://quarto.org/docs/output-formats/html-basics.html#includes">include file</a> examples in my <a href="../../software/quarto">Quarto article</a>.</p>
<p>Among its many features, Quarto offers support for the <a href="https://observablehq.com/">Observable</a> data analysis and visualization system. In the Observable <a href="https://observablehq.com/@observablehq/plot-calendar">calendar🗓️plots</a> below, <a href="https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world">Gregorian calendar</a> months are identified by <a href="https://observablehq.com/@d3/color-schemes">color</a> and each day of the year has its own <a href="https://observablehq.com/plot/marks/cell">cell</a>. Despite these similarities, the two plots illustrate how the Dec (top) and Gregorian (bottom) calendars differ.</p>
<div class="column-page-right">
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="28" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 27;"><span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>decPlot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">1080</span><span class="op">,</span></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">240</span><span class="op">,</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>  <span class="dt">className</span><span class="op">:</span> <span class="st">"calplot"</span><span class="op">,</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="op">-</span><span class="dv">20</span><span class="op">,</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">31</span><span class="op">,</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">35</span><span class="op">,</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>      <span class="dt">label</span><span class="op">:</span> <span class="st">"Day of the dek    "</span><span class="op">,</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span>]<span class="op">,</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ticks</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span>]<span class="op">,</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickPadding</span><span class="op">:</span> <span class="op">-</span><span class="dv">12</span><span class="op">,</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>      <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">22</span><span class="op">,</span></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">interval</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">ticks</span><span class="op">:</span> <span class="dv">18</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Dek"</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"band"</span><span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">34</span>}<span class="op">,</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  <span class="co">//fx: {tickFormat: ""},</span></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"21px"</span> }<span class="op">,</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> d3<span class="op">.</span><span class="at">schemePastel1</span><span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemePastel2</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">4</span><span class="op">,</span> <span class="dv">7</span>))<span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemeSet1</span>[<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> months<span class="op">.</span><span class="fu">concat</span>(<span class="st">"selected"</span>)<span class="op">,</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">className</span><span class="op">:</span> <span class="st">"cal"</span><span class="op">,</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(dates<span class="op">,</span> {</span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> (d<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(i <span class="op">/</span> <span class="dv">10</span>)<span class="op">,</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> (d<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"selected"</span> <span class="op">:</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()]<span class="op">,</span></span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"darkorange"</span> <span class="op">:</span> <span class="st">"none"</span><span class="op">,</span></span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>      <span class="dt">inset</span><span class="op">:</span> <span class="fl">0.5</span><span class="op">,</span></span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(dates<span class="op">,</span> {</span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> (d<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(i <span class="op">/</span> <span class="dv">10</span>)<span class="op">,</span></span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> (d<span class="op">,</span> i) <span class="kw">=&gt;</span> i <span class="op">%</span> <span class="dv">10</span><span class="op">,</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"white"</span> <span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>      <span class="co">//stroke: "white",</span></span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> (d<span class="op">,</span> i) <span class="kw">=&gt;</span> <span class="bu">String</span>(i)<span class="op">,</span><span class="co">//.padStart(3, "0").slice(1),</span></span>
<span id="cb1-68"><a href="#cb1-68" aria-hidden="true" tabindex="-1"></a>      <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb1-69"><a href="#cb1-69" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"13px"</span>})</span>
<span id="cb1-70"><a href="#cb1-70" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb1-71"><a href="#cb1-71" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="76" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 75;"><span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>calPlot <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a>  <span class="dt">padding</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">200</span><span class="op">,</span></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>  <span class="dt">className</span><span class="op">:</span> <span class="st">"calplot"</span><span class="op">,</span></span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginTop</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginBottom</span><span class="op">:</span> <span class="dv">40</span><span class="op">,</span></span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marginLeft</span><span class="op">:</span> <span class="dv">42</span><span class="op">,</span></span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> {<span class="dt">tickFormat</span><span class="op">:</span> Plot<span class="op">.</span><span class="fu">formatWeekday</span>(<span class="st">"en"</span><span class="op">,</span> <span class="st">"short"</span>)<span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>      <span class="dt">domain</span><span class="op">:</span> [<span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>      <span class="dt">ticks</span><span class="op">:</span> [<span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span>]<span class="op">,</span></span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>      <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> {<span class="dt">interval</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">ticks</span><span class="op">:</span> <span class="dv">26</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Week"</span><span class="op">,</span> <span class="dt">type</span><span class="op">:</span> <span class="st">"band"</span><span class="op">,</span> <span class="dt">tickSize</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">tickPadding</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">labelOffset</span><span class="op">:</span> <span class="dv">34</span>}<span class="op">,</span></span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  <span class="co">//fx: {tickFormat: ""},</span></span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  <span class="dt">style</span><span class="op">:</span> { <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"20px"</span> }<span class="op">,</span></span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> {</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a>    <span class="dt">range</span><span class="op">:</span> d3<span class="op">.</span><span class="at">schemePastel1</span><span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemePastel2</span><span class="op">.</span><span class="fu">slice</span>(<span class="dv">4</span><span class="op">,</span> <span class="dv">7</span>))<span class="op">.</span><span class="fu">concat</span>(d3<span class="op">.</span><span class="at">schemeSet1</span>[<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>    <span class="dt">domain</span><span class="op">:</span> months<span class="op">.</span><span class="fu">concat</span>(<span class="st">"selected"</span>)<span class="op">,</span></span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a>    <span class="dt">className</span><span class="op">:</span> <span class="st">"cal"</span><span class="op">,</span></span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a>  }<span class="op">,</span></span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">cell</span>(datesCal<span class="op">,</span> {</span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"selected"</span> <span class="op">:</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()]<span class="op">,</span></span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>      <span class="dt">stroke</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"darkorange"</span> <span class="op">:</span> <span class="st">"none"</span><span class="op">,</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>      <span class="dt">strokeWidth</span><span class="op">:</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a>      <span class="dt">inset</span><span class="op">:</span> <span class="op">.</span><span class="dv">5</span><span class="op">,</span></span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>    })<span class="op">,</span></span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal<span class="op">,</span> {</span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb2-110"><a href="#cb2-110" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb2-111"><a href="#cb2-111" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>() <span class="op">===</span> <span class="dv">7</span> <span class="op">?</span> months[d<span class="op">.</span><span class="fu">getUTCMonth</span>()]<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">3</span>) <span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb2-112"><a href="#cb2-112" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb2-113"><a href="#cb2-113" aria-hidden="true" tabindex="-1"></a>      <span class="dt">frameAnchor</span><span class="op">:</span> <span class="st">"left"</span><span class="op">,</span></span>
<span id="cb2-114"><a href="#cb2-114" aria-hidden="true" tabindex="-1"></a>      <span class="dt">dy</span><span class="op">:</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb2-115"><a href="#cb2-115" aria-hidden="true" tabindex="-1"></a>      <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-116"><a href="#cb2-116" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"18px"</span>})<span class="op">,</span></span>
<span id="cb2-117"><a href="#cb2-117" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">text</span>(datesCal<span class="op">,</span> {</span>
<span id="cb2-118"><a href="#cb2-118" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d3<span class="op">.</span><span class="at">utcWeek</span><span class="op">.</span><span class="fu">count</span>(d3<span class="op">.</span><span class="fu">utcYear</span>(d)<span class="op">,</span> d)<span class="op">,</span></span>
<span id="cb2-119"><a href="#cb2-119" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDay</span>()<span class="op">,</span></span>
<span id="cb2-120"><a href="#cb2-120" aria-hidden="true" tabindex="-1"></a>      <span class="co">//fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb2-121"><a href="#cb2-121" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fill</span><span class="op">:</span> d <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">unix2doty</span>(d<span class="op">.</span><span class="fu">getTime</span>())) <span class="op">===</span> dotyInput <span class="op">?</span> <span class="st">"white"</span> <span class="op">:</span> <span class="st">"black"</span><span class="op">,</span></span>
<span id="cb2-122"><a href="#cb2-122" aria-hidden="true" tabindex="-1"></a>      <span class="co">//stroke: "white",</span></span>
<span id="cb2-123"><a href="#cb2-123" aria-hidden="true" tabindex="-1"></a>      <span class="dt">text</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="fu">getUTCDate</span>()<span class="op">,</span> <span class="co">//Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb2-124"><a href="#cb2-124" aria-hidden="true" tabindex="-1"></a>      <span class="dt">monospace</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-125"><a href="#cb2-125" aria-hidden="true" tabindex="-1"></a>      <span class="dt">fontSize</span><span class="op">:</span> <span class="st">"13px"</span>})</span>
<span id="cb2-126"><a href="#cb2-126" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb2-127"><a href="#cb2-127" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="134" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 133;"><span id="cb3-134"><a href="#cb3-134" aria-hidden="true" tabindex="-1"></a>viewof dotyInput <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">0</span><span class="op">,</span> <span class="dv">364</span> <span class="op">+</span> leapInput]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="dv">306</span><span class="op">,</span> <span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Day of the year"</span>})<span class="op">;</span></span>
<span id="cb3-135"><a href="#cb3-135" aria-hidden="true" tabindex="-1"></a>viewof monthInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-136"><a href="#cb3-136" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">12</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Month"</span>})<span class="op">,</span></span>
<span id="cb3-137"><a href="#cb3-137" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2month<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> month2doty}</span>
<span id="cb3-138"><a href="#cb3-138" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb3-139"><a href="#cb3-139" aria-hidden="true" tabindex="-1"></a>viewof dotyInput1 <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-140"><a href="#cb3-140" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="op">-</span><span class="dv">365</span> <span class="op">-</span> leapInput<span class="op">,</span> <span class="op">-</span><span class="dv">1</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Day of the year"</span>})<span class="op">,</span></span>
<span id="cb3-141"><a href="#cb3-141" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> subN<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> addN}</span>
<span id="cb3-142"><a href="#cb3-142" aria-hidden="true" tabindex="-1"></a>)<span class="op">;</span></span>
<span id="cb3-143"><a href="#cb3-143" aria-hidden="true" tabindex="-1"></a>viewof dotmInput <span class="op">=</span> <span class="fu">transformInput</span>(</span>
<span id="cb3-144"><a href="#cb3-144" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="dv">31</span>]<span class="op">,</span> {<span class="dt">step</span><span class="op">:</span> <span class="dv">1</span><span class="op">,</span> <span class="dt">label</span><span class="op">:</span> <span class="st">"Day of the month"</span>})<span class="op">,</span></span>
<span id="cb3-145"><a href="#cb3-145" aria-hidden="true" tabindex="-1"></a>  {<span class="dt">bind</span><span class="op">:</span> viewof dotyInput<span class="op">,</span> <span class="dt">transform</span><span class="op">:</span> doty2dotm<span class="op">,</span> <span class="dt">invert</span><span class="op">:</span> (x <span class="kw">=&gt;</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(( <span class="dv">153</span> <span class="op">*</span> (</span>
<span id="cb3-146"><a href="#cb3-146" aria-hidden="true" tabindex="-1"></a>    viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">&gt;</span> <span class="dv">2</span></span>
<span id="cb3-147"><a href="#cb3-147" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">-</span> <span class="dv">3</span></span>
<span id="cb3-148"><a href="#cb3-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> viewof monthInput<span class="op">.</span><span class="at">value</span> <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span></span>
<span id="cb3-149"><a href="#cb3-149" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> x <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb3-150"><a href="#cb3-150" aria-hidden="true" tabindex="-1"></a>))})<span class="op">;</span></span>
<span id="cb3-151"><a href="#cb3-151" aria-hidden="true" tabindex="-1"></a>viewof leapscrub <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">form</span>([</span>
<span id="cb3-152"><a href="#cb3-152" aria-hidden="true" tabindex="-1"></a>  <span class="fu">Scrubber</span>(numbers<span class="op">,</span> {<span class="dt">autoplay</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> <span class="dt">alternate</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> <span class="dt">delay</span><span class="op">:</span> <span class="fl">86.4</span><span class="op">,</span> <span class="dt">loopDelay</span><span class="op">:</span> <span class="dv">864</span><span class="op">,</span> <span class="dt">format</span><span class="op">:</span> y <span class="kw">=&gt;</span> <span class="st">""</span><span class="op">,</span> <span class="dt">inputStyle</span><span class="op">:</span> <span class="st">"display:none;"</span>})<span class="op">,</span></span>
<span id="cb3-153"><a href="#cb3-153" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">toggle</span>({<span class="dt">label</span><span class="op">:</span> <span class="st">"Leap year"</span><span class="op">,</span> <span class="dt">value</span><span class="op">:</span> <span class="kw">false</span>})<span class="op">,</span></span>
<span id="cb3-154"><a href="#cb3-154" aria-hidden="true" tabindex="-1"></a>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div>
<div id="ojs-cell-3-5" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p><span class="radiotitle">First day of the Gregorian calendar year</span></p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="160" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 159;"><span id="cb4-160"><a href="#cb4-160" aria-hidden="true" tabindex="-1"></a>viewof dotwInput <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">radio</span>([</span>
<span id="cb4-161"><a href="#cb4-161" aria-hidden="true" tabindex="-1"></a>  <span class="st">"Sunday"</span><span class="op">,</span> <span class="st">"Monday"</span><span class="op">,</span> <span class="st">"Tuesday"</span><span class="op">,</span> <span class="st">"Wednesday"</span><span class="op">,</span> <span class="st">"Thursday"</span><span class="op">,</span> <span class="st">"Friday"</span><span class="op">,</span> <span class="st">"Saturday"</span><span class="op">,</span></span>
<span id="cb4-162"><a href="#cb4-162" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span> {<span class="dt">value</span><span class="op">:</span> <span class="st">"Sunday"</span>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<p>The Dec calendar (Decalendar) starts on <span class="blue" data-bs-toggle="tooltip" data-bs-title="March 1"><u>Day 0</u></span> instead of <span class="blue" data-bs-toggle="tooltip" data-bs-title="January 1"><u>Day 306</u></span> and uses groups of 10 days called deks in place of weeks and days of the dek (dotd) in lieu of days of the week. When combined, a dek and dotd form a Dec day of the year (doty). The current doty is <span><span id="ojs-element-id-1"></span>.</span> The doty selected by the <a href="https://observablehq.com/">Observable</a> <a href="https://observablehq.com/@observablehq/input-range">range🎚️inputs</a> above and highlighted in the calendar plots is <span><span id="ojs-element-id-2"></span>.</span></p>
<p>The Play▶️button above cycles🔄through every doty, month, and day of the month value so that each day gets its turn to be highlighted with a red🟥background. The <a href="https://observablehq.com/framework/inputs/toggle#:~:text=choose%20one%20of%20two%20values">toggle✅input</a> next to the button determines whether the plots show a leap (<span class="orange">n</span>=366) or a common (<span class="orange">n</span>=365) year. The <a href="https://observablehq.com/framework/inputs/radio#:~:text=choose%20one%20of%20a%20given%20set%20of%20values">radio🔘input</a> beneath the toggle input sets the day of the week on <span class="blue" data-bs-toggle="tooltip" data-bs-title="January 1"><u>Day 306</u></span>.</p>
<p>The Gregorian calendar <a href="https://en.wikipedia.org/wiki/Annual_calendar#:~:text=a%20representation%20of%20the%20year%20that%20expires%20with%20the%20year%20represented">changes every year</a> to adapt to the days of the week. In contrast, Decalendar <a href="https://en.wikipedia.org/wiki/Perennial_calendar#:~:text=a%20calendar%20that%20applies%20to%20any%20year">remains the same every year</a> except leaps years. The addition of <span class="blue" data-bs-toggle="tooltip" data-bs-title="February 29"><u>Day 365</u></span> to leap years shifts 306 Gregorian calendar dates forward by one day, but does not affect the order of Dec dates, because <span class="blue" data-bs-toggle="tooltip" data-bs-title="February 29"><u>Day 365</u></span> is the last day of Dec leap years.</p>
<p>Even though Dec does not use weeks, Dec dates can be modified to include <a href="https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=weekday%20as%20a%20decimal%20number%20%5B0%2C6%5D%20(0%3Dsunday)">POSIX weekday numbers</a>. To convert the current Dec date, <span><span id="ojs-element-id-3"></span>,</span> into the current Dec day of the week (dotw) date, <span><span id="ojs-element-id-4"></span>,</span> we split the current doty, <span><span id="ojs-element-id-5"></span>,</span> into the doty of the first day of the current week, <span><span id="ojs-element-id-6"></span>,</span> and the current POSIX weekday number: <span><span id="ojs-element-id-7"></span>.</span></p>
<p>Dec dotw dates can be further modified to also include <a href="https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=week%20of%20the%20year%20(sunday%20as%20the%20first%20day%20of%20the%20week)%20as%20a%20decimal%20number%20%5B00%2C53%5D.%20all%20days%20in%20a%20new%20year%20preceding%20the%20first%20sunday%20shall%20be%20considered%20to%20be%20in%20week%200.">POSIX week numbers</a>. The current week number, <span><span id="ojs-element-id-8"></span>,</span> is the result of adding the middle number in the Dec dotw date, <span><span id="ojs-element-id-9"></span>,</span> to the Day 0 dotw number, <span><span id="ojs-element-id-10"></span>,</span> and then floor dividing by 7. The current Dec week date, <span><span id="ojs-element-id-11"></span>,</span> shows how we can obtain the sum of the current doty and the Day 0 dotw number: <span>7×<span id="ojs-element-id-12"></span>.</span></p>
<p>From the Dec dotw and week date examples above, you can see a pattern start to emerge: Dec uses <a href="https://en.wikipedia.org/wiki/Simplification#:~:text=the%20process%20of%20replacing%20a%20mathematical%20expression%20by%20an%20equivalent%20one%2C%20that%20is%20simpler">unsimplified</a> math expressions to display various pieces of information about a date. Essentially, you can show whatever number(s) as part of a Dec date. All it takes is a little bit of arithmetic!</p>
<p>Following the Dec week date pattern, we can adapt Dec dates to use any other fixed-length calendar unit, including the 20-day <a href="https://en.wiktionary.org/wiki/dudek#Esperanto:~:text=dudek-,twenty,-Polish%5Bedit">dudek</a>, 30-day <a href="https://en.wiktionary.org/wiki/tridek#Esperanto:~:text=tridek-,thirty,-Categories%3A">tridek</a>, 40-day <a href="https://en.wiktionary.org/wiki/kvardek#Esperanto:~:text=kvardek-,forty,-Categories%3A">kvardek</a>, or 73-day <a href="https://en.wiktionary.org/wiki/sepdek_tri#Esperanto:~:text=sepdek%20tri-,seventy%2Dthree,-Categories%3A">sepdektri</a>. No other calendar unit can be as convenient as the 10-day <a href="https://en.wiktionary.org/wiki/dek#Esperanto:~:text=dek-,ten%20(10),-Derived%20terms%5B">dek</a>, because our <a href="https://en.wikipedia.org/wiki/Decimal#:~:text=system%20for%20denoting%20integer%20and%20non%2Dinteger%20numbers">decimal numeral system</a> allows us to naturally combine a dek and a day of the dek into a single number.</p>
<p>Dec can also be modified to display Dec month numbers and <a href="https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=day%20of%20the%20month%20as%20a%20decimal%20number%20%5B01%2C31%5D">POSIX day of the month (dotm) numbers</a>. The current Dec month date is |y|+d-m+m. We represent the current month with the last doty of the previous month because POSIX dotm numbers are one-based. If we represent the current month with its first doty, we have to use a zero-based dotm number: |y|+d-m+m.</p>
<p>We can combine the patterns above to create hybrid Dec day of the month and week (dotmaw) dates. The current Dec dotmaw date, |y|+d-m-w+m+w, Of course, this is getting a bit complicated and more than a bit silly, but Dec meek dates can be convenient if you want both the dotm and the dotw. To go back to a normal Dec date… you guessed it… we solve for the doty: d-m-w+m+w=d.&nbsp;</p>
<p>Essentially, you can show whatever number(s) you want to show as part of a Dec date. All it takes is a little bit of arithmetic! All of the math above may have lead you to the conclusion that Dec dates have a mathematical basis. Indeed, all of the date formats above have their own equations.</p>
<p>Also, the Gregorian calendar varies greatly depending on the days of the week. In total, there are 14 different Gregorian calendar variants that repeat in a <a href="">400-year cycle</a>.</p>
<p>The <code>year+day</code> format is based on the Dec date equation: <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}{\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}\)</span>, where <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}\)</span> is the Dec date, <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> is the year obtained by <a href="https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=the%20greatest%20integer%20less%20than%20or%20equal%20to%20x">flooring</a> <span class="math inline">\(\colorbox{yellow}{y}\)</span>, the <a href="https://en.wikipedia.org/wiki/Decimal#:~:text=denoting%20integer%20and-,non%2Dinteger%20numbers,-.%20It%20is%20the">decimal</a> years that have passed since the Dec <a href="https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era">epoch</a> (<span class="blue" data-bs-toggle="tooltip" data-bs-title="1 BC"><u>Year 0</u></span> <span class="blue" data-bs-toggle="tooltip" data-bs-title="March 1"><u>Day 0</u></span> <span class="blue" data-bs-toggle="tooltip" data-bs-title="midnight"><u>Dot 0</u></span>), <span class="math inline">\(\colorbox{cyan}{d}\)</span> is the <a href="https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00">zero-based</a> day of the year, and <span class="math inline">\(\colorbox{orange}{n}\)</span> is the number of days in <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span>. The Dec date equation for today is <span><span id="ojs-element-id-13"></span>.</span></p>
<p>Dec dates only include the first two terms from the <a href="https://en.wikipedia.org/wiki/Sides_of_an_equation#:~:text=the%20expression%20on%20the%20left%20of%20the%20%22%3D%22%20is%20the%20left%20side%20of%20the%20equation">left-hand side</a> of the Dec date equation: <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> and <span class="math inline">\(\colorbox{cyan}{d}\)</span>. The right-hand side of the equation, <span class="math inline">\(\colorbox{yellow}{y}\)</span>, can also be used as a date. We need <span class="math inline">\(\colorbox{orange}{n}\)</span> to calculate <span class="math inline">\(\colorbox{yellow}{y}\)</span> via the Dec date equation above and to obtain <span class="math inline">\(\colorbox{cyan}{d}\)</span> using the Dec day of the year equation: <span class="math inline">\(\colorbox{cyan}{d}{=}\colorbox{yellow}{y}\vcenter{\text{\%}}1{\times}\colorbox{orange}{n}\)</span>. In simple terms, <span class="math inline">\(\colorbox{cyan}{d}\)</span> is the <a href="https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part">decimal part</a> of <span class="math inline">\(\colorbox{yellow}{y}\)</span> multiplied by <span class="math inline">\(\colorbox{orange}{n}\)</span>.</p>
<p>To find <span class="math inline">\(\colorbox{orange}{n}\)</span>, we plug <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> into the Dec year length equation below, where <span class="math inline">\(\vcenter{\text\%}\)</span> is the <a href="https://en.wikipedia.org/wiki/Modulo#:~:text=returns%20the%20remainder">modulo</a> operator, <span class="math inline">\(\land\)</span> is the logical <a href="https://en.wikipedia.org/wiki/Logical_conjunction">conjunction</a> operator (and), and <span class="math inline">\(\lor\)</span> is the logical <a href="https://en.wikipedia.org/wiki/Logical_disjunction">disjunction</a> operator (or). According to this equation, <span class="math inline">\(\colorbox{orange}{n}\)</span> is 366 if the subsequent year <span class="nowrap">(Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span>)</span> is a <a href="https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world">Gregorian calendar</a> <a href="https://en.wikipedia.org/wiki/Leap_year#:~:text=Every%20year%20that%20is%20exactly%20divisible%20by%20four%20is%20a%20leap%20year%2C%20except%20for%20years%20that%20are%20exactly%20divisible%20by%20100%2C%20but%20these%20centurial%20years%20are%20leap%20years%20if%20they%20are%20exactly%20divisible%20by%20400">leap year</a> and 365 if Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span> is a Gregorian calendar <a href="https://en.wikipedia.org/wiki/Common_year#:~:text=a%20calendar%20year%20with%20365%20days">common year</a>.</p>
<p><span class="math display">\[\colorbox{orange}{n}=\begin{cases}
  366&amp;{\begin{align}\text{if } (\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}4=0\\
  \land(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}100\neq0\\
  \lor(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}400=0\end{align}}\\\\
  365&amp;{\text{otherwise.}}\end{cases}\]</span></p>
<p>In addition to calculating <span class="math inline">\(\colorbox{yellow}{y}\)</span>, <span class="math inline">\(\colorbox{orange}{n}\)</span> is needed to convert between <code>year+day</code> and <code>year-day</code> Dec dates. The <code>year-day</code> version of the Dec date equation is <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1{-}(\colorbox{cyan}{d}{-}\colorbox{orange}{n}){\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}\)</span>. In essence, <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> is a <a href="https://en.wikipedia.org/wiki/Countdown#:~:text=backward%20counting%20to%20indicate%20the%20time%20remaining%20before%20an%20event">“T-minus” countdown</a> of the days until the start of Year <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}1\)</span>. The current <code>year-day</code> date, <span><span id="ojs-element-id-14"></span>,</span> tells us that Year <span><span id="ojs-element-id-15"></span></span> will begin in <span><span id="ojs-element-id-16"></span></span> days.</p>
<p>The difference between <span class="math inline">\(\colorbox{cyan}{d}\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> can also be explained in terms of computer programming. If we think of years as <a href="https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=a%20data%20structure%20consisting%20of%20a%20collection%20of%20elements%20(values%20or%20variables)%2C%20of%20same%20memory%20size%2C%20each%20identified%20by%20at%20least%20one%20array%20index">arrays</a>, <span class="math inline">\(\colorbox{cyan}{d}\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> are like array <a href="https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=individual%20objects%20are%20selected%20by%20an%20index">indexes</a> that can be used to identify array elements or combine them via <a href="https://en.wikipedia.org/wiki/Array_slicing#:~:text=an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array">slicing</a>. In this analogy, <span class="math inline">\(\colorbox{cyan}{d}\)</span> is a <a href="https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00">positive index</a> with a range of <span class="math inline">\(0\)</span> to <span class="math inline">\(\colorbox{orange}{n}{-}1\)</span> and <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> is a <a href="https://en.wikipedia.org/wiki/Array_slicing#:~:text=specify%20an%20offset%20from%20the%20end%20of%20the%20array">negative index</a> that ranges from <span class="math inline">\({-}\colorbox{orange}{n}\)</span> to <span class="math inline">\({-}1\)</span>.</p>
<p>We can express the <a href="https://en.wikipedia.org/wiki/Upper_and_lower_bounds#:~:text=an%20upper%20bound%20or%20majorant%5B1%5D%20of%20a%20subset%20S%20of%20some%20preordered%20set%20(K%2C%20%E2%89%A4)%20is%20an%20element%20of%20K%20that%20is%20greater%20than%20or%20equal%20to%20every%20element%20of%20S.%5B2%5D%5B3%5D%20Dually%2C%20a%20lower%20bound%20or%20minorant%20of%20S%20is%20defined%20to%20be%20an%20element%20of%20K%20that%20is%20less%20than%20or%20equal%20to%20every%20element%20of%20S">bounds</a> for <span class="math inline">\(\colorbox{cyan}{d}\)</span> values with the <a href="https://en.wikipedia.org/wiki/Interval_(mathematics)#:~:text=the%20set%20of%20all%20real%20numbers%20lying%20between%20two%20fixed%20endpoints">interval</a> <span class="math inline">\(\left [0,\colorbox{orange}{n} \right )\)</span>, the <a href="https://en.wikipedia.org/wiki/Inequality_(mathematics)#:~:text=a%20non%2Dequal%20comparison">inequality</a> <span class="math inline">\(0{\le}\colorbox{cyan}{d}{\lt} \colorbox{orange}{n}\)</span>, or the Dec range <span class="math inline">\(0{=}\)</span>. Similarly, the analogous interval, inequality, and Dec range for <span class="math inline">\(\colorbox{cyan}{d}{-}\colorbox{orange}{n}\)</span> are <span class="math inline">\([{-}\colorbox{orange}{n},0)\)</span>, <span class="math inline">\({-}\colorbox{orange}{n}{\le}\colorbox{cyan}{d}{-}\colorbox{orange}{n}{\lt}0\)</span>, and <span class="math inline">\({-}\colorbox{orange}{n}{=}\)</span>, respectively.</p>
<p>Even though it only uses years and days, Dec can display dates based on months or weeks by modifying <span class="math inline">\(\colorbox{cyan}{d}\)</span>. The equation for Dec week dates is <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor{+}7{\times}\colorbox{pink}{U}{+}\text{\textcolor{blue}{w}}{-}\text{\textcolor{blue}{w}}_
\text{\textcolor{blue}{d=0}}{=}\colorbox{yellow}{y}\)</span>, where <span class="math inline">\(\colorbox{pink}{U}\)</span> is the week number, <span class="math inline">\(\text{\textcolor{blue}{w}}\)</span> is the day of the week number, and <span class="math inline">\(\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}\)</span> is <span class="math inline">\(\text{\textcolor{blue}{w}}\)</span> on the first day of the year (<span class="math inline">\(\colorbox{cyan}{d}{=}0\)</span>). The Dec week date equation for today is .</p>
<p>We can truncate the Dec week date equation to remove <span class="math inline">\(\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}\)</span>, which can be determined from <span class="math inline">\(\lfloor\colorbox{yellow}{y}\rfloor\)</span> and is not needed to identify a date. The truncated Dec week date equation for today is .</p>
<p>If we ever need to convert between a doty and a Gregorian calendar month and day of the month without any conversion tools, we can use the Dec finger mnemonic, which is similar to the <a href="https://en.wikipedia.org/wiki/Knuckle_mnemonic#:~:text=a%20mnemonic%20device%20for%20remembering%20the%20number%20of%20days%20in%20the%20months%20of%20the%20Julian%20and%20Gregorian%20calendars">knuckle mnemonic</a>. The numbers above the fingers in the image below indicate the doty of the last day of each Gregorian calendar month. The thumb, middle finger, and pinky represent months with 31 days, whereas the index and ring fingers stand for 30-day months.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../../asset/finger.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Dec finger mnemonic"><img src="../../asset/finger.svg" class="knitr img-fluid figure-img" alt="Dec finger mnemonic"></a></p>
<figcaption>Dec finger mnemonic</figcaption>
</figure>
</div>
<p>The <a href="https://en.wikipedia.org/wiki/September_equinox#:~:text=the%20moment%20when%20the%20Sun%20appears%20to%20cross%20the%20celestial%20equator%2C%20heading%20southward">southward equinox</a> falls on Day 205 in Year 2024, 2025, 2028, and 2029. We can determine that Day 205 is September 22 by subtracting the Dec date of the last day of August (Day 183), the month preceding September, from the southward equinox doty: <span class="math inline">\(205{-}183{=}22\)</span>. To convert in the other direction, we would sum the doty and the day of the month: <span class="math inline">\(183{+}22{=}205\)</span>.</p>
<p>The finger mnemonic highlights a major difference between Dec and the Gregorian calendar: the Dec year starts on <span class="blue" data-bs-toggle="tooltip" data-bs-title="March 1"><u>Day 0</u></span> just like the <a href="https://en.wikipedia.org/wiki/Roman_calendar#:~:text=the%20calendar%20used%20by%20the%20Roman%20Kingdom%20and%20Roman%20Republic">Roman calendar</a>, the predecessor of the Gregorian and Julian calendars. For this reason, the Latin <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=prefixes%20derived%20from%20numerals">numeral prefixes</a> in the names of the months of <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=7-,septem,-%2D%2C%20septi%2D%5B">Septem</a>ber, <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=8-,octo,-%2D%5Bu">Octo</a>ber, <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=9-,novem,-%2D%5Bx">Novem</a>ber, and <a href="https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=10-,decem,-%2D%2C%20dec%2D%5B">Decem</a>ber match their one-based indexes (7, 8, 9, and 10) in Dec and the Roman calendar, but not in the Julian or Gregorian calendars.</p>
<p>The knuckle and finger mnemonics attempt to make sense of the irregular pattern of month lengths in the Gregorian calendar. Rather than replace variable-length months with <a href="https://en.wikipedia.org/wiki/Calendar_reform#13-month_calendars">fixed-length months</a>, Dec forgoes the use of months entirely and instead uses groups of ten days called deks.</p>
<div class="cell hidden">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="232" data-source-offset="-0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 231;"><span id="cb5-232"><a href="#cb5-232" aria-hidden="true" tabindex="-1"></a>unix <span class="op">=</span> {</span>
<span id="cb5-233"><a href="#cb5-233" aria-hidden="true" tabindex="-1"></a>  <span class="cf">while</span>(<span class="kw">true</span>) {</span>
<span id="cb5-234"><a href="#cb5-234" aria-hidden="true" tabindex="-1"></a>    <span class="kw">yield</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()<span class="op">;</span></span>
<span id="cb5-235"><a href="#cb5-235" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-236"><a href="#cb5-236" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-237"><a href="#cb5-237" aria-hidden="true" tabindex="-1"></a><span class="co">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb5-238"><a href="#cb5-238" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2dote</span>(unix<span class="op">,</span> zone<span class="op">,</span> offset <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb5-239"><a href="#cb5-239" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [(unix <span class="op">??</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()) <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> (</span>
<span id="cb5-240"><a href="#cb5-240" aria-hidden="true" tabindex="-1"></a>    zone <span class="op">=</span> zone <span class="op">??</span> <span class="op">-</span><span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>(</span>
<span id="cb5-241"><a href="#cb5-241" aria-hidden="true" tabindex="-1"></a>      (<span class="kw">new</span> <span class="bu">Date</span>)<span class="op">.</span><span class="fu">getTimezoneOffset</span>() <span class="op">/</span> <span class="dv">144</span>)</span>
<span id="cb5-242"><a href="#cb5-242" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">10</span> <span class="op">+</span> offset<span class="op">,</span> zone]</span>
<span id="cb5-243"><a href="#cb5-243" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-244"><a href="#cb5-244" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2date</span>(dote<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-245"><a href="#cb5-245" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((</span>
<span id="cb5-246"><a href="#cb5-246" aria-hidden="true" tabindex="-1"></a>      dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote</span>
<span id="cb5-247"><a href="#cb5-247" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> dote <span class="op">-</span> <span class="dv">146096</span></span>
<span id="cb5-248"><a href="#cb5-248" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb5-249"><a href="#cb5-249" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb5-250"><a href="#cb5-250" aria-hidden="true" tabindex="-1"></a>  yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc</span>
<span id="cb5-251"><a href="#cb5-251" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)</span>
<span id="cb5-252"><a href="#cb5-252" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>)</span>
<span id="cb5-253"><a href="#cb5-253" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)</span>
<span id="cb5-254"><a href="#cb5-254" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb5-255"><a href="#cb5-255" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [</span>
<span id="cb5-256"><a href="#cb5-256" aria-hidden="true" tabindex="-1"></a>    yotc <span class="op">+</span> socy <span class="op">*</span> <span class="dv">400</span><span class="op">,</span></span>
<span id="cb5-257"><a href="#cb5-257" aria-hidden="true" tabindex="-1"></a>    dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">365</span></span>
<span id="cb5-258"><a href="#cb5-258" aria-hidden="true" tabindex="-1"></a>      <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)</span>
<span id="cb5-259"><a href="#cb5-259" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb5-260"><a href="#cb5-260" aria-hidden="true" tabindex="-1"></a>  )<span class="op">,</span> zone]}</span>
<span id="cb5-261"><a href="#cb5-261" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco0</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-262"><a href="#cb5-262" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>year<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span><span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span><span class="bu">String</span>(doty <span class="op">%</span> <span class="dv">1</span> <span class="op">*</span> <span class="dv">10</span>)<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">6</span>)<span class="sc">}</span><span class="vs">-</span><span class="sc">${</span>zone<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb5-263"><a href="#cb5-263" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-264"><a href="#cb5-264" aria-hidden="true" tabindex="-1"></a>dz <span class="op">=</span> <span class="fu">unix2dote</span>(unix)</span>
<span id="cb5-265"><a href="#cb5-265" aria-hidden="true" tabindex="-1"></a>ydz <span class="op">=</span> <span class="fu">dote2date</span>(<span class="op">...</span>dz)</span>
<span id="cb5-266"><a href="#cb5-266" aria-hidden="true" tabindex="-1"></a>deco <span class="op">=</span> <span class="fu">doty2deco0</span>(<span class="op">...</span>ydz)</span>
<span id="cb5-267"><a href="#cb5-267" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb5-268"><a href="#cb5-268" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setStyle</span>(content<span class="op">,</span> style <span class="op">=</span> {}) {</span>
<span id="cb5-269"><a href="#cb5-269" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">yiq</span>(color) {</span>
<span id="cb5-270"><a href="#cb5-270" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> {r<span class="op">,</span> g<span class="op">,</span> b} <span class="op">=</span> d3<span class="op">.</span><span class="fu">rgb</span>(color)<span class="op">;</span></span>
<span id="cb5-271"><a href="#cb5-271" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (r <span class="op">*</span> <span class="dv">299</span> <span class="op">+</span> g <span class="op">*</span> <span class="dv">587</span> <span class="op">+</span> b <span class="op">*</span> <span class="dv">114</span>) <span class="op">/</span> <span class="dv">1000</span> <span class="op">/</span> <span class="dv">255</span><span class="op">;</span> <span class="co">// returns values between 0 and 1</span></span>
<span id="cb5-272"><a href="#cb5-272" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-273"><a href="#cb5-273" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> {</span>
<span id="cb5-274"><a href="#cb5-274" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-275"><a href="#cb5-275" aria-hidden="true" tabindex="-1"></a>    color <span class="op">=</span> <span class="fu">yiq</span>(background) <span class="op">&gt;=</span> <span class="fl">0.6</span> <span class="op">?</span> <span class="st">"#111"</span> <span class="op">:</span> <span class="st">"white"</span><span class="op">,</span></span>
<span id="cb5-276"><a href="#cb5-276" aria-hidden="true" tabindex="-1"></a>    padding <span class="op">=</span> <span class="st">"0 1px"</span><span class="op">,</span></span>
<span id="cb5-277"><a href="#cb5-277" aria-hidden="true" tabindex="-1"></a>    borderRadius <span class="op">=</span> <span class="st">"4px"</span><span class="op">,</span></span>
<span id="cb5-278"><a href="#cb5-278" aria-hidden="true" tabindex="-1"></a>    fontWeight <span class="op">=</span> <span class="dv">900</span><span class="op">,</span></span>
<span id="cb5-279"><a href="#cb5-279" aria-hidden="true" tabindex="-1"></a>    fontSize <span class="op">=</span> <span class="st">"1em"</span><span class="op">,</span></span>
<span id="cb5-280"><a href="#cb5-280" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-281"><a href="#cb5-281" aria-hidden="true" tabindex="-1"></a>  } <span class="op">=</span> <span class="kw">typeof</span> style <span class="op">===</span> <span class="st">"string"</span> <span class="op">?</span> {<span class="dt">background</span><span class="op">:</span> style} <span class="op">:</span> style<span class="op">;</span></span>
<span id="cb5-282"><a href="#cb5-282" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> htl<span class="op">.</span><span class="fu">html</span><span class="vs">`&lt;span style=</span><span class="sc">${</span>{</span>
<span id="cb5-283"><a href="#cb5-283" aria-hidden="true" tabindex="-1"></a>    background<span class="op">,</span></span>
<span id="cb5-284"><a href="#cb5-284" aria-hidden="true" tabindex="-1"></a>    color<span class="op">,</span></span>
<span id="cb5-285"><a href="#cb5-285" aria-hidden="true" tabindex="-1"></a>    padding<span class="op">,</span></span>
<span id="cb5-286"><a href="#cb5-286" aria-hidden="true" tabindex="-1"></a>    borderRadius<span class="op">,</span></span>
<span id="cb5-287"><a href="#cb5-287" aria-hidden="true" tabindex="-1"></a>    fontWeight<span class="op">,</span></span>
<span id="cb5-288"><a href="#cb5-288" aria-hidden="true" tabindex="-1"></a>    <span class="op">...</span>rest</span>
<span id="cb5-289"><a href="#cb5-289" aria-hidden="true" tabindex="-1"></a>  }<span class="sc">}</span><span class="vs">&gt;</span><span class="sc">${</span>content<span class="sc">}</span><span class="vs">&lt;/span&gt;`</span><span class="op">;</span></span>
<span id="cb5-290"><a href="#cb5-290" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-291"><a href="#cb5-291" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">year2leap</span>(year <span class="op">=</span> <span class="dv">1970</span>) {</span>
<span id="cb5-292"><a href="#cb5-292" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> year <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> year <span class="op">%</span> <span class="dv">100</span> <span class="op">!=</span> <span class="dv">0</span> <span class="op">||</span> year <span class="op">%</span> <span class="dv">400</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb5-293"><a href="#cb5-293" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-294"><a href="#cb5-294" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">dote2dotw</span>(d <span class="op">=</span> <span class="dv">719468</span>) {</span>
<span id="cb5-295"><a href="#cb5-295" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> d <span class="op">&gt;=</span> <span class="op">-</span><span class="dv">3</span> <span class="op">?</span> (d <span class="op">+</span> <span class="dv">3</span>) <span class="op">%</span> <span class="dv">7</span> <span class="op">:</span> (d <span class="op">+</span> <span class="dv">4</span>) <span class="op">%</span> <span class="dv">7</span> <span class="op">+</span> <span class="dv">6</span></span>
<span id="cb5-296"><a href="#cb5-296" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-297"><a href="#cb5-297" aria-hidden="true" tabindex="-1"></a>decoYear <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">4</span>)</span>
<span id="cb5-298"><a href="#cb5-298" aria-hidden="true" tabindex="-1"></a>nextYear <span class="op">=</span> <span class="pp">parseInt</span>(decoYear) <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb5-299"><a href="#cb5-299" aria-hidden="true" tabindex="-1"></a>decoDoty <span class="op">=</span> deco<span class="op">.</span><span class="fu">slice</span>(<span class="dv">5</span><span class="op">,</span> <span class="dv">8</span>)</span>
<span id="cb5-300"><a href="#cb5-300" aria-hidden="true" tabindex="-1"></a>dotw <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(<span class="fu">dote2dotw</span>(dz[<span class="dv">0</span>]))</span>
<span id="cb5-301"><a href="#cb5-301" aria-hidden="true" tabindex="-1"></a>week <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((ydz[<span class="dv">1</span>] <span class="op">+</span> doty0dotw) <span class="op">/</span> <span class="dv">7</span>)</span>
<span id="cb5-302"><a href="#cb5-302" aria-hidden="true" tabindex="-1"></a>dotw0doty <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(ydz[<span class="dv">1</span>]) <span class="op">-</span> dotw</span>
<span id="cb5-303"><a href="#cb5-303" aria-hidden="true" tabindex="-1"></a>doty0dote <span class="op">=</span> <span class="fu">date2dote</span>(ydz[<span class="dv">0</span>]<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> ydz[<span class="dv">2</span>])</span>
<span id="cb5-304"><a href="#cb5-304" aria-hidden="true" tabindex="-1"></a>doty0dotw <span class="op">=</span> <span class="fu">dote2dotw</span>(<span class="op">...</span>doty0dote)</span>
<span id="cb5-305"><a href="#cb5-305" aria-hidden="true" tabindex="-1"></a>dotw0sign <span class="op">=</span> dotw0doty <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="st">"-"</span> <span class="op">:</span> <span class="st">"+"</span></span>
<span id="cb5-306"><a href="#cb5-306" aria-hidden="true" tabindex="-1"></a>nDaysInYear <span class="op">=</span> <span class="dv">365</span> <span class="op">+</span> <span class="fu">year2leap</span>(ydz[<span class="dv">0</span>] <span class="op">+</span> <span class="dv">1</span>)</span>
<span id="cb5-307"><a href="#cb5-307" aria-hidden="true" tabindex="-1"></a>Tminus <span class="op">=</span> nDaysInYear <span class="op">-</span> decoDoty</span>
<span id="cb5-308"><a href="#cb5-308" aria-hidden="true" tabindex="-1"></a>fracYear <span class="op">=</span> (ydz[<span class="dv">0</span>] <span class="op">+</span> (ydz[<span class="dv">1</span>] <span class="op">-</span> ydz[<span class="dv">2</span>]) <span class="op">/</span> nDaysInYear)<span class="op">.</span><span class="fu">toFixed</span>(<span class="dv">3</span>)</span>
<span id="cb5-309"><a href="#cb5-309" aria-hidden="true" tabindex="-1"></a>styledDecoYear <span class="op">=</span> <span class="fu">setStyle</span>(decoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-310"><a href="#cb5-310" aria-hidden="true" tabindex="-1"></a>styledDecoYear1 <span class="op">=</span> <span class="fu">setStyle</span>(decoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-311"><a href="#cb5-311" aria-hidden="true" tabindex="-1"></a>styledDecoYear2 <span class="op">=</span> <span class="fu">setStyle</span>(decoYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-312"><a href="#cb5-312" aria-hidden="true" tabindex="-1"></a>styledNextYear <span class="op">=</span> <span class="fu">setStyle</span>(nextYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-313"><a href="#cb5-313" aria-hidden="true" tabindex="-1"></a>styledFracYear <span class="op">=</span> <span class="fu">setStyle</span>(fracYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">10</span>])</span>
<span id="cb5-314"><a href="#cb5-314" aria-hidden="true" tabindex="-1"></a>styledDecoDoty <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-315"><a href="#cb5-315" aria-hidden="true" tabindex="-1"></a>styledDecoDoty1 <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-316"><a href="#cb5-316" aria-hidden="true" tabindex="-1"></a>styledDecoDoty2 <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-317"><a href="#cb5-317" aria-hidden="true" tabindex="-1"></a>styledDecoDoty3 <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-318"><a href="#cb5-318" aria-hidden="true" tabindex="-1"></a>styledDotw <span class="op">=</span> <span class="fu">setStyle</span>(dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-319"><a href="#cb5-319" aria-hidden="true" tabindex="-1"></a>styledDotw1 <span class="op">=</span> <span class="fu">setStyle</span>(dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-320"><a href="#cb5-320" aria-hidden="true" tabindex="-1"></a>styledDotw2 <span class="op">=</span> <span class="fu">setStyle</span>(dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-321"><a href="#cb5-321" aria-hidden="true" tabindex="-1"></a>styledDotw3 <span class="op">=</span> <span class="fu">setStyle</span>(dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-322"><a href="#cb5-322" aria-hidden="true" tabindex="-1"></a>styledDotw4 <span class="op">=</span> <span class="fu">setStyle</span>(dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-323"><a href="#cb5-323" aria-hidden="true" tabindex="-1"></a>styledWeek <span class="op">=</span> <span class="fu">setStyle</span>(week<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"purple"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-324"><a href="#cb5-324" aria-hidden="true" tabindex="-1"></a>styledWeek1 <span class="op">=</span> <span class="fu">setStyle</span>(week<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"purple"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-325"><a href="#cb5-325" aria-hidden="true" tabindex="-1"></a>styledWeek2 <span class="op">=</span> <span class="fu">setStyle</span>(week<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"purple"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-326"><a href="#cb5-326" aria-hidden="true" tabindex="-1"></a>styledDoty0dotw <span class="op">=</span> <span class="fu">setStyle</span>(doty0dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-327"><a href="#cb5-327" aria-hidden="true" tabindex="-1"></a>styledDoty0dotw1 <span class="op">=</span> <span class="fu">setStyle</span>(doty0dotw<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"blue"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-328"><a href="#cb5-328" aria-hidden="true" tabindex="-1"></a>styledDotw0doty <span class="op">=</span> <span class="fu">setStyle</span>(<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(dotw0doty)<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-329"><a href="#cb5-329" aria-hidden="true" tabindex="-1"></a>styledDotw0doty1 <span class="op">=</span> <span class="fu">setStyle</span>(dotw0doty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-330"><a href="#cb5-330" aria-hidden="true" tabindex="-1"></a>styledDotw0doty2 <span class="op">=</span> <span class="fu">setStyle</span>(dotw0doty<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-331"><a href="#cb5-331" aria-hidden="true" tabindex="-1"></a>styledDotyInput <span class="op">=</span> <span class="fu">setStyle</span>(dotyInput<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-332"><a href="#cb5-332" aria-hidden="true" tabindex="-1"></a>styledDecoTminus <span class="op">=</span> <span class="fu">setStyle</span>(Tminus<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"pink"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-333"><a href="#cb5-333" aria-hidden="true" tabindex="-1"></a>styledDecoDek <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty<span class="op">.</span><span class="fu">slice</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">2</span>)<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-334"><a href="#cb5-334" aria-hidden="true" tabindex="-1"></a>styledDecoDotd <span class="op">=</span> <span class="fu">setStyle</span>(decoDoty[<span class="dv">2</span>]<span class="op">,</span> d3<span class="op">.</span><span class="fu">color</span>(<span class="st">"cyan"</span>)<span class="op">.</span><span class="fu">formatHex</span>())</span>
<span id="cb5-335"><a href="#cb5-335" aria-hidden="true" tabindex="-1"></a>styledNdays <span class="op">=</span> <span class="fu">setStyle</span>(nDaysInYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb5-336"><a href="#cb5-336" aria-hidden="true" tabindex="-1"></a>styledNdays1 <span class="op">=</span> <span class="fu">setStyle</span>(nDaysInYear<span class="op">,</span> d3<span class="op">.</span><span class="at">schemePaired</span>[<span class="dv">6</span>])</span>
<span id="cb5-337"><a href="#cb5-337" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb5-338"><a href="#cb5-338" aria-hidden="true" tabindex="-1"></a>transformInput <span class="op">=</span> <span class="kw">function</span>(target<span class="op">,</span> {<span class="dt">bind</span><span class="op">:</span> source<span class="op">,</span> transform <span class="op">=</span> identity<span class="op">,</span> involutory <span class="op">=</span> <span class="kw">false</span><span class="op">,</span> invert <span class="op">=</span> involutory <span class="op">?</span> transform <span class="op">:</span> <span class="fu">inverse</span>(transform)} <span class="op">=</span> {}){</span>
<span id="cb5-339"><a href="#cb5-339" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (source <span class="op">===</span> <span class="kw">undefined</span>) {</span>
<span id="cb5-340"><a href="#cb5-340" aria-hidden="true" tabindex="-1"></a>    source <span class="op">=</span> target<span class="op">;</span></span>
<span id="cb5-341"><a href="#cb5-341" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;div&gt;</span><span class="sc">${</span>source<span class="sc">}</span><span class="vs">&lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb5-342"><a href="#cb5-342" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-343"><a href="#cb5-343" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">sourceInputHandler</span>() {</span>
<span id="cb5-344"><a href="#cb5-344" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-345"><a href="#cb5-345" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(target)<span class="op">.</span><span class="fu">to</span>(<span class="fu">transform</span>(source<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-346"><a href="#cb5-346" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-347"><a href="#cb5-347" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-348"><a href="#cb5-348" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">targetInputHandler</span>() {</span>
<span id="cb5-349"><a href="#cb5-349" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-350"><a href="#cb5-350" aria-hidden="true" tabindex="-1"></a>    <span class="fu">setTransform</span>(source)<span class="op">.</span><span class="fu">to</span>(<span class="fu">invert</span>(target<span class="op">.</span><span class="at">value</span>))<span class="op">.</span><span class="fu">andDispatchEvent</span>()<span class="op">;</span></span>
<span id="cb5-351"><a href="#cb5-351" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-352"><a href="#cb5-352" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-353"><a href="#cb5-353" aria-hidden="true" tabindex="-1"></a>  source<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-354"><a href="#cb5-354" aria-hidden="true" tabindex="-1"></a>  target<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-355"><a href="#cb5-355" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb5-356"><a href="#cb5-356" aria-hidden="true" tabindex="-1"></a>    source<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> sourceInputHandler)<span class="op">;</span></span>
<span id="cb5-357"><a href="#cb5-357" aria-hidden="true" tabindex="-1"></a>    target<span class="op">.</span><span class="fu">removeEventListener</span>(<span class="st">"input"</span><span class="op">,</span> targetInputHandler)<span class="op">;</span></span>
<span id="cb5-358"><a href="#cb5-358" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb5-359"><a href="#cb5-359" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sourceInputHandler</span>()<span class="op">;</span></span>
<span id="cb5-360"><a href="#cb5-360" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> target<span class="op">;</span></span>
<span id="cb5-361"><a href="#cb5-361" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-362"><a href="#cb5-362" aria-hidden="true" tabindex="-1"></a>setTransform <span class="op">=</span> (input) <span class="kw">=&gt;</span> ({<span class="dt">to</span><span class="op">:</span> (value) <span class="kw">=&gt;</span> (input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">,</span> {<span class="dt">andDispatchEvent</span><span class="op">:</span> (<span class="bu">event</span> <span class="op">=</span> <span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span>)) <span class="kw">=&gt;</span> input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="bu">event</span>)})})<span class="op">;</span></span>
<span id="cb5-363"><a href="#cb5-363" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">inverse</span>(f) {</span>
<span id="cb5-364"><a href="#cb5-364" aria-hidden="true" tabindex="-1"></a>  <span class="cf">switch</span> (f) {</span>
<span id="cb5-365"><a href="#cb5-365" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dt">identity</span><span class="op">:</span>  <span class="cf">return</span> identity<span class="op">;</span></span>
<span id="cb5-366"><a href="#cb5-366" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">sqrt</span><span class="op">:</span> <span class="cf">return</span> square<span class="op">;</span></span>
<span id="cb5-367"><a href="#cb5-367" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">;</span></span>
<span id="cb5-368"><a href="#cb5-368" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">exp</span><span class="op">:</span>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">log</span><span class="op">;</span></span>
<span id="cb5-369"><a href="#cb5-369" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span>        <span class="cf">return</span> (x <span class="kw">=&gt;</span> <span class="fu">solve</span>(f<span class="op">,</span> x<span class="op">,</span> x))<span class="op">;</span></span>
<span id="cb5-370"><a href="#cb5-370" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-371"><a href="#cb5-371" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">solve</span>(f<span class="op">,</span> y<span class="op">,</span> x <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-372"><a href="#cb5-372" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> dx <span class="op">=</span> <span class="fl">1e-6</span><span class="op">;</span></span>
<span id="cb5-373"><a href="#cb5-373" aria-hidden="true" tabindex="-1"></a>    <span class="kw">let</span> steps <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> deltax<span class="op">,</span> fx<span class="op">,</span> dfx<span class="op">;</span></span>
<span id="cb5-374"><a href="#cb5-374" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> {</span>
<span id="cb5-375"><a href="#cb5-375" aria-hidden="true" tabindex="-1"></a>      fx <span class="op">=</span> <span class="fu">f</span>(x)</span>
<span id="cb5-376"><a href="#cb5-376" aria-hidden="true" tabindex="-1"></a>      dfx <span class="op">=</span> (<span class="fu">f</span>(x <span class="op">+</span> dx) <span class="op">-</span> fx) <span class="op">||</span> dx<span class="op">;</span></span>
<span id="cb5-377"><a href="#cb5-377" aria-hidden="true" tabindex="-1"></a>      deltax <span class="op">=</span> dx <span class="op">*</span> (fx <span class="op">-</span> y)<span class="op">/</span>dfx</span>
<span id="cb5-378"><a href="#cb5-378" aria-hidden="true" tabindex="-1"></a>      x <span class="op">-=</span> deltax<span class="op">;</span></span>
<span id="cb5-379"><a href="#cb5-379" aria-hidden="true" tabindex="-1"></a>    } <span class="cf">while</span> (<span class="bu">Math</span><span class="op">.</span><span class="fu">abs</span>(deltax) <span class="op">&gt;</span> dx <span class="op">&amp;&amp;</span> <span class="op">--</span>steps <span class="op">&gt;</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb5-380"><a href="#cb5-380" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> steps <span class="op">===</span> <span class="dv">0</span> <span class="op">?</span> <span class="kw">NaN</span> <span class="op">:</span> x<span class="op">;</span></span>
<span id="cb5-381"><a href="#cb5-381" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-382"><a href="#cb5-382" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">square</span>(x) {</span>
<span id="cb5-383"><a href="#cb5-383" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span></span>
<span id="cb5-384"><a href="#cb5-384" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb5-385"><a href="#cb5-385" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-386"><a href="#cb5-386" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">identity</span>(x) {</span>
<span id="cb5-387"><a href="#cb5-387" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> x<span class="op">;</span></span>
<span id="cb5-388"><a href="#cb5-388" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-389"><a href="#cb5-389" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2month</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-390"><a href="#cb5-390" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-391"><a href="#cb5-391" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">;</span></span>
<span id="cb5-392"><a href="#cb5-392" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-393"><a href="#cb5-393" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">month2doty</span>(month <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb5-394"><a href="#cb5-394" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb5-395"><a href="#cb5-395" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span></span>
<span id="cb5-396"><a href="#cb5-396" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb5-397"><a href="#cb5-397" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2dotm</span>(doty <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb5-398"><a href="#cb5-398" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb5-399"><a href="#cb5-399" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> doty <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span>) <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb5-400"><a href="#cb5-400" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb5-401"><a href="#cb5-401" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>({<span class="dt">length</span><span class="op">:</span> <span class="dv">366</span>}<span class="op">,</span> (_<span class="op">,</span> i) <span class="kw">=&gt;</span> i)</span>
<span id="cb5-402"><a href="#cb5-402" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span>(viewof dotyInput<span class="op">,</span> leapscrub[<span class="dv">0</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-23" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-24" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-25" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-26" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-27" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-28" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-29" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-30" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-31" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-32" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-33" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-34" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-35" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-36" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-37" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-38" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-39" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-40" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-41" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-42" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-43" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-44" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-45" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-46" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-47" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-48" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-49" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-50" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-51" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-52" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-53" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-54" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-55" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-56" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-57" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-58" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-59" data-nodetype="expression">

</div>
</div>
</div>
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="404" data-source-offset="-6472"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 403;"><span id="cb6-404"><a href="#cb6-404" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">set</span>(input<span class="op">,</span> value) {</span>
<span id="cb6-405"><a href="#cb6-405" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="at">value</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb6-406"><a href="#cb6-406" aria-hidden="true" tabindex="-1"></a>  input<span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">Event</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-407"><a href="#cb6-407" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-408"><a href="#cb6-408" aria-hidden="true" tabindex="-1"></a><span class="co">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb6-409"><a href="#cb6-409" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">Scrubber</span>(values<span class="op">,</span> {</span>
<span id="cb6-410"><a href="#cb6-410" aria-hidden="true" tabindex="-1"></a>  format <span class="op">=</span> value <span class="kw">=&gt;</span> value<span class="op">,</span></span>
<span id="cb6-411"><a href="#cb6-411" aria-hidden="true" tabindex="-1"></a>  initial <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb6-412"><a href="#cb6-412" aria-hidden="true" tabindex="-1"></a>  direction <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb6-413"><a href="#cb6-413" aria-hidden="true" tabindex="-1"></a>  delay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-414"><a href="#cb6-414" aria-hidden="true" tabindex="-1"></a>  autoplay <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-415"><a href="#cb6-415" aria-hidden="true" tabindex="-1"></a>  loop <span class="op">=</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb6-416"><a href="#cb6-416" aria-hidden="true" tabindex="-1"></a>  loopDelay <span class="op">=</span> <span class="kw">null</span><span class="op">,</span></span>
<span id="cb6-417"><a href="#cb6-417" aria-hidden="true" tabindex="-1"></a>  alternate <span class="op">=</span> <span class="kw">false</span><span class="op">,</span></span>
<span id="cb6-418"><a href="#cb6-418" aria-hidden="true" tabindex="-1"></a>  inputStyle <span class="op">=</span> <span class="st">""</span></span>
<span id="cb6-419"><a href="#cb6-419" aria-hidden="true" tabindex="-1"></a>} <span class="op">=</span> {}) {</span>
<span id="cb6-420"><a href="#cb6-420" aria-hidden="true" tabindex="-1"></a>  values <span class="op">=</span> <span class="bu">Array</span><span class="op">.</span><span class="fu">from</span>(values)<span class="op">;</span></span>
<span id="cb6-421"><a href="#cb6-421" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> form <span class="op">=</span> <span class="fu">html</span><span class="vs">`&lt;form style="font: 18px var(--monospace); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb6-422"><a href="#cb6-422" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;button name=b type=button style="margin-right: 0.4em; width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb6-423"><a href="#cb6-423" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb6-424"><a href="#cb6-424" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;input name=i type=range min=0 max=</span><span class="sc">${</span>values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="vs"> value=</span><span class="sc">${</span>initial<span class="sc">}</span><span class="vs"> step=1 style=</span><span class="sc">${</span>inputStyle<span class="sc">}</span><span class="vs">&gt;</span></span>
<span id="cb6-425"><a href="#cb6-425" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;output name=o style="margin-left: 0.4em;"&gt;&lt;/output&gt;</span></span>
<span id="cb6-426"><a href="#cb6-426" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/label&gt;</span></span>
<span id="cb6-427"><a href="#cb6-427" aria-hidden="true" tabindex="-1"></a><span class="vs">&lt;/form&gt;`</span><span class="op">;</span></span>
<span id="cb6-428"><a href="#cb6-428" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-429"><a href="#cb6-429" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-430"><a href="#cb6-430" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-431"><a href="#cb6-431" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">start</span>() {</span>
<span id="cb6-432"><a href="#cb6-432" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Stop"</span><span class="op">;</span></span>
<span id="cb6-433"><a href="#cb6-433" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb6-434"><a href="#cb6-434" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> interval <span class="op">=</span> <span class="pp">setInterval</span>(tick<span class="op">,</span> delay)<span class="op">;</span></span>
<span id="cb6-435"><a href="#cb6-435" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-436"><a href="#cb6-436" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">stop</span>() {</span>
<span id="cb6-437"><a href="#cb6-437" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">textContent</span> <span class="op">=</span> <span class="st">"Play"</span><span class="op">;</span></span>
<span id="cb6-438"><a href="#cb6-438" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-439"><a href="#cb6-439" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (timer <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearTimeout</span>(timer)<span class="op">,</span> timer <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-440"><a href="#cb6-440" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-441"><a href="#cb6-441" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-442"><a href="#cb6-442" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">running</span>() {</span>
<span id="cb6-443"><a href="#cb6-443" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> frame <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> timer <span class="op">!==</span> <span class="kw">null</span> <span class="op">||</span> interval <span class="op">!==</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-444"><a href="#cb6-444" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-445"><a href="#cb6-445" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">tick</span>() {</span>
<span id="cb6-446"><a href="#cb6-446" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> (direction <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">?</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">:</span> direction <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="dv">0</span> <span class="op">:</span> <span class="kw">NaN</span>)) {</span>
<span id="cb6-447"><a href="#cb6-447" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (<span class="op">!</span>loop) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-448"><a href="#cb6-448" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (alternate) direction <span class="op">=</span> <span class="op">-</span>direction<span class="op">;</span></span>
<span id="cb6-449"><a href="#cb6-449" aria-hidden="true" tabindex="-1"></a>      <span class="cf">if</span> (loopDelay <span class="op">!==</span> <span class="kw">null</span>) {</span>
<span id="cb6-450"><a href="#cb6-450" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (frame <span class="op">!==</span> <span class="kw">null</span>) <span class="fu">cancelAnimationFrame</span>(frame)<span class="op">,</span> frame <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-451"><a href="#cb6-451" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> (interval <span class="op">!==</span> <span class="kw">null</span>) <span class="pp">clearInterval</span>(interval)<span class="op">,</span> interval <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb6-452"><a href="#cb6-452" aria-hidden="true" tabindex="-1"></a>        timer <span class="op">=</span> <span class="pp">setTimeout</span>(() <span class="kw">=&gt;</span> (<span class="fu">step</span>()<span class="op">,</span> <span class="fu">start</span>())<span class="op">,</span> loopDelay)<span class="op">;</span></span>
<span id="cb6-453"><a href="#cb6-453" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb6-454"><a href="#cb6-454" aria-hidden="true" tabindex="-1"></a>      }</span>
<span id="cb6-455"><a href="#cb6-455" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb6-456"><a href="#cb6-456" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (delay <span class="op">===</span> <span class="kw">null</span>) frame <span class="op">=</span> <span class="fu">requestAnimationFrame</span>(tick)<span class="op">;</span></span>
<span id="cb6-457"><a href="#cb6-457" aria-hidden="true" tabindex="-1"></a>    <span class="fu">step</span>()<span class="op">;</span></span>
<span id="cb6-458"><a href="#cb6-458" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-459"><a href="#cb6-459" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">step</span>() {</span>
<span id="cb6-460"><a href="#cb6-460" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction <span class="op">+</span> values<span class="op">.</span><span class="at">length</span>) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb6-461"><a href="#cb6-461" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-462"><a href="#cb6-462" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-463"><a href="#cb6-463" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">oninput</span> <span class="op">=</span> <span class="bu">event</span> <span class="kw">=&gt;</span> {</span>
<span id="cb6-464"><a href="#cb6-464" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="bu">event</span> <span class="op">&amp;&amp;</span> <span class="bu">event</span><span class="op">.</span><span class="at">isTrusted</span> <span class="op">&amp;&amp;</span> <span class="fu">running</span>()) <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-465"><a href="#cb6-465" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">value</span> <span class="op">=</span> values[form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span>]<span class="op">;</span></span>
<span id="cb6-466"><a href="#cb6-466" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">o</span><span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="fu">format</span>(form<span class="op">.</span><span class="at">value</span><span class="op">,</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span><span class="op">,</span> values)<span class="op">;</span></span>
<span id="cb6-467"><a href="#cb6-467" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb6-468"><a href="#cb6-468" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">b</span><span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb6-469"><a href="#cb6-469" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">running</span>()) <span class="cf">return</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-470"><a href="#cb6-470" aria-hidden="true" tabindex="-1"></a>    direction <span class="op">=</span> alternate <span class="op">&amp;&amp;</span> form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">===</span> values<span class="op">.</span><span class="at">length</span> <span class="op">-</span> <span class="dv">1</span> <span class="op">?</span> <span class="op">-</span><span class="dv">1</span> <span class="op">:</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb6-471"><a href="#cb6-471" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">=</span> (form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="at">valueAsNumber</span> <span class="op">+</span> direction) <span class="op">%</span> values<span class="op">.</span><span class="at">length</span><span class="op">;</span></span>
<span id="cb6-472"><a href="#cb6-472" aria-hidden="true" tabindex="-1"></a>    form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">dispatchEvent</span>(<span class="kw">new</span> <span class="bu">CustomEvent</span>(<span class="st">"input"</span><span class="op">,</span> {<span class="dt">bubbles</span><span class="op">:</span> <span class="kw">true</span>}))<span class="op">;</span></span>
<span id="cb6-473"><a href="#cb6-473" aria-hidden="true" tabindex="-1"></a>    <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb6-474"><a href="#cb6-474" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb6-475"><a href="#cb6-475" aria-hidden="true" tabindex="-1"></a>  form<span class="op">.</span><span class="at">i</span><span class="op">.</span><span class="fu">oninput</span>()<span class="op">;</span></span>
<span id="cb6-476"><a href="#cb6-476" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (autoplay) <span class="fu">start</span>()<span class="op">;</span></span>
<span id="cb6-477"><a href="#cb6-477" aria-hidden="true" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">stop</span>()<span class="op">;</span></span>
<span id="cb6-478"><a href="#cb6-478" aria-hidden="true" tabindex="-1"></a>  Inputs<span class="op">.</span><span class="fu">disposal</span>(form)<span class="op">.</span><span class="fu">then</span>(stop)<span class="op">;</span></span>
<span id="cb6-479"><a href="#cb6-479" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> form<span class="op">;</span></span>
<span id="cb6-480"><a href="#cb6-480" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-481"><a href="#cb6-481" aria-hidden="true" tabindex="-1"></a>calYear <span class="op">=</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Monday"</span> <span class="op">?</span> <span class="dv">6</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Tuesday"</span> <span class="op">?</span> <span class="dv">7</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Wednesday"</span> <span class="op">?</span> <span class="dv">2</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Thursday"</span> <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Friday"</span> <span class="op">?</span> <span class="dv">9</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Saturday"</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="op">!</span>leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Sunday"</span> <span class="op">?</span> <span class="dv">11</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Monday"</span> <span class="op">?</span> <span class="dv">12</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Tuesday"</span> <span class="op">?</span> <span class="dv">24</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Wednesday"</span> <span class="op">?</span> <span class="dv">8</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Thursday"</span> <span class="op">?</span> <span class="dv">20</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Friday"</span> <span class="op">?</span> <span class="dv">4</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Saturday"</span> <span class="op">?</span> <span class="dv">16</span> <span class="op">:</span> leapInput <span class="op">&amp;&amp;</span> dotwInput <span class="op">==</span> <span class="st">"Sunday"</span> <span class="op">?</span> <span class="dv">28</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb6-482"><a href="#cb6-482" aria-hidden="true" tabindex="-1"></a>datesCal <span class="op">=</span> d3<span class="op">.</span><span class="fu">utcDays</span>(<span class="kw">new</span> <span class="bu">Date</span>(calYear<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span> <span class="kw">new</span> <span class="bu">Date</span>(calYear<span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">0</span>))<span class="op">;</span></span>
<span id="cb6-483"><a href="#cb6-483" aria-hidden="true" tabindex="-1"></a>months <span class="op">=</span> [<span class="st">"January"</span><span class="op">,</span> <span class="st">"February"</span><span class="op">,</span> <span class="st">"March"</span><span class="op">,</span> <span class="st">"April"</span><span class="op">,</span> <span class="st">"May"</span><span class="op">,</span> <span class="st">"June"</span><span class="op">,</span> <span class="st">"July"</span><span class="op">,</span> <span class="st">"August"</span><span class="op">,</span> <span class="st">"September"</span><span class="op">,</span> <span class="st">"October"</span><span class="op">,</span> <span class="st">"November"</span><span class="op">,</span> <span class="st">"December"</span>]<span class="op">;</span></span>
<span id="cb6-484"><a href="#cb6-484" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">unix2doty</span>(unix) {</span>
<span id="cb6-485"><a href="#cb6-485" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> dote <span class="op">=</span> (</span>
<span id="cb6-486"><a href="#cb6-486" aria-hidden="true" tabindex="-1"></a>    unix <span class="op">??</span> <span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>()</span>
<span id="cb6-487"><a href="#cb6-487" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">86400000</span> <span class="op">+</span> <span class="dv">719468</span><span class="op">,</span></span>
<span id="cb6-488"><a href="#cb6-488" aria-hidden="true" tabindex="-1"></a>    socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((</span>
<span id="cb6-489"><a href="#cb6-489" aria-hidden="true" tabindex="-1"></a>      dote <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> dote</span>
<span id="cb6-490"><a href="#cb6-490" aria-hidden="true" tabindex="-1"></a>      <span class="op">:</span> dote <span class="op">-</span> <span class="dv">146096</span></span>
<span id="cb6-491"><a href="#cb6-491" aria-hidden="true" tabindex="-1"></a>    ) <span class="op">/</span> <span class="dv">146097</span>)<span class="op">,</span></span>
<span id="cb6-492"><a href="#cb6-492" aria-hidden="true" tabindex="-1"></a>  dotc <span class="op">=</span> dote <span class="op">-</span> socy <span class="op">*</span> <span class="dv">146097</span><span class="op">,</span></span>
<span id="cb6-493"><a href="#cb6-493" aria-hidden="true" tabindex="-1"></a>  yotc <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((dotc</span>
<span id="cb6-494"><a href="#cb6-494" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">1460</span>)</span>
<span id="cb6-495"><a href="#cb6-495" aria-hidden="true" tabindex="-1"></a>    <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">36524</span>)</span>
<span id="cb6-496"><a href="#cb6-496" aria-hidden="true" tabindex="-1"></a>    <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(dotc <span class="op">/</span> <span class="dv">146096</span>)</span>
<span id="cb6-497"><a href="#cb6-497" aria-hidden="true" tabindex="-1"></a>  ) <span class="op">/</span> <span class="dv">365</span>)<span class="op">;</span></span>
<span id="cb6-498"><a href="#cb6-498" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> dotc <span class="op">-</span> (yotc <span class="op">*</span> <span class="dv">365</span></span>
<span id="cb6-499"><a href="#cb6-499" aria-hidden="true" tabindex="-1"></a>      <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">4</span>)</span>
<span id="cb6-500"><a href="#cb6-500" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yotc <span class="op">/</span> <span class="dv">100</span>)</span>
<span id="cb6-501"><a href="#cb6-501" aria-hidden="true" tabindex="-1"></a>  )}</span>
<span id="cb6-502"><a href="#cb6-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-503"><a href="#cb6-503" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">date2dote</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-504"><a href="#cb6-504" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> socy <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((year <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">?</span> year <span class="op">:</span> year <span class="op">-</span> <span class="dv">399</span>) <span class="op">/</span> <span class="dv">400</span>)<span class="op">,</span></span>
<span id="cb6-505"><a href="#cb6-505" aria-hidden="true" tabindex="-1"></a>      yote <span class="op">=</span> year <span class="op">-</span> socy <span class="op">*</span> <span class="dv">400</span><span class="op">;</span></span>
<span id="cb6-506"><a href="#cb6-506" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [socy <span class="op">*</span> <span class="dv">146097</span> <span class="op">+</span> yote <span class="op">*</span> <span class="dv">365</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">4</span>) <span class="op">-</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yote <span class="op">/</span> <span class="dv">100</span>) <span class="op">+</span> doty<span class="op">,</span> zone]</span>
<span id="cb6-507"><a href="#cb6-507" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-508"><a href="#cb6-508" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2deco</span>(yearDoty <span class="op">=</span> [<span class="dv">1969</span><span class="op">,</span> <span class="dv">306</span>]<span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-509"><a href="#cb6-509" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> yd <span class="op">=</span> <span class="fu">dote2date</span>(<span class="op">...</span><span class="fu">date2dote</span>(yearDoty[<span class="dv">0</span>]<span class="op">,</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(yearDoty[<span class="dv">1</span>])<span class="op">,</span> zone))<span class="op">;</span></span>
<span id="cb6-510"><a href="#cb6-510" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="vs">`</span><span class="sc">${</span>yd[<span class="dv">0</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">4</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}</span><span class="vs">+</span><span class="sc">${</span>yd[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">padStart</span>(<span class="dv">3</span><span class="op">,</span> <span class="st">"0"</span>)<span class="sc">}${</span></span>
<span id="cb6-511"><a href="#cb6-511" aria-hidden="true" tabindex="-1"></a>        yearDoty[<span class="dv">1</span>]<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">includes</span>(<span class="st">"."</span>) <span class="op">?</span> <span class="st">"."</span> <span class="op">+</span> (</span>
<span id="cb6-512"><a href="#cb6-512" aria-hidden="true" tabindex="-1"></a>            (yearDoty[<span class="dv">1</span>] <span class="op">&gt;</span> <span class="dv">0</span>) <span class="op">?</span> (yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()</span>
<span id="cb6-513"><a href="#cb6-513" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="op">...</span>(yearDoty[<span class="dv">1</span>] <span class="op">-</span> zone)<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="st">"."</span>)<span class="op">.</span><span class="fu">pop</span>()]<span class="op">.</span><span class="fu">map</span>(</span>
<span id="cb6-514"><a href="#cb6-514" aria-hidden="true" tabindex="-1"></a>                (e<span class="op">,</span> i<span class="op">,</span> a) <span class="kw">=&gt;</span> (i <span class="op">+</span> <span class="dv">1</span> <span class="op">===</span> a<span class="op">.</span><span class="at">length</span>) <span class="op">?</span> <span class="dv">10</span> <span class="op">-</span> e <span class="op">:</span> <span class="dv">9</span> <span class="op">-</span> e</span>
<span id="cb6-515"><a href="#cb6-515" aria-hidden="true" tabindex="-1"></a>            )<span class="op">.</span><span class="fu">join</span>(<span class="st">""</span>)</span>
<span id="cb6-516"><a href="#cb6-516" aria-hidden="true" tabindex="-1"></a>        ) <span class="op">:</span> <span class="st">""</span></span>
<span id="cb6-517"><a href="#cb6-517" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">`</span></span>
<span id="cb6-518"><a href="#cb6-518" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-519"><a href="#cb6-519" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">deco2doty</span>(timestamp <span class="op">=</span> <span class="st">"1969+306.00000Z"</span>) {</span>
<span id="cb6-520"><a href="#cb6-520" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> arr <span class="op">=</span> timestamp<span class="op">.</span><span class="fu">toString</span>()<span class="op">.</span><span class="fu">split</span>(<span class="ss">/</span><span class="sc">(?</span><span class="ss">=</span><span class="sc">[+-]|[a-zA-Z])</span><span class="ss">/</span><span class="op">,</span> <span class="dv">3</span>)<span class="op">;</span></span>
<span id="cb6-521"><a href="#cb6-521" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> (arr<span class="op">.</span><span class="at">length</span>) {</span>
<span id="cb6-522"><a href="#cb6-522" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span> <span class="cf">return</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-523"><a href="#cb6-523" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span> <span class="cf">return</span> (<span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">1</span>]))</span>
<span id="cb6-524"><a href="#cb6-524" aria-hidden="true" tabindex="-1"></a>            <span class="op">?</span> [<span class="fu">unix2doty</span>(<span class="bu">Date</span><span class="op">.</span><span class="fu">now</span>())[<span class="dv">0</span>]<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="fu">zone2hour</span>(arr[<span class="dv">1</span>]) <span class="op">/</span> <span class="dv">24</span>]</span>
<span id="cb6-525"><a href="#cb6-525" aria-hidden="true" tabindex="-1"></a>            <span class="op">:</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb6-526"><a href="#cb6-526" aria-hidden="true" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb6-527"><a href="#cb6-527" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [<span class="pp">parseFloat</span>(arr[<span class="dv">0</span>])<span class="op">,</span> <span class="pp">parseFloat</span>(arr[<span class="dv">1</span>])<span class="op">,</span> <span class="ss">/</span><span class="sc">^[a-zA-Z]+$</span><span class="ss">/</span><span class="op">.</span><span class="fu">test</span>(arr[<span class="dv">2</span>])</span>
<span id="cb6-528"><a href="#cb6-528" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="fu">zone2hour</span>(arr[<span class="dv">2</span>]) <span class="op">/</span> <span class="dv">24</span></span>
<span id="cb6-529"><a href="#cb6-529" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="pp">parseFloat</span>(arr[<span class="dv">2</span>]<span class="op">.</span><span class="fu">replace</span>(<span class="ss">/</span><span class="sc">([+-])</span><span class="ss">/</span><span class="op">,</span> <span class="st">"$1</span><span class="sc">\.</span><span class="st">"</span>))]<span class="op">;</span></span>
<span id="cb6-530"><a href="#cb6-530" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-531"><a href="#cb6-531" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">zone2hour</span>(zone <span class="op">=</span> <span class="st">"Z"</span>) {</span>
<span id="cb6-532"><a href="#cb6-532" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (zone <span class="op">=</span> zone<span class="op">.</span><span class="fu">toUpperCase</span>()) <span class="op">==</span> <span class="st">"Z"</span> <span class="op">?</span> <span class="dv">0</span></span>
<span id="cb6-533"><a href="#cb6-533" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"@"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"J"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">64</span></span>
<span id="cb6-534"><a href="#cb6-534" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&gt;</span> <span class="st">"J"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&lt;</span> <span class="st">"N"</span> <span class="op">?</span> zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">65</span></span>
<span id="cb6-535"><a href="#cb6-535" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone <span class="op">&lt;</span> <span class="st">"Z"</span> <span class="op">&amp;&amp;</span> zone <span class="op">&gt;</span> <span class="st">"M"</span> <span class="op">?</span> <span class="op">-</span>(zone<span class="op">.</span><span class="fu">charCodeAt</span>() <span class="op">-</span> <span class="dv">77</span>)</span>
<span id="cb6-536"><a href="#cb6-536" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> zone<span class="op">;</span></span>
<span id="cb6-537"><a href="#cb6-537" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-538"><a href="#cb6-538" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2unix</span>(year <span class="op">=</span> <span class="dv">1969</span><span class="op">,</span> doty <span class="op">=</span> <span class="dv">306</span><span class="op">,</span> zone <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb6-539"><a href="#cb6-539" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> (<span class="fu">date2dote</span>(year<span class="op">,</span> doty<span class="op">,</span> zone) <span class="op">-</span> <span class="dv">719468</span>) <span class="op">*</span> <span class="dv">86400000</span><span class="op">;</span></span>
<span id="cb6-540"><a href="#cb6-540" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-541"><a href="#cb6-541" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2isoc</span>(yd) {</span>
<span id="cb6-542"><a href="#cb6-542" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="fu">doty2unix</span>(<span class="op">...</span>yd))</span>
<span id="cb6-543"><a href="#cb6-543" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-544"><a href="#cb6-544" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">doty2greg</span>(doty <span class="op">=</span> <span class="dv">306</span>) {</span>
<span id="cb6-545"><a href="#cb6-545" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> m <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>((<span class="dv">5</span> <span class="op">*</span> doty <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">153</span>)<span class="op">;</span></span>
<span id="cb6-546"><a href="#cb6-546" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [</span>
<span id="cb6-547"><a href="#cb6-547" aria-hidden="true" tabindex="-1"></a>      <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(m <span class="op">&lt;</span> <span class="dv">10</span> <span class="op">?</span> m <span class="op">+</span> <span class="dv">3</span> <span class="op">:</span> m <span class="op">-</span> <span class="dv">9</span>)<span class="op">,</span></span>
<span id="cb6-548"><a href="#cb6-548" aria-hidden="true" tabindex="-1"></a>      <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(doty <span class="op">-</span> (<span class="dv">153</span> <span class="op">*</span> m <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> <span class="dv">2</span>)</span>
<span id="cb6-549"><a href="#cb6-549" aria-hidden="true" tabindex="-1"></a>    ]<span class="op">;</span></span>
<span id="cb6-550"><a href="#cb6-550" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-551"><a href="#cb6-551" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2doty</span>(month <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> day <span class="op">=</span> <span class="dv">1</span>) {</span>
<span id="cb6-552"><a href="#cb6-552" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">floor</span>(</span>
<span id="cb6-553"><a href="#cb6-553" aria-hidden="true" tabindex="-1"></a>        (<span class="dv">153</span> <span class="op">*</span> (month <span class="op">&gt;</span> <span class="dv">2</span> <span class="op">?</span> month <span class="op">-</span> <span class="dv">3</span> <span class="op">:</span> month <span class="op">+</span> <span class="dv">9</span>) <span class="op">+</span> <span class="dv">2</span>) <span class="op">/</span> <span class="dv">5</span> <span class="op">+</span> day <span class="op">-</span> <span class="dv">1</span></span>
<span id="cb6-554"><a href="#cb6-554" aria-hidden="true" tabindex="-1"></a>)}</span>
<span id="cb6-555"><a href="#cb6-555" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">greg2year</span>(year <span class="op">=</span> <span class="dv">1970</span><span class="op">,</span> month <span class="op">=</span> <span class="dv">1</span>) { <span class="cf">return</span> year <span class="op">-</span> (month <span class="op">&lt;</span> <span class="dv">3</span>) }</span>
<span id="cb6-556"><a href="#cb6-556" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">isoc2doty</span>(isoc) {</span>
<span id="cb6-557"><a href="#cb6-557" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> [<span class="fu">greg2year</span>(isoc<span class="op">.</span><span class="fu">getFullYear</span>()<span class="op">,</span> isoc<span class="op">.</span><span class="fu">getUTCMonth</span>() <span class="op">+</span> <span class="dv">1</span>)<span class="op">,</span> <span class="fu">greg2doty</span>(isoc<span class="op">.</span><span class="fu">getUTCMonth</span>() <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> isoc<span class="op">.</span><span class="fu">getUTCDate</span>())]<span class="op">;</span></span>
<span id="cb6-558"><a href="#cb6-558" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-559"><a href="#cb6-559" aria-hidden="true" tabindex="-1"></a>leapInput <span class="op">=</span> leapscrub[<span class="dv">1</span>]</span>
<span id="cb6-560"><a href="#cb6-560" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">addN</span>(d) { <span class="cf">return</span> d <span class="op">+</span> <span class="dv">365</span> <span class="op">+</span> leapInput }</span>
<span id="cb6-561"><a href="#cb6-561" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">subN</span>(d) { <span class="cf">return</span> d <span class="op">-</span> <span class="dv">365</span> <span class="op">-</span> leapInput }</span>
<span id="cb6-562"><a href="#cb6-562" aria-hidden="true" tabindex="-1"></a>dates <span class="op">=</span> d3<span class="op">.</span><span class="fu">utcDays</span>(<span class="kw">new</span> <span class="bu">Date</span>(<span class="dv">1999</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">,</span> <span class="kw">new</span> <span class="bu">Date</span>(<span class="dv">2000</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">28</span> <span class="op">+</span> leapInput))<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-60" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-61" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-62" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-63" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-64" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-65" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-66" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-67" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-68" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-69" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-70" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-71" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-72" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-73" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-74" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-75" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-76" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-77" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-78" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display hidden">
<div>
<div id="ojs-cell-5-79" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<style>
h6.relative.anchored {
  margin-top: -25px;
  margin-bottom: -2px;
}
<!-- .calplot { -->
<!--   margin-top: -15px; -->
<!--   margin-bottom: -15px; -->
<!-- } -->
#decalendar > g.cluster-label {
  transform: translate(305px, 50px) !important;
}
span.cal-swatch {
  font-size: 14px !important;
}
form.oi-3a86ea-checkbox {
  max-width: 700px;
}
div.cell:has(form.oi-3a86ea-toggle) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}
div.observablehq > div:has(form.oi-3a86ea-toggle) {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
}
form.oi-3a86ea-toggle {
  max-width: 50% !important;
  --label-width: 90px;
}
form.oi-3a86ea {
  --input-width: 200px;
  padding-right: 9px;
}
form.oi-3a86ea-toggle > label {
  width: 78px;
}
div > form > label {
  --label-width: 130px;
}
p:has(.radiotitle) {
  margin-top: -8px !important;
  margin-bottom: -8px;
  text-align: center;
}
</style>


<!-- -->

<div class="ojs-auto-generated hidden">
<script type="ojs-module-contents">
eyJjb250ZW50cyI6WyAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7c3R5bGVkRGVjb0RvdHl9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREb3R5SW5wdXR9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0yIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREZWNvWWVhcn0rJHtzdHlsZWREZWNvRG90eTF9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0zIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREZWNvWWVhcjF9JHtkb3R3MHNpZ259JHtzdHlsZWREb3R3MGRvdHl9KyR7c3R5bGVkRG90d308L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTQifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3N0eWxlZERlY29Eb3R5Mn08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTUifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3N0eWxlZERvdHcwZG90eTF9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC02In0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREb3R3MX08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTcifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3N0eWxlZFdlZWsxfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtOCJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7c3R5bGVkRG90dzBkb3R5Mn08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTkifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3N0eWxlZERvdHkwZG90d308L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTEwIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREZWNvWWVhcjJ9KzfDlyR7c3R5bGVkV2Vla30rJHtzdHlsZWREb3R3Mn08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTExIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWRXZWVrMn0rJHtzdHlsZWREb3R3NH09JHtzdHlsZWREZWNvRG90eTN9KyR7c3R5bGVkRG90eTBkb3R3MX08L3NwYW4+YCIsICJjZWxsTmFtZSI6Im9qcy1lbGVtZW50LWlkLTEyIn0sICB7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJpbmxpbmUiOiJ0cnVlIiwic291cmNlIjoiaHRsLmh0bWxgPHNwYW4+JHtzdHlsZWREZWNvWWVhcn0rJHtzdHlsZWREZWNvRG90eTF9w7cke3N0eWxlZE5kYXlzfT0ke3N0eWxlZEZyYWNZZWFyfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMTMifSwgIHsibWV0aG9kTmFtZSI6ImludGVycHJldCIsImlubGluZSI6InRydWUiLCJzb3VyY2UiOiJodGwuaHRtbGA8c3Bhbj4ke3N0eWxlZE5leHRZZWFyfS0ke3N0eWxlZERlY29UbWludXN9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xNCJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7bmV4dFllYXJ9PC9zcGFuPmAiLCAiY2VsbE5hbWUiOiJvanMtZWxlbWVudC1pZC0xNSJ9LCAgeyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiaW5saW5lIjoidHJ1ZSIsInNvdXJjZSI6Imh0bC5odG1sYDxzcGFuPiR7VG1pbnVzfTwvc3Bhbj5gIiwgImNlbGxOYW1lIjoib2pzLWVsZW1lbnQtaWQtMTYifV19
</script>
</div>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{laptev2024,
  author = {Laptev, Martin},
  title = {Dec {Date}},
  date = {2024},
  urldate = {2024},
  url = {https://maptv.github.io/dec/date},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-laptev2024" class="csl-entry quarto-appendix-citeas" role="listitem">
Laptev, Martin. 2024. <span>“Dec Date.”</span> 2024. <a href="https://maptv.github.io/dec/date">https://maptv.github.io/dec/date</a>.
</div></div></section></div></main> <!-- /main -->
<script src="../../asset/cite.js"></script>
<style>
#title-block-header > div.quarto-title-banner.page-columns.page-full { margin: 0px; padding: 0px; }
#title-block-header { margin: 0px; }
main#quarto-document-content { margin: 0px; padding: 0px; }
ul.navbar-nav.navbar-nav-scroll { -webkit-flex-direction: row; }
#quarto-sidebar { padding: 0px; overflow-x: hidden !important; }
#quarto-sidebar > * { padding: 0px; }
div.quarto-title-meta { padding-bottom: 8px; }
g.node.clickable.flowchart-label:hover { rect.basic.label-container { stroke: green!important; stroke-width:5px!important; } }
h2, h3 { margin: 0px !important; }
h3 { margin-top: 17px !important; }
div.cell.page-columns.page-full { height: 0px !important; }
@media only screen and (max-width: 991px) { #quarto-search { display: none !important; } #quarto-sidebar { padding: 0px 9px 0px 9px !important; } }
@media only screen and (max-width: 767px) { div.cell.page-columns.page-full { display: none !important; } }
</style>
<script src="../../asset/stamp.js"></script>
<script>
const tooltipTriggerList = document.querySelectorAll('[data-bs-toggle="tooltip"]')
const tooltipList = [...tooltipTriggerList].map(tooltipTriggerEl => new bootstrap.Tooltip(tooltipTriggerEl))
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3sibWV0aG9kTmFtZSI6ImludGVycHJldCIsImNlbGxOYW1lIjoib2pzLWNlbGwtMSIsImlubGluZSI6ZmFsc2UsInNvdXJjZSI6ImRlY1Bsb3QgPSBQbG90LnBsb3Qoe1xuICBwYWRkaW5nOiAwLFxuICB3aWR0aDogMTA4MCxcbiAgaGVpZ2h0OiAyNDAsXG4gIGNsYXNzTmFtZTogXCJjYWxwbG90XCIsXG4gIG1hcmdpblRvcDogLTIwLFxuICBtYXJnaW5MZWZ0OiAzMSxcbiAgbWFyZ2luQm90dG9tOiAzNSxcbiAgeToge3RpY2tTaXplOiAwLFxuICAgICAgbGFiZWw6IFwiRGF5IG9mIHRoZSBkZWsgICAgXCIsXG4gICAgICBkb21haW46IFstMSwgMCwgMSwgMiwgMywgNCwgNSwgNiwgNywgOCwgOV0sXG4gICAgICB0aWNrczogWzAsIDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDldLFxuICAgICAgdGlja1BhZGRpbmc6IC0xMixcbiAgICAgIGxhYmVsT2Zmc2V0OiAyMixcbiAgfSxcbiAgeDoge2ludGVydmFsOiAxLCB0aWNrczogMTgsIGxhYmVsOiBcIkRla1wiLCB0eXBlOiBcImJhbmRcIiwgdGlja1NpemU6IDAsIHRpY2tQYWRkaW5nOiAxLCBsYWJlbE9mZnNldDogMzR9LFxuICAvL2Z4OiB7dGlja0Zvcm1hdDogXCJcIn0sXG4gIHN0eWxlOiB7IGZvbnRTaXplOiBcIjIxcHhcIiB9LFxuICBjb2xvcjoge1xuICAgIHJhbmdlOiBkMy5zY2hlbWVQYXN0ZWwxLmNvbmNhdChkMy5zY2hlbWVQYXN0ZWwyLnNsaWNlKDQsIDcpKS5jb25jYXQoZDMuc2NoZW1lU2V0MVswXSksXG4gICAgZG9tYWluOiBtb250aHMuY29uY2F0KFwic2VsZWN0ZWRcIiksXG4gICAgY2xhc3NOYW1lOiBcImNhbFwiLFxuICB9LFxuICBtYXJrczogW1xuICAgIFBsb3QuY2VsbChkYXRlcywge1xuICAgICAgeDogKGQsIGkpID0+IE1hdGguZmxvb3IoaSAvIDEwKSxcbiAgICAgIHk6IChkLCBpKSA9PiBpICUgMTAsXG4gICAgICAvL2Z4OiBkID0+IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIGZpbGw6IGQgPT4gTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKSA9PT0gZG90eUlucHV0ID8gXCJzZWxlY3RlZFwiIDogbW9udGhzW2QuZ2V0VVRDTW9udGgoKV0sXG4gICAgICBzdHJva2U6IGQgPT4gTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKSA9PT0gZG90eUlucHV0ID8gXCJkYXJrb3JhbmdlXCIgOiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZVdpZHRoOiAzLFxuICAgICAgaW5zZXQ6IDAuNSxcbiAgICB9KSxcbiAgICBQbG90LnRleHQoZGF0ZXMsIHtcbiAgICAgIHg6IChkLCBpKSA9PiBNYXRoLmZsb29yKGkgLyAxMCksXG4gICAgICB5OiAoZCwgaSkgPT4gaSAlIDEwLFxuICAgICAgLy9meDogZCA9PiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBmaWxsOiBkID0+IE1hdGguZmxvb3IodW5peDJkb3R5KGQuZ2V0VGltZSgpKSkgPT09IGRvdHlJbnB1dCA/IFwid2hpdGVcIiA6IFwiYmxhY2tcIixcbiAgICAgIC8vc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICB0ZXh0OiAoZCwgaSkgPT4gU3RyaW5nKGkpLC8vLnBhZFN0YXJ0KDMsIFwiMFwiKS5zbGljZSgxKSxcbiAgICAgIG1vbm9zcGFjZTogdHJ1ZSxcbiAgICAgIGZvbnRTaXplOiBcIjEzcHhcIn0pXG4gIF1cbn0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTIiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJjYWxQbG90ID0gUGxvdC5wbG90KHtcbiAgcGFkZGluZzogMCxcbiAgd2lkdGg6IDEwMDAsXG4gIGhlaWdodDogMjAwLFxuICBjbGFzc05hbWU6IFwiY2FscGxvdFwiLFxuICBtYXJnaW5Ub3A6IDAsXG4gIG1hcmdpbkJvdHRvbTogNDAsXG4gIG1hcmdpbkxlZnQ6IDQyLFxuICB5OiB7dGlja0Zvcm1hdDogUGxvdC5mb3JtYXRXZWVrZGF5KFwiZW5cIiwgXCJzaG9ydFwiKSwgdGlja1NpemU6IDAsXG4gICAgICBkb21haW46IFstMSwgMCwgMSwgMiwgMywgNCwgNSwgNl0sXG4gICAgICB0aWNrczogWzAsIDEsIDIsIDMsIDQsIDUsIDZdLFxuICAgICAgdGlja1BhZGRpbmc6IDIsXG4gIH0sXG4gIHg6IHtpbnRlcnZhbDogMSwgdGlja3M6IDI2LCBsYWJlbDogXCJXZWVrXCIsIHR5cGU6IFwiYmFuZFwiLCB0aWNrU2l6ZTogMCwgdGlja1BhZGRpbmc6IDEsIGxhYmVsT2Zmc2V0OiAzNH0sXG4gIC8vZng6IHt0aWNrRm9ybWF0OiBcIlwifSxcbiAgc3R5bGU6IHsgZm9udFNpemU6IFwiMjBweFwiIH0sXG4gIGNvbG9yOiB7XG4gICAgcmFuZ2U6IGQzLnNjaGVtZVBhc3RlbDEuY29uY2F0KGQzLnNjaGVtZVBhc3RlbDIuc2xpY2UoNCwgNykpLmNvbmNhdChkMy5zY2hlbWVTZXQxWzBdKSxcbiAgICBkb21haW46IG1vbnRocy5jb25jYXQoXCJzZWxlY3RlZFwiKSxcbiAgICBjbGFzc05hbWU6IFwiY2FsXCIsXG4gIH0sXG4gIG1hcmtzOiBbXG4gICAgUGxvdC5jZWxsKGRhdGVzQ2FsLCB7XG4gICAgICB4OiBkID0+IGQzLnV0Y1dlZWsuY291bnQoZDMudXRjWWVhcihkKSwgZCksXG4gICAgICB5OiBkID0+IGQuZ2V0VVRDRGF5KCksXG4gICAgICAvL2Z4OiBkID0+IGQuZ2V0VVRDRnVsbFllYXIoKSxcbiAgICAgIGZpbGw6IGQgPT4gTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKSA9PT0gZG90eUlucHV0ID8gXCJzZWxlY3RlZFwiIDogbW9udGhzW2QuZ2V0VVRDTW9udGgoKV0sXG4gICAgICBzdHJva2U6IGQgPT4gTWF0aC5mbG9vcih1bml4MmRvdHkoZC5nZXRUaW1lKCkpKSA9PT0gZG90eUlucHV0ID8gXCJkYXJrb3JhbmdlXCIgOiBcIm5vbmVcIixcbiAgICAgIHN0cm9rZVdpZHRoOiAzLFxuICAgICAgaW5zZXQ6IC41LFxuICAgIH0pLFxuICAgIFBsb3QudGV4dChkYXRlc0NhbCwge1xuICAgICAgeDogZCA9PiBkMy51dGNXZWVrLmNvdW50KGQzLnV0Y1llYXIoZCksIGQpLFxuICAgICAgeTogZCA9PiBkLmdldFVUQ0RheSgpLFxuICAgICAgLy9meDogZCA9PiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICB0ZXh0OiBkID0+IGQuZ2V0VVRDRGF0ZSgpID09PSA3ID8gbW9udGhzW2QuZ2V0VVRDTW9udGgoKV0uc2xpY2UoMCwgMykgOiBcIlwiLFxuICAgICAgeTogLTEsXG4gICAgICBmcmFtZUFuY2hvcjogXCJsZWZ0XCIsXG4gICAgICBkeTogMixcbiAgICAgIG1vbm9zcGFjZTogdHJ1ZSxcbiAgICAgIGZvbnRTaXplOiBcIjE4cHhcIn0pLFxuICAgIFBsb3QudGV4dChkYXRlc0NhbCwge1xuICAgICAgeDogZCA9PiBkMy51dGNXZWVrLmNvdW50KGQzLnV0Y1llYXIoZCksIGQpLFxuICAgICAgeTogZCA9PiBkLmdldFVUQ0RheSgpLFxuICAgICAgLy9meDogZCA9PiBkLmdldFVUQ0Z1bGxZZWFyKCksXG4gICAgICBmaWxsOiBkID0+IE1hdGguZmxvb3IodW5peDJkb3R5KGQuZ2V0VGltZSgpKSkgPT09IGRvdHlJbnB1dCA/IFwid2hpdGVcIiA6IFwiYmxhY2tcIixcbiAgICAgIC8vc3Ryb2tlOiBcIndoaXRlXCIsXG4gICAgICB0ZXh0OiBkID0+IGQuZ2V0VVRDRGF0ZSgpLCAvL01hdGguZmxvb3IodW5peDJkb3R5KGQuZ2V0VGltZSgpKSkudG9TdHJpbmcoKS5wYWRTdGFydCgzLCBcIjBcIiksXG4gICAgICBtb25vc3BhY2U6IHRydWUsXG4gICAgICBmb250U2l6ZTogXCIxM3B4XCJ9KVxuICBdXG59KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC0zIiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidmlld29mIGRvdHlJbnB1dCA9IElucHV0cy5yYW5nZShbMCwgMzY0ICsgbGVhcElucHV0XSwge3ZhbHVlOiAzMDYsIHN0ZXA6IDEsIGxhYmVsOiBcIkRheSBvZiB0aGUgeWVhclwifSk7XG52aWV3b2YgbW9udGhJbnB1dCA9IHRyYW5zZm9ybUlucHV0KFxuICBJbnB1dHMucmFuZ2UoWzEsIDEyXSwge3N0ZXA6IDEsIGxhYmVsOiBcIk1vbnRoXCJ9KSxcbiAge2JpbmQ6IHZpZXdvZiBkb3R5SW5wdXQsIHRyYW5zZm9ybTogZG90eTJtb250aCwgaW52ZXJ0OiBtb250aDJkb3R5fVxuKTtcbnZpZXdvZiBkb3R5SW5wdXQxID0gdHJhbnNmb3JtSW5wdXQoXG4gIElucHV0cy5yYW5nZShbLTM2NSAtIGxlYXBJbnB1dCwgLTFdLCB7c3RlcDogMSwgbGFiZWw6IFwiRGF5IG9mIHRoZSB5ZWFyXCJ9KSxcbiAge2JpbmQ6IHZpZXdvZiBkb3R5SW5wdXQsIHRyYW5zZm9ybTogc3ViTiwgaW52ZXJ0OiBhZGROfVxuKTtcbnZpZXdvZiBkb3RtSW5wdXQgPSB0cmFuc2Zvcm1JbnB1dChcbiAgSW5wdXRzLnJhbmdlKFsxLCAzMV0sIHtzdGVwOiAxLCBsYWJlbDogXCJEYXkgb2YgdGhlIG1vbnRoXCJ9KSxcbiAge2JpbmQ6IHZpZXdvZiBkb3R5SW5wdXQsIHRyYW5zZm9ybTogZG90eTJkb3RtLCBpbnZlcnQ6ICh4ID0+IE1hdGguZmxvb3IoKCAxNTMgKiAoXG4gICAgdmlld29mIG1vbnRoSW5wdXQudmFsdWUgPiAyXG4gICAgPyB2aWV3b2YgbW9udGhJbnB1dC52YWx1ZSAtIDNcbiAgICA6IHZpZXdvZiBtb250aElucHV0LnZhbHVlICsgOSkgKyAyXG4gICkgLyA1ICsgeCAtIDFcbikpfSk7XG52aWV3b2YgbGVhcHNjcnViID0gSW5wdXRzLmZvcm0oW1xuICBTY3J1YmJlcihudW1iZXJzLCB7YXV0b3BsYXk6IGZhbHNlLCBhbHRlcm5hdGU6IHRydWUsIGRlbGF5OiA4Ni40LCBsb29wRGVsYXk6IDg2NCwgZm9ybWF0OiB5ID0+IFwiXCIsIGlucHV0U3R5bGU6IFwiZGlzcGxheTpub25lO1wifSksXG4gIElucHV0cy50b2dnbGUoe2xhYmVsOiBcIkxlYXAgeWVhclwiLCB2YWx1ZTogZmFsc2V9KSxcbl0pXG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJjZWxsTmFtZSI6Im9qcy1jZWxsLTQiLCJpbmxpbmUiOmZhbHNlLCJzb3VyY2UiOiJ2aWV3b2YgZG90d0lucHV0ID0gSW5wdXRzLnJhZGlvKFtcbiAgXCJTdW5kYXlcIiwgXCJNb25kYXlcIiwgXCJUdWVzZGF5XCIsIFwiV2VkbmVzZGF5XCIsIFwiVGh1cnNkYXlcIiwgXCJGcmlkYXlcIiwgXCJTYXR1cmRheVwiLFxuICBdLCB7dmFsdWU6IFwiU3VuZGF5XCJ9KVxuIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0IiwiY2VsbE5hbWUiOiJvanMtY2VsbC01IiwiaW5saW5lIjpmYWxzZSwic291cmNlIjoidW5peCA9IHtcbiAgd2hpbGUodHJ1ZSkge1xuICAgIHlpZWxkIERhdGUubm93KCk7XG4gIH1cbn1cbi8vIGh0dHA6Ly9ob3dhcmRoaW5uYW50LmdpdGh1Yi5pby9kYXRlX2FsZ29yaXRobXMuaHRtbCNjaXZpbF9mcm9tX2RheXNcbmZ1bmN0aW9uIHVuaXgyZG90ZSh1bml4LCB6b25lLCBvZmZzZXQgPSA3MTk0NjgpIHtcbiAgcmV0dXJuIFsodW5peCA/PyBEYXRlLm5vdygpKSAvIDg2NDAwMDAwICsgKFxuICAgIHpvbmUgPSB6b25lID8/IC1NYXRoLnJvdW5kKFxuICAgICAgKG5ldyBEYXRlKS5nZXRUaW1lem9uZU9mZnNldCgpIC8gMTQ0KVxuICAgICkgLyAxMCArIG9mZnNldCwgem9uZV1cbn1cbmZ1bmN0aW9uIGRvdGUyZGF0ZShkb3RlLCB6b25lID0gMCkge1xuICBjb25zdCBzb2N5ID0gTWF0aC5mbG9vcigoXG4gICAgICBkb3RlID49IDAgPyBkb3RlXG4gICAgICA6IGRvdGUgLSAxNDYwOTZcbiAgICApIC8gMTQ2MDk3KSxcbiAgZG90YyA9IGRvdGUgLSBzb2N5ICogMTQ2MDk3LFxuICB5b3RjID0gTWF0aC5mbG9vcigoZG90Y1xuICAgIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MClcbiAgICArIE1hdGguZmxvb3IoZG90YyAvIDM2NTI0KVxuICAgIC0gTWF0aC5mbG9vcihkb3RjIC8gMTQ2MDk2KVxuICApIC8gMzY1KTtcbiAgcmV0dXJuIFtcbiAgICB5b3RjICsgc29jeSAqIDQwMCxcbiAgICBkb3RjIC0gKHlvdGMgKiAzNjVcbiAgICAgICsgTWF0aC5mbG9vcih5b3RjIC8gNClcbiAgICAgIC0gTWF0aC5mbG9vcih5b3RjIC8gMTAwKVxuICApLCB6b25lXX1cbmZ1bmN0aW9uIGRvdHkyZGVjbzAoeWVhciA9IDE5NjksIGRvdHkgPSAzMDYsIHpvbmUgPSAwKSB7XG4gIHJldHVybiBgJHt5ZWFyLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgXCIwXCIpfSske01hdGguZmxvb3IoZG90eSkudG9TdHJpbmcoKS5wYWRTdGFydCgzLCBcIjBcIil9JHtTdHJpbmcoZG90eSAlIDEgKiAxMCkuc2xpY2UoMCwgNil9LSR7em9uZX1gXG59XG5keiA9IHVuaXgyZG90ZSh1bml4KVxueWR6ID0gZG90ZTJkYXRlKC4uLmR6KVxuZGVjbyA9IGRvdHkyZGVjbzAoLi4ueWR6KVxuLy8gaHR0cHM6Ly9vYnNlcnZhYmxlaHEuY29tL0BvYnNlcnZhYmxlaHEvdGV4dC1jb2xvci1hbm5vdGF0aW9ucy1pbi1tYXJrZG93biN0ZXh0Y29sb3JcbmZ1bmN0aW9uIHNldFN0eWxlKGNvbnRlbnQsIHN0eWxlID0ge30pIHtcbiAgZnVuY3Rpb24geWlxKGNvbG9yKSB7XG4gICAgY29uc3Qge3IsIGcsIGJ9ID0gZDMucmdiKGNvbG9yKTtcbiAgICByZXR1cm4gKHIgKiAyOTkgKyBnICogNTg3ICsgYiAqIDExNCkgLyAxMDAwIC8gMjU1OyAvLyByZXR1cm5zIHZhbHVlcyBiZXR3ZWVuIDAgYW5kIDFcbiAgfVxuICBjb25zdCB7XG4gICAgYmFja2dyb3VuZCxcbiAgICBjb2xvciA9IHlpcShiYWNrZ3JvdW5kKSA+PSAwLjYgPyBcIiMxMTFcIiA6IFwid2hpdGVcIixcbiAgICBwYWRkaW5nID0gXCIwIDFweFwiLFxuICAgIGJvcmRlclJhZGl1cyA9IFwiNHB4XCIsXG4gICAgZm9udFdlaWdodCA9IDkwMCxcbiAgICBmb250U2l6ZSA9IFwiMWVtXCIsXG4gICAgLi4ucmVzdFxuICB9ID0gdHlwZW9mIHN0eWxlID09PSBcInN0cmluZ1wiID8ge2JhY2tncm91bmQ6IHN0eWxlfSA6IHN0eWxlO1xuICByZXR1cm4gaHRsLmh0bWxgPHNwYW4gc3R5bGU9JHt7XG4gICAgYmFja2dyb3VuZCxcbiAgICBjb2xvcixcbiAgICBwYWRkaW5nLFxuICAgIGJvcmRlclJhZGl1cyxcbiAgICBmb250V2VpZ2h0LFxuICAgIC4uLnJlc3RcbiAgfX0+JHtjb250ZW50fTwvc3Bhbj5gO1xufVxuZnVuY3Rpb24geWVhcjJsZWFwKHllYXIgPSAxOTcwKSB7XG4gIHJldHVybiB5ZWFyICUgNCA9PSAwICYmIHllYXIgJSAxMDAgIT0gMCB8fCB5ZWFyICUgNDAwID09IDA7XG59XG5mdW5jdGlvbiBkb3RlMmRvdHcoZCA9IDcxOTQ2OCkge1xuICByZXR1cm4gZCA+PSAtMyA/IChkICsgMykgJSA3IDogKGQgKyA0KSAlIDcgKyA2XG59XG5kZWNvWWVhciA9IGRlY28uc2xpY2UoMCwgNClcbm5leHRZZWFyID0gcGFyc2VJbnQoZGVjb1llYXIpICsgMVxuZGVjb0RvdHkgPSBkZWNvLnNsaWNlKDUsIDgpXG5kb3R3ID0gTWF0aC5mbG9vcihkb3RlMmRvdHcoZHpbMF0pKVxud2VlayA9IE1hdGguZmxvb3IoKHlkelsxXSArIGRvdHkwZG90dykgLyA3KVxuZG90dzBkb3R5ID0gTWF0aC5mbG9vcih5ZHpbMV0pIC0gZG90d1xuZG90eTBkb3RlID0gZGF0ZTJkb3RlKHlkelswXSwgMCwgeWR6WzJdKVxuZG90eTBkb3R3ID0gZG90ZTJkb3R3KC4uLmRvdHkwZG90ZSlcbmRvdHcwc2lnbiA9IGRvdHcwZG90eSA8IDAgPyBcIi1cIiA6IFwiK1wiXG5uRGF5c0luWWVhciA9IDM2NSArIHllYXIybGVhcCh5ZHpbMF0gKyAxKVxuVG1pbnVzID0gbkRheXNJblllYXIgLSBkZWNvRG90eVxuZnJhY1llYXIgPSAoeWR6WzBdICsgKHlkelsxXSAtIHlkelsyXSkgLyBuRGF5c0luWWVhcikudG9GaXhlZCgzKVxuc3R5bGVkRGVjb1llYXIgPSBzZXRTdHlsZShkZWNvWWVhciwgZDMuc2NoZW1lUGFpcmVkWzEwXSlcbnN0eWxlZERlY29ZZWFyMSA9IHNldFN0eWxlKGRlY29ZZWFyLCBkMy5zY2hlbWVQYWlyZWRbMTBdKVxuc3R5bGVkRGVjb1llYXIyID0gc2V0U3R5bGUoZGVjb1llYXIsIGQzLnNjaGVtZVBhaXJlZFsxMF0pXG5zdHlsZWROZXh0WWVhciA9IHNldFN0eWxlKG5leHRZZWFyLCBkMy5zY2hlbWVQYWlyZWRbMTBdKVxuc3R5bGVkRnJhY1llYXIgPSBzZXRTdHlsZShmcmFjWWVhciwgZDMuc2NoZW1lUGFpcmVkWzEwXSlcbnN0eWxlZERlY29Eb3R5ID0gc2V0U3R5bGUoZGVjb0RvdHksIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERlY29Eb3R5MSA9IHNldFN0eWxlKGRlY29Eb3R5LCBkMy5jb2xvcihcImN5YW5cIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREZWNvRG90eTIgPSBzZXRTdHlsZShkZWNvRG90eSwgZDMuY29sb3IoXCJjeWFuXCIpLmZvcm1hdEhleCgpKVxuc3R5bGVkRGVjb0RvdHkzID0gc2V0U3R5bGUoZGVjb0RvdHksIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERvdHcgPSBzZXRTdHlsZShkb3R3LCBkMy5jb2xvcihcImJsdWVcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R3MSA9IHNldFN0eWxlKGRvdHcsIGQzLmNvbG9yKFwiYmx1ZVwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERvdHcyID0gc2V0U3R5bGUoZG90dywgZDMuY29sb3IoXCJibHVlXCIpLmZvcm1hdEhleCgpKVxuc3R5bGVkRG90dzMgPSBzZXRTdHlsZShkb3R3LCBkMy5jb2xvcihcImJsdWVcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R3NCA9IHNldFN0eWxlKGRvdHcsIGQzLmNvbG9yKFwiYmx1ZVwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZFdlZWsgPSBzZXRTdHlsZSh3ZWVrLCBkMy5jb2xvcihcInB1cnBsZVwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZFdlZWsxID0gc2V0U3R5bGUod2VlaywgZDMuY29sb3IoXCJwdXJwbGVcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWRXZWVrMiA9IHNldFN0eWxlKHdlZWssIGQzLmNvbG9yKFwicHVycGxlXCIpLmZvcm1hdEhleCgpKVxuc3R5bGVkRG90eTBkb3R3ID0gc2V0U3R5bGUoZG90eTBkb3R3LCBkMy5jb2xvcihcImJsdWVcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R5MGRvdHcxID0gc2V0U3R5bGUoZG90eTBkb3R3LCBkMy5jb2xvcihcImJsdWVcIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R3MGRvdHkgPSBzZXRTdHlsZShNYXRoLmFicyhkb3R3MGRvdHkpLCBkMy5jb2xvcihcImN5YW5cIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R3MGRvdHkxID0gc2V0U3R5bGUoZG90dzBkb3R5LCBkMy5jb2xvcihcImN5YW5cIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R3MGRvdHkyID0gc2V0U3R5bGUoZG90dzBkb3R5LCBkMy5jb2xvcihcImN5YW5cIikuZm9ybWF0SGV4KCkpXG5zdHlsZWREb3R5SW5wdXQgPSBzZXRTdHlsZShkb3R5SW5wdXQsIGQzLmNvbG9yKFwiY3lhblwiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERlY29UbWludXMgPSBzZXRTdHlsZShUbWludXMsIGQzLmNvbG9yKFwicGlua1wiKS5mb3JtYXRIZXgoKSlcbnN0eWxlZERlY29EZWsgPSBzZXRTdHlsZShkZWNvRG90eS5zbGljZSgwLCAyKSwgZDMuY29sb3IoXCJjeWFuXCIpLmZvcm1hdEhleCgpKVxuc3R5bGVkRGVjb0RvdGQgPSBzZXRTdHlsZShkZWNvRG90eVsyXSwgZDMuY29sb3IoXCJjeWFuXCIpLmZvcm1hdEhleCgpKVxuc3R5bGVkTmRheXMgPSBzZXRTdHlsZShuRGF5c0luWWVhciwgZDMuc2NoZW1lUGFpcmVkWzZdKVxuc3R5bGVkTmRheXMxID0gc2V0U3R5bGUobkRheXNJblllYXIsIGQzLnNjaGVtZVBhaXJlZFs2XSlcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AanVhbmcxNzQ0L3RyYW5zZm9ybS1pbnB1dC8xXG50cmFuc2Zvcm1JbnB1dCA9IGZ1bmN0aW9uKHRhcmdldCwge2JpbmQ6IHNvdXJjZSwgdHJhbnNmb3JtID0gaWRlbnRpdHksIGludm9sdXRvcnkgPSBmYWxzZSwgaW52ZXJ0ID0gaW52b2x1dG9yeSA/IHRyYW5zZm9ybSA6IGludmVyc2UodHJhbnNmb3JtKX0gPSB7fSl7XG4gIGlmIChzb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgIHNvdXJjZSA9IHRhcmdldDtcbiAgICB0YXJnZXQgPSBodG1sYDxkaXY+JHtzb3VyY2V9PC9kaXY+YDtcbiAgfVxuICBmdW5jdGlvbiBzb3VyY2VJbnB1dEhhbmRsZXIoKSB7XG4gICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0YXJnZXRJbnB1dEhhbmRsZXIpO1xuICAgIHNldFRyYW5zZm9ybSh0YXJnZXQpLnRvKHRyYW5zZm9ybShzb3VyY2UudmFsdWUpKS5hbmREaXNwYXRjaEV2ZW50KCk7XG4gICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0YXJnZXRJbnB1dEhhbmRsZXIpO1xuICB9XG4gIGZ1bmN0aW9uIHRhcmdldElucHV0SGFuZGxlcigpIHtcbiAgICBzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHNvdXJjZUlucHV0SGFuZGxlcik7XG4gICAgc2V0VHJhbnNmb3JtKHNvdXJjZSkudG8oaW52ZXJ0KHRhcmdldC52YWx1ZSkpLmFuZERpc3BhdGNoRXZlbnQoKTtcbiAgICBzb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHNvdXJjZUlucHV0SGFuZGxlcik7XG4gIH1cbiAgc291cmNlLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCBzb3VyY2VJbnB1dEhhbmRsZXIpO1xuICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHRhcmdldElucHV0SGFuZGxlcik7XG4gIGludmFsaWRhdGlvbi50aGVuKCgpID0+IHtcbiAgICBzb3VyY2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIHNvdXJjZUlucHV0SGFuZGxlcik7XG4gICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCB0YXJnZXRJbnB1dEhhbmRsZXIpO1xuICB9KTtcbiAgc291cmNlSW5wdXRIYW5kbGVyKCk7XG4gIHJldHVybiB0YXJnZXQ7XG59XG5zZXRUcmFuc2Zvcm0gPSAoaW5wdXQpID0+ICh7dG86ICh2YWx1ZSkgPT4gKGlucHV0LnZhbHVlID0gdmFsdWUsIHthbmREaXNwYXRjaEV2ZW50OiAoZXZlbnQgPSBuZXcgRXZlbnQoXCJpbnB1dFwiKSkgPT4gaW5wdXQuZGlzcGF0Y2hFdmVudChldmVudCl9KX0pO1xuZnVuY3Rpb24gaW52ZXJzZShmKSB7XG4gIHN3aXRjaCAoZikge1xuICAgIGNhc2UgaWRlbnRpdHk6ICByZXR1cm4gaWRlbnRpdHk7XG4gICAgY2FzZSBNYXRoLnNxcnQ6IHJldHVybiBzcXVhcmU7XG4gICAgY2FzZSBNYXRoLmxvZzogIHJldHVybiBNYXRoLmV4cDtcbiAgICBjYXNlIE1hdGguZXhwOiAgcmV0dXJuIE1hdGgubG9nO1xuICAgIGRlZmF1bHQ6ICAgICAgICByZXR1cm4gKHggPT4gc29sdmUoZiwgeCwgeCkpO1xuICB9XG4gIGZ1bmN0aW9uIHNvbHZlKGYsIHksIHggPSAwKSB7XG4gICAgY29uc3QgZHggPSAxZS02O1xuICAgIGxldCBzdGVwcyA9IDEwMCwgZGVsdGF4LCBmeCwgZGZ4O1xuICAgIGRvIHtcbiAgICAgIGZ4ID0gZih4KVxuICAgICAgZGZ4ID0gKGYoeCArIGR4KSAtIGZ4KSB8fCBkeDtcbiAgICAgIGRlbHRheCA9IGR4ICogKGZ4IC0geSkvZGZ4XG4gICAgICB4IC09IGRlbHRheDtcbiAgICB9IHdoaWxlIChNYXRoLmFicyhkZWx0YXgpID4gZHggJiYgLS1zdGVwcyA+IDApO1xuICAgIHJldHVybiBzdGVwcyA9PT0gMCA/IE5hTiA6IHg7XG4gIH1cbmZ1bmN0aW9uIHNxdWFyZSh4KSB7XG4gICAgcmV0dXJuIHggKiB4O1xuICB9XG59XG5mdW5jdGlvbiBpZGVudGl0eSh4KSB7XG4gIHJldHVybiB4O1xufVxuZnVuY3Rpb24gZG90eTJtb250aChkb3R5ID0gMCkge1xuICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKCg1ICogZG90eSArIDIpIC8gMTUzKTtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihtIDwgMTAgPyBtICsgMyA6IG0gLSA5KTtcbn1cbmZ1bmN0aW9uIG1vbnRoMmRvdHkobW9udGggPSAxKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoXG4gICAgICAgICgxNTMgKiAobW9udGggPiAyID8gbW9udGggLSAzIDogbW9udGggKyA5KSArIDIpIC8gNVxuKX1cbmZ1bmN0aW9uIGRvdHkyZG90bShkb3R5ID0gMCkge1xuICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKCg1ICogZG90eSArIDIpIC8gMTUzKTtcbiAgICByZXR1cm4gZG90eSAtIE1hdGguZmxvb3IoKDE1MyAqIG0gKyAyKSAvIDUpICsgMTtcbn1cbm51bWJlcnMgPSBBcnJheS5mcm9tKHtsZW5ndGg6IDM2Nn0sIChfLCBpKSA9PiBpKVxuc2V0KHZpZXdvZiBkb3R5SW5wdXQsIGxlYXBzY3J1YlswXSlcbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9Ab2JzZXJ2YWJsZWhxL3N5bmNocm9uaXplZC1pbnB1dHNcbmZ1bmN0aW9uIHNldChpbnB1dCwgdmFsdWUpIHtcbiAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgaW5wdXQuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKTtcbn1cbi8vIGh0dHBzOi8vb2JzZXJ2YWJsZWhxLmNvbS9AbWJvc3RvY2svc2NydWJiZXJcbmZ1bmN0aW9uIFNjcnViYmVyKHZhbHVlcywge1xuICBmb3JtYXQgPSB2YWx1ZSA9PiB2YWx1ZSxcbiAgaW5pdGlhbCA9IDAsXG4gIGRpcmVjdGlvbiA9IDEsXG4gIGRlbGF5ID0gbnVsbCxcbiAgYXV0b3BsYXkgPSB0cnVlLFxuICBsb29wID0gdHJ1ZSxcbiAgbG9vcERlbGF5ID0gbnVsbCxcbiAgYWx0ZXJuYXRlID0gZmFsc2UsXG4gIGlucHV0U3R5bGUgPSBcIlwiXG59ID0ge30pIHtcbiAgdmFsdWVzID0gQXJyYXkuZnJvbSh2YWx1ZXMpO1xuICBjb25zdCBmb3JtID0gaHRtbGA8Zm9ybSBzdHlsZT1cImZvbnQ6IDE4cHggdmFyKC0tbW9ub3NwYWNlKTsgZm9udC12YXJpYW50LW51bWVyaWM6IHRhYnVsYXItbnVtczsgZGlzcGxheTogZmxleDsgaGVpZ2h0OiAzM3B4OyBhbGlnbi1pdGVtczogY2VudGVyO1wiPlxuICA8YnV0dG9uIG5hbWU9YiB0eXBlPWJ1dHRvbiBzdHlsZT1cIm1hcmdpbi1yaWdodDogMC40ZW07IHdpZHRoOiA1ZW07XCI+PC9idXR0b24+XG4gIDxsYWJlbCBzdHlsZT1cImRpc3BsYXk6IGZsZXg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI+XG4gICAgPGlucHV0IG5hbWU9aSB0eXBlPXJhbmdlIG1pbj0wIG1heD0ke3ZhbHVlcy5sZW5ndGggLSAxfSB2YWx1ZT0ke2luaXRpYWx9IHN0ZXA9MSBzdHlsZT0ke2lucHV0U3R5bGV9PlxuICAgIDxvdXRwdXQgbmFtZT1vIHN0eWxlPVwibWFyZ2luLWxlZnQ6IDAuNGVtO1wiPjwvb3V0cHV0PlxuICA8L2xhYmVsPlxuPC9mb3JtPmA7XG4gIGxldCBmcmFtZSA9IG51bGw7XG4gIGxldCB0aW1lciA9IG51bGw7XG4gIGxldCBpbnRlcnZhbCA9IG51bGw7XG4gIGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgIGZvcm0uYi50ZXh0Q29udGVudCA9IFwiU3RvcFwiO1xuICAgIGlmIChkZWxheSA9PT0gbnVsbCkgZnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGljayk7XG4gICAgZWxzZSBpbnRlcnZhbCA9IHNldEludGVydmFsKHRpY2ssIGRlbGF5KTtcbiAgfVxuICBmdW5jdGlvbiBzdG9wKCkge1xuICAgIGZvcm0uYi50ZXh0Q29udGVudCA9IFwiUGxheVwiO1xuICAgIGlmIChmcmFtZSAhPT0gbnVsbCkgY2FuY2VsQW5pbWF0aW9uRnJhbWUoZnJhbWUpLCBmcmFtZSA9IG51bGw7XG4gICAgaWYgKHRpbWVyICE9PSBudWxsKSBjbGVhclRpbWVvdXQodGltZXIpLCB0aW1lciA9IG51bGw7XG4gICAgaWYgKGludGVydmFsICE9PSBudWxsKSBjbGVhckludGVydmFsKGludGVydmFsKSwgaW50ZXJ2YWwgPSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIHJ1bm5pbmcoKSB7XG4gICAgcmV0dXJuIGZyYW1lICE9PSBudWxsIHx8IHRpbWVyICE9PSBudWxsIHx8IGludGVydmFsICE9PSBudWxsO1xuICB9XG4gIGZ1bmN0aW9uIHRpY2soKSB7XG4gICAgaWYgKGZvcm0uaS52YWx1ZUFzTnVtYmVyID09PSAoZGlyZWN0aW9uID4gMCA/IHZhbHVlcy5sZW5ndGggLSAxIDogZGlyZWN0aW9uIDwgMCA/IDAgOiBOYU4pKSB7XG4gICAgICBpZiAoIWxvb3ApIHJldHVybiBzdG9wKCk7XG4gICAgICBpZiAoYWx0ZXJuYXRlKSBkaXJlY3Rpb24gPSAtZGlyZWN0aW9uO1xuICAgICAgaWYgKGxvb3BEZWxheSAhPT0gbnVsbCkge1xuICAgICAgICBpZiAoZnJhbWUgIT09IG51bGwpIGNhbmNlbEFuaW1hdGlvbkZyYW1lKGZyYW1lKSwgZnJhbWUgPSBudWxsO1xuICAgICAgICBpZiAoaW50ZXJ2YWwgIT09IG51bGwpIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpLCBpbnRlcnZhbCA9IG51bGw7XG4gICAgICAgIHRpbWVyID0gc2V0VGltZW91dCgoKSA9PiAoc3RlcCgpLCBzdGFydCgpKSwgbG9vcERlbGF5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZGVsYXkgPT09IG51bGwpIGZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRpY2spO1xuICAgIHN0ZXAoKTtcbiAgfVxuICBmdW5jdGlvbiBzdGVwKCkge1xuICAgIGZvcm0uaS52YWx1ZUFzTnVtYmVyID0gKGZvcm0uaS52YWx1ZUFzTnVtYmVyICsgZGlyZWN0aW9uICsgdmFsdWVzLmxlbmd0aCkgJSB2YWx1ZXMubGVuZ3RoO1xuICAgIGZvcm0uaS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImlucHV0XCIsIHtidWJibGVzOiB0cnVlfSkpO1xuICB9XG4gIGZvcm0uaS5vbmlucHV0ID0gZXZlbnQgPT4ge1xuICAgIGlmIChldmVudCAmJiBldmVudC5pc1RydXN0ZWQgJiYgcnVubmluZygpKSBzdG9wKCk7XG4gICAgZm9ybS52YWx1ZSA9IHZhbHVlc1tmb3JtLmkudmFsdWVBc051bWJlcl07XG4gICAgZm9ybS5vLnZhbHVlID0gZm9ybWF0KGZvcm0udmFsdWUsIGZvcm0uaS52YWx1ZUFzTnVtYmVyLCB2YWx1ZXMpO1xuICB9O1xuICBmb3JtLmIub25jbGljayA9ICgpID0+IHtcbiAgICBpZiAocnVubmluZygpKSByZXR1cm4gc3RvcCgpO1xuICAgIGRpcmVjdGlvbiA9IGFsdGVybmF0ZSAmJiBmb3JtLmkudmFsdWVBc051bWJlciA9PT0gdmFsdWVzLmxlbmd0aCAtIDEgPyAtMSA6IDE7XG4gICAgZm9ybS5pLnZhbHVlQXNOdW1iZXIgPSAoZm9ybS5pLnZhbHVlQXNOdW1iZXIgKyBkaXJlY3Rpb24pICUgdmFsdWVzLmxlbmd0aDtcbiAgICBmb3JtLmkuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJpbnB1dFwiLCB7YnViYmxlczogdHJ1ZX0pKTtcbiAgICBzdGFydCgpO1xuICB9O1xuICBmb3JtLmkub25pbnB1dCgpO1xuICBpZiAoYXV0b3BsYXkpIHN0YXJ0KCk7XG4gIGVsc2Ugc3RvcCgpO1xuICBJbnB1dHMuZGlzcG9zYWwoZm9ybSkudGhlbihzdG9wKTtcbiAgcmV0dXJuIGZvcm07XG59XG5jYWxZZWFyID0gIWxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJNb25kYXlcIiA/IDYgOiAhbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlR1ZXNkYXlcIiA/IDcgOiAhbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIldlZG5lc2RheVwiID8gMiA6ICFsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiVGh1cnNkYXlcIiA/IDMgOiAhbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIkZyaWRheVwiID8gOSA6ICFsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiU2F0dXJkYXlcIiA/IDEwIDogIWxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJTdW5kYXlcIiA/IDExIDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIk1vbmRheVwiID8gMTIgOiBsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiVHVlc2RheVwiID8gMjQgOiBsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiV2VkbmVzZGF5XCIgPyA4IDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlRodXJzZGF5XCIgPyAyMCA6IGxlYXBJbnB1dCAmJiBkb3R3SW5wdXQgPT0gXCJGcmlkYXlcIiA/IDQgOiBsZWFwSW5wdXQgJiYgZG90d0lucHV0ID09IFwiU2F0dXJkYXlcIiA/IDE2IDogbGVhcElucHV0ICYmIGRvdHdJbnB1dCA9PSBcIlN1bmRheVwiID8gMjggOiAwO1xuZGF0ZXNDYWwgPSBkMy51dGNEYXlzKG5ldyBEYXRlKGNhbFllYXIsIDAsIDApLCBuZXcgRGF0ZShjYWxZZWFyLCAxMiwgMCkpO1xubW9udGhzID0gW1wiSmFudWFyeVwiLCBcIkZlYnJ1YXJ5XCIsIFwiTWFyY2hcIiwgXCJBcHJpbFwiLCBcIk1heVwiLCBcIkp1bmVcIiwgXCJKdWx5XCIsIFwiQXVndXN0XCIsIFwiU2VwdGVtYmVyXCIsIFwiT2N0b2JlclwiLCBcIk5vdmVtYmVyXCIsIFwiRGVjZW1iZXJcIl07XG5mdW5jdGlvbiB1bml4MmRvdHkodW5peCkge1xuICBjb25zdCBkb3RlID0gKFxuICAgIHVuaXggPz8gRGF0ZS5ub3coKVxuICApIC8gODY0MDAwMDAgKyA3MTk0NjgsXG4gICAgc29jeSA9IE1hdGguZmxvb3IoKFxuICAgICAgZG90ZSA+PSAwID8gZG90ZVxuICAgICAgOiBkb3RlIC0gMTQ2MDk2XG4gICAgKSAvIDE0NjA5NyksXG4gIGRvdGMgPSBkb3RlIC0gc29jeSAqIDE0NjA5NyxcbiAgeW90YyA9IE1hdGguZmxvb3IoKGRvdGNcbiAgICAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjApXG4gICAgKyBNYXRoLmZsb29yKGRvdGMgLyAzNjUyNClcbiAgICAtIE1hdGguZmxvb3IoZG90YyAvIDE0NjA5NilcbiAgKSAvIDM2NSk7XG4gIHJldHVybiBkb3RjIC0gKHlvdGMgKiAzNjVcbiAgICAgICsgTWF0aC5mbG9vcih5b3RjIC8gNClcbiAgICAgIC0gTWF0aC5mbG9vcih5b3RjIC8gMTAwKVxuICApfVxuXG5mdW5jdGlvbiBkYXRlMmRvdGUoeWVhciA9IDE5NjksIGRvdHkgPSAzMDYsIHpvbmUgPSAwKSB7XG4gICAgY29uc3Qgc29jeSA9IE1hdGguZmxvb3IoKHllYXIgPj0gMCA/IHllYXIgOiB5ZWFyIC0gMzk5KSAvIDQwMCksXG4gICAgICB5b3RlID0geWVhciAtIHNvY3kgKiA0MDA7XG4gICAgcmV0dXJuIFtzb2N5ICogMTQ2MDk3ICsgeW90ZSAqIDM2NSArIE1hdGguZmxvb3IoeW90ZSAvIDQpIC0gTWF0aC5mbG9vcih5b3RlIC8gMTAwKSArIGRvdHksIHpvbmVdXG59XG5mdW5jdGlvbiBkb3R5MmRlY28oeWVhckRvdHkgPSBbMTk2OSwgMzA2XSwgem9uZSA9IDApIHtcbiAgICBjb25zdCB5ZCA9IGRvdGUyZGF0ZSguLi5kYXRlMmRvdGUoeWVhckRvdHlbMF0sIE1hdGguZmxvb3IoeWVhckRvdHlbMV0pLCB6b25lKSk7XG4gICAgcmV0dXJuIGAke3lkWzBdLnRvU3RyaW5nKCkucGFkU3RhcnQoNCwgXCIwXCIpfSske3lkWzFdLnRvU3RyaW5nKCkucGFkU3RhcnQoMywgXCIwXCIpfSR7XG4gICAgICAgIHllYXJEb3R5WzFdLnRvU3RyaW5nKCkuaW5jbHVkZXMoXCIuXCIpID8gXCIuXCIgKyAoXG4gICAgICAgICAgICAoeWVhckRvdHlbMV0gPiAwKSA/ICh5ZWFyRG90eVsxXSAtIHpvbmUpLnRvU3RyaW5nKCkuc3BsaXQoXCIuXCIpLnBvcCgpXG4gICAgICAgICAgICA6IFsuLi4oeWVhckRvdHlbMV0gLSB6b25lKS50b1N0cmluZygpLnNwbGl0KFwiLlwiKS5wb3AoKV0ubWFwKFxuICAgICAgICAgICAgICAgIChlLCBpLCBhKSA9PiAoaSArIDEgPT09IGEubGVuZ3RoKSA/IDEwIC0gZSA6IDkgLSBlXG4gICAgICAgICAgICApLmpvaW4oXCJcIilcbiAgICAgICAgKSA6IFwiXCJcbiAgICB9YFxufVxuZnVuY3Rpb24gZGVjbzJkb3R5KHRpbWVzdGFtcCA9IFwiMTk2OSszMDYuMDAwMDBaXCIpIHtcbiAgICBjb25zdCBhcnIgPSB0aW1lc3RhbXAudG9TdHJpbmcoKS5zcGxpdCgvKD89WystXXxbYS16QS1aXSkvLCAzKTtcbiAgICBzd2l0Y2ggKGFyci5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAxOiByZXR1cm4gW3VuaXgyZG90eShEYXRlLm5vdygpKVswXSwgcGFyc2VGbG9hdChhcnJbMF0pLCAwXTtcbiAgICAgICAgY2FzZSAyOiByZXR1cm4gKC9eW2EtekEtWl0rJC8udGVzdChhcnJbMV0pKVxuICAgICAgICAgICAgPyBbdW5peDJkb3R5KERhdGUubm93KCkpWzBdLCBwYXJzZUZsb2F0KGFyclswXSksIHpvbmUyaG91cihhcnJbMV0pIC8gMjRdXG4gICAgICAgICAgICA6IFtwYXJzZUZsb2F0KGFyclswXSksIHBhcnNlRmxvYXQoYXJyWzFdKSwgMF07XG4gICAgfTtcbiAgICByZXR1cm4gW3BhcnNlRmxvYXQoYXJyWzBdKSwgcGFyc2VGbG9hdChhcnJbMV0pLCAvXlthLXpBLVpdKyQvLnRlc3QoYXJyWzJdKVxuICAgICAgICA/IHpvbmUyaG91cihhcnJbMl0pIC8gMjRcbiAgICAgICAgOiBwYXJzZUZsb2F0KGFyclsyXS5yZXBsYWNlKC8oWystXSkvLCBcIiQxXFwuXCIpKV07XG59XG5mdW5jdGlvbiB6b25lMmhvdXIoem9uZSA9IFwiWlwiKSB7XG4gICAgcmV0dXJuICh6b25lID0gem9uZS50b1VwcGVyQ2FzZSgpKSA9PSBcIlpcIiA/IDBcbiAgICAgICAgOiB6b25lID4gXCJAXCIgJiYgem9uZSA8IFwiSlwiID8gem9uZS5jaGFyQ29kZUF0KCkgLSA2NFxuICAgICAgICA6IHpvbmUgPiBcIkpcIiAmJiB6b25lIDwgXCJOXCIgPyB6b25lLmNoYXJDb2RlQXQoKSAtIDY1XG4gICAgICAgIDogem9uZSA8IFwiWlwiICYmIHpvbmUgPiBcIk1cIiA/IC0oem9uZS5jaGFyQ29kZUF0KCkgLSA3NylcbiAgICAgICAgOiB6b25lO1xufVxuZnVuY3Rpb24gZG90eTJ1bml4KHllYXIgPSAxOTY5LCBkb3R5ID0gMzA2LCB6b25lID0gMCkge1xuICAgIHJldHVybiAoZGF0ZTJkb3RlKHllYXIsIGRvdHksIHpvbmUpIC0gNzE5NDY4KSAqIDg2NDAwMDAwO1xufVxuZnVuY3Rpb24gZG90eTJpc29jKHlkKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGRvdHkydW5peCguLi55ZCkpXG59XG5mdW5jdGlvbiBkb3R5MmdyZWcoZG90eSA9IDMwNikge1xuICAgIGNvbnN0IG0gPSBNYXRoLmZsb29yKCg1ICogZG90eSArIDIpIC8gMTUzKTtcbiAgICByZXR1cm4gW1xuICAgICAgTWF0aC5mbG9vcihtIDwgMTAgPyBtICsgMyA6IG0gLSA5KSxcbiAgICAgIE1hdGguZmxvb3IoZG90eSAtICgxNTMgKiBtICsgMikgLyA1ICsgMilcbiAgICBdO1xufVxuZnVuY3Rpb24gZ3JlZzJkb3R5KG1vbnRoID0gMSwgZGF5ID0gMSkge1xuICAgIHJldHVybiBNYXRoLmZsb29yKFxuICAgICAgICAoMTUzICogKG1vbnRoID4gMiA/IG1vbnRoIC0gMyA6IG1vbnRoICsgOSkgKyAyKSAvIDUgKyBkYXkgLSAxXG4pfVxuZnVuY3Rpb24gZ3JlZzJ5ZWFyKHllYXIgPSAxOTcwLCBtb250aCA9IDEpIHsgcmV0dXJuIHllYXIgLSAobW9udGggPCAzKSB9XG5mdW5jdGlvbiBpc29jMmRvdHkoaXNvYykge1xuICByZXR1cm4gW2dyZWcyeWVhcihpc29jLmdldEZ1bGxZZWFyKCksIGlzb2MuZ2V0VVRDTW9udGgoKSArIDEpLCBncmVnMmRvdHkoaXNvYy5nZXRVVENNb250aCgpICsgMSwgaXNvYy5nZXRVVENEYXRlKCkpXTtcbn1cbmxlYXBJbnB1dCA9IGxlYXBzY3J1YlsxXVxuZnVuY3Rpb24gYWRkTihkKSB7IHJldHVybiBkICsgMzY1ICsgbGVhcElucHV0IH1cbmZ1bmN0aW9uIHN1Yk4oZCkgeyByZXR1cm4gZCAtIDM2NSAtIGxlYXBJbnB1dCB9XG5kYXRlcyA9IGQzLnV0Y0RheXMobmV3IERhdGUoMTk5OSwgMiwgMCksIG5ldyBEYXRlKDIwMDAsIDEsIDI4ICsgbGVhcElucHV0KSk7XG4ifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2RvdHlJbnB1dCcpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdtb250aElucHV0JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2RvdHlJbnB1dDEnKSJ9LHsibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoic2hpbnlJbnB1dCgnZG90bUlucHV0JykifSx7Im1ldGhvZE5hbWUiOiJpbnRlcnByZXRRdWlldCIsInNvdXJjZSI6InNoaW55SW5wdXQoJ2xlYXBzY3J1YicpIn0seyJtZXRob2ROYW1lIjoiaW50ZXJwcmV0UXVpZXQiLCJzb3VyY2UiOiJzaGlueUlucHV0KCdkb3R3SW5wdXQnKSJ9XX0=
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../dec/date";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/maptv\.github\.io");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../../dec/index.html" class="pagination-link" aria-label="Measurement">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Measurement</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../iso/date/index.html" class="pagination-link" aria-label="ISO Date">
        <span class="nav-page-text">ISO Date</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb7" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Dec Date</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="an">image:</span><span class="co"> /asset/deidek.svg</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> true</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="an">citation:</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">  url: https://maptv.github.io/dec/date</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">  html:</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co">    shift-heading-level-by: 2</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="co">    include-after-body:</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/cite.html</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/style.html</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/stamp.html</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co">      - ../../asset/tooltip.html</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co">  commonmark: default</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="an">filters:</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co">  - ../../asset/date.lua</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a><span class="co">  - include-code-files</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>My website serves as a demonstration of both the <span class="co">[</span><span class="ot">Quarto</span><span class="co">](https://quarto.org)</span> publishing system and the <span class="co">[</span><span class="ot">Dec</span><span class="co">](/dec)</span> measurement system. I use several clever hacks to get Quarto to display all of the dates on my website in the Dec <span class="co">[</span><span class="ot">year</span><span class="co">]</span>{.yellow}+<span class="co">[</span><span class="ot">day</span><span class="co">]</span>{.cyan} format. Knowing the basics of Dec dates will help you to understand the Quarto <span class="co">[</span><span class="ot">filter</span><span class="co">](https://quarto.org/docs/extensions/filters.html)</span>, <span class="co">[</span><span class="ot">render script</span><span class="co">](https://quarto.org/docs/projects/scripts.html#pre-and-post-render)</span>, and <span class="co">[</span><span class="ot">include file</span><span class="co">](https://quarto.org/docs/output-formats/html-basics.html#includes)</span> examples in my <span class="co">[</span><span class="ot">Quarto article</span><span class="co">](/software/quarto)</span>.</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>Among its many features, Quarto offers support for the <span class="co">[</span><span class="ot">Observable</span><span class="co">](https://observablehq.com/)</span> data analysis and visualization system. In the Observable <span class="co">[</span><span class="ot">calendar🗓️plots</span><span class="co">](https://observablehq.com/@observablehq/plot-calendar)</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>below, <span class="co">[</span><span class="ot">Gregorian calendar</span><span class="co">](https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world)</span> months are identified by <span class="co">[</span><span class="ot">color</span><span class="co">](https://observablehq.com/@d3/color-schemes)</span> and each day of the year has its own <span class="co">[</span><span class="ot">cell</span><span class="co">](https://observablehq.com/plot/marks/cell)</span>. Despite these similarities, the two plots illustrate how the Dec (top) and Gregorian (bottom) calendars differ.</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>::: {.column-page-right}</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="in">decPlot = Plot.plot({</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 0,</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 1080,</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a><span class="in">  height: 240,</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a><span class="in">  className: "calplot",</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="in">  marginTop: -20,</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a><span class="in">  marginLeft: 31,</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a><span class="in">  marginBottom: 35,</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="in">  y: {tickSize: 0,</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a><span class="in">      label: "Day of the dek    ",</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a><span class="in">      domain: [-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9],</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a><span class="in">      ticks: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9],</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a><span class="in">      tickPadding: -12,</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a><span class="in">      labelOffset: 22,</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="in">  x: {interval: 1, ticks: 18, label: "Dek", type: "band", tickSize: 0, tickPadding: 1, labelOffset: 34},</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a><span class="in">  //fx: {tickFormat: ""},</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a><span class="in">  style: { fontSize: "21px" },</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a><span class="in">  color: {</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a><span class="in">    range: d3.schemePastel1.concat(d3.schemePastel2.slice(4, 7)).concat(d3.schemeSet1[0]),</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a><span class="in">    domain: months.concat("selected"),</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="in">    className: "cal",</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a><span class="in">  marks: [</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.cell(dates, {</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a><span class="in">      x: (d, i) =&gt; Math.floor(i / 10),</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="in">      y: (d, i) =&gt; i % 10,</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "selected" : months[d.getUTCMonth()],</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="in">      stroke: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "darkorange" : "none",</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a><span class="in">      strokeWidth: 3,</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a><span class="in">      inset: 0.5,</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a><span class="in">    }),</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(dates, {</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a><span class="in">      x: (d, i) =&gt; Math.floor(i / 10),</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a><span class="in">      y: (d, i) =&gt; i % 10,</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "white" : "black",</span></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="in">      //stroke: "white",</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a><span class="in">      text: (d, i) =&gt; String(i),//.padStart(3, "0").slice(1),</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a><span class="in">      monospace: true,</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a><span class="in">      fontSize: "13px"})</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a><span class="in">calPlot = Plot.plot({</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a><span class="in">  padding: 0,</span></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 1000,</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a><span class="in">  height: 200,</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a><span class="in">  className: "calplot",</span></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a><span class="in">  marginTop: 0,</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a><span class="in">  marginBottom: 40,</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a><span class="in">  marginLeft: 42,</span></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a><span class="in">  y: {tickFormat: Plot.formatWeekday("en", "short"), tickSize: 0,</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a><span class="in">      domain: [-1, 0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="in">      ticks: [0, 1, 2, 3, 4, 5, 6],</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a><span class="in">      tickPadding: 2,</span></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a><span class="in">  x: {interval: 1, ticks: 26, label: "Week", type: "band", tickSize: 0, tickPadding: 1, labelOffset: 34},</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a><span class="in">  //fx: {tickFormat: ""},</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a><span class="in">  style: { fontSize: "20px" },</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a><span class="in">  color: {</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a><span class="in">    range: d3.schemePastel1.concat(d3.schemePastel2.slice(4, 7)).concat(d3.schemeSet1[0]),</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="in">    domain: months.concat("selected"),</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a><span class="in">    className: "cal",</span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a><span class="in">  },</span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="in">  marks: [</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.cell(datesCal, {</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a><span class="in">      x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a><span class="in">      y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "selected" : months[d.getUTCMonth()],</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a><span class="in">      stroke: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "darkorange" : "none",</span></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a><span class="in">      strokeWidth: 3,</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a><span class="in">      inset: .5,</span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a><span class="in">    }),</span></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal, {</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a><span class="in">      x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a><span class="in">      y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="in">      text: d =&gt; d.getUTCDate() === 7 ? months[d.getUTCMonth()].slice(0, 3) : "",</span></span>
<span id="cb7-117"><a href="#cb7-117" aria-hidden="true" tabindex="-1"></a><span class="in">      y: -1,</span></span>
<span id="cb7-118"><a href="#cb7-118" aria-hidden="true" tabindex="-1"></a><span class="in">      frameAnchor: "left",</span></span>
<span id="cb7-119"><a href="#cb7-119" aria-hidden="true" tabindex="-1"></a><span class="in">      dy: 2,</span></span>
<span id="cb7-120"><a href="#cb7-120" aria-hidden="true" tabindex="-1"></a><span class="in">      monospace: true,</span></span>
<span id="cb7-121"><a href="#cb7-121" aria-hidden="true" tabindex="-1"></a><span class="in">      fontSize: "18px"}),</span></span>
<span id="cb7-122"><a href="#cb7-122" aria-hidden="true" tabindex="-1"></a><span class="in">    Plot.text(datesCal, {</span></span>
<span id="cb7-123"><a href="#cb7-123" aria-hidden="true" tabindex="-1"></a><span class="in">      x: d =&gt; d3.utcWeek.count(d3.utcYear(d), d),</span></span>
<span id="cb7-124"><a href="#cb7-124" aria-hidden="true" tabindex="-1"></a><span class="in">      y: d =&gt; d.getUTCDay(),</span></span>
<span id="cb7-125"><a href="#cb7-125" aria-hidden="true" tabindex="-1"></a><span class="in">      //fx: d =&gt; d.getUTCFullYear(),</span></span>
<span id="cb7-126"><a href="#cb7-126" aria-hidden="true" tabindex="-1"></a><span class="in">      fill: d =&gt; Math.floor(unix2doty(d.getTime())) === dotyInput ? "white" : "black",</span></span>
<span id="cb7-127"><a href="#cb7-127" aria-hidden="true" tabindex="-1"></a><span class="in">      //stroke: "white",</span></span>
<span id="cb7-128"><a href="#cb7-128" aria-hidden="true" tabindex="-1"></a><span class="in">      text: d =&gt; d.getUTCDate(), //Math.floor(unix2doty(d.getTime())).toString().padStart(3, "0"),</span></span>
<span id="cb7-129"><a href="#cb7-129" aria-hidden="true" tabindex="-1"></a><span class="in">      monospace: true,</span></span>
<span id="cb7-130"><a href="#cb7-130" aria-hidden="true" tabindex="-1"></a><span class="in">      fontSize: "13px"})</span></span>
<span id="cb7-131"><a href="#cb7-131" aria-hidden="true" tabindex="-1"></a><span class="in">  ]</span></span>
<span id="cb7-132"><a href="#cb7-132" aria-hidden="true" tabindex="-1"></a><span class="in">})</span></span>
<span id="cb7-133"><a href="#cb7-133" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-134"><a href="#cb7-134" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb7-135"><a href="#cb7-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-138"><a href="#cb7-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-139"><a href="#cb7-139" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-140"><a href="#cb7-140" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotyInput = Inputs.range([0, 364 + leapInput], {value: 306, step: 1, label: "Day of the year"});</span></span>
<span id="cb7-141"><a href="#cb7-141" aria-hidden="true" tabindex="-1"></a><span class="in">viewof monthInput = transformInput(</span></span>
<span id="cb7-142"><a href="#cb7-142" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([1, 12], {step: 1, label: "Month"}),</span></span>
<span id="cb7-143"><a href="#cb7-143" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: doty2month, invert: month2doty}</span></span>
<span id="cb7-144"><a href="#cb7-144" aria-hidden="true" tabindex="-1"></a><span class="in">);</span></span>
<span id="cb7-145"><a href="#cb7-145" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotyInput1 = transformInput(</span></span>
<span id="cb7-146"><a href="#cb7-146" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([-365 - leapInput, -1], {step: 1, label: "Day of the year"}),</span></span>
<span id="cb7-147"><a href="#cb7-147" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: subN, invert: addN}</span></span>
<span id="cb7-148"><a href="#cb7-148" aria-hidden="true" tabindex="-1"></a><span class="in">);</span></span>
<span id="cb7-149"><a href="#cb7-149" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotmInput = transformInput(</span></span>
<span id="cb7-150"><a href="#cb7-150" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.range([1, 31], {step: 1, label: "Day of the month"}),</span></span>
<span id="cb7-151"><a href="#cb7-151" aria-hidden="true" tabindex="-1"></a><span class="in">  {bind: viewof dotyInput, transform: doty2dotm, invert: (x =&gt; Math.floor(( 153 * (</span></span>
<span id="cb7-152"><a href="#cb7-152" aria-hidden="true" tabindex="-1"></a><span class="in">    viewof monthInput.value &gt; 2</span></span>
<span id="cb7-153"><a href="#cb7-153" aria-hidden="true" tabindex="-1"></a><span class="in">    ? viewof monthInput.value - 3</span></span>
<span id="cb7-154"><a href="#cb7-154" aria-hidden="true" tabindex="-1"></a><span class="in">    : viewof monthInput.value + 9) + 2</span></span>
<span id="cb7-155"><a href="#cb7-155" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 5 + x - 1</span></span>
<span id="cb7-156"><a href="#cb7-156" aria-hidden="true" tabindex="-1"></a><span class="in">))});</span></span>
<span id="cb7-157"><a href="#cb7-157" aria-hidden="true" tabindex="-1"></a><span class="in">viewof leapscrub = Inputs.form([</span></span>
<span id="cb7-158"><a href="#cb7-158" aria-hidden="true" tabindex="-1"></a><span class="in">  Scrubber(numbers, {autoplay: false, alternate: true, delay: 86.4, loopDelay: 864, format: y =&gt; "", inputStyle: "display:none;"}),</span></span>
<span id="cb7-159"><a href="#cb7-159" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.toggle({label: "Leap year", value: false}),</span></span>
<span id="cb7-160"><a href="#cb7-160" aria-hidden="true" tabindex="-1"></a><span class="in">])</span></span>
<span id="cb7-161"><a href="#cb7-161" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-162"><a href="#cb7-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-163"><a href="#cb7-163" aria-hidden="true" tabindex="-1"></a><span class="co">[</span><span class="ot">First day of the Gregorian calendar year</span><span class="co">]</span>{.radiotitle}</span>
<span id="cb7-164"><a href="#cb7-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-167"><a href="#cb7-167" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-168"><a href="#cb7-168" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-169"><a href="#cb7-169" aria-hidden="true" tabindex="-1"></a><span class="in">viewof dotwInput = Inputs.radio([</span></span>
<span id="cb7-170"><a href="#cb7-170" aria-hidden="true" tabindex="-1"></a><span class="in">  "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday",</span></span>
<span id="cb7-171"><a href="#cb7-171" aria-hidden="true" tabindex="-1"></a><span class="in">  ], {value: "Sunday"})</span></span>
<span id="cb7-172"><a href="#cb7-172" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-173"><a href="#cb7-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-174"><a href="#cb7-174" aria-hidden="true" tabindex="-1"></a>The Dec calendar (Decalendar) starts on <span class="co">[</span><span class="ot">Day 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="March 1"} instead of <span class="co">[</span><span class="ot">Day 306</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="January 1"} and uses groups of 10 days called deks in place of weeks and days of the dek (dotd) in lieu of days of the week. When combined, a dek and dotd form a Dec day of the year (doty).</span>
<span id="cb7-175"><a href="#cb7-175" aria-hidden="true" tabindex="-1"></a>The current doty is \${styledDecoDoty}. The doty selected by the <span class="co">[</span><span class="ot">Observable</span><span class="co">](https://observablehq.com/)</span> <span class="co">[</span><span class="ot">range🎚️inputs</span><span class="co">](https://observablehq.com/@observablehq/input-range)</span></span>
<span id="cb7-176"><a href="#cb7-176" aria-hidden="true" tabindex="-1"></a>above and highlighted in the calendar plots is \${styledDotyInput}.</span>
<span id="cb7-177"><a href="#cb7-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-178"><a href="#cb7-178" aria-hidden="true" tabindex="-1"></a>The Play▶️button above cycles🔄through</span>
<span id="cb7-179"><a href="#cb7-179" aria-hidden="true" tabindex="-1"></a>every doty, month, and day of the month value so that each day gets its turn to be highlighted with a red🟥background. The <span class="co">[</span><span class="ot">toggle✅input</span><span class="co">](https://observablehq.com/framework/inputs/toggle#:~:text=choose%20one%20of%20two%20values)</span> next to the button determines whether the plots show a leap (<span class="co">[</span><span class="ot">n</span><span class="co">]</span>{.orange}=366) or a common (<span class="co">[</span><span class="ot">n</span><span class="co">]</span>{.orange}=365) year. The <span class="co">[</span><span class="ot">radio🔘input</span><span class="co">](https://observablehq.com/framework/inputs/radio#:~:text=choose%20one%20of%20a%20given%20set%20of%20values)</span> beneath the toggle input sets the day of the week on <span class="co">[</span><span class="ot">Day 306</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="January 1"}.</span>
<span id="cb7-180"><a href="#cb7-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-181"><a href="#cb7-181" aria-hidden="true" tabindex="-1"></a>The Gregorian calendar <span class="co">[</span><span class="ot">changes every year</span><span class="co">](https://en.wikipedia.org/wiki/Annual_calendar#:~:text=a%20representation%20of%20the%20year%20that%20expires%20with%20the%20year%20represented)</span> to adapt to the days of the week. In contrast, Decalendar <span class="co">[</span><span class="ot">remains the same every year</span><span class="co">](https://en.wikipedia.org/wiki/Perennial_calendar#:~:text=a%20calendar%20that%20applies%20to%20any%20year)</span> except leaps years. The addition of <span class="co">[</span><span class="ot">Day 365</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="February 29"} to leap years shifts 306 Gregorian calendar dates forward by one day, but does not affect the order of Dec dates, because <span class="co">[</span><span class="ot">Day 365</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="February 29"} is the last day of Dec leap years.</span>
<span id="cb7-182"><a href="#cb7-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-183"><a href="#cb7-183" aria-hidden="true" tabindex="-1"></a>Even though Dec does not use weeks, Dec dates can be modified to include <span class="co">[</span><span class="ot">POSIX weekday numbers</span><span class="co">]</span>(https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=weekday%20as%20a%20decimal%20number%20%5B0%2C6%5D%20(0%3Dsunday)). To convert the current Dec date, \${styledDecoYear}+\${styledDecoDoty1}, into the current Dec day of the week (dotw) date, \${styledDecoYear1}\${dotw0sign}\${styledDotw0doty}+\${styledDotw}, we split the current doty, \${styledDecoDoty2}, into the doty of the first day of the current week, \${styledDotw0doty1}, and the current POSIX weekday number: \${styledDotw1}.</span>
<span id="cb7-184"><a href="#cb7-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-185"><a href="#cb7-185" aria-hidden="true" tabindex="-1"></a>Dec dotw dates can be further modified to also include <span class="co">[</span><span class="ot">POSIX week numbers</span><span class="co">]</span>(https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=week%20of%20the%20year%20(sunday%20as%20the%20first%20day%20of%20the%20week)%20as%20a%20decimal%20number%20%5B00%2C53%5D.%20all%20days%20in%20a%20new%20year%20preceding%20the%20first%20sunday%20shall%20be%20considered%20to%20be%20in%20week%200.). The current week number, \${styledWeek1}, is the result of adding the middle number in the Dec dotw date, \${styledDotw0doty2}, to the Day 0 dotw number, \${styledDoty0dotw}, and then floor dividing by 7. The current Dec week date, \${styledDecoYear2}+7<span class="dv">&amp;times;</span>\${styledWeek}+\${styledDotw2}, shows how we can obtain the sum of the current doty and the Day 0 dotw number: 7<span class="dv">&amp;times;</span>\${styledWeek2}+\${styledDotw4}=\${styledDecoDoty3}+\${styledDoty0dotw1}.</span>
<span id="cb7-186"><a href="#cb7-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-187"><a href="#cb7-187" aria-hidden="true" tabindex="-1"></a>From the Dec dotw and week date examples above, you can see a pattern start to emerge: Dec uses <span class="co">[</span><span class="ot">unsimplified</span><span class="co">](https://en.wikipedia.org/wiki/Simplification#:~:text=the%20process%20of%20replacing%20a%20mathematical%20expression%20by%20an%20equivalent%20one%2C%20that%20is%20simpler)</span> math expressions to display various pieces of information about a date. Essentially, you can show whatever number(s) as part of a Dec date. All it takes is a little bit of arithmetic!</span>
<span id="cb7-188"><a href="#cb7-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-189"><a href="#cb7-189" aria-hidden="true" tabindex="-1"></a>Following the Dec week date pattern, we can adapt Dec dates to use any other fixed-length calendar unit, including the 20-day <span class="co">[</span><span class="ot">dudek</span><span class="co">](https://en.wiktionary.org/wiki/dudek#Esperanto:~:text=dudek-,twenty,-Polish%5Bedit)</span>, 30-day <span class="co">[</span><span class="ot">tridek</span><span class="co">](https://en.wiktionary.org/wiki/tridek#Esperanto:~:text=tridek-,thirty,-Categories%3A)</span>, 40-day <span class="co">[</span><span class="ot">kvardek</span><span class="co">](https://en.wiktionary.org/wiki/kvardek#Esperanto:~:text=kvardek-,forty,-Categories%3A)</span>, or 73-day <span class="co">[</span><span class="ot">sepdektri</span><span class="co">](https://en.wiktionary.org/wiki/sepdek_tri#Esperanto:~:text=sepdek%20tri-,seventy%2Dthree,-Categories%3A)</span>. No other calendar unit can be as convenient as the 10-day <span class="co">[</span><span class="ot">dek</span><span class="co">]</span>(https://en.wiktionary.org/wiki/dek#Esperanto:~:text=dek-,ten%20(10),-Derived%20terms%5B), because our <span class="co">[</span><span class="ot">decimal numeral system</span><span class="co">](https://en.wikipedia.org/wiki/Decimal#:~:text=system%20for%20denoting%20integer%20and%20non%2Dinteger%20numbers)</span> allows us to naturally combine a dek and a day of the dek into a single number.</span>
<span id="cb7-190"><a href="#cb7-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-191"><a href="#cb7-191" aria-hidden="true" tabindex="-1"></a>Dec can also be modified to display Dec month numbers and <span class="co">[</span><span class="ot">POSIX day of the month (dotm) numbers</span><span class="co">](https://pubs.opengroup.org/onlinepubs/007904875/utilities/date.html#:~:text=day%20of%20the%20month%20as%20a%20decimal%20number%20%5B01%2C31%5D)</span>. The current Dec month date is |y|+d-m+m. We represent the current month with the last doty of the previous month because POSIX dotm numbers are one-based. If we represent the current month with its first doty, we have to use a zero-based dotm number: |y|+d-m+m.</span>
<span id="cb7-192"><a href="#cb7-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-193"><a href="#cb7-193" aria-hidden="true" tabindex="-1"></a>We can combine the patterns above to create hybrid Dec day of the month and week (dotmaw) dates. The current Dec dotmaw date, |y|+d-m-w+m+w, Of course, this is getting a bit complicated and more than a bit silly, but Dec meek dates can be convenient if you want both the dotm and the dotw. To go back to a normal Dec date… you guessed it… we solve for the doty: d-m-w+m+w=d. </span>
<span id="cb7-194"><a href="#cb7-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-195"><a href="#cb7-195" aria-hidden="true" tabindex="-1"></a>Essentially, you can show whatever number(s) you want to show as part of a Dec date. All it takes is a little bit of arithmetic! All of the math above may have lead you to the conclusion that Dec dates have a mathematical basis. Indeed, all of the date formats above have their own equations.</span>
<span id="cb7-196"><a href="#cb7-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-197"><a href="#cb7-197" aria-hidden="true" tabindex="-1"></a>Also, the Gregorian calendar varies greatly depending on the days of the week. In total, there are 14 different Gregorian calendar variants that repeat in a <span class="co">[</span><span class="ot">400-year cycle</span><span class="co">]()</span>.</span>
<span id="cb7-198"><a href="#cb7-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-199"><a href="#cb7-199" aria-hidden="true" tabindex="-1"></a>The <span class="in">`year+day`</span> format is based on the Dec date equation: $\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}{\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}$, where $\lfloor\colorbox{yellow}{y}\rfloor{+}\colorbox{cyan}{d}$ is the Dec date, $\lfloor\colorbox{yellow}{y}\rfloor$ is the year obtained by <span class="co">[</span><span class="ot">flooring</span><span class="co">](https://en.wikipedia.org/wiki/Floor_and_ceiling_functions#:~:text=the%20greatest%20integer%20less%20than%20or%20equal%20to%20x)</span> $\colorbox{yellow}{y}$, the <span class="co">[</span><span class="ot">decimal</span><span class="co">](https://en.wikipedia.org/wiki/Decimal#:~:text=denoting%20integer%20and-,non%2Dinteger%20numbers,-.%20It%20is%20the)</span> years that have passed since the Dec <span class="co">[</span><span class="ot">epoch</span><span class="co">](https://en.wikipedia.org/wiki/Epoch#:~:text=an%20instant%20in%20time%20chosen%20as%20the%20origin%20of%20a%20particular%20calendar%20era)</span> (<span class="co">[</span><span class="ot">Year 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="1 BC"} <span class="co">[</span><span class="ot">Day 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="March 1"} <span class="co">[</span><span class="ot">Dot 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="midnight"}), $\colorbox{cyan}{d}$ is the <span class="co">[</span><span class="ot">zero-based</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00)</span> day of the year, and $\colorbox{orange}{n}$ is the number of days in $\lfloor\colorbox{yellow}{y}\rfloor$. The Dec date equation for today is \${styledDecoYear}+\${styledDecoDoty1}÷\${styledNdays}=\${styledFracYear}.</span>
<span id="cb7-200"><a href="#cb7-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-201"><a href="#cb7-201" aria-hidden="true" tabindex="-1"></a>Dec dates only include the first two terms from the <span class="co">[</span><span class="ot">left-hand side</span><span class="co">](https://en.wikipedia.org/wiki/Sides_of_an_equation#:~:text=the%20expression%20on%20the%20left%20of%20the%20%22%3D%22%20is%20the%20left%20side%20of%20the%20equation)</span> of the Dec date equation: $\lfloor\colorbox{yellow}{y}\rfloor$ and $\colorbox{cyan}{d}$. The right-hand side of the equation, $\colorbox{yellow}{y}$, can also be used as a date. We need $\colorbox{orange}{n}$ to calculate $\colorbox{yellow}{y}$ via the Dec date equation above and to obtain $\colorbox{cyan}{d}$ using the Dec day of the year equation: $\colorbox{cyan}{d}{=}\colorbox{yellow}{y}\vcenter{\text{\%}}1{\times}\colorbox{orange}{n}$. In simple terms, $\colorbox{cyan}{d}$ is the <span class="co">[</span><span class="ot">decimal part</span><span class="co">](https://en.wikipedia.org/wiki/Fractional_part#:~:text=the%20excess%20beyond%20that%20number%27s%20integer%20part)</span> of $\colorbox{yellow}{y}$ multiplied by $\colorbox{orange}{n}$.</span>
<span id="cb7-202"><a href="#cb7-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-203"><a href="#cb7-203" aria-hidden="true" tabindex="-1"></a>To find $\colorbox{orange}{n}$, we plug $\lfloor\colorbox{yellow}{y}\rfloor$ into the Dec year length equation below, where</span>
<span id="cb7-204"><a href="#cb7-204" aria-hidden="true" tabindex="-1"></a>$\vcenter{\text\%}$ is the <span class="co">[</span><span class="ot">modulo</span><span class="co">](https://en.wikipedia.org/wiki/Modulo#:~:text=returns%20the%20remainder)</span> operator, $\land$ is the logical <span class="co">[</span><span class="ot">conjunction</span><span class="co">](https://en.wikipedia.org/wiki/Logical_conjunction)</span> operator (and), and $\lor$ is the logical <span class="co">[</span><span class="ot">disjunction</span><span class="co">](https://en.wikipedia.org/wiki/Logical_disjunction)</span> operator (or). According to this equation, $\colorbox{orange}{n}$ is 366 if the subsequent year <span class="co">[</span><span class="ot">(Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$)</span><span class="co">]</span>{.nowrap} is a <span class="co">[</span><span class="ot">Gregorian calendar</span><span class="co">](https://en.wikipedia.org/wiki/Gregorian_calendar#:~:text=the%20calendar%20used%20in%20most%20parts%20of%20the%20world)</span> <span class="co">[</span><span class="ot">leap year</span><span class="co">](https://en.wikipedia.org/wiki/Leap_year#:~:text=Every%20year%20that%20is%20exactly%20divisible%20by%20four%20is%20a%20leap%20year%2C%20except%20for%20years%20that%20are%20exactly%20divisible%20by%20100%2C%20but%20these%20centurial%20years%20are%20leap%20years%20if%20they%20are%20exactly%20divisible%20by%20400)</span> and 365 if Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$ is a Gregorian calendar <span class="co">[</span><span class="ot">common year</span><span class="co">](https://en.wikipedia.org/wiki/Common_year#:~:text=a%20calendar%20year%20with%20365%20days)</span>.</span>
<span id="cb7-205"><a href="#cb7-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-206"><a href="#cb7-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-207"><a href="#cb7-207" aria-hidden="true" tabindex="-1"></a>$$\colorbox{orange}{n}=\begin{cases}</span>
<span id="cb7-208"><a href="#cb7-208" aria-hidden="true" tabindex="-1"></a>  366&amp;{\begin{align}\text{if } (\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}4=0<span class="sc">\\</span></span>
<span id="cb7-209"><a href="#cb7-209" aria-hidden="true" tabindex="-1"></a>  \land(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}100\neq0<span class="sc">\\</span></span>
<span id="cb7-210"><a href="#cb7-210" aria-hidden="true" tabindex="-1"></a>  \lor(\lfloor \colorbox{yellow}{y}\rfloor+1)\vcenter{\text{ \% }}400=0\end{align}}<span class="sc">\\\\</span></span>
<span id="cb7-211"><a href="#cb7-211" aria-hidden="true" tabindex="-1"></a>  365&amp;{\text{otherwise.}}\end{cases}$$</span>
<span id="cb7-212"><a href="#cb7-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-213"><a href="#cb7-213" aria-hidden="true" tabindex="-1"></a>In addition to calculating $\colorbox{yellow}{y}$, $\colorbox{orange}{n}$ is needed to convert between <span class="in">`year+day`</span> and <span class="in">`year-day`</span> Dec dates. The <span class="in">`year-day`</span> version of the Dec date equation is $\lfloor\colorbox{yellow}{y}\rfloor{+}1{-}(\colorbox{cyan}{d}{-}\colorbox{orange}{n}){\div}\colorbox{orange}{n}{=}\colorbox{yellow}{y}$. In essence, $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ is a <span class="co">[</span><span class="ot">"T-minus" countdown</span><span class="co">](https://en.wikipedia.org/wiki/Countdown#:~:text=backward%20counting%20to%20indicate%20the%20time%20remaining%20before%20an%20event)</span> of the days until the start of Year $\lfloor\colorbox{yellow}{y}\rfloor{+}1$. The current <span class="in">`year-day`</span> date, \${styledNextYear}-\${styledDecoTminus}, tells us that Year \${nextYear} will begin in \${Tminus} days.</span>
<span id="cb7-214"><a href="#cb7-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-215"><a href="#cb7-215" aria-hidden="true" tabindex="-1"></a>The difference between $\colorbox{cyan}{d}$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ can also be explained in terms of computer programming. If we think of years as <span class="co">[</span><span class="ot">arrays</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=a%20data%20structure%20consisting%20of%20a%20collection%20of%20elements%20(values%20or%20variables)%2C%20of%20same%20memory%20size%2C%20each%20identified%20by%20at%20least%20one%20array%20index), $\colorbox{cyan}{d}$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ are like array <span class="co">[</span><span class="ot">indexes</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Array_(data_structure)#Element_identifier_and_addressing_formulas:~:text=individual%20objects%20are%20selected%20by%20an%20index) that can be used to identify array elements or combine them via <span class="co">[</span><span class="ot">slicing</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing#:~:text=an%20operation%20that%20extracts%20a%20subset%20of%20elements%20from%20an%20array)</span>. In this analogy, $\colorbox{cyan}{d}$ is a <span class="co">[</span><span class="ot">positive index</span><span class="co">](https://en.wikipedia.org/wiki/Zero-based_numbering#:~:text=a%20way%20of%20numbering%20in%20which%20the%20initial%20element%20of%20a%20sequence%20is%20assigned%20the%20index%C2%A00)</span> with a range of $0$ to $\colorbox{orange}{n}{-}1$ and $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ is a <span class="co">[</span><span class="ot">negative index</span><span class="co">](https://en.wikipedia.org/wiki/Array_slicing#:~:text=specify%20an%20offset%20from%20the%20end%20of%20the%20array)</span> that ranges from ${-}\colorbox{orange}{n}$ to ${-}1$.</span>
<span id="cb7-216"><a href="#cb7-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-217"><a href="#cb7-217" aria-hidden="true" tabindex="-1"></a>We can express the <span class="co">[</span><span class="ot">bounds</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Upper_and_lower_bounds#:~:text=an%20upper%20bound%20or%20majorant%5B1%5D%20of%20a%20subset%20S%20of%20some%20preordered%20set%20(K%2C%20%E2%89%A4)%20is%20an%20element%20of%20K%20that%20is%20greater%20than%20or%20equal%20to%20every%20element%20of%20S.%5B2%5D%5B3%5D%20Dually%2C%20a%20lower%20bound%20or%20minorant%20of%20S%20is%20defined%20to%20be%20an%20element%20of%20K%20that%20is%20less%20than%20or%20equal%20to%20every%20element%20of%20S) for $\colorbox{cyan}{d}$ values with the <span class="co">[</span><span class="ot">interval</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Interval_(mathematics)#:~:text=the%20set%20of%20all%20real%20numbers%20lying%20between%20two%20fixed%20endpoints) $\left <span class="co">[</span><span class="ot">0,\colorbox{orange}{n} \right )$, the [inequality</span><span class="co">]</span>(https://en.wikipedia.org/wiki/Inequality_(mathematics)#:~:text=a%20non%2Dequal%20comparison) $0{\le}\colorbox{cyan}{d}{\lt} \colorbox{orange}{n}$, or the Dec range $0{=}$. Similarly, the analogous interval, inequality, and Dec range for $\colorbox{cyan}{d}{-}\colorbox{orange}{n}$ are $[{-}\colorbox{orange}{n},0)$, ${-}\colorbox{orange}{n}{\le}\colorbox{cyan}{d}{-}\colorbox{orange}{n}{\lt}0$, and ${-}\colorbox{orange}{n}{=}$, respectively.</span>
<span id="cb7-218"><a href="#cb7-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-219"><a href="#cb7-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-220"><a href="#cb7-220" aria-hidden="true" tabindex="-1"></a>Even though it only uses years and days, Dec can display dates based on months or weeks by modifying $\colorbox{cyan}{d}$.</span>
<span id="cb7-221"><a href="#cb7-221" aria-hidden="true" tabindex="-1"></a>The equation for Dec week dates is $\lfloor\colorbox{yellow}{y}\rfloor{+}7{\times}\colorbox{pink}{U}{+}\text{\textcolor{blue}{w}}{-}\text{\textcolor{blue}{w}}_</span>
<span id="cb7-222"><a href="#cb7-222" aria-hidden="true" tabindex="-1"></a>\text{\textcolor{blue}{d=0}}{=}\colorbox{yellow}{y}$, where $\colorbox{pink}{U}$ is the week number, $\text{\textcolor{blue}{w}}$ is the day of the week number, and $\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}$ is $\text{\textcolor{blue}{w}}$ on the first day of the year ($\colorbox{cyan}{d}{=}0$). The Dec week date equation for today is .</span>
<span id="cb7-223"><a href="#cb7-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-224"><a href="#cb7-224" aria-hidden="true" tabindex="-1"></a>We can truncate the Dec week date equation to remove $\text{\textcolor{blue}{w}}_\text{\textcolor{blue}{d=0}}$, which can be determined from $\lfloor\colorbox{yellow}{y}\rfloor$ and is not needed to identify a date. The truncated Dec week date equation for today is .</span>
<span id="cb7-225"><a href="#cb7-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-226"><a href="#cb7-226" aria-hidden="true" tabindex="-1"></a>If we ever need to convert between a doty and a Gregorian calendar month and day of the month without any conversion tools, we can use the Dec finger mnemonic, which is similar to the <span class="co">[</span><span class="ot">knuckle mnemonic</span><span class="co">](https://en.wikipedia.org/wiki/Knuckle_mnemonic#:~:text=a%20mnemonic%20device%20for%20remembering%20the%20number%20of%20days%20in%20the%20months%20of%20the%20Julian%20and%20Gregorian%20calendars)</span>. The numbers above the fingers in the image below indicate the doty of the last day of each Gregorian calendar month. The thumb, middle finger, and pinky represent months with 31 days, whereas the index and ring fingers stand for 30-day months.</span>
<span id="cb7-227"><a href="#cb7-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-228"><a href="#cb7-228" aria-hidden="true" tabindex="-1"></a><span class="al">![Dec finger mnemonic](/asset/finger.svg)</span>{.knitr}</span>
<span id="cb7-229"><a href="#cb7-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-230"><a href="#cb7-230" aria-hidden="true" tabindex="-1"></a>The <span class="co">[</span><span class="ot">southward equinox</span><span class="co">](https://en.wikipedia.org/wiki/September_equinox#:~:text=the%20moment%20when%20the%20Sun%20appears%20to%20cross%20the%20celestial%20equator%2C%20heading%20southward)</span> falls on Day 205 in Year 2024, 2025, 2028, and 2029. We can determine that Day 205 is September 22 by subtracting the Dec date of the last day of August (Day 183), the month preceding September, from the southward equinox doty: $205{-}183{=}22$. To convert in the other direction, we would sum the doty and the day of the month: $183{+}22{=}205$.</span>
<span id="cb7-231"><a href="#cb7-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-232"><a href="#cb7-232" aria-hidden="true" tabindex="-1"></a>The finger mnemonic highlights a major difference between Dec and the Gregorian calendar: the Dec year starts on <span class="co">[</span><span class="ot">Day 0</span><span class="co">]</span>{.underline .blue data-bs-toggle="tooltip" data-bs-title="March 1"} just like the <span class="co">[</span><span class="ot">Roman calendar</span><span class="co">](https://en.wikipedia.org/wiki/Roman_calendar#:~:text=the%20calendar%20used%20by%20the%20Roman%20Kingdom%20and%20Roman%20Republic)</span>, the predecessor of the Gregorian and Julian calendars. For this reason, the Latin <span class="co">[</span><span class="ot">numeral prefixes</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=prefixes%20derived%20from%20numerals)</span> in the names of the months of <span class="co">[</span><span class="ot">Septem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=7-,septem,-%2D%2C%20septi%2D%5B)</span>ber, <span class="co">[</span><span class="ot">Octo</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=8-,octo,-%2D%5Bu)</span>ber, <span class="co">[</span><span class="ot">Novem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=9-,novem,-%2D%5Bx)</span>ber, and <span class="co">[</span><span class="ot">Decem</span><span class="co">](https://en.wikipedia.org/wiki/Numeral_prefix#:~:text=10-,decem,-%2D%2C%20dec%2D%5B)</span>ber match their one-based indexes (7, 8, 9, and 10) in Dec and the Roman calendar, but not in the Julian or Gregorian calendars.</span>
<span id="cb7-233"><a href="#cb7-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-234"><a href="#cb7-234" aria-hidden="true" tabindex="-1"></a>The knuckle and finger mnemonics attempt to make sense of the irregular pattern of month lengths in the Gregorian calendar. Rather than replace variable-length months with <span class="co">[</span><span class="ot">fixed-length months</span><span class="co">](https://en.wikipedia.org/wiki/Calendar_reform#13-month_calendars)</span>, Dec forgoes the use of months entirely and instead uses groups of ten days called deks.</span>
<span id="cb7-235"><a href="#cb7-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-236"><a href="#cb7-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-239"><a href="#cb7-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{ojs}</span></span>
<span id="cb7-240"><a href="#cb7-240" aria-hidden="true" tabindex="-1"></a><span class="in">//| echo: false</span></span>
<span id="cb7-241"><a href="#cb7-241" aria-hidden="true" tabindex="-1"></a><span class="in">//| output: false</span></span>
<span id="cb7-242"><a href="#cb7-242" aria-hidden="true" tabindex="-1"></a><span class="in">unix = {</span></span>
<span id="cb7-243"><a href="#cb7-243" aria-hidden="true" tabindex="-1"></a><span class="in">  while(true) {</span></span>
<span id="cb7-244"><a href="#cb7-244" aria-hidden="true" tabindex="-1"></a><span class="in">    yield Date.now();</span></span>
<span id="cb7-245"><a href="#cb7-245" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-246"><a href="#cb7-246" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-247"><a href="#cb7-247" aria-hidden="true" tabindex="-1"></a><span class="in">// http://howardhinnant.github.io/date_algorithms.html#civil_from_days</span></span>
<span id="cb7-248"><a href="#cb7-248" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2dote(unix, zone, offset = 719468) {</span></span>
<span id="cb7-249"><a href="#cb7-249" aria-hidden="true" tabindex="-1"></a><span class="in">  return [(unix ?? Date.now()) / 86400000 + (</span></span>
<span id="cb7-250"><a href="#cb7-250" aria-hidden="true" tabindex="-1"></a><span class="in">    zone = zone ?? -Math.round(</span></span>
<span id="cb7-251"><a href="#cb7-251" aria-hidden="true" tabindex="-1"></a><span class="in">      (new Date).getTimezoneOffset() / 144)</span></span>
<span id="cb7-252"><a href="#cb7-252" aria-hidden="true" tabindex="-1"></a><span class="in">    ) / 10 + offset, zone]</span></span>
<span id="cb7-253"><a href="#cb7-253" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-254"><a href="#cb7-254" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2date(dote, zone = 0) {</span></span>
<span id="cb7-255"><a href="#cb7-255" aria-hidden="true" tabindex="-1"></a><span class="in">  const socy = Math.floor((</span></span>
<span id="cb7-256"><a href="#cb7-256" aria-hidden="true" tabindex="-1"></a><span class="in">      dote &gt;= 0 ? dote</span></span>
<span id="cb7-257"><a href="#cb7-257" aria-hidden="true" tabindex="-1"></a><span class="in">      : dote - 146096</span></span>
<span id="cb7-258"><a href="#cb7-258" aria-hidden="true" tabindex="-1"></a><span class="in">    ) / 146097),</span></span>
<span id="cb7-259"><a href="#cb7-259" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 146097,</span></span>
<span id="cb7-260"><a href="#cb7-260" aria-hidden="true" tabindex="-1"></a><span class="in">  yotc = Math.floor((dotc</span></span>
<span id="cb7-261"><a href="#cb7-261" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 1460)</span></span>
<span id="cb7-262"><a href="#cb7-262" aria-hidden="true" tabindex="-1"></a><span class="in">    + Math.floor(dotc / 36524)</span></span>
<span id="cb7-263"><a href="#cb7-263" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 146096)</span></span>
<span id="cb7-264"><a href="#cb7-264" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 365);</span></span>
<span id="cb7-265"><a href="#cb7-265" aria-hidden="true" tabindex="-1"></a><span class="in">  return [</span></span>
<span id="cb7-266"><a href="#cb7-266" aria-hidden="true" tabindex="-1"></a><span class="in">    yotc + socy * 400,</span></span>
<span id="cb7-267"><a href="#cb7-267" aria-hidden="true" tabindex="-1"></a><span class="in">    dotc - (yotc * 365</span></span>
<span id="cb7-268"><a href="#cb7-268" aria-hidden="true" tabindex="-1"></a><span class="in">      + Math.floor(yotc / 4)</span></span>
<span id="cb7-269"><a href="#cb7-269" aria-hidden="true" tabindex="-1"></a><span class="in">      - Math.floor(yotc / 100)</span></span>
<span id="cb7-270"><a href="#cb7-270" aria-hidden="true" tabindex="-1"></a><span class="in">  ), zone]}</span></span>
<span id="cb7-271"><a href="#cb7-271" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2deco0(year = 1969, doty = 306, zone = 0) {</span></span>
<span id="cb7-272"><a href="#cb7-272" aria-hidden="true" tabindex="-1"></a><span class="in">  return `${year.toString().padStart(4, "0")}+${Math.floor(doty).toString().padStart(3, "0")}${String(doty % 1 * 10).slice(0, 6)}-${zone}`</span></span>
<span id="cb7-273"><a href="#cb7-273" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-274"><a href="#cb7-274" aria-hidden="true" tabindex="-1"></a><span class="in">dz = unix2dote(unix)</span></span>
<span id="cb7-275"><a href="#cb7-275" aria-hidden="true" tabindex="-1"></a><span class="in">ydz = dote2date(...dz)</span></span>
<span id="cb7-276"><a href="#cb7-276" aria-hidden="true" tabindex="-1"></a><span class="in">deco = doty2deco0(...ydz)</span></span>
<span id="cb7-277"><a href="#cb7-277" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@observablehq/text-color-annotations-in-markdown#textcolor</span></span>
<span id="cb7-278"><a href="#cb7-278" aria-hidden="true" tabindex="-1"></a><span class="in">function setStyle(content, style = {}) {</span></span>
<span id="cb7-279"><a href="#cb7-279" aria-hidden="true" tabindex="-1"></a><span class="in">  function yiq(color) {</span></span>
<span id="cb7-280"><a href="#cb7-280" aria-hidden="true" tabindex="-1"></a><span class="in">    const {r, g, b} = d3.rgb(color);</span></span>
<span id="cb7-281"><a href="#cb7-281" aria-hidden="true" tabindex="-1"></a><span class="in">    return (r * 299 + g * 587 + b * 114) / 1000 / 255; // returns values between 0 and 1</span></span>
<span id="cb7-282"><a href="#cb7-282" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-283"><a href="#cb7-283" aria-hidden="true" tabindex="-1"></a><span class="in">  const {</span></span>
<span id="cb7-284"><a href="#cb7-284" aria-hidden="true" tabindex="-1"></a><span class="in">    background,</span></span>
<span id="cb7-285"><a href="#cb7-285" aria-hidden="true" tabindex="-1"></a><span class="in">    color = yiq(background) &gt;= 0.6 ? "#111" : "white",</span></span>
<span id="cb7-286"><a href="#cb7-286" aria-hidden="true" tabindex="-1"></a><span class="in">    padding = "0 1px",</span></span>
<span id="cb7-287"><a href="#cb7-287" aria-hidden="true" tabindex="-1"></a><span class="in">    borderRadius = "4px",</span></span>
<span id="cb7-288"><a href="#cb7-288" aria-hidden="true" tabindex="-1"></a><span class="in">    fontWeight = 900,</span></span>
<span id="cb7-289"><a href="#cb7-289" aria-hidden="true" tabindex="-1"></a><span class="in">    fontSize = "1em",</span></span>
<span id="cb7-290"><a href="#cb7-290" aria-hidden="true" tabindex="-1"></a><span class="in">    ...rest</span></span>
<span id="cb7-291"><a href="#cb7-291" aria-hidden="true" tabindex="-1"></a><span class="in">  } = typeof style === "string" ? {background: style} : style;</span></span>
<span id="cb7-292"><a href="#cb7-292" aria-hidden="true" tabindex="-1"></a><span class="in">  return htl.html`&lt;span style=${{</span></span>
<span id="cb7-293"><a href="#cb7-293" aria-hidden="true" tabindex="-1"></a><span class="in">    background,</span></span>
<span id="cb7-294"><a href="#cb7-294" aria-hidden="true" tabindex="-1"></a><span class="in">    color,</span></span>
<span id="cb7-295"><a href="#cb7-295" aria-hidden="true" tabindex="-1"></a><span class="in">    padding,</span></span>
<span id="cb7-296"><a href="#cb7-296" aria-hidden="true" tabindex="-1"></a><span class="in">    borderRadius,</span></span>
<span id="cb7-297"><a href="#cb7-297" aria-hidden="true" tabindex="-1"></a><span class="in">    fontWeight,</span></span>
<span id="cb7-298"><a href="#cb7-298" aria-hidden="true" tabindex="-1"></a><span class="in">    ...rest</span></span>
<span id="cb7-299"><a href="#cb7-299" aria-hidden="true" tabindex="-1"></a><span class="in">  }}&gt;${content}&lt;/span&gt;`;</span></span>
<span id="cb7-300"><a href="#cb7-300" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-301"><a href="#cb7-301" aria-hidden="true" tabindex="-1"></a><span class="in">function year2leap(year = 1970) {</span></span>
<span id="cb7-302"><a href="#cb7-302" aria-hidden="true" tabindex="-1"></a><span class="in">  return year % 4 == 0 &amp;&amp; year % 100 != 0 || year % 400 == 0;</span></span>
<span id="cb7-303"><a href="#cb7-303" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-304"><a href="#cb7-304" aria-hidden="true" tabindex="-1"></a><span class="in">function dote2dotw(d = 719468) {</span></span>
<span id="cb7-305"><a href="#cb7-305" aria-hidden="true" tabindex="-1"></a><span class="in">  return d &gt;= -3 ? (d + 3) % 7 : (d + 4) % 7 + 6</span></span>
<span id="cb7-306"><a href="#cb7-306" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-307"><a href="#cb7-307" aria-hidden="true" tabindex="-1"></a><span class="in">decoYear = deco.slice(0, 4)</span></span>
<span id="cb7-308"><a href="#cb7-308" aria-hidden="true" tabindex="-1"></a><span class="in">nextYear = parseInt(decoYear) + 1</span></span>
<span id="cb7-309"><a href="#cb7-309" aria-hidden="true" tabindex="-1"></a><span class="in">decoDoty = deco.slice(5, 8)</span></span>
<span id="cb7-310"><a href="#cb7-310" aria-hidden="true" tabindex="-1"></a><span class="in">dotw = Math.floor(dote2dotw(dz[0]))</span></span>
<span id="cb7-311"><a href="#cb7-311" aria-hidden="true" tabindex="-1"></a><span class="in">week = Math.floor((ydz[1] + doty0dotw) / 7)</span></span>
<span id="cb7-312"><a href="#cb7-312" aria-hidden="true" tabindex="-1"></a><span class="in">dotw0doty = Math.floor(ydz[1]) - dotw</span></span>
<span id="cb7-313"><a href="#cb7-313" aria-hidden="true" tabindex="-1"></a><span class="in">doty0dote = date2dote(ydz[0], 0, ydz[2])</span></span>
<span id="cb7-314"><a href="#cb7-314" aria-hidden="true" tabindex="-1"></a><span class="in">doty0dotw = dote2dotw(...doty0dote)</span></span>
<span id="cb7-315"><a href="#cb7-315" aria-hidden="true" tabindex="-1"></a><span class="in">dotw0sign = dotw0doty &lt; 0 ? "-" : "+"</span></span>
<span id="cb7-316"><a href="#cb7-316" aria-hidden="true" tabindex="-1"></a><span class="in">nDaysInYear = 365 + year2leap(ydz[0] + 1)</span></span>
<span id="cb7-317"><a href="#cb7-317" aria-hidden="true" tabindex="-1"></a><span class="in">Tminus = nDaysInYear - decoDoty</span></span>
<span id="cb7-318"><a href="#cb7-318" aria-hidden="true" tabindex="-1"></a><span class="in">fracYear = (ydz[0] + (ydz[1] - ydz[2]) / nDaysInYear).toFixed(3)</span></span>
<span id="cb7-319"><a href="#cb7-319" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoYear = setStyle(decoYear, d3.schemePaired[10])</span></span>
<span id="cb7-320"><a href="#cb7-320" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoYear1 = setStyle(decoYear, d3.schemePaired[10])</span></span>
<span id="cb7-321"><a href="#cb7-321" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoYear2 = setStyle(decoYear, d3.schemePaired[10])</span></span>
<span id="cb7-322"><a href="#cb7-322" aria-hidden="true" tabindex="-1"></a><span class="in">styledNextYear = setStyle(nextYear, d3.schemePaired[10])</span></span>
<span id="cb7-323"><a href="#cb7-323" aria-hidden="true" tabindex="-1"></a><span class="in">styledFracYear = setStyle(fracYear, d3.schemePaired[10])</span></span>
<span id="cb7-324"><a href="#cb7-324" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-325"><a href="#cb7-325" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty1 = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-326"><a href="#cb7-326" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty2 = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-327"><a href="#cb7-327" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDoty3 = setStyle(decoDoty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-328"><a href="#cb7-328" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw = setStyle(dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-329"><a href="#cb7-329" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw1 = setStyle(dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-330"><a href="#cb7-330" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw2 = setStyle(dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-331"><a href="#cb7-331" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw3 = setStyle(dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-332"><a href="#cb7-332" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw4 = setStyle(dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-333"><a href="#cb7-333" aria-hidden="true" tabindex="-1"></a><span class="in">styledWeek = setStyle(week, d3.color("purple").formatHex())</span></span>
<span id="cb7-334"><a href="#cb7-334" aria-hidden="true" tabindex="-1"></a><span class="in">styledWeek1 = setStyle(week, d3.color("purple").formatHex())</span></span>
<span id="cb7-335"><a href="#cb7-335" aria-hidden="true" tabindex="-1"></a><span class="in">styledWeek2 = setStyle(week, d3.color("purple").formatHex())</span></span>
<span id="cb7-336"><a href="#cb7-336" aria-hidden="true" tabindex="-1"></a><span class="in">styledDoty0dotw = setStyle(doty0dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-337"><a href="#cb7-337" aria-hidden="true" tabindex="-1"></a><span class="in">styledDoty0dotw1 = setStyle(doty0dotw, d3.color("blue").formatHex())</span></span>
<span id="cb7-338"><a href="#cb7-338" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw0doty = setStyle(Math.abs(dotw0doty), d3.color("cyan").formatHex())</span></span>
<span id="cb7-339"><a href="#cb7-339" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw0doty1 = setStyle(dotw0doty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-340"><a href="#cb7-340" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotw0doty2 = setStyle(dotw0doty, d3.color("cyan").formatHex())</span></span>
<span id="cb7-341"><a href="#cb7-341" aria-hidden="true" tabindex="-1"></a><span class="in">styledDotyInput = setStyle(dotyInput, d3.color("cyan").formatHex())</span></span>
<span id="cb7-342"><a href="#cb7-342" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoTminus = setStyle(Tminus, d3.color("pink").formatHex())</span></span>
<span id="cb7-343"><a href="#cb7-343" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDek = setStyle(decoDoty.slice(0, 2), d3.color("cyan").formatHex())</span></span>
<span id="cb7-344"><a href="#cb7-344" aria-hidden="true" tabindex="-1"></a><span class="in">styledDecoDotd = setStyle(decoDoty[2], d3.color("cyan").formatHex())</span></span>
<span id="cb7-345"><a href="#cb7-345" aria-hidden="true" tabindex="-1"></a><span class="in">styledNdays = setStyle(nDaysInYear, d3.schemePaired[6])</span></span>
<span id="cb7-346"><a href="#cb7-346" aria-hidden="true" tabindex="-1"></a><span class="in">styledNdays1 = setStyle(nDaysInYear, d3.schemePaired[6])</span></span>
<span id="cb7-347"><a href="#cb7-347" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@juang1744/transform-input/1</span></span>
<span id="cb7-348"><a href="#cb7-348" aria-hidden="true" tabindex="-1"></a><span class="in">transformInput = function(target, {bind: source, transform = identity, involutory = false, invert = involutory ? transform : inverse(transform)} = {}){</span></span>
<span id="cb7-349"><a href="#cb7-349" aria-hidden="true" tabindex="-1"></a><span class="in">  if (source === undefined) {</span></span>
<span id="cb7-350"><a href="#cb7-350" aria-hidden="true" tabindex="-1"></a><span class="in">    source = target;</span></span>
<span id="cb7-351"><a href="#cb7-351" aria-hidden="true" tabindex="-1"></a><span class="in">    target = html`&lt;div&gt;${source}&lt;/div&gt;`;</span></span>
<span id="cb7-352"><a href="#cb7-352" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-353"><a href="#cb7-353" aria-hidden="true" tabindex="-1"></a><span class="in">  function sourceInputHandler() {</span></span>
<span id="cb7-354"><a href="#cb7-354" aria-hidden="true" tabindex="-1"></a><span class="in">    target.removeEventListener("input", targetInputHandler);</span></span>
<span id="cb7-355"><a href="#cb7-355" aria-hidden="true" tabindex="-1"></a><span class="in">    setTransform(target).to(transform(source.value)).andDispatchEvent();</span></span>
<span id="cb7-356"><a href="#cb7-356" aria-hidden="true" tabindex="-1"></a><span class="in">    target.addEventListener("input", targetInputHandler);</span></span>
<span id="cb7-357"><a href="#cb7-357" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-358"><a href="#cb7-358" aria-hidden="true" tabindex="-1"></a><span class="in">  function targetInputHandler() {</span></span>
<span id="cb7-359"><a href="#cb7-359" aria-hidden="true" tabindex="-1"></a><span class="in">    source.removeEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-360"><a href="#cb7-360" aria-hidden="true" tabindex="-1"></a><span class="in">    setTransform(source).to(invert(target.value)).andDispatchEvent();</span></span>
<span id="cb7-361"><a href="#cb7-361" aria-hidden="true" tabindex="-1"></a><span class="in">    source.addEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-362"><a href="#cb7-362" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-363"><a href="#cb7-363" aria-hidden="true" tabindex="-1"></a><span class="in">  source.addEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-364"><a href="#cb7-364" aria-hidden="true" tabindex="-1"></a><span class="in">  target.addEventListener("input", targetInputHandler);</span></span>
<span id="cb7-365"><a href="#cb7-365" aria-hidden="true" tabindex="-1"></a><span class="in">  invalidation.then(() =&gt; {</span></span>
<span id="cb7-366"><a href="#cb7-366" aria-hidden="true" tabindex="-1"></a><span class="in">    source.removeEventListener("input", sourceInputHandler);</span></span>
<span id="cb7-367"><a href="#cb7-367" aria-hidden="true" tabindex="-1"></a><span class="in">    target.removeEventListener("input", targetInputHandler);</span></span>
<span id="cb7-368"><a href="#cb7-368" aria-hidden="true" tabindex="-1"></a><span class="in">  });</span></span>
<span id="cb7-369"><a href="#cb7-369" aria-hidden="true" tabindex="-1"></a><span class="in">  sourceInputHandler();</span></span>
<span id="cb7-370"><a href="#cb7-370" aria-hidden="true" tabindex="-1"></a><span class="in">  return target;</span></span>
<span id="cb7-371"><a href="#cb7-371" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-372"><a href="#cb7-372" aria-hidden="true" tabindex="-1"></a><span class="in">setTransform = (input) =&gt; ({to: (value) =&gt; (input.value = value, {andDispatchEvent: (event = new Event("input")) =&gt; input.dispatchEvent(event)})});</span></span>
<span id="cb7-373"><a href="#cb7-373" aria-hidden="true" tabindex="-1"></a><span class="in">function inverse(f) {</span></span>
<span id="cb7-374"><a href="#cb7-374" aria-hidden="true" tabindex="-1"></a><span class="in">  switch (f) {</span></span>
<span id="cb7-375"><a href="#cb7-375" aria-hidden="true" tabindex="-1"></a><span class="in">    case identity:  return identity;</span></span>
<span id="cb7-376"><a href="#cb7-376" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.sqrt: return square;</span></span>
<span id="cb7-377"><a href="#cb7-377" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.log:  return Math.exp;</span></span>
<span id="cb7-378"><a href="#cb7-378" aria-hidden="true" tabindex="-1"></a><span class="in">    case Math.exp:  return Math.log;</span></span>
<span id="cb7-379"><a href="#cb7-379" aria-hidden="true" tabindex="-1"></a><span class="in">    default:        return (x =&gt; solve(f, x, x));</span></span>
<span id="cb7-380"><a href="#cb7-380" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-381"><a href="#cb7-381" aria-hidden="true" tabindex="-1"></a><span class="in">  function solve(f, y, x = 0) {</span></span>
<span id="cb7-382"><a href="#cb7-382" aria-hidden="true" tabindex="-1"></a><span class="in">    const dx = 1e-6;</span></span>
<span id="cb7-383"><a href="#cb7-383" aria-hidden="true" tabindex="-1"></a><span class="in">    let steps = 100, deltax, fx, dfx;</span></span>
<span id="cb7-384"><a href="#cb7-384" aria-hidden="true" tabindex="-1"></a><span class="in">    do {</span></span>
<span id="cb7-385"><a href="#cb7-385" aria-hidden="true" tabindex="-1"></a><span class="in">      fx = f(x)</span></span>
<span id="cb7-386"><a href="#cb7-386" aria-hidden="true" tabindex="-1"></a><span class="in">      dfx = (f(x + dx) - fx) || dx;</span></span>
<span id="cb7-387"><a href="#cb7-387" aria-hidden="true" tabindex="-1"></a><span class="in">      deltax = dx * (fx - y)/dfx</span></span>
<span id="cb7-388"><a href="#cb7-388" aria-hidden="true" tabindex="-1"></a><span class="in">      x -= deltax;</span></span>
<span id="cb7-389"><a href="#cb7-389" aria-hidden="true" tabindex="-1"></a><span class="in">    } while (Math.abs(deltax) &gt; dx &amp;&amp; --steps &gt; 0);</span></span>
<span id="cb7-390"><a href="#cb7-390" aria-hidden="true" tabindex="-1"></a><span class="in">    return steps === 0 ? NaN : x;</span></span>
<span id="cb7-391"><a href="#cb7-391" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-392"><a href="#cb7-392" aria-hidden="true" tabindex="-1"></a><span class="in">function square(x) {</span></span>
<span id="cb7-393"><a href="#cb7-393" aria-hidden="true" tabindex="-1"></a><span class="in">    return x * x;</span></span>
<span id="cb7-394"><a href="#cb7-394" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-395"><a href="#cb7-395" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-396"><a href="#cb7-396" aria-hidden="true" tabindex="-1"></a><span class="in">function identity(x) {</span></span>
<span id="cb7-397"><a href="#cb7-397" aria-hidden="true" tabindex="-1"></a><span class="in">  return x;</span></span>
<span id="cb7-398"><a href="#cb7-398" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-399"><a href="#cb7-399" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2month(doty = 0) {</span></span>
<span id="cb7-400"><a href="#cb7-400" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-401"><a href="#cb7-401" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(m &lt; 10 ? m + 3 : m - 9);</span></span>
<span id="cb7-402"><a href="#cb7-402" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-403"><a href="#cb7-403" aria-hidden="true" tabindex="-1"></a><span class="in">function month2doty(month = 1) {</span></span>
<span id="cb7-404"><a href="#cb7-404" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(</span></span>
<span id="cb7-405"><a href="#cb7-405" aria-hidden="true" tabindex="-1"></a><span class="in">        (153 * (month &gt; 2 ? month - 3 : month + 9) + 2) / 5</span></span>
<span id="cb7-406"><a href="#cb7-406" aria-hidden="true" tabindex="-1"></a><span class="in">)}</span></span>
<span id="cb7-407"><a href="#cb7-407" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2dotm(doty = 0) {</span></span>
<span id="cb7-408"><a href="#cb7-408" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-409"><a href="#cb7-409" aria-hidden="true" tabindex="-1"></a><span class="in">    return doty - Math.floor((153 * m + 2) / 5) + 1;</span></span>
<span id="cb7-410"><a href="#cb7-410" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-411"><a href="#cb7-411" aria-hidden="true" tabindex="-1"></a><span class="in">numbers = Array.from({length: 366}, (_, i) =&gt; i)</span></span>
<span id="cb7-412"><a href="#cb7-412" aria-hidden="true" tabindex="-1"></a><span class="in">set(viewof dotyInput, leapscrub[0])</span></span>
<span id="cb7-413"><a href="#cb7-413" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@observablehq/synchronized-inputs</span></span>
<span id="cb7-414"><a href="#cb7-414" aria-hidden="true" tabindex="-1"></a><span class="in">function set(input, value) {</span></span>
<span id="cb7-415"><a href="#cb7-415" aria-hidden="true" tabindex="-1"></a><span class="in">  input.value = value;</span></span>
<span id="cb7-416"><a href="#cb7-416" aria-hidden="true" tabindex="-1"></a><span class="in">  input.dispatchEvent(new Event("input", {bubbles: true}));</span></span>
<span id="cb7-417"><a href="#cb7-417" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-418"><a href="#cb7-418" aria-hidden="true" tabindex="-1"></a><span class="in">// https://observablehq.com/@mbostock/scrubber</span></span>
<span id="cb7-419"><a href="#cb7-419" aria-hidden="true" tabindex="-1"></a><span class="in">function Scrubber(values, {</span></span>
<span id="cb7-420"><a href="#cb7-420" aria-hidden="true" tabindex="-1"></a><span class="in">  format = value =&gt; value,</span></span>
<span id="cb7-421"><a href="#cb7-421" aria-hidden="true" tabindex="-1"></a><span class="in">  initial = 0,</span></span>
<span id="cb7-422"><a href="#cb7-422" aria-hidden="true" tabindex="-1"></a><span class="in">  direction = 1,</span></span>
<span id="cb7-423"><a href="#cb7-423" aria-hidden="true" tabindex="-1"></a><span class="in">  delay = null,</span></span>
<span id="cb7-424"><a href="#cb7-424" aria-hidden="true" tabindex="-1"></a><span class="in">  autoplay = true,</span></span>
<span id="cb7-425"><a href="#cb7-425" aria-hidden="true" tabindex="-1"></a><span class="in">  loop = true,</span></span>
<span id="cb7-426"><a href="#cb7-426" aria-hidden="true" tabindex="-1"></a><span class="in">  loopDelay = null,</span></span>
<span id="cb7-427"><a href="#cb7-427" aria-hidden="true" tabindex="-1"></a><span class="in">  alternate = false,</span></span>
<span id="cb7-428"><a href="#cb7-428" aria-hidden="true" tabindex="-1"></a><span class="in">  inputStyle = ""</span></span>
<span id="cb7-429"><a href="#cb7-429" aria-hidden="true" tabindex="-1"></a><span class="in">} = {}) {</span></span>
<span id="cb7-430"><a href="#cb7-430" aria-hidden="true" tabindex="-1"></a><span class="in">  values = Array.from(values);</span></span>
<span id="cb7-431"><a href="#cb7-431" aria-hidden="true" tabindex="-1"></a><span class="in">  const form = html`&lt;form style="font: 18px var(--monospace); font-variant-numeric: tabular-nums; display: flex; height: 33px; align-items: center;"&gt;</span></span>
<span id="cb7-432"><a href="#cb7-432" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;button name=b type=button style="margin-right: 0.4em; width: 5em;"&gt;&lt;/button&gt;</span></span>
<span id="cb7-433"><a href="#cb7-433" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;label style="display: flex; align-items: center;"&gt;</span></span>
<span id="cb7-434"><a href="#cb7-434" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;input name=i type=range min=0 max=${values.length - 1} value=${initial} step=1 style=${inputStyle}&gt;</span></span>
<span id="cb7-435"><a href="#cb7-435" aria-hidden="true" tabindex="-1"></a><span class="in">    &lt;output name=o style="margin-left: 0.4em;"&gt;&lt;/output&gt;</span></span>
<span id="cb7-436"><a href="#cb7-436" aria-hidden="true" tabindex="-1"></a><span class="in">  &lt;/label&gt;</span></span>
<span id="cb7-437"><a href="#cb7-437" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/form&gt;`;</span></span>
<span id="cb7-438"><a href="#cb7-438" aria-hidden="true" tabindex="-1"></a><span class="in">  let frame = null;</span></span>
<span id="cb7-439"><a href="#cb7-439" aria-hidden="true" tabindex="-1"></a><span class="in">  let timer = null;</span></span>
<span id="cb7-440"><a href="#cb7-440" aria-hidden="true" tabindex="-1"></a><span class="in">  let interval = null;</span></span>
<span id="cb7-441"><a href="#cb7-441" aria-hidden="true" tabindex="-1"></a><span class="in">  function start() {</span></span>
<span id="cb7-442"><a href="#cb7-442" aria-hidden="true" tabindex="-1"></a><span class="in">    form.b.textContent = "Stop";</span></span>
<span id="cb7-443"><a href="#cb7-443" aria-hidden="true" tabindex="-1"></a><span class="in">    if (delay === null) frame = requestAnimationFrame(tick);</span></span>
<span id="cb7-444"><a href="#cb7-444" aria-hidden="true" tabindex="-1"></a><span class="in">    else interval = setInterval(tick, delay);</span></span>
<span id="cb7-445"><a href="#cb7-445" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-446"><a href="#cb7-446" aria-hidden="true" tabindex="-1"></a><span class="in">  function stop() {</span></span>
<span id="cb7-447"><a href="#cb7-447" aria-hidden="true" tabindex="-1"></a><span class="in">    form.b.textContent = "Play";</span></span>
<span id="cb7-448"><a href="#cb7-448" aria-hidden="true" tabindex="-1"></a><span class="in">    if (frame !== null) cancelAnimationFrame(frame), frame = null;</span></span>
<span id="cb7-449"><a href="#cb7-449" aria-hidden="true" tabindex="-1"></a><span class="in">    if (timer !== null) clearTimeout(timer), timer = null;</span></span>
<span id="cb7-450"><a href="#cb7-450" aria-hidden="true" tabindex="-1"></a><span class="in">    if (interval !== null) clearInterval(interval), interval = null;</span></span>
<span id="cb7-451"><a href="#cb7-451" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-452"><a href="#cb7-452" aria-hidden="true" tabindex="-1"></a><span class="in">  function running() {</span></span>
<span id="cb7-453"><a href="#cb7-453" aria-hidden="true" tabindex="-1"></a><span class="in">    return frame !== null || timer !== null || interval !== null;</span></span>
<span id="cb7-454"><a href="#cb7-454" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-455"><a href="#cb7-455" aria-hidden="true" tabindex="-1"></a><span class="in">  function tick() {</span></span>
<span id="cb7-456"><a href="#cb7-456" aria-hidden="true" tabindex="-1"></a><span class="in">    if (form.i.valueAsNumber === (direction &gt; 0 ? values.length - 1 : direction &lt; 0 ? 0 : NaN)) {</span></span>
<span id="cb7-457"><a href="#cb7-457" aria-hidden="true" tabindex="-1"></a><span class="in">      if (!loop) return stop();</span></span>
<span id="cb7-458"><a href="#cb7-458" aria-hidden="true" tabindex="-1"></a><span class="in">      if (alternate) direction = -direction;</span></span>
<span id="cb7-459"><a href="#cb7-459" aria-hidden="true" tabindex="-1"></a><span class="in">      if (loopDelay !== null) {</span></span>
<span id="cb7-460"><a href="#cb7-460" aria-hidden="true" tabindex="-1"></a><span class="in">        if (frame !== null) cancelAnimationFrame(frame), frame = null;</span></span>
<span id="cb7-461"><a href="#cb7-461" aria-hidden="true" tabindex="-1"></a><span class="in">        if (interval !== null) clearInterval(interval), interval = null;</span></span>
<span id="cb7-462"><a href="#cb7-462" aria-hidden="true" tabindex="-1"></a><span class="in">        timer = setTimeout(() =&gt; (step(), start()), loopDelay);</span></span>
<span id="cb7-463"><a href="#cb7-463" aria-hidden="true" tabindex="-1"></a><span class="in">        return;</span></span>
<span id="cb7-464"><a href="#cb7-464" aria-hidden="true" tabindex="-1"></a><span class="in">      }</span></span>
<span id="cb7-465"><a href="#cb7-465" aria-hidden="true" tabindex="-1"></a><span class="in">    }</span></span>
<span id="cb7-466"><a href="#cb7-466" aria-hidden="true" tabindex="-1"></a><span class="in">    if (delay === null) frame = requestAnimationFrame(tick);</span></span>
<span id="cb7-467"><a href="#cb7-467" aria-hidden="true" tabindex="-1"></a><span class="in">    step();</span></span>
<span id="cb7-468"><a href="#cb7-468" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-469"><a href="#cb7-469" aria-hidden="true" tabindex="-1"></a><span class="in">  function step() {</span></span>
<span id="cb7-470"><a href="#cb7-470" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.valueAsNumber = (form.i.valueAsNumber + direction + values.length) % values.length;</span></span>
<span id="cb7-471"><a href="#cb7-471" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.dispatchEvent(new CustomEvent("input", {bubbles: true}));</span></span>
<span id="cb7-472"><a href="#cb7-472" aria-hidden="true" tabindex="-1"></a><span class="in">  }</span></span>
<span id="cb7-473"><a href="#cb7-473" aria-hidden="true" tabindex="-1"></a><span class="in">  form.i.oninput = event =&gt; {</span></span>
<span id="cb7-474"><a href="#cb7-474" aria-hidden="true" tabindex="-1"></a><span class="in">    if (event &amp;&amp; event.isTrusted &amp;&amp; running()) stop();</span></span>
<span id="cb7-475"><a href="#cb7-475" aria-hidden="true" tabindex="-1"></a><span class="in">    form.value = values[form.i.valueAsNumber];</span></span>
<span id="cb7-476"><a href="#cb7-476" aria-hidden="true" tabindex="-1"></a><span class="in">    form.o.value = format(form.value, form.i.valueAsNumber, values);</span></span>
<span id="cb7-477"><a href="#cb7-477" aria-hidden="true" tabindex="-1"></a><span class="in">  };</span></span>
<span id="cb7-478"><a href="#cb7-478" aria-hidden="true" tabindex="-1"></a><span class="in">  form.b.onclick = () =&gt; {</span></span>
<span id="cb7-479"><a href="#cb7-479" aria-hidden="true" tabindex="-1"></a><span class="in">    if (running()) return stop();</span></span>
<span id="cb7-480"><a href="#cb7-480" aria-hidden="true" tabindex="-1"></a><span class="in">    direction = alternate &amp;&amp; form.i.valueAsNumber === values.length - 1 ? -1 : 1;</span></span>
<span id="cb7-481"><a href="#cb7-481" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.valueAsNumber = (form.i.valueAsNumber + direction) % values.length;</span></span>
<span id="cb7-482"><a href="#cb7-482" aria-hidden="true" tabindex="-1"></a><span class="in">    form.i.dispatchEvent(new CustomEvent("input", {bubbles: true}));</span></span>
<span id="cb7-483"><a href="#cb7-483" aria-hidden="true" tabindex="-1"></a><span class="in">    start();</span></span>
<span id="cb7-484"><a href="#cb7-484" aria-hidden="true" tabindex="-1"></a><span class="in">  };</span></span>
<span id="cb7-485"><a href="#cb7-485" aria-hidden="true" tabindex="-1"></a><span class="in">  form.i.oninput();</span></span>
<span id="cb7-486"><a href="#cb7-486" aria-hidden="true" tabindex="-1"></a><span class="in">  if (autoplay) start();</span></span>
<span id="cb7-487"><a href="#cb7-487" aria-hidden="true" tabindex="-1"></a><span class="in">  else stop();</span></span>
<span id="cb7-488"><a href="#cb7-488" aria-hidden="true" tabindex="-1"></a><span class="in">  Inputs.disposal(form).then(stop);</span></span>
<span id="cb7-489"><a href="#cb7-489" aria-hidden="true" tabindex="-1"></a><span class="in">  return form;</span></span>
<span id="cb7-490"><a href="#cb7-490" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-491"><a href="#cb7-491" aria-hidden="true" tabindex="-1"></a><span class="in">calYear = !leapInput &amp;&amp; dotwInput == "Monday" ? 6 : !leapInput &amp;&amp; dotwInput == "Tuesday" ? 7 : !leapInput &amp;&amp; dotwInput == "Wednesday" ? 2 : !leapInput &amp;&amp; dotwInput == "Thursday" ? 3 : !leapInput &amp;&amp; dotwInput == "Friday" ? 9 : !leapInput &amp;&amp; dotwInput == "Saturday" ? 10 : !leapInput &amp;&amp; dotwInput == "Sunday" ? 11 : leapInput &amp;&amp; dotwInput == "Monday" ? 12 : leapInput &amp;&amp; dotwInput == "Tuesday" ? 24 : leapInput &amp;&amp; dotwInput == "Wednesday" ? 8 : leapInput &amp;&amp; dotwInput == "Thursday" ? 20 : leapInput &amp;&amp; dotwInput == "Friday" ? 4 : leapInput &amp;&amp; dotwInput == "Saturday" ? 16 : leapInput &amp;&amp; dotwInput == "Sunday" ? 28 : 0;</span></span>
<span id="cb7-492"><a href="#cb7-492" aria-hidden="true" tabindex="-1"></a><span class="in">datesCal = d3.utcDays(new Date(calYear, 0, 0), new Date(calYear, 12, 0));</span></span>
<span id="cb7-493"><a href="#cb7-493" aria-hidden="true" tabindex="-1"></a><span class="in">months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];</span></span>
<span id="cb7-494"><a href="#cb7-494" aria-hidden="true" tabindex="-1"></a><span class="in">function unix2doty(unix) {</span></span>
<span id="cb7-495"><a href="#cb7-495" aria-hidden="true" tabindex="-1"></a><span class="in">  const dote = (</span></span>
<span id="cb7-496"><a href="#cb7-496" aria-hidden="true" tabindex="-1"></a><span class="in">    unix ?? Date.now()</span></span>
<span id="cb7-497"><a href="#cb7-497" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 86400000 + 719468,</span></span>
<span id="cb7-498"><a href="#cb7-498" aria-hidden="true" tabindex="-1"></a><span class="in">    socy = Math.floor((</span></span>
<span id="cb7-499"><a href="#cb7-499" aria-hidden="true" tabindex="-1"></a><span class="in">      dote &gt;= 0 ? dote</span></span>
<span id="cb7-500"><a href="#cb7-500" aria-hidden="true" tabindex="-1"></a><span class="in">      : dote - 146096</span></span>
<span id="cb7-501"><a href="#cb7-501" aria-hidden="true" tabindex="-1"></a><span class="in">    ) / 146097),</span></span>
<span id="cb7-502"><a href="#cb7-502" aria-hidden="true" tabindex="-1"></a><span class="in">  dotc = dote - socy * 146097,</span></span>
<span id="cb7-503"><a href="#cb7-503" aria-hidden="true" tabindex="-1"></a><span class="in">  yotc = Math.floor((dotc</span></span>
<span id="cb7-504"><a href="#cb7-504" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 1460)</span></span>
<span id="cb7-505"><a href="#cb7-505" aria-hidden="true" tabindex="-1"></a><span class="in">    + Math.floor(dotc / 36524)</span></span>
<span id="cb7-506"><a href="#cb7-506" aria-hidden="true" tabindex="-1"></a><span class="in">    - Math.floor(dotc / 146096)</span></span>
<span id="cb7-507"><a href="#cb7-507" aria-hidden="true" tabindex="-1"></a><span class="in">  ) / 365);</span></span>
<span id="cb7-508"><a href="#cb7-508" aria-hidden="true" tabindex="-1"></a><span class="in">  return dotc - (yotc * 365</span></span>
<span id="cb7-509"><a href="#cb7-509" aria-hidden="true" tabindex="-1"></a><span class="in">      + Math.floor(yotc / 4)</span></span>
<span id="cb7-510"><a href="#cb7-510" aria-hidden="true" tabindex="-1"></a><span class="in">      - Math.floor(yotc / 100)</span></span>
<span id="cb7-511"><a href="#cb7-511" aria-hidden="true" tabindex="-1"></a><span class="in">  )}</span></span>
<span id="cb7-512"><a href="#cb7-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-513"><a href="#cb7-513" aria-hidden="true" tabindex="-1"></a><span class="in">function date2dote(year = 1969, doty = 306, zone = 0) {</span></span>
<span id="cb7-514"><a href="#cb7-514" aria-hidden="true" tabindex="-1"></a><span class="in">    const socy = Math.floor((year &gt;= 0 ? year : year - 399) / 400),</span></span>
<span id="cb7-515"><a href="#cb7-515" aria-hidden="true" tabindex="-1"></a><span class="in">      yote = year - socy * 400;</span></span>
<span id="cb7-516"><a href="#cb7-516" aria-hidden="true" tabindex="-1"></a><span class="in">    return [socy * 146097 + yote * 365 + Math.floor(yote / 4) - Math.floor(yote / 100) + doty, zone]</span></span>
<span id="cb7-517"><a href="#cb7-517" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-518"><a href="#cb7-518" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2deco(yearDoty = [1969, 306], zone = 0) {</span></span>
<span id="cb7-519"><a href="#cb7-519" aria-hidden="true" tabindex="-1"></a><span class="in">    const yd = dote2date(...date2dote(yearDoty[0], Math.floor(yearDoty[1]), zone));</span></span>
<span id="cb7-520"><a href="#cb7-520" aria-hidden="true" tabindex="-1"></a><span class="in">    return `${yd[0].toString().padStart(4, "0")}+${yd[1].toString().padStart(3, "0")}${</span></span>
<span id="cb7-521"><a href="#cb7-521" aria-hidden="true" tabindex="-1"></a><span class="in">        yearDoty[1].toString().includes(".") ? "." + (</span></span>
<span id="cb7-522"><a href="#cb7-522" aria-hidden="true" tabindex="-1"></a><span class="in">            (yearDoty[1] &gt; 0) ? (yearDoty[1] - zone).toString().split(".").pop()</span></span>
<span id="cb7-523"><a href="#cb7-523" aria-hidden="true" tabindex="-1"></a><span class="in">            : [...(yearDoty[1] - zone).toString().split(".").pop()].map(</span></span>
<span id="cb7-524"><a href="#cb7-524" aria-hidden="true" tabindex="-1"></a><span class="in">                (e, i, a) =&gt; (i + 1 === a.length) ? 10 - e : 9 - e</span></span>
<span id="cb7-525"><a href="#cb7-525" aria-hidden="true" tabindex="-1"></a><span class="in">            ).join("")</span></span>
<span id="cb7-526"><a href="#cb7-526" aria-hidden="true" tabindex="-1"></a><span class="in">        ) : ""</span></span>
<span id="cb7-527"><a href="#cb7-527" aria-hidden="true" tabindex="-1"></a><span class="in">    }`</span></span>
<span id="cb7-528"><a href="#cb7-528" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-529"><a href="#cb7-529" aria-hidden="true" tabindex="-1"></a><span class="in">function deco2doty(timestamp = "1969+306.00000Z") {</span></span>
<span id="cb7-530"><a href="#cb7-530" aria-hidden="true" tabindex="-1"></a><span class="in">    const arr = timestamp.toString().split(/(?=[+-]|[a-zA-Z])/, 3);</span></span>
<span id="cb7-531"><a href="#cb7-531" aria-hidden="true" tabindex="-1"></a><span class="in">    switch (arr.length) {</span></span>
<span id="cb7-532"><a href="#cb7-532" aria-hidden="true" tabindex="-1"></a><span class="in">        case 1: return [unix2doty(Date.now())[0], parseFloat(arr[0]), 0];</span></span>
<span id="cb7-533"><a href="#cb7-533" aria-hidden="true" tabindex="-1"></a><span class="in">        case 2: return (/^[a-zA-Z]+$/.test(arr[1]))</span></span>
<span id="cb7-534"><a href="#cb7-534" aria-hidden="true" tabindex="-1"></a><span class="in">            ? [unix2doty(Date.now())[0], parseFloat(arr[0]), zone2hour(arr[1]) / 24]</span></span>
<span id="cb7-535"><a href="#cb7-535" aria-hidden="true" tabindex="-1"></a><span class="in">            : [parseFloat(arr[0]), parseFloat(arr[1]), 0];</span></span>
<span id="cb7-536"><a href="#cb7-536" aria-hidden="true" tabindex="-1"></a><span class="in">    };</span></span>
<span id="cb7-537"><a href="#cb7-537" aria-hidden="true" tabindex="-1"></a><span class="in">    return [parseFloat(arr[0]), parseFloat(arr[1]), /^[a-zA-Z]+$/.test(arr[2])</span></span>
<span id="cb7-538"><a href="#cb7-538" aria-hidden="true" tabindex="-1"></a><span class="in">        ? zone2hour(arr[2]) / 24</span></span>
<span id="cb7-539"><a href="#cb7-539" aria-hidden="true" tabindex="-1"></a><span class="in">        : parseFloat(arr[2].replace(/([+-])/, "$1\."))];</span></span>
<span id="cb7-540"><a href="#cb7-540" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-541"><a href="#cb7-541" aria-hidden="true" tabindex="-1"></a><span class="in">function zone2hour(zone = "Z") {</span></span>
<span id="cb7-542"><a href="#cb7-542" aria-hidden="true" tabindex="-1"></a><span class="in">    return (zone = zone.toUpperCase()) == "Z" ? 0</span></span>
<span id="cb7-543"><a href="#cb7-543" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &gt; "@" &amp;&amp; zone &lt; "J" ? zone.charCodeAt() - 64</span></span>
<span id="cb7-544"><a href="#cb7-544" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &gt; "J" &amp;&amp; zone &lt; "N" ? zone.charCodeAt() - 65</span></span>
<span id="cb7-545"><a href="#cb7-545" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone &lt; "Z" &amp;&amp; zone &gt; "M" ? -(zone.charCodeAt() - 77)</span></span>
<span id="cb7-546"><a href="#cb7-546" aria-hidden="true" tabindex="-1"></a><span class="in">        : zone;</span></span>
<span id="cb7-547"><a href="#cb7-547" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-548"><a href="#cb7-548" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2unix(year = 1969, doty = 306, zone = 0) {</span></span>
<span id="cb7-549"><a href="#cb7-549" aria-hidden="true" tabindex="-1"></a><span class="in">    return (date2dote(year, doty, zone) - 719468) * 86400000;</span></span>
<span id="cb7-550"><a href="#cb7-550" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-551"><a href="#cb7-551" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2isoc(yd) {</span></span>
<span id="cb7-552"><a href="#cb7-552" aria-hidden="true" tabindex="-1"></a><span class="in">    return new Date(doty2unix(...yd))</span></span>
<span id="cb7-553"><a href="#cb7-553" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-554"><a href="#cb7-554" aria-hidden="true" tabindex="-1"></a><span class="in">function doty2greg(doty = 306) {</span></span>
<span id="cb7-555"><a href="#cb7-555" aria-hidden="true" tabindex="-1"></a><span class="in">    const m = Math.floor((5 * doty + 2) / 153);</span></span>
<span id="cb7-556"><a href="#cb7-556" aria-hidden="true" tabindex="-1"></a><span class="in">    return [</span></span>
<span id="cb7-557"><a href="#cb7-557" aria-hidden="true" tabindex="-1"></a><span class="in">      Math.floor(m &lt; 10 ? m + 3 : m - 9),</span></span>
<span id="cb7-558"><a href="#cb7-558" aria-hidden="true" tabindex="-1"></a><span class="in">      Math.floor(doty - (153 * m + 2) / 5 + 2)</span></span>
<span id="cb7-559"><a href="#cb7-559" aria-hidden="true" tabindex="-1"></a><span class="in">    ];</span></span>
<span id="cb7-560"><a href="#cb7-560" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-561"><a href="#cb7-561" aria-hidden="true" tabindex="-1"></a><span class="in">function greg2doty(month = 1, day = 1) {</span></span>
<span id="cb7-562"><a href="#cb7-562" aria-hidden="true" tabindex="-1"></a><span class="in">    return Math.floor(</span></span>
<span id="cb7-563"><a href="#cb7-563" aria-hidden="true" tabindex="-1"></a><span class="in">        (153 * (month &gt; 2 ? month - 3 : month + 9) + 2) / 5 + day - 1</span></span>
<span id="cb7-564"><a href="#cb7-564" aria-hidden="true" tabindex="-1"></a><span class="in">)}</span></span>
<span id="cb7-565"><a href="#cb7-565" aria-hidden="true" tabindex="-1"></a><span class="in">function greg2year(year = 1970, month = 1) { return year - (month &lt; 3) }</span></span>
<span id="cb7-566"><a href="#cb7-566" aria-hidden="true" tabindex="-1"></a><span class="in">function isoc2doty(isoc) {</span></span>
<span id="cb7-567"><a href="#cb7-567" aria-hidden="true" tabindex="-1"></a><span class="in">  return [greg2year(isoc.getFullYear(), isoc.getUTCMonth() + 1), greg2doty(isoc.getUTCMonth() + 1, isoc.getUTCDate())];</span></span>
<span id="cb7-568"><a href="#cb7-568" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-569"><a href="#cb7-569" aria-hidden="true" tabindex="-1"></a><span class="in">leapInput = leapscrub[1]</span></span>
<span id="cb7-570"><a href="#cb7-570" aria-hidden="true" tabindex="-1"></a><span class="in">function addN(d) { return d + 365 + leapInput }</span></span>
<span id="cb7-571"><a href="#cb7-571" aria-hidden="true" tabindex="-1"></a><span class="in">function subN(d) { return d - 365 - leapInput }</span></span>
<span id="cb7-572"><a href="#cb7-572" aria-hidden="true" tabindex="-1"></a><span class="in">dates = d3.utcDays(new Date(1999, 2, 0), new Date(2000, 1, 28 + leapInput));</span></span>
<span id="cb7-573"><a href="#cb7-573" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb7-574"><a href="#cb7-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-575"><a href="#cb7-575" aria-hidden="true" tabindex="-1"></a><span class="in">```{=html}</span></span>
<span id="cb7-576"><a href="#cb7-576" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;style&gt;</span></span>
<span id="cb7-577"><a href="#cb7-577" aria-hidden="true" tabindex="-1"></a><span class="in">h6.relative.anchored {</span></span>
<span id="cb7-578"><a href="#cb7-578" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-top: -25px;</span></span>
<span id="cb7-579"><a href="#cb7-579" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-bottom: -2px;</span></span>
<span id="cb7-580"><a href="#cb7-580" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-581"><a href="#cb7-581" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- .calplot { --&gt;</span></span>
<span id="cb7-582"><a href="#cb7-582" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!--   margin-top: -15px; --&gt;</span></span>
<span id="cb7-583"><a href="#cb7-583" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!--   margin-bottom: -15px; --&gt;</span></span>
<span id="cb7-584"><a href="#cb7-584" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;!-- } --&gt;</span></span>
<span id="cb7-585"><a href="#cb7-585" aria-hidden="true" tabindex="-1"></a><span class="in">#decalendar &gt; g.cluster-label {</span></span>
<span id="cb7-586"><a href="#cb7-586" aria-hidden="true" tabindex="-1"></a><span class="in">  transform: translate(305px, 50px) !important;</span></span>
<span id="cb7-587"><a href="#cb7-587" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-588"><a href="#cb7-588" aria-hidden="true" tabindex="-1"></a><span class="in">span.cal-swatch {</span></span>
<span id="cb7-589"><a href="#cb7-589" aria-hidden="true" tabindex="-1"></a><span class="in">  font-size: 14px !important;</span></span>
<span id="cb7-590"><a href="#cb7-590" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-591"><a href="#cb7-591" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-checkbox {</span></span>
<span id="cb7-592"><a href="#cb7-592" aria-hidden="true" tabindex="-1"></a><span class="in">  max-width: 700px;</span></span>
<span id="cb7-593"><a href="#cb7-593" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-594"><a href="#cb7-594" aria-hidden="true" tabindex="-1"></a><span class="in">div.cell:has(form.oi-3a86ea-toggle) {</span></span>
<span id="cb7-595"><a href="#cb7-595" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb7-596"><a href="#cb7-596" aria-hidden="true" tabindex="-1"></a><span class="in">  flex-wrap: wrap;</span></span>
<span id="cb7-597"><a href="#cb7-597" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb7-598"><a href="#cb7-598" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-599"><a href="#cb7-599" aria-hidden="true" tabindex="-1"></a><span class="in">div.observablehq &gt; div:has(form.oi-3a86ea-toggle) {</span></span>
<span id="cb7-600"><a href="#cb7-600" aria-hidden="true" tabindex="-1"></a><span class="in">  display: flex;</span></span>
<span id="cb7-601"><a href="#cb7-601" aria-hidden="true" tabindex="-1"></a><span class="in">  flex-wrap: wrap;</span></span>
<span id="cb7-602"><a href="#cb7-602" aria-hidden="true" tabindex="-1"></a><span class="in">  align-items: center;</span></span>
<span id="cb7-603"><a href="#cb7-603" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-604"><a href="#cb7-604" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-toggle {</span></span>
<span id="cb7-605"><a href="#cb7-605" aria-hidden="true" tabindex="-1"></a><span class="in">  max-width: 50% !important;</span></span>
<span id="cb7-606"><a href="#cb7-606" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 90px;</span></span>
<span id="cb7-607"><a href="#cb7-607" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-608"><a href="#cb7-608" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea {</span></span>
<span id="cb7-609"><a href="#cb7-609" aria-hidden="true" tabindex="-1"></a><span class="in">  --input-width: 200px;</span></span>
<span id="cb7-610"><a href="#cb7-610" aria-hidden="true" tabindex="-1"></a><span class="in">  padding-right: 9px;</span></span>
<span id="cb7-611"><a href="#cb7-611" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-612"><a href="#cb7-612" aria-hidden="true" tabindex="-1"></a><span class="in">form.oi-3a86ea-toggle &gt; label {</span></span>
<span id="cb7-613"><a href="#cb7-613" aria-hidden="true" tabindex="-1"></a><span class="in">  width: 78px;</span></span>
<span id="cb7-614"><a href="#cb7-614" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-615"><a href="#cb7-615" aria-hidden="true" tabindex="-1"></a><span class="in">div &gt; form &gt; label {</span></span>
<span id="cb7-616"><a href="#cb7-616" aria-hidden="true" tabindex="-1"></a><span class="in">  --label-width: 130px;</span></span>
<span id="cb7-617"><a href="#cb7-617" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-618"><a href="#cb7-618" aria-hidden="true" tabindex="-1"></a><span class="in">p:has(.radiotitle) {</span></span>
<span id="cb7-619"><a href="#cb7-619" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-top: -8px !important;</span></span>
<span id="cb7-620"><a href="#cb7-620" aria-hidden="true" tabindex="-1"></a><span class="in">  margin-bottom: -8px;</span></span>
<span id="cb7-621"><a href="#cb7-621" aria-hidden="true" tabindex="-1"></a><span class="in">  text-align: center;</span></span>
<span id="cb7-622"><a href="#cb7-622" aria-hidden="true" tabindex="-1"></a><span class="in">}</span></span>
<span id="cb7-623"><a href="#cb7-623" aria-hidden="true" tabindex="-1"></a><span class="in">&lt;/style&gt;</span></span>
<span id="cb7-624"><a href="#cb7-624" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, Martin Laptev</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions"><ul><li><a href="https://github.com/maptv/maptv.github.io/blob/main/dec/date/index.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maptv" target="_blank">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://linkedin.com/in/maptv" target="_blank">
      <i class="bi bi-linkedin" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link active" href="mailto:maptv@engineer.com" aria-current="page">
      <i class="bi bi-envelope-at" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","openEffect":"zoom","loop":false,"closeEffect":"zoom","descPosition":"bottom"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>